!function(i,o){"use strict";"function"==typeof define&&define.amd?define(function(){return new(o(i,i.document))}):"undefined"!=typeof module&&module.exports?module.exports=o(i,i.document)():i.Push=new(o(i,i.document))}("undefined"!==window?window:self,function(i,o){var t=function(){var o=this,t=function(i){return void 0===i},n=function(i){return i&&i.constructor===String},e=function(i){return i&&i.constructor===Function},r=!1,c=[],s=function(o){o.close?o.close():o.cancel?o.cancel():i.external&&i.external.msIsSiteMode&&i.external.msSiteModeClearIconOverlay()},a=function(){o.count=c.length},f=function(o,r){return r=r||{},i.Notification?notification=new i.Notification(o,{icon:n(r.icon)||t(r.icon)?r.icon:r.icon.x32,body:r.body,tag:r.tag}):i.webkitNotifications?(notification=win.webkitNotifications.createNotification(r.icon,o,r.body),notification.show()):navigator.mozNotification?(notification=navigator.mozNotification.createNotification(o,r.body,r.icon),notification.show()):win.external&&win.external.msIsSiteMode()&&(i.external.msSiteModeClearIconOverlay(),i.external.msSiteModeSetIconOverlay(n(r.icon)||t(r.icon)?r.icon:r.icon.x16,o),i.external.msSiteModeActivate(),notification={}),wrapper={close:function(){s(notification)}},r.timeout&&setTimeout(function(){wrapper.close()},r.timeout),e(r.onShow)&&notification.addEventListener("show",r.onShow),e(r.onError)&&notification.addEventListener("error",r.onError),e(r.onClick)&&notification.addEventListener("click",r.onClick),e(r.onClose)&&(notification.addEventListener("close",r.onClose),notification.addEventListener("cancel",r.onClose)),c.push(notification),a(),wrapper},u={DEFAULT:"default",GRANTED:"granted",DENIED:"denied"},d=[u.GRANTED,u.DEFAULT,u.DENIED];o.Permission=u,o.count=0,o.Permission.request=function(t,n){return o.isSupported?(callback=function(i){switch(i){case o.Permission.GRANTED:r=!0,t&&t();break;case o.Permission.DENIED:r=!1,n&&n()}},void(i.Notification&&i.Notification.requestPermission?Notification.requestPermission(callback):i.webkitNotifications&&i.webkitNotifications.checkPermission&&i.webkitNotifications.requestPermission(callback))):void console.error("This browser is not supported")},o.Permission.has=function(){return r},o.Permission.get=function(){var t;if(o.isSupported)return i.Notification&&i.Notification.permissionLevel?t=i.Notification.permissionLevel:i.webkitNotifications&&i.webkitNotifications.checkPermission?t=d[i.webkitNotifications.checkPermission()]:i.Notification&&i.Notification.permission?t=i.Notification.permission:navigator.mozNotification?t=d.GRANTED:i.external&&void 0!==i.external.msIsSiteMode()&&(t=i.external.msIsSiteMode()?u.GRANTED:u.DEFAULT),t},o.isSupported=function(){var o=!1;try{o=!!(i.Notification||i.webkitNotifications||navigator.mozNotification||i.external&&void 0!==i.external.msIsSiteMode())}catch(t){}return o}(),o.create=function(i,t){if(!o.isSupported)return void console.error("PushError: push.js is incompatible with self browser.");if("string"!=typeof i)throw"PushError: Title of notification must be a string";return o.Permission.has()?f(i,t):void o.Permission.request(function(){return f(i,t)})},o.close=function(i){var o,t;for(o=0;o<c.length;o++)if(t=c[o],t.tag===i)return s(t),c.splice(o,1),void a()},o.clear=function(){var i;for(i=0;i<c.length;i++)s(c[i]);c=[],a()}};return t});
//# sourceMappingURL=push.min.js.map