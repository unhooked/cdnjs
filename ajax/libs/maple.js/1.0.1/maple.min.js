!function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./models/Module.js"),u=n(a),l=t("./helpers/Utility.js"),s=n(l);!function(t,e){function r(t){return!n&&("interactive"===t||"complete"===t)}"undefined"!=typeof System&&(System.transpiler="babel");var n=!1,a=function(){function t(){o(this,t),n=!0,this.findComponents()}return i(t,[{key:"findComponents",value:function(){var t=s["default"].toArray(e.querySelectorAll('link[rel="import"]'));t.forEach(function(t){return t["import"]?void new u["default"](t):void t.addEventListener("load",function(){return new u["default"](t)})})}}]),t}();r(e.readyState)&&new a,e.addEventListener("DOMContentLoaded",function(){return new a})}(window,document)},{"./helpers/Utility.js":5,"./models/Module.js":9}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){var t="data-reactid",e=[];return{findById:function(t){function r(e){if(e._rootNodeID===t)return void(n=e._currentElement.props);var o=e._renderedComponent._renderedChildren;o&&Object.keys(o).forEach(function(t){r(o[t])})}var n=void 0;return e.forEach(function(t){r(t._reactInternalInstance._renderedComponent)}),n},delegate:function(r,n){var o=this;e.push(n),r.addEventListener("click",function(e){e.path.forEach(function(e){if(e.getAttribute&&e.hasAttribute(t)){var r=o.findById(e.getAttribute(t));"onClick"in r&&r.onClick.apply(n)}})})}}}(),e.exports=r["default"]},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return{warn:function(t){console.log("Maple.js: %c"+t+".","color: #dd4b39")},info:function(t){console.log("Maple.js: %c"+t+".","color: blue")},error:function(t){console.log("Maple.js: %c"+t+".","color: orange")}}}(),e.exports=r["default"]},{}],4:[function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./Utility.js"),i=n(o);r["default"]=function(){return{getExternalStyles:function(t){return i["default"].toArray(t.querySelectorAll('link[type="text/css"]'))},getInlineStyles:function(t){return i["default"].toArray(t.querySelectorAll('link[type="text/css"]'))},getScripts:function(t){var e=t.querySelectorAll('script[type="text/javascript"]'),r=t.querySelectorAll('script[type="text/jsx"]');return[].concat(i["default"].toArray(e),i["default"].toArray(r))}}}(),e.exports=r["default"]},{"./Utility.js":5}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){var t=3e4;return{pathResolver:function(t,e){function r(t){var e=void 0===arguments[1]?document:arguments[1],r=e.createElement("a");return r.href=t,r.href}var n=this.getPath(e),o=this.getPath.bind(this);return{getPath:function(t){return this.isLocalPath(t)?""+this.getAbsolutePath()+"/"+t:r(t,document)},getAbsolutePath:function(){return r(n)},getRelativePath:function(){return n},isLocalPath:function(e){return e=o(r(e,t)),!!~r(n).indexOf(e)}}},toArray:function(t){return Array.from?Array.from(t):Array.prototype.slice.apply(t)},flattenArray:function(t){var e=this,r=void 0===arguments[1]?[]:arguments[1];return t.forEach(function(t){Array.isArray(t)&&e.flattenArray(t,r),!Array.isArray(t)&&r.push(t)}),r},timeoutPromise:function(e){var r=void 0===arguments[1]?"Timeout":arguments[1],n=void 0===arguments[2]?t:arguments[2];setTimeout(function(){return e(new Error(r))},n)},toSnakeCase:function(t){var e=void 0===arguments[1]?"-":arguments[1];return t.split(/([A-Z][a-z]{0,})/g).filter(function(t){return t}).join(e).toLowerCase()},getName:function(t){return t.split("/").slice(0,-1).pop()},getPath:function(t){return t.split("/").slice(0,-1).join("/")},removeExtension:function(t){return t.split(".").slice(0,-1).join(".")}}}(),e.exports=r["default"]},{}],6:[function(t,e,r){"use strict";var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(r,"__esModule",{value:!0});var i={UNRESOLVED:0,RESOLVING:1,RESOLVED:2};r.State=i;var a=function(){function t(){n(this,t),this.state=i.UNRESOLVED}return o(t,[{key:"setState",value:function(t){this.state=t}}]),t}();r.Abstract=a},{}],7:[function(require,module,exports){"use strict";var _interopRequireWildcard=function(t){return t&&t.__esModule?t:{"default":t}},_classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_get=function t(e,r,n){var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0===a?void 0:a.call(n)},_inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)};Object.defineProperty(exports,"__esModule",{value:!0});var _Element=require("./Element.js"),_Element2=_interopRequireWildcard(_Element),_Abstract$State=require("./Abstract.js"),_utility=require("./../helpers/Utility.js"),_utility2=_interopRequireWildcard(_utility),_logger=require("./../helpers/Logger.js"),_logger2=_interopRequireWildcard(_logger),Component=function(_Abstract){function Component(t,e,r){var n=this;_classCallCheck(this,Component),_get(Object.getPrototypeOf(Component.prototype),"constructor",this).call(this),this.path=t,this.elements={script:r,template:e};var o=r.getAttribute("src");if(this.setState(_Abstract$State.State.RESOLVING),"text/jsx"===r.getAttribute("type"))return void this.loadJSX(o);var i=""+this.path.getRelativePath()+"/"+_utility2["default"].removeExtension(o);System["import"](i).then(function(o){o["default"]&&Promise.all(n.loadThirdPartyScripts()).then(function(){new _Element2["default"](t,e,r,o["default"]),n.setState(_Abstract$State.State.RESOLVED)})})}return _inherits(Component,_Abstract),_createClass(Component,[{key:"loadThirdPartyScripts",value:function(){var t=this,e=_utility2["default"].toArray(this.elements.template.content.querySelectorAll('script[type="text/javascript"]')),r=e.filter(function(e){return!t.path.isLocalPath(e.getAttribute("src"))});return r.map(function(t){return new Promise(function(e){t.addEventListener("load",function(){return e()}),document.head.appendChild(t)})})}},{key:"loadJSX",value:function loadJSX(src){var _this3=this;_logger2["default"].warn("Using JSXTransformer which is highly experimental and should not be used for production"),fetch(""+this.path.getRelativePath()+"/"+src).then(function(t){return t.text()}).then(function(body){var transformed=eval('"use strict"; '+JSXTransformer.transform(body).code);Promise.all(_this3.loadThirdPartyScripts()).then(function(){new _Element2["default"](_this3.path,_this3.elements.template,_this3.elements.script,transformed),_this3.setState(_Abstract$State.State.RESOLVED)})})}}]),Component}(_Abstract$State.Abstract);exports["default"]=Component,module.exports=exports["default"]},{"./../helpers/Logger.js":3,"./../helpers/Utility.js":5,"./Abstract.js":6,"./Element.js":8}],8:[function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function y(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:y(o,e,r)}if("value"in n)return n.value;var i=n.get;return void 0===i?void 0:i.call(r)},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)};Object.defineProperty(r,"__esModule",{value:!0});var l=t("./Abstract.js"),s=t("./../helpers/Events.js"),c=n(s),f=t("./../helpers/Utility.js"),p=n(f),d=t("./../helpers/Selectors.js"),h=n(d),v=function(t){function e(t,r,n,i){o(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=t,this.elements={script:n,template:r},this.script=i,document.registerElement(this.getElementName(),{prototype:this.getElementPrototype()})}return u(e,t),i(e,[{key:"loadStyles",value:function(t){function e(e){var r=void 0===arguments[1]?t:arguments[1],n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e,r.appendChild(n)}var r=this;this.setState(l.State.RESOLVING);var n=this.elements.template.content,o=h["default"].getExternalStyles(n),i=h["default"].getInlineStyles(n),a=[].concat(o,i).map(function(n){return new Promise(function(o){return"style"===n.nodeName.toLowerCase()?(e(n.innerHTML,t),void o()):void fetch(r.path.getPath(n.getAttribute("href"))).then(function(t){return t.text()}).then(function(r){e(r,t),o()})})});return Promise.all(a).then(function(){return r.setState(l.State.RESOLVED)}),a}},{key:"getElementName",value:function(){return p["default"].toSnakeCase(this.script.toString().match(/(?:function|class)\s*([a-z]+)/i)[1])}},{key:"getElementPrototype",value:function(){var t=this.loadStyles.bind(this),e=this.script,r=this.path;return Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){function n(t){for(var r=0;r<t.length;r++){var n=t.item(r);if(n.value){var o=n.name.replace(/^data-/i,"");e.defaultProps[o]=n.value}}}var o=this;e.defaultProps={path:r,element:this.cloneNode(!0)},n.call(this,this.attributes),this.innerHTML="";var i=React.createElement(e),a=document.createElement("content"),u=this.createShadowRoot();u.appendChild(a);var l=React.render(i,a);c["default"].delegate(a,l),Promise.all(t(u)).then(function(){o.removeAttribute("unresolved"),o.setAttribute("resolved","")})}}})}}]),e}(l.Abstract);r["default"]=v,e.exports=r["default"]},{"./../helpers/Events.js":2,"./../helpers/Selectors.js":4,"./../helpers/Utility.js":5,"./Abstract.js":6}],9:[function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function y(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:y(o,e,r)}if("value"in n)return n.value;var i=n.get;return void 0===i?void 0:i.call(r)},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)};Object.defineProperty(r,"__esModule",{value:!0});var l=t("./Component.js"),s=n(l),c=t("./Abstract.js"),f=t("./../helpers/Utility.js"),p=n(f),d=t("./../helpers/Selectors.js"),h=n(d),v=function(t){function e(t){var r=this;o(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=p["default"].pathResolver(t["import"],t.getAttribute("href")),this.state=c.State.UNRESOLVED,this.elements={template:t},this.components=[],this.loadModule(t).then(function(){r.getTemplates().forEach(function(t){var e=h["default"].getScripts(t.content);e.map(function(e){var n=e.getAttribute("src");if(r.path.isLocalPath(n)){var o=new s["default"](r.path,t,e);r.components.push(o)}})}),r.setState(c.State.RESOLVED)})}return u(e,t),i(e,[{key:"setState",value:function(t){this.state=t}},{key:"loadModule",value:function(t){return this.setState(c.State.RESOLVING),new Promise(function(e){return t["import"]?void e(t):void t.addEventListener("load",function(){e(t)})})}},{key:"getTemplates",value:function(){var t=this.elements.template["import"];return p["default"].toArray(t.querySelectorAll("template"))}}]),e}(c.Abstract);r["default"]=v,e.exports=r["default"]},{"./../helpers/Selectors.js":4,"./../helpers/Utility.js":5,"./Abstract.js":6,"./Component.js":7}]},{},[1]);