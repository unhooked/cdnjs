!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./models/Module.js"),u=r(i),s=e("./helpers/Selectors.js"),l=r(s),c=e("./helpers/Events.js"),f=r(c);!function(e,t){function n(e){var t=["interactive","complete"];return!r&&~t.indexOf(e)}"undefined"!=typeof System&&(System.transpiler="babel");var r=!1,i=function(){function e(){o(this,e),r=!0,this.findComponents()}return a(e,[{key:"findComponents",value:function(){var e=l["default"].getLinks(t);e.forEach(function(e){return e["import"]?void new u["default"](e):void e.addEventListener("load",function(){return new u["default"](e)})}),f["default"].setupDelegation()}}]),e}();n(t.readyState)&&new i,t.addEventListener("DOMContentLoaded",function(){return new i})}(window,document)},{"./helpers/Events.js":3,"./helpers/Selectors.js":5,"./models/Module.js":9}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t={};return{fetch:function(n){return t[n]?t[n]:(t[n]=new Promise(function(r){t[n]=e.fetch(n).then(function(e){return e.text()}).then(function(e){r(e)})}),t[n])}}}(window),t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Utility.js"),a=r(o);!function(){var e=Event.prototype.stopPropagation;Event.prototype.stopPropagation=function(){this.isPropagationStopped=!0,e.apply(this,arguments)}}(),n["default"]=function(e){var t=[],n=null;return{findById:function(e){function n(t,o){return t._rootNodeID===e?void function(){r={properties:this._currentElement.props,component:o}}.bind(t)():void(t._renderedComponent&&!function(){var e=t._renderedComponent._renderedChildren;e&&Object.keys(e).forEach(function(t){n(e[t],o)})}())}var r=void 0;return t.forEach(function(e){n(e._reactInternalInstance._renderedComponent,e)}),r},transformKeys:function(e){var t=void 0===arguments[1]?"toLowerCase":arguments[1],n={};return Object.keys(e).forEach(function(r){n[r[t]()]=e[r]}),n},registerComponent:function(e){t.push(e)},setupDelegation:function(){var t=this,r=n||function(){return n=Object.keys(e.createElement("a")).filter(function(e){return e.match(/^on/i)}).map(function(e){return e.replace(/^on/i,"")})}();r.forEach(function(n){e.addEventListener(n,function(e){var n="on"+e.type,r=[];e.path.forEach(function(o){if(!e.isPropagationStopped&&o.getAttribute&&o.hasAttribute(a["default"].ATTRIBUTE_REACTID)){var i=t.findById(o.getAttribute(a["default"].ATTRIBUTE_REACTID));if(i&&i.properties){var u=t.transformKeys(i.properties);n in u&&r.push(u[n].bind(i.component,e))}}}),r.forEach(function(e){return e()})})})}}}(window.document),t.exports=n["default"]},{"./Utility.js":6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return{warn:function(t){e.log("Maple.js: %c"+t+".","color: #dd4b39")},info:function(t){e.log("Maple.js: %c"+t+".","color: blue")},error:function(t){e.log("Maple.js: %c"+t+".","color: orange")}}}(window.console),t.exports=n["default"]},{}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Utility.js"),a=r(o),i=function(e){return a["default"].toArray(this.querySelectorAll(e))};n["default"]=function(){return{getExternalStyles:function(e){return i.call(e,'link[type="text/css"]')},getInlineStyles:function(e){return i.call(e,'style[type="text/css"]')},getLinks:function(e){return i.call(e,'link[rel="import"]')},getScripts:function(e){var t=i.call(e,'script[type="text/javascript"]'),n=i.call(e,'script[type="text/jsx"]');return[].concat(a["default"].toArray(t),a["default"].toArray(n))}}}(),t.exports=n["default"]},{"./Utility.js":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var e=3e4;return{ATTRIBUTE_REACTID:"data-reactid",pathResolver:function(e,t){function n(e){var t=void 0===arguments[1]?document:arguments[1],n=t.createElement("a");return n.href=e,n.href}var r=this.getPath(t),o=this.getPath.bind(this);return{getPath:function(e){return this.isLocalPath(e)?""+this.getAbsolutePath()+"/"+e:n(e,document)},getAbsolutePath:function(){return n(r)},getRelativePath:function(){return r},isLocalPath:function(t){return t=o(n(t,e)),!!~n(r).indexOf(t)}}},toArray:function(e){return Array.from?Array.from(e):Array.prototype.slice.apply(e)},flattenArray:function(e){var t=this,n=void 0===arguments[1]?[]:arguments[1];return e.forEach(function(e){Array.isArray(e)&&t.flattenArray(e,n),!Array.isArray(e)&&n.push(e)}),n},timeoutPromise:function(t){var n=void 0===arguments[1]?"Timeout":arguments[1],r=void 0===arguments[2]?e:arguments[2];setTimeout(function(){return t(new Error(n))},r)},toSnakeCase:function(e){var t=void 0===arguments[1]?"-":arguments[1];return e.split(/([A-Z][a-z]{0,})/g).filter(function(e){return e}).join(t).toLowerCase()},getName:function(e){return e.split("/").slice(0,-1).pop()},getPath:function(e){return e.split("/").slice(0,-1).join("/")},removeExtension:function(e){return e.split(".").slice(0,-1).join(".")}}}(),t.exports=n["default"]},{}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){u=l=s=void 0,r=!1;var o=e,a=t,i=n,u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=a,n=i,r=!0}},_ElementJs=require("./Element.js"),_ElementJs2=_interopRequireDefault(_ElementJs),_helpersUtilityJs=require("./../helpers/Utility.js"),_helpersUtilityJs2=_interopRequireDefault(_helpersUtilityJs),_helpersLoggerJs=require("./../helpers/Logger.js"),_helpersLoggerJs2=_interopRequireDefault(_helpersLoggerJs),_StateManagerJs=require("./StateManager.js"),Component=function(_StateManager){function Component(e,t,n){var r=this;_classCallCheck(this,Component),_get(Object.getPrototypeOf(Component.prototype),"constructor",this).call(this),this.path=e,this.elements={script:n,template:t};var o=n.getAttribute("src");if(this.setState(_StateManagerJs.State.RESOLVING),"text/jsx"===n.getAttribute("type"))return void this.loadJSX(o);var a=""+this.path.getRelativePath()+"/"+_helpersUtilityJs2["default"].removeExtension(o);System["import"](a).then(function(o){o["default"]&&Promise.all(r.loadThirdPartyScripts()).then(function(){new _ElementJs2["default"](e,t,n,o["default"]),r.setState(_StateManagerJs.State.RESOLVED)})})}return _inherits(Component,_StateManager),_createClass(Component,[{key:"loadThirdPartyScripts",value:function(){var e=this,t=_helpersUtilityJs2["default"].toArray(this.elements.template.content.querySelectorAll('script[type="text/javascript"]')),n=t.filter(function(t){return!e.path.isLocalPath(t.getAttribute("src"))});return n.map(function(e){return new Promise(function(t){e.addEventListener("load",function(){return t()}),document.head.appendChild(e)})})}},{key:"loadJSX",value:function loadJSX(src){var _this4=this;_helpersLoggerJs2["default"].warn("Using JSXTransformer which is highly experimental and should not be used for production"),fetch(""+this.path.getRelativePath()+"/"+src).then(function(e){return e.text()}).then(function(body){body=body.replace("export default","").trim();var transformed=eval('"use strict"; '+JSXTransformer.transform(body).code);Promise.all(_this4.loadThirdPartyScripts()).then(function(){new _ElementJs2["default"](_this4.path,_this4.elements.template,_this4.elements.script,transformed),_this4.setState(_StateManagerJs.State.RESOLVED)})})}}]),Component}(_StateManagerJs.StateManager);exports["default"]=Component,module.exports=exports["default"]},{"./../helpers/Logger.js":4,"./../helpers/Utility.js":6,"./Element.js":8,"./StateManager.js":10}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){u=l=s=void 0,r=!1;var o=e,a=t,i=n,u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=a,n=i,r=!0}},s=e("./../helpers/Events.js"),l=r(s),c=e("./../helpers/Utility.js"),f=r(c),p=e("./../helpers/CacheFactory.js"),d=r(p),h=e("./../helpers/Selectors.js"),v=r(h),m=e("./StateManager.js"),y=function(e){function t(e,n,r,a){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.path=e,this.elements={script:r,template:n},this.script=a,document.registerElement(this.getElementName(),{prototype:this.getElementPrototype()})}return a(t,e),i(t,[{key:"loadStyles",value:function(e){function t(t){var n=void 0===arguments[1]?e:arguments[1],r=document.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=t,n.appendChild(r)}var n=this;this.setState(m.State.RESOLVING);var r=this.elements.template.content,o=v["default"].getExternalStyles(r),a=v["default"].getInlineStyles(r),i=[].concat(o,a).map(function(r){return new Promise(function(o){return"style"===r.nodeName.toLowerCase()?(t(r.innerHTML,e),void o()):void d["default"].fetch(n.path.getPath(r.getAttribute("href"))).then(function(n){t(n,e),o()})})});return Promise.all(i).then(function(){return n.setState(m.State.RESOLVED)}),i}},{key:"getElementName",value:function(){return f["default"].toSnakeCase(this.script.toString().match(/(?:function|class)\s*([a-z]+)/i)[1])}},{key:"getElementPrototype",value:function(){var e=this.loadStyles.bind(this),t=this.script,n=this.path;return Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){function r(e){for(var n=0;n<e.length;n++){var r=e.item(n),o=/^data-/i;if(r.value){if(r.name===f["default"].ATTRIBUTE_REACTID)continue;var a=r.name.replace(o,"");t.defaultProps[a]=r.value}}}function o(){var t=this;Promise.all(e(u)).then(function(){t.removeAttribute("unresolved"),t.setAttribute("resolved","")})}t.defaultProps={path:n,element:this.cloneNode(!0)},r.call(this,this.attributes),this.innerHTML="";var a=React.createElement(t),i=document.createElement("content"),u=this.createShadowRoot();u.appendChild(i);var s=React.render(a,i);l["default"].registerComponent(s),o.apply(this)}}})}}]),t}(m.StateManager);n["default"]=y,t.exports=n["default"]},{"./../helpers/CacheFactory.js":2,"./../helpers/Events.js":3,"./../helpers/Selectors.js":5,"./../helpers/Utility.js":6,"./StateManager.js":10}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){u=l=s=void 0,r=!1;var o=e,a=t,i=n,u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;e=l,t=a,n=i,r=!0}},s=e("./Component.js"),l=r(s),c=e("./../helpers/Utility.js"),f=r(c),p=e("./../helpers/Selectors.js"),d=r(p),h=e("./StateManager.js"),v=function(e){function t(e){var n=this;o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.path=f["default"].pathResolver(e["import"],e.getAttribute("href")),this.state=h.State.UNRESOLVED,this.elements={template:e},this.components=[],this.loadModule(e).then(function(){n.getTemplates().forEach(function(e){var t=d["default"].getScripts(e.content);t.map(function(t){var r=t.getAttribute("src");if(n.path.isLocalPath(r)){var o=new l["default"](n.path,e,t);n.components.push(o)}})}),n.setState(h.State.RESOLVED)})}return a(t,e),i(t,[{key:"setState",value:function(e){this.state=e}},{key:"loadModule",value:function(e){return this.setState(h.State.RESOLVING),new Promise(function(t){return e["import"]?void t(e):void e.addEventListener("load",function(){t(e)})})}},{key:"getTemplates",value:function(){var e=this.elements.template["import"];return f["default"].toArray(e.querySelectorAll("template"))}}]),t}(h.StateManager);n["default"]=v,t.exports=n["default"]},{"./../helpers/Selectors.js":5,"./../helpers/Utility.js":6,"./Component.js":7,"./StateManager.js":10}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={UNRESOLVED:0,RESOLVING:1,RESOLVED:2};n.State=a;var i=function(){function e(){r(this,e),this.state=a.UNRESOLVED}return o(e,[{key:"setState",value:function(e){this.state=e}}]),e}();n.StateManager=i},{}]},{},[1]);