!function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./models/Module.js"),u=r(a),s=t("./models/Component.js"),l=r(s),c=t("./helpers/Selectors.js"),f=r(c),p=t("./helpers/Utility.js"),d=r(p),h=t("./helpers/Events.js"),v=r(h);!function(t,e){function n(t){var e=["interactive","complete"];return!r&&~e.indexOf(t)}"undefined"!=typeof System&&(System.transpiler="babel");var r=!1,a=function(){function t(){o(this,t),r=!0,this.findLinks(),this.findTemplates(),v["default"].setupDelegation()}return i(t,[{key:"findLinks",value:function(){f["default"].getLinks(e).forEach(function(t){return t["import"]?void new u["default"](t):void t.addEventListener("load",function(){return new u["default"](t)})})}},{key:"findTemplates",value:function(){f["default"].getTemplates(e).forEach(function(t){var e=f["default"].getAllScripts(t.content),n=t.getAttribute("ref"),r=d["default"].resolver(n,null).production;e.forEach(function(e){r.isLocalPath(e.getAttribute("src"))&&new l["default"](r,t,e)})})}}]),t}();n(e.readyState)&&new a,e.addEventListener("DOMContentLoaded",function(){return new a})}(window,document)},{"./helpers/Events.js":3,"./helpers/Selectors.js":5,"./helpers/Utility.js":6,"./models/Component.js":7,"./models/Module.js":9}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e={};return{fetch:function(n){return e[n]?e[n]:(e[n]=new Promise(function(r){e[n]=t.fetch(n).then(function(t){return t.text()}).then(function(t){r(t)})}),e[n])}}}(window),e.exports=n["default"]},{}],3:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Utility.js"),i=r(o);!function(){var t=Event.prototype.stopPropagation;Event.prototype.stopPropagation=function(){this.isPropagationStopped=!0,t.apply(this,arguments)}}(),n["default"]=function(t){var e=[],n=null;return{findById:function(t){function n(e,o){return e._rootNodeID===t?void function(){r={properties:this._currentElement.props,component:o}}.bind(e)():void(e._renderedComponent&&!function(){var t=e._renderedComponent._renderedChildren;t&&Object.keys(t).forEach(function(e){n(t[e],o)})}())}var r=void 0;return e.forEach(function(t){n(t._reactInternalInstance._renderedComponent,t)}),r},transformKeys:function(t){var e=void 0===arguments[1]?"toLowerCase":arguments[1],n={};return Object.keys(t).forEach(function(r){n[r[e]()]=t[r]}),n},registerComponent:function(t){e.push(t)},setupDelegation:function(){var e=this,r=n||function(){var e=t.createElement("a"),n=/^on/i,r=[];for(var o in e)o.match(n)&&r.push(o.replace(n,""));return r}();r.forEach(function(n){t.addEventListener(n,function(t){var n="on"+t.type,r=[];i["default"].toArray(t.path).forEach(function(o){if(!t.isPropagationStopped&&o.getAttribute&&o.hasAttribute(i["default"].ATTRIBUTE_REACTID)){var a=e.findById(o.getAttribute(i["default"].ATTRIBUTE_REACTID));if(a&&a.properties){var u=e.transformKeys(a.properties);n in u&&r.push(u[n].bind(a.component,t))}}}),r.forEach(function(t){return t()})})})}}}(window.document),e.exports=n["default"]},{"./Utility.js":6}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){return{warn:function(e){t.log("Maple.js: %c"+e+".","color: #5F9EA0")},info:function(e){t.log("Maple.js: %c"+e+".","color: blue")},error:function(e){t.error("%c Maple.js: %c"+e+".","color: black","color: #CD6090")}}}(window.console),e.exports=n["default"]},{}],5:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Utility.js"),i=r(o),a=function(t){return i["default"].toArray(this.querySelectorAll(t))};n["default"]=function(){return{getExternalStyles:function(t){return a.call(t,'link[type="text/css"]')},getInlineStyles:function(t){return a.call(t,'style[type="text/css"]')},getLinks:function(t){return a.call(t,'link[rel="import"]:not([data-ignore])')},getTemplates:function(t){return a.call(t,"template[ref]")},getScripts:function(t){return a.call(t,'script[type="text/javascript"]')},getAllScripts:function(t){var e=a.call(t,'script[type="text/jsx"]');return[].concat(i["default"].toArray(this.getScripts(t)),i["default"].toArray(e))}}}(),e.exports=n["default"]},{"./Utility.js":6}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(t){var e=3e4;return{ATTRIBUTE_REACTID:"data-reactid",resolver:function(e,n){function r(e){var n=void 0===arguments[1]?t:arguments[1],r=n.createElement("a");return r.href=e,r.href}var o=this.getPath(e),i=this.getPath.bind(this),a=this.getName.bind(this);return{production:{getPath:function(e){return this.isLocalPath(e)?""+this.getAbsolutePath()+"/"+a(e):r(e,t)},getSrc:function(t){return a(t)},getAbsolutePath:function(){return r(e)},getRelativePath:function(){return e},isLocalPath:function(t){return!!~t.indexOf(e)}},development:{getPath:function(e){return this.isLocalPath(e)?""+this.getAbsolutePath()+"/"+e:r(e,t)},getSrc:function(t){return t},getAbsolutePath:function(){return r(o)},getRelativePath:function(){return o},isLocalPath:function(t){return t=i(r(t,n)),!!~r(o).indexOf(t)}}}},toArray:function(t){return Array.from?Array.from(t):Array.prototype.slice.apply(t)},flattenArray:function(t){var e=this,n=void 0===arguments[1]?[]:arguments[1];return t.forEach(function(t){Array.isArray(t)&&e.flattenArray(t,n),!Array.isArray(t)&&n.push(t)}),n},timeoutPromise:function(t){var n=void 0===arguments[1]?"Timeout":arguments[1],r=void 0===arguments[2]?e:arguments[2];setTimeout(function(){return t(new Error(n))},r)},toSnakeCase:function(t){var e=void 0===arguments[1]?"-":arguments[1];return t.split(/([A-Z][a-z]{0,})/g).filter(function(t){return t}).join(e).toLowerCase()},getName:function(t){return t.split("/").slice(-1)},getPath:function(t){return t.split("/").slice(0,-1).join("/")},removeExtension:function(t){return t.split(".").slice(0,-1).join(".")}}}(window.document),e.exports=n["default"]},{}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_get=function(t,e,n){for(var r=!0;r;){u=l=s=void 0,r=!1;var o=t,i=e,a=n,u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=i,n=a,r=!0}},_ElementJs=require("./Element.js"),_ElementJs2=_interopRequireDefault(_ElementJs),_helpersUtilityJs=require("./../helpers/Utility.js"),_helpersUtilityJs2=_interopRequireDefault(_helpersUtilityJs),_helpersLoggerJs=require("./../helpers/Logger.js"),_helpersLoggerJs2=_interopRequireDefault(_helpersLoggerJs),_StateManagerJs=require("./StateManager.js"),Component=function(_StateManager){function Component(t,e,n){var r=this;_classCallCheck(this,Component),_get(Object.getPrototypeOf(Component.prototype),"constructor",this).call(this),this.path=t,this.elements={script:n,template:e};var o=n.getAttribute("src");if(this.setState(_StateManagerJs.State.RESOLVING),"text/jsx"===n.getAttribute("type"))return void this.loadJSX(o);var i=""+this.path.getRelativePath()+"/"+_helpersUtilityJs2["default"].removeExtension(o);System["import"](i).then(function(o){o["default"]&&Promise.all(r.loadThirdPartyScripts()).then(function(){new _ElementJs2["default"](t,e,n,o["default"]),r.setState(_StateManagerJs.State.RESOLVED)})})}return _inherits(Component,_StateManager),_createClass(Component,[{key:"loadThirdPartyScripts",value:function(){var t=this,e=_helpersUtilityJs2["default"].toArray(this.elements.template.content.querySelectorAll('script[type="text/javascript"]')),n=e.filter(function(e){return!t.path.isLocalPath(e.getAttribute("src"))});return n.map(function(t){return new Promise(function(e){t.addEventListener("load",function(){return e()}),document.head.appendChild(t)})})}},{key:"loadJSX",value:function loadJSX(src){var _this4=this;_helpersLoggerJs2["default"].warn("Using JSXTransformer which is highly experimental and should not be used for production"),fetch(""+this.path.getRelativePath()+"/"+this.path.getSrc(src)).then(function(t){return t.text()}).then(function(body){var component=babel.transform(body).code,transformed=eval('"use strict"; '+component);Promise.all(_this4.loadThirdPartyScripts()).then(function(){new _ElementJs2["default"](_this4.path,_this4.elements.template,_this4.elements.script,transformed),_this4.setState(_StateManagerJs.State.RESOLVED)})})}}]),Component}(_StateManagerJs.StateManager);exports["default"]=Component,module.exports=exports["default"]},{"./../helpers/Logger.js":4,"./../helpers/Utility.js":6,"./Element.js":8,"./StateManager.js":10}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){u=l=s=void 0,r=!1;var o=t,i=e,a=n,u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=i,n=a,r=!0}},s=t("./../helpers/Events.js"),l=r(s),c=t("./../helpers/Utility.js"),f=r(c),p=t("./../helpers/CacheFactory.js"),d=r(p),h=t("./../helpers/Selectors.js"),v=r(h),m=t("./StateManager.js"),y=function(t){function e(t,n,r,i){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=t,this.elements={script:r,template:n},this.script=i,document.registerElement(this.getElementName(),{prototype:this.getElementPrototype()})}return i(e,t),a(e,[{key:"loadStyles",value:function(t){function e(e){var n=void 0===arguments[1]?t:arguments[1],r=document.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=e,n.appendChild(r)}var n=this;this.setState(m.State.RESOLVING);var r=this.elements.template.content,o=v["default"].getExternalStyles(r),i=v["default"].getInlineStyles(r),a=[].concat(o,i).map(function(r){return new Promise(function(o){return"style"===r.nodeName.toLowerCase()?(e(r.innerHTML,t),void o()):void d["default"].fetch(n.path.getPath(r.getAttribute("href"))).then(function(n){e(n,t),o()})})});return Promise.all(a).then(function(){return n.setState(m.State.RESOLVED)}),a}},{key:"getElementName",value:function(){return f["default"].toSnakeCase(this.script.toString().match(/(?:function|class)\s*([a-z]+)/i)[1])}},{key:"getElementPrototype",value:function(){var t=this.loadStyles.bind(this),e=this.script,n=this.path;return Object.create(HTMLElement.prototype,{attachedCallback:{value:function(){function r(t){for(var n=0;n<t.length;n++){var r=t.item(n),o=/^data-/i;if(r.value){if(r.name===f["default"].ATTRIBUTE_REACTID)continue;var i=r.name.replace(o,"");e.defaultProps[i]=r.value}}}function o(){var e=this;Promise.all(t(u)).then(function(){e.removeAttribute("unresolved"),e.setAttribute("resolved","")})}e.defaultProps={path:n,element:this.cloneNode(!0)},r.call(this,this.attributes),this.innerHTML="";var i=React.createElement(e),a=document.createElement("content"),u=this.createShadowRoot();u.appendChild(a);var s=React.render(i,a);l["default"].registerComponent(s),o.apply(this)}}})}}]),e}(m.StateManager);n["default"]=y,e.exports=n["default"]},{"./../helpers/CacheFactory.js":2,"./../helpers/Events.js":3,"./../helpers/Selectors.js":5,"./../helpers/Utility.js":6,"./StateManager.js":10}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){u=l=s=void 0,r=!1;var o=t,i=e,a=n,u=Object.getOwnPropertyDescriptor(o,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;return void 0===s?void 0:s.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=i,n=a,r=!0}},s=t("./Component.js"),l=r(s),c=t("./../helpers/Utility.js"),f=r(c),p=t("./../helpers/Logger.js"),d=r(p),h=t("./../helpers/Selectors.js"),v=r(h),m=t("./StateManager.js"),y=function(t){function e(t){var n=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.path=f["default"].resolver(t.getAttribute("href"),t["import"]).development,this.state=m.State.UNRESOLVED,this.elements={link:t},this.components=[],this.loadModule(t).then(function(){var e=n.getTemplates();return e.length>1?void d["default"].error('Component "'+t.getAttribute("href")+'" is attempting to register two components'):([n.getTemplates()[0]].forEach(function(t){var e=v["default"].getAllScripts(t.content);e.map(function(e){var r=e.getAttribute("src");if(n.path.isLocalPath(r)){var o=new l["default"](n.path,t,e);n.components.push(o)}})}),void n.setState(m.State.RESOLVED))})}return i(e,t),a(e,[{key:"setState",value:function(t){this.state=t}},{key:"loadModule",value:function(t){return this.setState(m.State.RESOLVING),new Promise(function(e){return t.hasAttribute("ref")?void e(t):t["import"]?void e(t):void t.addEventListener("load",function(){e(t)})})}},{key:"getTemplates",value:function(){var t=this.elements.link["import"];return f["default"].toArray(t.querySelectorAll("template"))}}]),e}(m.StateManager);n["default"]=y,e.exports=n["default"]},{"./../helpers/Logger.js":4,"./../helpers/Selectors.js":5,"./../helpers/Utility.js":6,"./Component.js":7,"./StateManager.js":10}],10:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i={UNRESOLVED:0,RESOLVING:1,RESOLVED:2};n.State=i;var a=function(){function t(){r(this,t),this.state=i.UNRESOLVED}return o(t,[{key:"setState",value:function(t){this.state=t}}]),t}();n.StateManager=a},{}]},{},[1]);