/*! Riloadr.js 1.4.0 (c) 2013 Tubal Martin - MIT license */
!function(a){"function"==typeof define&&define.amd?define(a):window.Riloadr=a()}(function(){"use strict";function pb(a){function bb(){ib=vb(),R=qb(i,ib,E),U=sb(i,R[B]),ab=y&&z&&tb(R,W)}function cb(a,b){if(Mb(Z,t,L),I&&(Mb(Z,q,J),hb&&(ob=Z[N],Mb(Z,V,M)),s))for(b=0;a=s[b];)Mb($[Q](a),q,J),b++}function db(a,b){if(y||Nb(Z,t,L),I&&!y){if(Nb(Z,q,J),s)for(b=0;a=s[b];)Nb($[Q](a),q,J),b++;hb&&Nb(Z,V,M)}}function eb(a,b){a[w]=0,a[B]=f,a[u]=fb,a[v]=jb,a.src=wb(a,e,R),O.splice(b,1)}function fb(){var b=this;b[u]=b[v]=h,b[A]&&(b[C]=b[C].replace(l,"$1$2")),I&&(b.style.visibility="visible"),u in a&&a[u][j](b),kb()}function jb(){var b=this;v in a&&a[v][j](b),F>b[w]?(b[w]++,b.src=wb(b,e,b[B]?U:R,c)):B in R&&!b[B]?(b[w]=0,b[B]=c,b.src=wb(b,e,U)):kb()}function kb(){P--,0==P&&(db(),H in a&&a[H]())}var R,S,U,W,X,_,ab,b=this,e=a.base||n,i=a.breakpoints||Lb('"breakpoints" not defined.'),k=a.name||"responsive",l=RegExp("(^|\\s)"+k+"(\\s|$)"),m=a.defer&&("string"==typeof a.defer?{mode:a.defer,threshold:a.foldDistance,overflownElemsIds:[]}:a.defer),o=m&&m.mode.toLowerCase(),r=m&&m.threshold||100,s=m&&m.overflownElemsIds,x=a.watchViewportWidth,y=!!x,z="wider"==x,D="*"==x,E=a.ignoreLowBandwidth||f,F=a[w]||0,G=a.root||h,I=("invisible"==o||"belowfold"==o)&&!mb,J=I&&Hb(function(){b[K]()},g),L=(I||y)&&Ib(function(){y&&bb(),b[K](y)},g),M=I&&Ib(function(){Z[N]!==ob&&(ob=Z[N],b[K]())},g),O=[],P=0;b[K]=function(a){Kb(function(b,d,e){if(!O[p]||a===c){for(a&&cb(),y&&S&&(X=!tb(R,S),_=z&&ub(R,S)),b=gb&&G[T]("img."+k)||G.getElementsByTagName("img"),e=0;d=b[e];)d&&!d[A]&&(gb||d[C].indexOf(k)>=0)&&((!y||y&&(!S||z&&_||D&&X))&&(O.push(d),P++),(!y||ab)&&(d[A]=c)),e++;ab&&(y=f),y&&(S=R)}if(O[p])for(e=0;d=O[e];)d&&(!I||I&&xb(d,r))&&(eb(d,e),e--),e++;b=d=h})},nb(function(){Y=$[d],G=$[Q](G)||Y,W=y&&rb(i),bb(),(I||y)&&cb(),!o||I?b[K]():Ob(b[K])})}function qb(a,b,c){for(var g,h,i,j,d=b,e=0,f={};g=a[e];)h=g[x],i=g[y],j=g[W],b>0?(h&&i&&b>=h&&i>=b||h&&!i&&b>=h||i&&!h&&i>=b)&&(!j||j&&kb>=j&&(c||!c&&!lb))&&(f=g):(0>=d||d>h||d>i)&&(d=h||i||d,f=g),e++;return f}function rb(a,b,c,d){for(c={},d=0;b=a[d];)ub(b,c)&&(c=b),d++;return c}function sb(a,b,c,d){if(typeof b==F)return{};for(d=0;c=a[d];){if(c.name==b)return c;d++}}function tb(a,b){return a.name===b.name&&a[x]===b[x]&&a[y]===b[y]&&a[W]===b[W]&&a[D]===b[D]}function ub(a,b){var c=+a[W]||1,d=+b[W]||1;return a=Math.max(+a[x]||0,+a[y]||0)*(kb>=c?c:1),b=Math.max(+b[x]||0,+b[y]||0)*(kb>=d?d:1),a>b}function vb(){for(var f,a=Math,b=[_.clientWidth,_.offsetWidth,Y.clientWidth],c=a.ceil(jb/kb),d=b[p],e=0;d>e;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[p]&&(f=a.max[k](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function wb(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||n);return c[D]&&(e=e.split("."),e.pop(),e=e.join(".")+"."+c[D]),d&&(e+=(eb.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace(fb,c.name)}function lb(){var a=Z.navigator,b=a.connection||a.mozConnection||a.webkitConnection||a.oConnection||a.msConnection||{},c=b.type||"unknown",d=+b.bandwidth||1/0;return d>0&&.1>d||/^[23]g|3|4$/.test(c+n)}function xb(a,b){return!(Ab(a,b)||Bb(a,b)||yb(a,b)||zb(a,b))}function yb(a,c){return Eb(o,Z)+Db(b,Z)<=Cb(b,a)-c}function zb(a,c){return Db(b,Z)>=Cb(b,a)+c+Eb(o,a)}function Ab(a,b){return Eb(m,Z)+Db(e,Z)<=Cb(e,a)-b}function Bb(a,b){return Db(e,Z)>=Cb(e,a)+b+Eb(m,a)}function Cb(a,c){var g,h,d={top:0,left:0},f=c&&c.ownerDocument;if(f)return g=f[R],typeof c[X]!==F&&(d=c[X]()),Z=Gb(f),h={top:d[b]+(Z[L]||g[G])-(g.clientTop||0),left:d[e]+(Z[M]||g[J])-(g.clientLeft||0)},h[a]}function Db(a,b){var c={top:{method:G,prop:L},left:{method:J,prop:M}},d=c[a].method,e=c[a].prop,f=Gb(b);return f?e in f?f[e]:_[d]:b[d]}function Eb(a,b){var e,f,g,c={height:"Height",width:"Width"};return a=c[a],Fb(b)?_[s+a]:9===b.nodeType?(e=b[R],Math.max(b[d][q+a],e[q+a],b[d][r+a],e[r+a],e[s+a])):(f=b[r+a],a=a.toLowerCase(),(0>=f||f==h)&&(Z.getComputedStyle?g=Z.getComputedStyle(b,h):docElem.currentStyle&&(g=b.currentStyle),g&&(f=g[a]),(0>f||f==h)&&(f=b.style[a])),parseFloat(f)||0)}function Fb(a){return a!=h&&a==a.window}function Gb(a){return Fb(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:f}function Hb(a,b){function i(){g=new Date,f=h,a[k](e,c)}var c,d,e,f,g=0;return function(){var h=new Date,j=b-(h-g);return c=arguments,e=this,0>=j?(g=h,d=a[k](e,c)):f||(f=Jb(i,j)),d}}function Ib(a,b,c){function i(){g=h,c||a[k](f,d)}var d,e,f,g;return function(){var h=c&&!g;return d=arguments,f=this,clearTimeout(g),g=Jb(i,b),h&&(e=a[k](f,d)),e}}function Jb(a,b){var c=Array[E].slice[j](arguments,2);return Z.setTimeout(function(){return a[k](h,c)},b)}function Kb(a){return Jb[k](h,[a,1].concat(Array[E].slice[j](arguments,1)))}function Lb(a){throw Error("Riloadr: "+a)}function Mb(a,b,c){a[cb](bb+b,c,f)}function Nb(a,b,c){a[db](bb+b,c,f)}function Ob(a){if($[I]===z)Kb(a);else{var b=function(){Nb(Z,i,b),Kb(a)};Mb(Z,i,b)}}var Y,ib,nb,ob,a="on",b="top",c=!0,d="body",e="left",f=!1,g=250,h=null,i="load",j="call",k="apply",l="error",m="width",n="",o="height",p="length",q="scroll",r="offset",s="client",t="resize",u=a+i,v=a+l,w="retries",x="minWidth",y="maxWidth",z="complete",A="riloaded",B="fallback",C="className",D="imgFormat",E="prototype",F="undefined",G=q+"Top",H=a+z,I="readyState",J=q+"Left",K=i+"Images",L="pageYOffset",M="pageXOffset",N="orientation",O="attachEvent",P="EventListener",Q="getElementById",R="documentElement",S="readystatechange",T="querySelectorAll",U="add"+P,V=N+"change",W="minDevicePixelRatio",X="getBoundingClientRect",Z=window,$=Z.document,_=$[R],ab=U in $,bb=ab?n:a,cb=ab?U:O,db=ab?"remove"+P:"detachEvent",eb=/\?/,fb=/{breakpoint-name}/gi,gb=T in $,hb=N in Z&&a+V in Z,jb=Z.screen[m],kb=Z.devicePixelRatio||1,lb=lb(),mb="[object OperaMini]"===Object[E].toString[j](Z.operamini);return _[C]=_[C].replace(/(^|\s)no-js(\s|$)/,"$1$2"),pb.version="1.4.0",pb[E].riload=function(){this[K](c)},nb=function(){function j(a){if(!e){if(!$[d])return Kb(j);for(e=c;a=g.shift();)Kb(a)}}function k(a){(ab||a.type===i||$[I]===z)&&(l(),j())}function l(){Nb($,ab?a:S,k),Nb(Z,i,k)}var a="DOMContentLoaded",b=f,e=f,g=[];if($[I]===z)Kb(j);else{if(ab)Mb($,a,k);else{Mb($,S,k);try{b=Z.frameElement==h&&docElem}catch(m){}b&&b.doScroll&&function n(){if(!e){try{b.doScroll("left")}catch(a){return Jb(n,50)}l(),j()}}()}Mb(Z,i,k)}return function(a){e?Kb(a):g.push(a)}}(),pb});