/*! 
 * Riloadr.js 1.3.0 (c) 2012 Tubal Martin - MIT license
 */
!function(e){typeof define=="function"&&define.amd?define(["jquery"],e):window.Riloadr=e(jQuery)}(function(e){"use strict";function V(t){function ot(){tt(O,h,B),tt(O,p,j),I&&(X=O[T],tt(O,k,F))}function ut(){nt(O,h,B),nt(O,p,j),I&&nt(O,k,F)}function at(e,t){e[m]=0,e[b]=r,e[d]=ft,e[v]=lt,e.src=K(e,a,V),R.splice(t,1)}function ft(){var e=this;e[d]=e[v]=s,e[w]=e[w].replace(E,"$1$2"),d in t&&t[d][u](e),ct()}function lt(){var e=this;v in t&&t[v][u](e),e[m]<D?(e[m]++,e.src=K(e,a,e[b]?st:V,n)):b in z&&!e[b]?(e[m]=0,e[b]=n,e.src=K(e,a,st)):ct()}function ct(){U--,U==0&&S in t&&t[S]()}var o=this,a=t.base||l,f=t.breakpoints||et('"breakpoints" not defined.'),g=t.name||"responsive",E=new RegExp("(^|\\s)"+g+"(\\s|$)"),N=t.defer&&t.defer.toLowerCase()||r,C=t.foldDistance||100,_=t.ignoreLowBandwidth||r,D=t[m]||0,P=t.root||s,H=N==="belowfold"&&!W,B=H&&G(function(){o[x]()},i),j=H&&Y(function(){o[x]()},i),F=H&&Y(function(){O[T]!==X&&(X=O[T],o[x]())},i),R=[],U=0,z,V,st;o[x]=function(t){Z(function(r,i){if(!R[c]||t===n)H&&ot(),e("img."+g,P).each(function(e,t){t&&!t[y]&&(t[y]=n,R.push(t),U++)});if(R[c]){i=0;while(r=R[i])r&&(!H||H&&!Q(r,C))&&(at(r,i),i--),i++}H&&!R[c]&&ut(),r=s})},rt(function(){L=e(O),A=M.body,P=P&&e("#"+P)||A,q=q||J(),z=$(f,q,_),V=z.name,st=z[b],!N||H?o[x]():it(o[x])})}function $(e,t,n){var r=t,i=0,s={},o,u,a,f;while(o=e[i]){u=o.minWidth,a=o.maxWidth,f=o.minDevicePixelRatio;if(t>0){if(u&&a&&t>=u&&t<=a||u&&!a&&t>=u||a&&!u&&t<=a)if(!f||f&&U>=f&&(n||!n&&!z))s=o}else if(r<=0||u<r||a<r)r=u||a||r,s=o;i++}return s}function J(){var e=Math,t=[_.clientWidth,_.offsetWidth,A.clientWidth],n=e.ceil(R/U),r=t[c],i=0,s;for(;i<r;i++)isNaN(t[i])&&(t.splice(i,1),i--);return t[c]&&(s=e.max[a](e,t),isNaN(n)||(s=e.min(n,s))),s||n||0}function K(e,t,n,r){var i=(e.getAttribute("data-base")||t)+(e.getAttribute("data-src")||l);return r&&(i+=(j.test(i)?"&":"?")+"riloadrts="+(new Date).getTime()),i.replace(F,n)}function Q(t,n){return L.height()+L.scrollTop()<=e(t).offset().top-n}function z(){var e=O.navigator,t=e.connection||e.mozConnection||e.webkitConnection||e.oConnection||e.msConnection||{},n=t.type||"unknown",r=+t.bandwidth||Infinity;return r>0&&r<.1||/^[23]g|3|4$/.test(n+l)}function G(e,t){function f(){u=new Date,o=s,e[a](i,n)}var n,r,i,o,u=0;return function(){var s=new Date,l=t-(s-u);return n=arguments,i=this,l<=0?(u=s,r=e[a](i,n)):o||(o=setTimeout(f,l)),r}}function Y(e,t,n){function f(){u=s,n||e[a](o,r)}var r,i,o,u;return function(){var s=n&&!u;return r=arguments,o=this,clearTimeout(u),u=setTimeout(f,t),s&&(i=e[a](o,r)),i}}function Z(e){var t=Array[E].slice[u](arguments,1);setTimeout(function(){return e[a](s,t)},1)}function et(e){throw new Error("Riloadr: "+e)}function tt(e,t,n){e[H](P+t,n,r)}function nt(e,t,n){e[B](P+t,n,r)}function rt(t){e(t)}function it(e){if(M.readyState===g)e();else{var t=function(){nt(O,o,t),e()};tt(O,o,t)}}var t="on",n=!0,r=!1,i=250,s=null,o="load",u="call",a="apply",f="error",l="",c="length",h="scroll",p="resize",d=t+o,v=t+f,m="retries",g="complete",y="riloaded",b="fallback",w="className",E="prototype",S=t+g,x="loadImages",T="orientation",N="EventListener",C="add"+N,k=T+"change",L,A,O=window,M=O.document,_=M.documentElement,D=C in M,P=D?l:t,H=D?C:"attachEvent",B=D?"remove"+N:"detachEvent",j=/\?/,F=/{breakpoint-name}/gi,I=T in O&&t+k in O,q,R=O.screen.width,U=O.devicePixelRatio||1,z=z(),W=Object[E].toString[u](O.operamini)==="[object OperaMini]",X;return _[w]=_[w].replace(/(^|\s)no-js(\s|$)/,"$1$2"),V.version="1.3.0",V[E].riload=function(){this[x](n)},V});