/*! 
 * Riloadr.js 1.0.1 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(a):window.Riloadr=a()}(function(){function $(a){function J(){x==="belowfold"?y?(X||(X=b,T(F,k,db(function(){hb(k)},250))),ib(k,h[u]),Y||(Y=b,T(F,l,eb(function(){hb(l)},250))),ib(l,h[u]),M&&(Z||(Z=b,W=F[w],T(F,D,eb(function(){F[w]!==W&&(W=F[w],hb(D))},250))),ib(D,h[u])),h[u]()):jb(h[u]):x===e?jb(h[u]):h[u]()}function K(a){if(!H||a===b){H=H||[];var c=N&&C[B]("img."+s)||C.getElementsByTagName("img"),e=0,f;while(f=c[e])f&&!f[q]&&(N||f[r].indexOf(s)>=0)&&H.push(f),e++;c=f=d}}function O(a,c){a[q]=b,a[o]=0,a[m]=P,a[n]=R,a.src=bb(a,v,E),H.splice(c,1)}function P(){var b=this;b[m]=b[n]=d,b[r]=b[r].replace(t,"$1$2"),m in a&&a[m][f](b)}function R(){var c=this;A>0&&c[o]<A&&(c[o]++,c.src=bb(c,v,E,b)),n in a&&a[n][f](c)}var h=this,p=a.breakpoints||gb('"breakpoints" not defined.'),s=a.name||"responsive",t=new RegExp("(^|\\s)"+s+"(\\s|$)"),v=a.base||i,x=(a.defer+i).toLowerCase()||c,y=L&&x==="belowfold"&&!S,z=+a.foldDistance||100,A=+a[o]||0,C,E,H;h[u]=function(){var a=arguments;fb(function(b,c){K[g](d,a);if(H[j]){c=0;while(b=H[c])b&&!b[q]&&(y?cb(b,z)||(O(b,c),c--):(O(b,c),c--)),c++;b=d}})},V(function(){I=G.body,C=a.root&&G.getElementById(a.root)||I,Q=Q||ab(),E=_(p,Q),J()})}function _(a,b){var c=i,d=b,e=0,f,g,h,j,k;while(f=a[e]){g=f.name,h=f.minWidth,j=f.maxWidth,k=f.minDevicePixelRatio;if(b>0){if(h&&j&&b>=h&&b<=j||h&&!j&&b>=h||j&&!h&&b<=j)k?P>=k&&(c=g):c=g}else d<=0?(d=h?h:j?j:d,c=g):(h<d&&(d=h,c=g),j<d&&(d=j,c=g));e++}return c+i}function ab(){var a=Math,b=[H.clientWidth,H.offsetWidth,I.clientWidth],c=a.ceil(O/P),d=b[j],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[j]&&(f=a.max[g](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function bb(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||i);return d&&(e+=(J.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace(K,c)}function cb(a,b){var c=H[t]||I[t]||0,d=G.compatMode==="CSS1Compat"&&H[y]||I&&I[y]||H[y];return d<=a[E]().top-c-b}function db(a,e){var f,h,i,j,k,l,m=eb(function(){k=j=c},e);return function(){f=this,h=arguments;var c=function(){i=d,k&&a[g](f,h),m()};return i||(i=setTimeout(c,e)),j?k=b:l=a[g](f,h),m(),j=b,l}}function eb(a,b,c){var e;return function(){var f=this,h=arguments,i=function(){e=d,c||a[g](f,h)};c&&!e&&a[g](f,h),clearTimeout(e),e=setTimeout(i,b)}}function fb(a){var b=Array[s].slice[f](arguments,1);setTimeout(function(){return a[g](d,b)},1)}function gb(a){throw new Error("Riloadr: "+a)}function hb(a){var b=R[a],c=0,d;if(b)while(d=b[c])d(),c++}function ib(a,b){(R[a]=R[a]||[]).push(b)}function jb(a){if(G[v]===p)a();else{var b=function(){U(F,e,b),a()};T(F,e,b)}}"use strict";var a="on",b=!0,c=!1,d=null,e="load",f="call",g="apply",h="error",i="",j="length",k="scroll",l="resize",m=a+e,n=a+h,o="retries",p="complete",q="riloaded",r="className",s="prototype",t="clientTop",u="loadImages",v="readyState",w="orientation",x="attachEvent",y="clientHeight",z="EventListener",A="readystatechange",B="querySelectorAll",C="add"+z,D=w+"change",E="getBoundingClientRect",F=window,G=F.document,H=G.documentElement,I,J=/\?/,K=/{breakpoint-name}/gi,L=E in H,M=w in F&&a+D in F,N=B in G,O=F.screen.width,P=F.devicePixelRatio||1,Q,R={},S=Object[s].toString[f](F.operamini)==="[object OperaMini]",T,U,V,W,X,Y,Z;return H[r]=H[r].replace(/(^|\s)no-js(\s|$)/,"$1$2"),$.version="1.0.1",$[s].riload=function(){this[u](b)},!function(){var b=C in G,d=b?C:x,e=b?"remove"+z:"detachEvent",f=b?i:a;T=function(a,b,e){a[d](f+b,e,c)},U=function(a,b,d){a[e](f+b,d,c)}}(),V=function(){function j(a){if(!h){if(!G.body)return fb(j);h=b;while(a=g.shift())fb(a)}}function k(){if(!h){try{H.doScroll("left")}catch(a){return fb(k)}j()}}var a="DOMContentLoaded",f=c,g=[],h=c,i;if(G[v]===p)j();else{if(G[C])i=function(){U(G,a,i),j()},T(G,a,i);else if(G[x]){i=function(){G[v]===p&&(U(G,A,i),j())},T(G,A,i);try{f=F.frameElement==d}catch(l){}H.doScroll&&f&&k()}T(F,e,j)}return function(a){h?fb(a):g.push(a)}}(),$});