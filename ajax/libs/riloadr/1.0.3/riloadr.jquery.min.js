/*! 
 * Riloadr.js 1.0.3 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(["jquery"],a):window.Riloadr=a(jQuery)}(function(a){function R(b){function cb(){D==="belowfold"?E?(O||(O=c,L(y,l,W(function(){$(l)},250))),_(l,i[t]),P||(P=c,L(y,m,X(function(){$(m)},250))),_(m,i[t]),F&&(Q||(Q=c,N=y[u],L(y,x,X(function(){y[u]!==N&&(N=y[u],$(x))},250))),_(x,i[t])),i[t]()):bb(i[t]):D===f?bb(i[t]):i[t]()}function db(b){if(!R||b===c)R=R||[],a("img."+v,J).each(function(a,b){b&&!b[q]&&R.push(b)})}function eb(a,b){a[q]=c,a[p]=0,a[n]=fb,a[o]=gb,a.src=U(a,B,M),R.splice(b,1)}function fb(){var a=this;a[n]=a[o]=e,a[r]=a[r].replace(w,"$1$2"),n in b&&b[n][g](a)}function gb(){var a=this;H>0&&a[p]<H&&(a[p]++,a.src=U(a,B,M,c)),o in b&&b[o][g](a)}var i=this,s=b.breakpoints||Z('"breakpoints" not defined.'),v=b.name||"responsive",w=new RegExp("(^|\\s)"+v+"(\\s|$)"),B=b.base||j,D=(b.defer+j).toLowerCase()||d,E=D==="belowfold"&&!K,G=+b.foldDistance||100,H=+b[p]||0,J,M,R;i[t]=function(){var a=arguments;Y(function(b,c){db[h](e,a);if(R[k]){c=0;while(b=R[c])b&&!b[q]&&(E?V(b,G)||(eb(b,c),c--):(eb(b,c),c--)),c++;b=e}})},ab(function(){z=a(y),C=A.body,J=b.root&&a("#"+b.root)||C,I=I||T(),M=S(s,I),cb()})}function S(a,b){var c=j,d=b,e=0,f,g,h,i,k;while(f=a[e]){g=f.name,h=f.minWidth,i=f.maxWidth,k=f.minDevicePixelRatio;if(b>0){if(h&&i&&b>=h&&b<=i||h&&!i&&b>=h||i&&!h&&b<=i)k?H>=k&&(c=g):c=g}else if(d<=0||h<d||i<d)d=h||i||d,c=g;e++}return c+j}function T(){var a=Math,b=[B.clientWidth,B.offsetWidth,C.clientWidth],c=a.ceil(G/H),d=b[k],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[k]&&(f=a.max[h](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function U(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||j);return d&&(e+=(D.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace(E,c)}function V(b,c){return z.height()+z.scrollTop()<=a(b).offset().top-c}function W(a,b){var f,g,i,j,k,l,m=X(function(){k=j=d},b);return function(){f=this,g=arguments;var d=function(){i=e,k&&a[h](f,g),m()};return i||(i=setTimeout(d,b)),j?k=c:l=a[h](f,g),m(),j=c,l}}function X(a,b,c){var d;return function(){var f=this,g=arguments,i=function(){d=e,c||a[h](f,g)};c&&!d&&a[h](f,g),clearTimeout(d),d=setTimeout(i,b)}}function Y(a){var b=Array[s].slice[g](arguments,1);setTimeout(function(){return a[h](e,b)},1)}function Z(a){throw new Error("Riloadr: "+a)}function $(a){var b=J[a],c=0,d;if(b)while(d=b[c])d(),c++}function _(a,b){(J[a]=J[a]||[]).push(b)}function ab(b){a(b)}function bb(a){if(A.readyState==="complete")a();else{var b=function(){M(y,f,b),a()};L(y,f,b)}}"use strict";var b="on",c=!0,d=!1,e=null,f="load",g="call",h="apply",i="error",j="",k="length",l="scroll",m="resize",n=b+f,o=b+i,p="retries",q="riloaded",r="className",s="prototype",t="loadImages",u="orientation",v="EventListener",w="add"+v,x=u+"change",y=window,z,A=y.document,B=A.documentElement,C,D=/\?/,E=/{breakpoint-name}/gi,F=u in y&&b+x in y,G=y.screen.width,H=y.devicePixelRatio||1,I,J={},K=Object[s].toString[g](y.operamini)==="[object OperaMini]",L,M,N,O,P,Q;return B[r]=B[r].replace(/(^|\s)no-js(\s|$)/,"$1$2"),R.version="1.0.3",R[s].riload=function(){this[t](c)},!function(){var a=w in A,c=a?w:"attachEvent",e=a?"remove"+v:"detachEvent",f=a?j:b;L=function(a,b,e){a[c](f+b,e,d)},M=function(a,b,c){a[e](f+b,c,d)}}(),R});