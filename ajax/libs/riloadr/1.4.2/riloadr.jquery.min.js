/*! Riloadr.js 1.4.2 (c) 2013 Tubal Martin - MIT license */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):window.Riloadr=a(jQuery)}(function(a){"use strict";function gb(b){function cb(){ab=mb(),X=hb(j,ab,F),Z=X[B]&&jb(j,X[B]),$=$||z&&ib(j),bb=D&&kb(X,$)}function db(){var b,a=0;if(P&&yb(S,t,P),L&&(yb(S,r,N),_&&(fb=S[K],yb(S,O,U)),x))for(;b=x[a];)yb(T[M](b),r,N),a++}function gb(){var b,a=0;if(z||P&&zb(S,t,P),L&&!z){if(zb(S,r,N),x)for(;b=x[a];)zb(T[M](b),r,N),a++;_&&zb(S,O,U)}}function pb(a,b){a[w]=0,a[B]=g,a[u]=qb,a[v]=rb,a.src=nb(a,f,X),V.splice(b,1)}function qb(){var a=this;a[u]=a[v]=i,a[A]&&(a[C]=a[C].replace(m,"$1$2")),L&&(a.style.visibility="visible"),u in b&&b[u][k](a),sb()}function rb(){var a=this;v in b&&b[v][k](a),a[w]<G?(a[w]++,a.src=nb(a,f,a[B]?Z:X,d)):B in X&&!a[B]?(a[w]=0,a[B]=d,a.src=nb(a,f,Z)):sb()}function sb(){W--,0==W&&(gb(),H in b&&b[H]())}var X,Y,$,bb,c=this,f=b.base||o,j=b.breakpoints||xb('"breakpoints" not defined.'),l=b.name||"responsive",m=new RegExp("(^|\\s)"+l+"(\\s|$)"),n=b.defer&&("string"==typeof b.defer?{mode:b.defer,threshold:b.foldDistance,overflownElemsIds:[]}:b.defer),p=n&&n.mode.toLowerCase(),s=n&&n.threshold||100,x=n&&n.overflownElemsIds,y=b.watchViewportWidth,z=!!y,D="wider"==y,E="*"==y,F=b.ignoreLowBandwidth||g,G=b[w]||0,I=b.root||i,L=("invisible"==p||"belowfold"==p)&&!eb,N=L&&tb(function(){c[J]()},h),P=(L||z)&&ub(function(){z&&cb(),c[J](z)},h),U=L&&ub(function(){S[K]!==fb&&(fb=S[K],c[J]())},h),V=[],W=0,Z={};c[J]=function(b){wb(function(c,e){if(V[q]&&b!==d||(b&&db(),a("img."+l,I).each(function(a,b){b&&!b[A]&&((!z||z&&(!Y||D&&lb(X,Y)||E&&!kb(X,Y)))&&(V.push(b),W++),(!z||bb)&&(b[A]=d))}),bb&&(z=g),z&&(Y=X)),V[q])for(e=0;c=V[e];)c&&(!L||L&&ob(c,s))&&(pb(c,e),e--),e++;c=i})},Ab(function(){Q=a(S),R=T[e],I=I&&a("#"+I)||R,cb(),db(),!p||L?c[J]():Bb(c[J])})}function hb(a,b,c){for(var g,h,i,j,d=b,e=0,f={};g=a[e];)h=g[x],i=g[y],j=g[P],b>0?(h&&i&&b>=h&&i>=b||h&&!i&&b>=h||i&&!h&&i>=b)&&(!j||j&&cb>=j&&(c||!c&&!db))&&(f=g):(0>=d||d>h||d>i)&&(d=h||i||d,f=g),e++;return f}function ib(a){for(var d,b=0,c={};d=a[b];)lb(d,c)&&(c=d),b++;return c}function jb(a,b){for(var d,c=0;d=a[c];){if(d.name==b)return d;c++}}function kb(a,b){return a.name===b.name&&a[x]===b[x]&&a[y]===b[y]&&a[P]===b[P]&&a[D]===b[D]}function lb(a,b){var c=+a[P]||1,d=+b[P]||1;return a=Math.max(+a[x]||0,+a[y]||0)*(cb>=c?c:1),b=Math.max(+b[x]||0,+b[y]||0)*(cb>=d?d:1),a>b}function mb(){for(var f,a=Math,b=[U.clientWidth,U.offsetWidth,R.clientWidth],c=a.ceil(bb/cb),d=b[q],e=0;d>e;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[q]&&(f=a.max[l](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function nb(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||o);return c[D]&&(e=e.split("."),e.pop(),e=e.join(".")+"."+c[D]),d&&(e+=(Z.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace($,c.name)}function db(){var a=S.navigator,b=a.connection||a.mozConnection||a.webkitConnection||a.oConnection||a.msConnection||{},c=b.type||"unknown",d=+b.bandwidth||1/0;return d>0&&.1>d||/^[23]g|3|4$/.test(c+o)}function ob(b,c){var d=a(b);return!(pb(d,c)||qb(d,c)||rb(d,c)||sb(d,c))}function pb(a,b){return Q[p]()+Q[G]()<=a[s]()[c]-b}function qb(a,b){return Q[G]()>=a[s]()[c]+b+a[p]()}function rb(a,b){return Q[n]()+Q[I]()<=a[s]()[f]-b}function sb(a,b){return Q[I]()>=a[s]()[f]+b+a[n]()}function tb(a,b){function h(){g=new Date,f=i,a[l](e,c)}var c,d,e,f,g=0;return function(){var i=new Date,j=b-(i-g);return c=arguments,e=this,0>=j?(g=i,d=a[l](e,c)):f||(f=vb(h,j)),d}}function ub(a,b,c){function h(){g=i,c||a[l](f,d)}var d,e,f,g;return function(){var i=c&&!g;return d=arguments,f=this,clearTimeout(g),g=vb(h,b),i&&(e=a[l](f,d)),e}}function vb(a,b){var c=Array[E].slice[k](arguments,2);return S.setTimeout(function(){return a[l](i,c)},b)}function wb(a){return vb[l](i,[a,1].concat(Array[E].slice[k](arguments,1)))}function xb(a){throw new Error("Riloadr: "+a)}function yb(a,b,c){a[X](W+b,c,g)}function zb(a,b,c){a[Y](W+b,c,g)}function Ab(b){a(b)}function Bb(a){if(T.readyState===z)a();else{var b=function(){zb(S,j,b),a()};yb(S,j,b)}}var Q,R,ab,fb,b="on",c="top",d=!0,e="body",f="left",g=!1,h=250,i=null,j="load",k="call",l="apply",m="error",n="width",o="",p="height",q="length",r="scroll",s="offset",t="resize",u=b+j,v=b+m,w="retries",x="minWidth",y="maxWidth",z="complete",A="riloaded",B="fallback",C="className",D="imgFormat",E="prototype",G=r+"Top",H=b+z,I=r+"Left",J=j+"Images",K="orientation",L="EventListener",M="getElementById",N="add"+L,O=K+"change",P="minDevicePixelRatio",S=window,T=S.document,U=T.documentElement,V=N in T,W=V?o:b,X=V?N:"attachEvent",Y=V?"remove"+L:"detachEvent",Z=/\?/,$=/{breakpoint-name}/gi,_=K in S&&b+O in S,bb=S.screen[n],cb=S.devicePixelRatio||1,db=db(),eb="[object OperaMini]"===Object[E].toString[k](S.operamini);return U[C]=U[C].replace(/(^|\s)no-js(\s|$)/,"$1$2"),gb.version="1.4.2",gb[E].riload=function(){this[J](d)},gb});