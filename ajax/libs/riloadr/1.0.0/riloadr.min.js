/*! 
 * Riloadr.js 1.0.0 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(a):window.Riloadr=a()}(function(){function S(a){function cb(){G==="belowfold"?H?(P||(P=b,L(x,i,V(function(){Z(i)},250))),$(i,f.loadImages),Q||(Q=b,L(x,j,W(function(){Z(j)},250))),$(j,f.loadImages),E&&(R||(R=b,O=x[r],L(x,v,W(function(){x[r]!==O&&(O=x[r],Z(v))},250))),$(v,f.loadImages)),f.loadImages()):_(f.loadImages):G===e?_(f.loadImages):f.loadImages()}function db(a){if(!bb||a===b){bb=bb||[];var c=F&&S[u]("img."+q)||S.getElementsByTagName("img"),e=0,f;while(f=c[e])f&&!f[o]&&(F||f[p].indexOf(q)>=0)&&bb.push(f),e++;c=f=d}}function eb(a,c){a[o]=b,a[m]=0,a[k]=fb,a[l]=gb,a.src=hb(a),bb.splice(c,1)}function fb(){var b=this;b[k]=b[l]=d,b[p]=b[p].replace(s,"$1$2"),k in a&&a[k].call(b)}function gb(){var c=this;M>0&&c[m]<M&&(c[m]++,c.src=hb(c,b)),l in a&&a[l].call(c)}function hb(a,b){var c=(a.getAttribute("data-base")||t)+(a.getAttribute("data-src")||g);return b&&(c+=(B.test(c)?"&":"?")+"riloadrts="+(new Date).getTime()),c.replace(C,ab)}function ib(a){var b="clientHeight",c="clientTop",d=z[c]||A[c]||0,e=y.compatMode==="CSS1Compat"&&z[b]||A&&A[b]||z[b];return e<=a[w]().top-d-J}var f=this,n=a.breakpoints||Y('"breakpoints" not defined.'),q=a.name||"responsive",s=new RegExp("(^|\\s)"+q+"(\\s|$)"),t=a.base||g,G=(a.defer+g).toLowerCase()||c,H=D&&G==="belowfold"&&!K,J=+a.foldDistance||100,M=+a[m]||0,S,ab,bb;f.loadImages=function(){var a=arguments;X(function(b,c){db.apply(d,a);if(bb[h]){c=0;while(b=bb[c])b&&!b[o]&&(H?ib(b)||(eb(b,c),c--):(eb(b,c),c--)),c++;b=d}})},f.riload=function(){f.loadImages(b)},N(function(){A=y.body,S=a.root&&y.getElementById(a.root)||A,I=I||U(),ab=T(n,I),cb()})}function T(a,b){var c=g,d=b,e=0,f,h,i,j,k;while(f=a[e]){h=f.name,i=f.minWidth,j=f.maxWidth,k=f.minDevicePixelRatio;if(b>0){if(i&&j&&b>=i&&b<=j||i&&!j&&b>=i||j&&!i&&b<=j)k?H>=k&&(c=h):c=h}else d<=0?(d=i?i:j?j:d,c=h):(i<d&&(d=i,c=h),j<d&&(d=j,c=h));e++}return c+g}function U(){var a=Math,b=[z.clientWidth,z.offsetWidth,A.clientWidth],c=a.ceil(G/H),d=b[h],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[h]&&(f=a.max.apply(a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function V(a,e){var f,g,h,i,j,k,l=W(function(){j=i=c},e);return function(){f=this,g=arguments;var c=function(){h=d,j&&a.apply(f,g),l()};return h||(h=setTimeout(c,e)),i?j=b:k=a.apply(f,g),l(),i=b,k}}function W(a,b,c){var e;return function(){var f=this,g=arguments,h=function(){e=d,c||a.apply(f,g)};c&&!e&&a.apply(f,g),clearTimeout(e),e=setTimeout(h,b)}}function X(a){var b=Array.prototype.slice.call(arguments,1);setTimeout(function(){return a.apply(d,b)},1)}function Y(a){throw new Error("Riloadr: "+a)}function Z(a){var b=J[a],c=0,d;if(b)while(d=b[c])d(),c++}function $(a,b){(J[a]=J[a]||[]).push(b)}function _(a){if(y[q]===n)a();else{var b=function(){M(x,e,b),a()};L(x,e,b)}}"use strict";var a="on",b=!0,c=!1,d=null,e="load",f="error",g="",h="length",i="scroll",j="resize",k=a+e,l=a+f,m="retries",n="complete",o="riloaded",p="className",q="readyState",r="orientation",s="EventListener",t="readystatechange",u="querySelectorAll",v=r+"change",w="getBoundingClientRect",x=window,y=x.document,z=y.documentElement,A,B=/\?/,C=/{breakpoint-name}/gi,D=w in z,E=r in x&&a+v in x,F=u in y,G=x.screen.width,H=x.devicePixelRatio||1,I,J={},K=Object.prototype.toString.call(x.operamini)==="[object OperaMini]",L,M,N,O,P,Q,R;return z[p]=z[p].replace(/(^|\s)no-js(\s|$)/,"$1$2"),S.version="1.0.0",!function(){var b="add"+s in y,d=b?"add"+s:"attachEvent",e=b?"remove"+s:"detachEvent",f=b?g:a;L=function(a,b,e){a[d](f+b,e,c)},M=function(a,b,d){a[e](f+b,d,c)}}(),N=function(){function l(a){if(!j){if(!y.body)return X(l);j=b;while(a=i.shift())X(a)}}function m(){if(!j){try{z.doScroll("left")}catch(a){return X(m)}l()}}var a="DOMContentLoaded",f="add"+s,g="attachEvent",h=c,i=[],j=c,k;if(y[q]===n)l();else{if(y[f])k=function(){M(y,a,k),l()},L(y,a,k);else if(y[g]){k=function(){y[q]===n&&(M(y,t,k),l())},L(y,t,k);try{h=x.frameElement==d}catch(o){}z.doScroll&&h&&m()}L(x,e,l)}return function(a){j?X(a):i.push(a)}}(),S});