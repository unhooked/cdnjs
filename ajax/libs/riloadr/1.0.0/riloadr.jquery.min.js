/*! 
 * Riloadr.js 1.0.0 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(["jquery"],a):window.Riloadr=a()}(function(){function N(a){function ab(){D==="belowfold"?F?(K||(K=b,H(t,j,Q(function(){U(j)},250))),V(j,f.loadImages),L||(L=b,H(t,k,R(function(){U(k)},250))),V(k,f.loadImages),B&&(M||(M=b,J=t[q],H(t,s,R(function(){t[q]!==J&&(J=t[q],U(s))},250))),V(s,f.loadImages)),f.loadImages()):X(f.loadImages):D===e?X(f.loadImages):f.loadImages()}function bb(a){if(!_||a===b)_=_||[],y("img."+r,Y).each(function(a,b){b&&!b[o]&&_.push(b)})}function cb(a,c){a[o]=b,a[n]=0,a[l]=db,a[m]=eb,a.src=fb(a),_.splice(c,1)}function db(){var b=this;b[l]=b[m]=d,b[p]=b[p].replace(w,"$1$2"),l in a&&a[l].call(b)}function eb(){var c=this;N>0&&c[n]<N&&(c[n]++,c.src=fb(c,b)),m in a&&a[m].call(c)}function fb(a,b){var c=(a.getAttribute("data-base")||C)+(a.getAttribute("data-src")||g);return b&&(c+=(z.test(c)?"&":"?")+"riloadrts="+(new Date).getTime()),c.replace(A,Z)}function gb(a){return u.height()+u.scrollTop()<=y(a).offset().top-I}var f=this,i=a.breakpoints||T('"breakpoints" not defined.'),r=a.name||"responsive",w=new RegExp("(^|\\s)"+r+"(\\s|$)"),C=a.base||g,D=(a.defer+g).toLowerCase()||c,F=D==="belowfold"&&!G,I=+a.foldDistance||100,N=+a[n]||0,Y,Z,_;f.loadImages=function(){var a=arguments;S(function(b,c){bb.apply(d,a);if(_[h]){c=0;while(b=_[c])b&&!b[o]&&(F?gb(b)||(cb(b,c),c--):(cb(b,c),c--)),c++;b=d}})},f.riload=function(){f.loadImages(b)},W(function(){u=y(t),x=v.body,Y=a.root&&y("#"+a.root)||x,E=E||P(),Z=O(i,E),ab()})}function O(a,b){var c=g,d=b,e=0,f,h,i,j,k;while(f=a[e]){h=f.name,i=f.minWidth,j=f.maxWidth,k=f.minDevicePixelRatio;if(b>0){if(i&&j&&b>=i&&b<=j||i&&!j&&b>=i||j&&!i&&b<=j)k?D>=k&&(c=h):c=h}else d<=0?(d=i?i:j?j:d,c=h):(i<d&&(d=i,c=h),j<d&&(d=j,c=h));e++}return c+g}function P(){var a=Math,b=[w.clientWidth,w.offsetWidth,x.clientWidth],c=a.ceil(C/D),d=b[h],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[h]&&(f=a.max.apply(a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function Q(a,e){var f,g,h,i,j,k,l=R(function(){j=i=c},e);return function(){f=this,g=arguments;var c=function(){h=d,j&&a.apply(f,g),l()};return h||(h=setTimeout(c,e)),i?j=b:k=a.apply(f,g),l(),i=b,k}}function R(a,b,c){var e;return function(){var f=this,g=arguments,h=function(){e=d,c||a.apply(f,g)};c&&!e&&a.apply(f,g),clearTimeout(e),e=setTimeout(h,b)}}function S(a){var b=Array.prototype.slice.call(arguments,1);setTimeout(function(){return a.apply(d,b)},1)}function T(a){throw new Error("Riloadr: "+a)}function U(a){var b=F[a],c=0,d;if(b)while(d=b[c])d(),c++}function V(a,b){(F[a]=F[a]||[]).push(b)}function W(a){y(a)}function X(a){if(v.readyState==="complete")a();else{var b=function(){I(t,e,b),a()};H(t,e,b)}}"use strict";var a="on",b=!0,c=!1,d=null,e="load",f="error",g="",h="length",i="jQuery",j="scroll",k="resize",l=a+e,m=a+f,n="retries",o="riloaded",p="className",q="orientation",r="EventListener",s=q+"change",t=window,u,v=t.document,w=v.documentElement,x,y=i in t&&t[i]||T(i+" not found."),z=/\?/,A=/{breakpoint-name}/gi,B=q in t&&a+s in t,C=t.screen.width,D=t.devicePixelRatio||1,E,F={},G=Object.prototype.toString.call(t.operamini)==="[object OperaMini]",H,I,J,K,L,M;return w[p]=w[p].replace(/(^|\s)no-js(\s|$)/,"$1$2"),N.version="1.0.0",!function(){var b="add"+r in v,d=b?"add"+r:"attachEvent",e=b?"remove"+r:"detachEvent",f=b?g:a;H=function(a,b,e){a[d](f+b,e,c)},I=function(a,b,d){a[e](f+b,d,c)}}(),N});