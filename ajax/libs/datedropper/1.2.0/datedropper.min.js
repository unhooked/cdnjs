

	//////////////////////////////////////
	// DATEDROPPER Version 1.2	    	//
	// Last Updates: 26/02/2015	    	//
	//				    				//
	// Made with love by		    	//
	// Felice Gattuso		    		//
	//////////////////////////////////////
	

$.fn.dateDropper=function(e){if(this.is("input")&&"text"==this.attr("type")){var a=(new Date).getFullYear(),i=(new Date).getDate(),r=(new Date).getMonth(),s=$.extend({animate_current:!0,animation:"fadein",format:"m/d/Y",lang:"en",lock:!1,maxYear:a,minYear:1970,placeholder:!1,years_multiple:10,color:"#f87a54",textColor:"#000000",bgColor:"#FFFFFF",borderColor:"#000000",borderRadius:8,boxShadow:"0 0px 0px 6px rgba(0,0,0,0.05)"},e),t=this,o=$(".dd_wrap").length+1,_=function(d){return!(d%4||!(d%100)&&d%400)},u=100,f=/^#[0-9A-F]{6}$/i.test(s.color),v=0;f||(s.color="#f87a54"),s.maxYear<a&&(a=s.maxYear);var c=function(d){for(var e=s.minYear;e<=s.maxYear;e++){var a=e%s.years_multiple;if(0==a&&(d>=e&&d<e+s.years_multiple||e>d))return v=e,e}};switch(s.lang){case"it":var m=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],b=["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"];break;case"hu":var m=["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],b=["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"];break;case"es":var m=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],b=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];break;case"de":var m=["Januar","Februar","Marz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],b=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"];break;case"nl":var m=["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],b=["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"];break;case"fr":var m=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],b=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];break;case"pt":var m=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],b=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];break;case"si":var m=["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december"],b=["nedelja","ponedeljek","torek","sreda","četrtek","petek","sobota"];break;default:var m=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}$('<div class="dd_wrap" id="dd_'+o+'"><div class="dd_overlay"></div><div class="dd_"></div></div>').appendTo("body");var p=$("#dd_"+o),h=p.find(".dd_");if(dd_overlay=p.find(".dd_overlay"),$(window).on("resize",function(){h.css({top:t.offset().top+(t.height()+12),left:t.offset().left+(t.outerWidth()/2-u/2)-2})}),$("<style>#dd_"+o+" .dd_ {border-color: "+s.borderColor+"; background: "+s.bgColor+"; border-radius: "+s.borderRadius+"px; -moz-border-radius: "+s.borderRadius+"px; -webkit-border-radius: "+s.borderRadius+"px; color: "+s.textColor+";box-shadow: "+s.boxShadow+";-webkit-box-shadow: "+s.boxShadow+";-moz-box-shadow: "+s.boxShadow+";}#dd_"+o+" .dd_ .dd_submit,#dd_"+o+" .dd_ .dd_r_ ul li.dd_sltd_  { background-color: "+s.color+"; } #dd_"+o+" .dd_ .dd_d_ .dd_sl_ ul li em , #dd_"+o+" .dd_ .dd_d_ .dd_sl_ ul li.dd_sunday,#dd_"+o+" .dd_ .dd_all_ ul li.dd_sunday{ color: "+s.color+"; }#dd_"+o+" .dd_ .dd_all_ ul li.dd_sunday{ border-bottom: 2px solid "+s.color+"; } #dd_"+o+" .dd_ .dd_r_ ul li:hover,#dd_"+o+" .dd_ .dd_r_ ul li.dd_sltd_,#dd_"+o+" .dd_ .dd_r_ ul li {border-color: "+s.color+"; } #dd_"+o+" .dd_ .dd_submit {-webkit-border-bottom-right-radius: "+(s.borderRadius-3)+"px;-webkit-border-bottom-left-radius: "+(s.borderRadius-3)+"px;-moz-border-radius-bottomright: "+(s.borderRadius-3)+"px;-moz-border-radius-bottomleft: "+(s.borderRadius-3)+"px;border-bottom-right-radius: "+(s.borderRadius-3)+"px;border-bottom-left-radius: "+(s.borderRadius-3)+"px;}#dd_"+o+" .dd_:after {background:"+s.bgColor+";border-top-color:"+s.borderColor+";border-left-color:"+s.borderColor+";}#dd_"+o+" .dd_ .dd_r_ ul li,#dd_"+o+" .dd_ .dd_all_ {background:"+s.bgColor+";}#dd_"+o+" .dd_ .dd_all_{box-shadow: inset 0 -2px 0 "+s.color+";}#dd_"+o+" .dd_ .dd_r_:after{border-bottom: 2px solid "+s.color+"}</style>").appendTo("head"),t.attr({readonly:"readonly"}).addClass("dd_locked"),t.val()){var g=t.val(),C=g.match(/(?:\d{4}|\d{1,2})/g),k=s.format.match(/[a-zA-Z]+/g),y=null,w=null,Y=null;if(C){for(var S=0;S<=C.length;S++)C[S]&&(4==C[S].length?y=C[S]:C[S].length<=2&&C[S].length>0&&(C[S]<=12&&"m"==k[S]||"n"==k[S]?Y=C[S]:w=C[S]));10>Y&&2==Y.length&&(Y=Y.substr(1)),10>w&&2==w.length&&(w=w.substr(1)),null==w&&(w=i),null==Y&&(Y=r),null==y&&(y=a)}y<s.minYear&&(s.minYear=y),y>s.maxYear&&(s.maxYear=y)}else s.placeholder&&t.val(s.placeholder);h.append('<div class="dd_sw_ dd_m_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),h.append('<div class="dd_sw_ dd_d_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),h.append('<div class="dd_sw_ dd_y_"><a class="dd_nav_ dd_prev_"></a><a class="dd_nav_ dd_next_"></a><div class="dd_sl_"></div></div>'),h.append('<div class="dd_all_ dd_a_d_"></div>'),h.append('<div class="dd_all_ dd_a_m_"></div>'),h.append('<div class="dd_all_ dd_a_y_"></div>'),s.years_multiple&&h.append('<div class="dd_r_"></div>'),h.append('<div class="dd_submit"></div>');var z=h.find(".dd_m_"),J=h.find(".dd_d_"),L=h.find(".dd_y_"),A=h.find(".dd_a_d_"),R=h.find(".dd_a_m_"),T=h.find(".dd_a_y_"),N=h.find(".dd_r_"),O=h.find(".dd_submit");z.find(".dd_sl_").append("<ul></ul>"),R.append("<ul></ul>");for(var q=1;12>=q;q++)months=m[q-1].substr(0,3),z.find("ul").append('<li value="'+q+'">'+months+"</li>"),R.find("ul").append('<li value="'+q+'">'+q+"</li>");J.find(".dd_sl_").append("<ul></ul>"),A.append("<ul></ul>");for(var G=1;31>=G;G++)ddd=10>G?"0"+G:G,J.find("ul").append('<li value="'+G+'">'+ddd+"<em ></em></li>"),A.find("ul").append('<li value="'+G+'">'+ddd+"</li>");L.find(".dd_sl_").append("<ul></ul>");for(var V=s.minYear;V<=s.maxYear;V++)bissextile_return=_(V),L.find("ul").append('<li value="'+V+'" data-filter="'+bissextile_return+'">'+V+"</li>");if(s.years_multiple){N.append("<ul></ul>"),T.append("<ul></ul>");for(var W=s.minYear;W<=s.maxYear;W++){var Q=W%s.years_multiple;0==Q&&N.find("ul").append('<li value="'+W+'"></li>')}{u/N.find("li").length}}var E=function(){J.find("li").eq(i-1).addClass("dd_sltd_"),z.find("li").eq(r).addClass("dd_sltd_"),L.find("li[value="+a+"]").addClass("dd_sltd_"),s.years_multiple&&N.find("li[value="+c(a)+"]").addClass("dd_sltd_")},I=function(){J.find("li").eq(w-1).addClass("dd_sltd_"),z.find("li").eq(Y-1).addClass("dd_sltd_"),L.find("li[value="+y+"]").addClass("dd_sltd_"),s.years_multiple&&N.find("li[value="+c(y)+"]").addClass("dd_sltd_")},Z=function(){z.find(".dd_sl_").animate({scrollLeft:z.find("li.dd_sltd_").index()*u},1200,"swing"),setTimeout(function(){J.find(".dd_sl_").animate({scrollLeft:J.find("li.dd_sltd_").index()*u},1200,"swing"),setTimeout(function(){L.find(".dd_sl_").animate({scrollLeft:L.find("li.dd_sltd_").index()*u},1200,"swing")},200)},400)},B=function(){z.find(".dd_sl_").scrollLeft(z.find("li.dd_sltd_").index()*u),J.find(".dd_sl_").scrollLeft(J.find("li.dd_sltd_").index()*u),L.find(".dd_sl_").scrollLeft(L.find("li.dd_sltd_").index()*u)};switch(w||Y||y?I():E(),"Y"!=s.format&&"m"!=s.format&&(J.find("li").click(function(){var d=J.find("li.dd_sltd_").attr("value");A.find("li").removeClass("dd_sltd_"),A.find("li[value="+d+"]").addClass("dd_sltd_"),A.addClass("dd_open_")}),A.find("li").click(function(){var d=$(this).attr("value");J.find("li[value="+d+"]").click(),A.removeClass("dd_open_"),H()}),z.find("li").click(function(){var d=z.find("li.dd_sltd_").attr("value");R.find("li").removeClass("dd_sltd_"),R.find("li[value="+d+"]").addClass("dd_sltd_"),R.addClass("dd_open_")}),R.find("li").click(function(){var d=$(this).attr("value");z.find("li[value="+d+"]").click(),R.removeClass("dd_open_"),H()}),L.find("li").click(function(){T.find("ul").empty();var d=N.find("li.dd_sltd_").attr("value"),e=L.find("li.dd_sltd_").attr("value"),a=parseInt(d)+9;a>s.maxYear&&(a=s.maxYear),T.find("li").removeClass("dd_sltd_");for(var l=d;a>=l;l++)T.find("ul").append('<li value="'+l+'">'+l+"</li>");T.find("li[value="+e+"]").addClass("dd_sltd_"),T.addClass("dd_open_"),T.find("li").click(function(){var d=$(this).attr("value");L.find("li[value="+d+"]").click(),T.removeClass("dd_open_"),H()})})),s.format){case"Y":z.hide(),J.hide();break;case"m":L.hide(),N.hide(),J.hide()}var H=function(){var e=J.find("li.dd_sltd_").attr("value"),a=z.find("li.dd_sltd_").attr("value"),l=L.find("li.dd_sltd_").attr("value"),i=N.find("li.dd_sltd_"),r=L.find("li.dd_sltd_").attr("data-filter");A.find("li").show(),"true"==r&&"2"==a?(J.find("ul").width(29*u),(30==e||31==e)&&(J.find("li").removeClass("dd_sltd_"),J.find("li[value=29]").addClass("dd_sltd_")),A.find("li[value=30],li[value=31]").hide()):"true"!=r&&"2"==a?(J.find("ul").width(28*u),(29==e||30==e||31==e)&&(J.find("li").removeClass("dd_sltd_"),J.find("li[value=28]").addClass("dd_sltd_")),A.find("li[value=29],li[value=30],li[value=31]").hide()):"11"==a||"4"==a||"6"==a||"9"==a?(J.find("ul").width(30*u),31==e&&(J.find("li").removeClass("dd_sltd_"),J.find("li[value=30]").addClass("dd_sltd_")),A.find("li[value=31]").hide()):J.find("ul").width(31*u),J.find("li").each(function(){tod=$(this).attr("value"),d=new Date(a+"/"+tod+"/"+l),x=d.getDay(),0==x?$(this).addClass("dd_sunday"):$(this).removeClass("dd_sunday"),$(this).find("em").html(b[x])}),A.find("li").each(function(){tod=$(this).attr("value"),d=new Date(a+"/"+tod+"/"+l),x=d.getDay(),0==x?$(this).addClass("dd_sunday"):$(this).removeClass("dd_sunday")}),s.years_multiple&&(next=i.next("li"),prev=i.prev("li"),l>=next.attr("value")&&next.length?(v=next.attr("value"),N.find("li").removeClass("dd_sltd_"),next.addClass("dd_sltd_")):v>l&&prev.length&&(v=prev.attr("value"),N.find("li").removeClass("dd_sltd_"),prev.addClass("dd_sltd_")))},K=function(d){t.val(d).change(),h.addClass("dd_fadeout").removeClass("dd_"+s.animation),setTimeout(function(){h.hide().removeClass("dd_fadeout"),p.hide()},300)},P=function(){h.addClass("dd_alert").removeClass("dd_"+s.animation),setTimeout(function(){h.removeClass("dd_alert")},500)};s.years_multiple&&N.find("li").on("click",function(){N.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_");var d=$(this).attr("value");v=d,L.find(".dd_sl_").stop().animate({scrollLeft:L.find("li[value="+d+"]").index()*u},600,"swing"),L.find("li").removeClass("dd_sltd_"),L.find("li[value="+d+"]").addClass("dd_sltd_"),H()}),h.find(".dd_sw_").each(function(){var d=$(this).find(".dd_sl_"),e=$(this).find(".dd_nav_"),a=d.find("li.dd_sltd_").index()*u,l=function(){scroll_left=d.scrollLeft(),scroll_left>=a+u/2&&(a+=u),scroll_left<=a-u/2&&(a-=u)};d.find("ul").width(d.find("li").length*u),d.on("scroll mousemove",function(){l()}),e.click(function(){obj=$(this).hasClass("dd_next_")?d.find("li.dd_sltd_").next("li"):d.find("li.dd_sltd_").prev("li"),obj.length&&(d.stop().animate({scrollLeft:obj.index()*u},200),d.find("li").removeClass("dd_sltd_"),obj.addClass("dd_sltd_"),H())}),d.on("touchend",function(){d.stop().animate({scrollLeft:a},200);var e=a/u;d.find("li").removeClass("dd_sltd_"),d.find("li").eq(e).addClass("dd_sltd_"),H()}),d.find("li").click(function(){d.animate({scrollLeft:$(this).index()*u},200),d.find("li").removeClass("dd_sltd_"),$(this).addClass("dd_sltd_")})}),H(),t.click(function(){p.show(),h.css({top:t.offset().top+(t.height()+12),left:t.offset().left+(t.outerWidth()/2-u/2)-2}).show().addClass("dd_"+s.animation),t.hasClass("dd_locked")?(t.removeClass("dd_locked"),0!=s.animate_current?Z():B()):B()}),dd_overlay.click(function(){h.addClass("dd_fadeout").removeClass("dd_"+s.animation),setTimeout(function(){h.hide().removeClass("dd_fadeout"),p.hide()},300),h.find(".dd_all_").removeClass("dd_open_")}),O.click(function(){var d=J.find("li.dd_sltd_").attr("value"),e=z.find("li.dd_sltd_").attr("value"),t=L.find("li.dd_sltd_").attr("value");if(10>d&&(d="0"+d),10>e&&(e="0"+e),x=new Date(e+"/"+d+"/"+t),x=x.getDay(),j=d.substr(1),D=b[x].substr(0,3),l=b[x],n=10>e?e.substr(1):e,M=m[n-1].substr(0,3),F=m[n-1],str=s.format.replace(/\b(Y)\b/i,t).replace(/\b(m)\b/i,e).replace(/\b(d)\b/i,d).replace(/\b(D)\b/i,D).replace(/\b(j)\b/i,j).replace(/\b(l)\b/i,l).replace(/\b(F)\b/i,F).replace(/\b(M)\b/i,M).replace(/\b(n)\b/i,n),s.lock){d1d=i,d1d<10&&(d1d="0"+d1d),d1m=r+1,d1m<10&&(d1m="0"+d1m),d1y=a;var o=Date.parse(d1y+"-"+d1m+"-"+d1d)/1e3,_=Date.parse(t+"-"+e+"-"+d)/1e3;"from"==s.lock?o>_?P():K(str):_>o?P():K(str)}else K(str)})}};