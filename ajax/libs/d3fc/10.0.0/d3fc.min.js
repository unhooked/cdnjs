/*! d3fc 11-06-2016 */

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("d3"),require("css-layout")):"function"==typeof define&&define.amd?define(["d3","css-layout"],b):a.fc=b(a.d3,a.computeLayout)}(this,function(a,b){"use strict";function c(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function d(){return new c}function e(){return this}function f(a){return a}function g(a,b){return b}function h(a){}function i(){var a=arguments;return function(b,c){for(var d=0,e=a.length;e>d;d++)if(null==a[d](b,c))return!1;return!0}}function j(){var b="g",c=!1,d="g",e={},h=g,i=function(g,i){var j=i||f;g.selectAll&&g.node||(g=a.select(g));var k=g.selectAll(b);c&&(k=k.filter(function(){return this.parentNode===g.node()}));var l=k.data(j,h),m=l.enter().insert(d).attr(e).style("opacity",ec),n=a.transition(l.exit()).style("opacity",ec).remove();return l=a.transition(l).style("opacity",1),l.enter=a.functor(m),l.exit=a.functor(n),l};return i.selector=function(a){return arguments.length?(b=a,i):b},i.children=function(a){return arguments.length?(c=a,i):c},i.element=function(a){return arguments.length?(d=a,i):d},i.attr=function(a){if(!arguments.length)return e;if(1===arguments.length)e=arguments[0];else if(2===arguments.length){var b=arguments[0],c=arguments[1];e[b]=c}return i},i.key=function(a){return arguments.length?(h=a,i):h},i}function k(a){return a.rangeExtent}function l(a){if(!k(a))return a.range();var b=a.range(),c=a.rangeExtent();if(b.length<=1)return c;var d=b[0]>b[1];return d?[c[1],c[0]]:c}function m(a,b){k(a)?a.rangePoints(b,1):a.range(b)}function n(){var b,c,d,e,f=a.time.scale(),g=a.scale.linear(),i=function(){return l(f)[0]},k=function(){return l(f)[1]},m=function(){return l(g)[0]},n=function(){return l(g)[1]},o=h,p=j().selector("g.annotation").element("g").attr("class","annotation"),q=function(b){b.each(function(b,c){var d=a.select(this),e=p(d,b);e.enter().append("path").classed("band",!0);var f=_b().horizontalAlign("right").verticalAlign("top").x(i).y(m).height(function(){return n.apply(this,arguments)-m.apply(this,arguments)}).width(function(){return k.apply(this,arguments)-i.apply(this,arguments)});e.select("path").attr("d",function(a,b){return f.call(this,[a],b)}),o(e,b,c)})};return q.xScale=function(a){return arguments.length?(f=a,q):f},q.yScale=function(a){return arguments.length?(g=a,q):g},q.decorate=function(a){return arguments.length?(o=a,q):o},q.x0=function(c){return arguments.length?(b=a.functor(c),i=function(){return f(b.apply(this,arguments))},q):b},q.x1=function(b){return arguments.length?(c=a.functor(b),k=function(){return f(c.apply(this,arguments))},q):c},q.y0=function(b){return arguments.length?(d=a.functor(b),m=function(){return g(d.apply(this,arguments))},q):d},q.y1=function(b){return arguments.length?(e=a.functor(b),n=function(){return g(e.apply(this,arguments))},q):e},q}function o(){function b(a,b){return c[a]?c[a].apply(c,d):b}var c=a.scale.identity(),d=[10],e=null,f=function(){return null==e?b("ticks",c.domain()):e};return f.scale=function(a){return arguments.length?(c=a,f):c},f.ticks=function(a){return arguments.length?(d=arguments,f):d},f.tickValues=function(a){return arguments.length?(e=a,f):e},f}function p(){var a=o(),b=o(),c=h,d=h,e=j().selector("line.x").element("line").attr("class","x gridline"),f=j().selector("line.y").element("line").attr("class","y gridline"),g=function(g){g.each(function(g,h){var i=a.scale(),j=b.scale(),k=a(),m=e(this,k);m.attr({x1:i,x2:i,y1:l(j)[0],y2:l(j)[1]}),c(m,k,h);var n=b(),o=f(this,n);o.attr({x1:l(i)[0],x2:l(i)[1],y1:j,y2:j}),d(o,n,h)})};return g.yDecorate=function(a){return arguments.length?(d=a,g):d},g.xDecorate=function(a){return arguments.length?(c=a,g):c},kc(g,e,nc({key:"xKey"})),kc(g,f,nc({key:"yKey"})),kc(g,a,pc("x")),kc(g,b,pc("y")),g}function q(){var b=a.time.scale(),c=a.scale.linear(),d=f,e=g,i=d,k=h,m="horizontal",n=j().selector("g.annotation").element("g"),o=function(e){e.each(function(e,f){var g,h,j,o,p,q,r={x:-5,y:-5};switch(m){case"horizontal":j=function(a,b){return"translate("+a+", "+b+")"},o="x2",h=b,g=c,p="left-handle",q="right-handle";break;case"vertical":j=function(a,b){return"translate("+b+", "+a+")"},o="y2",h=c,g=b,r.transform="rotate(-90)",p="bottom-handle",q="top-handle";break;default:throw new Error("Invalid orientation")}var s=l(h),t=function(a){var b=g(d(a));return j(s[0],b)},u=s[1]-s[0],v=a.select(this);n.attr("class","annotation "+m);var w=n(v,e),x=w.enter().attr("transform",t);x.append("line").attr(o,u),x.append("g").classed(p,!0),x.append("g").classed(q,!0).attr("transform",j(u,0)).append("text").attr(r),w.attr("transform",t),w.select("line").attr(o,u),w.select("g."+q).attr("transform",j(u,0)),w.select("text").text(i),k(w,e,f)})};return o.xScale=function(a){return arguments.length?(b=a,o):b},o.yScale=function(a){return arguments.length?(c=a,o):c},o.value=function(b){return arguments.length?(d=a.functor(b),o):d},o.keyValue=function(b){return arguments.length?(e=a.functor(b),o):e},o.label=function(b){return arguments.length?(i=a.functor(b),o):i},o.decorate=function(a){return arguments.length?(k=a,o):k},o.orient=function(a){return arguments.length?(m=a,o):m},o}function r(){function b(a,b){return function(c){return b(a(c),0)}}function c(a,b){return e()?"translate("+b+", "+a+")":"translate("+a+", "+b+")"}function d(a){return e()?a.map(function(a){return[a[1],a[0]]}):a}function e(){return"left"===m||"right"===m}function g(a,b){var c=t.scale();return c[a]?c[a].apply(c,t.ticks()):b}var i=h,m="bottom",n=null,p=6,q=6,r=3,s=a.svg.line(),t=o(),u=j().selector("g.tick").element("g").key(f).attr("class","tick"),v=j().selector("path.domain").element("path").attr("class","domain"),w=function(h){h.each(function(h,j){var o=t.scale(),w=this.__chart__||o;this.__chart__=o.copy();var x=t(),y=null==n?g("tickFormat",f):n,z="bottom"===m||"right"===m?1:-1,A=a.select(this),B=l(o),C=d([[B[0],z*p],[B[0],0],[B[1],0],[B[1],z*p]]),D=v(A,[h]);D.attr("d",s(C)),u.attr({transform:b(k(o)?o:w,c)});var E=u(A,x);E.enter().append("path");var F=z*(q+r);E.enter().append("text").attr("transform",c(0,F)),E.attr("class","tick orient-"+m),E.attr("transform",b(o,c)),E.select("path").attr("d",function(a){return s(d([[0,0],[0,z*q]]))}),E.select("text").attr("transform",c(0,F)).attr("dy",function(){var a="0em";return e()?a="0.32em":"bottom"===m&&(a="0.71em"),a}).text(y),k(o)||E.exit().attr("transform",b(o,c)),i(E,h,j)})};return w.tickFormat=function(a){return arguments.length?(n=a,w):n},w.tickSize=function(a){var b=arguments.length;return b?(q=Number(a),p=Number(arguments[b-1]),w):q},w.innerTickSize=function(a){return arguments.length?(q=Number(a),w):q},w.outerTickSize=function(a){return arguments.length?(p=Number(a),w):p},w.tickPadding=function(a){return arguments.length?(r=a,w):r},w.orient=function(a){return arguments.length?(m=a,w):m},w.decorate=function(a){return arguments.length?(i=a,w):i},kc(w,t),w}function s(){var b=r(),c=a.functor(0),d=h,e=a.time.scale(),f=a.scale.linear(),g=j().selector("g.axis-adapter").element("g").attr({"class":"axis axis-adapter"}),i=function k(a){a.each(function(a,h){var i,j=g(this,[a]);switch(k.orient()){case"top":case"bottom":i="translate(0,"+f(c(a))+")",b.scale(e);break;case"left":case"right":i="translate("+e(c(a))+",0)",b.scale(f);break;default:throw new Error("Invalid orientation")}j.enter().attr("transform",i),j.attr("transform",i),j.call(b),d(j,a,h)})};return i.baseline=function(b){return arguments.length?(c=a.functor(b),i):c},i.decorate=function(a){return arguments.length?(d=a,i):d},i.xScale=function(a){return arguments.length?(e=a,i):e},i.yScale=function(a){return arguments.length?(f=a,i):f},a.rebind(i,b,"orient","ticks","tickValues","tickSize","innerTickSize","outerTickSize","tickPadding","tickFormat")}function t(b){var c=a.functor([0,0]),d=function(a,b){return[a.x,a.y]},e=b||function(a){return a},f=function(){},g=sc().selector("g.label").element("g").attr("class","label"),h=function(b){b.each(function(b,h){var i=this,j=g(this,b).call(f),k=j[0].map(function(b,e){var f=a.select(b).datum(),g=d.call(b,f,e),h=c.call(b,f,e);return{hidden:!1,x:g[0],y:g[1],width:h[0],height:h[1]}}),l=e(k);j.attr({style:function(a,b){return"display:"+(l[b].hidden?"none":"inherit")},transform:function(a,b){return"translate("+l[b].x+", "+l[b].y+")"},"layout-width":function(a,b){return l[b].width},"layout-height":function(a,b){return l[b].height},"anchor-x":function(a,b){return d.call(i,a,b)[0]-l[b].x},"anchor-y":function(a,b){return d.call(i,a,b)[1]-l[b].y}}),j.call(f)})};return xc(h,g,uc("key")),xc(h,e),h.size=function(b){return arguments.length?(c=a.functor(b),h):c},h.position=function(b){return arguments.length?(d=a.functor(b),h):d},h.component=function(a){return arguments.length?(f=a,h):f},h}function u(a,b,c,d,e){return{x:a,y:b,width:c,height:d,location:e}}function v(){var b=[0,0],c=function(c){var d=Cc(c),e=0;if(0!==b[0]&&0!==b[1]){var f={x:0,y:0,width:b[0],height:b[1]};e=a.sum(c.map(function(a){var b=a.width*a.height-Ac(a,f);return 2*b}))}return d+e},d=function(a){var b=[];return a.forEach(function(a){var d=Ec(a).map(function(a){var c=b.slice();return c.push(a),c});b=Dc(d,c)[1]}),b};return d.bounds=function(a){return arguments.length?(b=a,d):b},d}function w(b){var c=t(b),d=a.scale.identity(),e=a.scale.identity(),f=function(a){if(b&&b.bounds){var f=l(d),g=l(e);b.bounds([Math.max(f[0],f[1]),Math.max(g[0],g[1])])}a.call(c)};return kc(f,c),f.xScale=function(a){return arguments.length?(d=a,f):d},f.yScale=function(a){return arguments.length?(e=a,f):e},f}function x(){function b(){}var c=a.time.scale(),d=a.scale.linear(),e=a.functor(0),f=a.functor(0),g=function(a,b){return a.x},h=function(a,b){return a.y};return b.x0=function(a,b){return c(f(a,b))},b.y0=function(a,b){return d(e(a,b))},b.x=b.x1=function(a,b){return c(g(a,b))},b.y=b.y1=function(a,b){return d(h(a,b))},b.defined=function(a,b){return i(f,e,g,h)(a,b)},b.xScale=function(a){return arguments.length?(c=a,b):c},b.yScale=function(a){return arguments.length?(d=a,b):d},b.x0Value=function(c){return arguments.length?(f=a.functor(c),b):f},b.y0Value=function(c){return arguments.length?(e=a.functor(c),b):e},b.xValue=b.x1Value=function(c){return arguments.length?(g=a.functor(c),b):g},b.yValue=b.y1Value=function(c){return arguments.length?(h=a.functor(c),b):h},b}function y(){var b=h,c=x(),d=a.svg.line().defined(c.defined).x(c.x).y(c.y),e=j().selector("path.line").element("path").attr("class","line"),f=function(a){a.each(function(a,c){var f=e(this,[a]);f.attr("d",d),b(f,a,c)})};return f.decorate=function(a){return arguments.length?(b=a,f):b},a.rebind(f,c,"xScale","xValue","yScale","yValue"),a.rebind(f,e,"key"),a.rebind(f,d,"interpolate","tension"),f}function z(a){var b=a;return"number"==typeof b&&(b={top:a,bottom:a,left:a,right:a}),["top","bottom","left","right"].forEach(function(a){b[a]||(b[a]=0)}),b}function A(b,c){b=b||a.scale.linear(),c=c||a.scale.linear();var d={bottom:30,right:30},e="",f="",g=null,i=null,n="",o=y(),p=h,q=s().orient("bottom").baseline(function(){if(null!==g)return c(g.apply(this,arguments));var a=l(c);return"bottom"===q.orient()?a[0]:a[1]}),r=s().orient("right").baseline(function(){if(null!==i)return b(i.apply(this,arguments));var a=l(b);return"left"===r.orient()?a[0]:a[1]}),t=j().selector("svg.cartesian-chart").element("svg").attr({"class":"cartesian-chart","layout-style":"flex: 1"}),u=function(g){g.each(function(g,h){var i=a.select(this),j=t(i,[g]);j.enter().call(function(a){var b=a.append("g").classed("plot-area-container",!0);b.append("rect").classed("background",!0).layout({position:"absolute",top:0,bottom:0,left:0,right:0});var c=b.append("g").classed("axes-container",!0);c.append("g").classed("x-axis",!0).layout({height:0,width:0}),c.append("g").classed("y-axis",!0).layout({height:0,width:0}),b.append("svg").classed("plot-area",!0).layout({position:"absolute",top:0,bottom:0,left:0,right:0}),b.append("g").classed("x-axis label-container",!0).append("g").layout({height:0,width:0}).append("text").classed("label",!0).attr("dy","-0.5em"),b.append("g").classed("y-axis label-container",!0).append("g").layout({height:0,width:0}).append("text").classed("label",!0),b.append("g").classed("title label-container",!0).append("g").layout({height:0,width:0}).append("text").classed("label",!0)});var k=z(d);j.select(".plot-area-container").layout({position:"absolute",top:k.top,left:k.left,bottom:k.bottom,right:k.right}),j.select(".title").layout({position:"absolute",top:0,alignItems:"center",left:k.left,right:k.right});var l={position:"absolute",top:k.top,bottom:k.bottom,alignItems:"center",flexDirection:"row"};l[r.orient()]=0,j.select(".y-axis.label-container").attr("class","y-axis label-container "+r.orient()).layout(l);var s={position:"absolute",left:k.left,right:k.right,alignItems:"center"};s[q.orient()]=0,j.select(".x-axis.label-container").attr("class","x-axis label-container "+q.orient()).layout(s),i.layout(),j.select(".title .label").text(n),j.select(".y-axis.label-container .label").text(e).attr("transform","right"===r.orient()?"rotate(90)":"rotate(-90)"),j.select(".x-axis.label-container .label").text(f);var u=j.select(".plot-area");m(b,[0,u.layout("width")]),m(c,[u.layout("height"),0]),q.xScale(b).yScale(a.scale.identity()),r.yScale(c).xScale(a.scale.identity()),j.select(".axes-container .x-axis").call(q),j.select(".axes-container .y-axis").call(r),o.xScale(b).yScale(c),u.call(o),p(j,g,h)})},v=mc(/range\w*/,/tickFormat/);kc(u,b,v,mc("ticks"),pc("x")),kc(u,c,v,mc("ticks"),pc("y")),k(b)||kc(u,b,nc({ticks:"xScaleTicks"})),k(c)||kc(u,c,nc({ticks:"yScaleTicks"}));var w=mc("baseline","xScale","yScale");return kc(u,q,w,pc("x")),kc(u,r,w,pc("y")),u.xBaseline=function(b){return arguments.length?(g=a.functor(b),u):g},u.yBaseline=function(b){return arguments.length?(i=a.functor(b),u):i},u.chartLabel=function(a){return arguments.length?(n=a,u):n},u.plotArea=function(a){return arguments.length?(o=a,u):o},u.xLabel=function(a){return arguments.length?(f=a,u):f},u.margin=function(a){return arguments.length?(d=a,u):d},u.yLabel=function(a){return arguments.length?(e=a,u):e},u.decorate=function(a){return arguments.length?(p=a,u):p},u}function B(){var b=50,c=h,d=[["datum:",function(a){return a.datum}]],e=j().selector("g.cell").element("g").attr("class","cell tooltip"),f=function(f){f.each(function(f,g){var h=a.select(this),i=d.map(function(b,c){return{datum:f,label:a.functor(b[0]),value:a.functor(b[1])}}),j=e(h,i);j.enter().layout({flex:1,flexDirection:"row"}),j.enter().append("text").attr("class","label").attr("dy","0.71em").layout("flex",b),j.enter().append("text").attr("class","value").attr("dy","0.71em").layout("flex",100-b),j.select(".label").text(function(a,b){return a.label.call(this,a.datum,b)}),j.select(".value").text(function(a,b){return a.value.call(this,a.datum,b)}),c(j,f,g),h.layout()})};return f.decorate=function(a){return arguments.length?(c=a,f):c},f.split=function(a){return arguments.length?(b=a,f):b},f.items=function(a){return arguments.length?(d=a,f):d},f}function C(){var a={};return a.distance=function(a,b){return b.getTime()-a.getTime()},a.offset=function(a,b){return new Date(a.getTime()+b)},a.clampUp=f,a.clampDown=f,a.copy=function(){return a},a}function D(a,b,c){var d=a.map(function(d,e){if(e<a.length-1)return b.clampUp(d);var f=b.clampUp(d);return f<c[1]?f:b.clampDown(d)}),e=d.reduce(function(a,b){return 0===a.filter(function(a){return a.getTime()===b.getTime()}).length&&a.push(b),a},[]);return e}function E(b,c){function d(a){var d=b.domain(),e=b.range(),f=c.distance(d[0],d[1]),g=c.distance(d[0],a),h=g/f,i=h*(e[1]-e[0])+e[0];return i}return arguments.length||(b=a.time.scale(),c=C()),d.invert=function(a){var d=b.domain(),e=b.range(),f=(a-e[0])/(e[1]-e[0]),g=c.distance(d[0],d[1]),h=f*g;return c.offset(d[0],h)},d.domain=function(a){if(!arguments.length)return b.domain();var e=c.clampUp(a[0]),f=c.clampDown(a[1]);return b.domain([e,f]),d},d.nice=function(){b.nice();var a=b.domain(),e=c.clampUp(a[0]),f=c.clampDown(a[1]);return b.domain([e,f]),d},d.ticks=function(){var a=b.ticks.apply(this,arguments);return D(a,c,d.domain())},d.copy=function(){return E(b.copy(),c.copy())},d.discontinuityProvider=function(a){return arguments.length?(c=a,d):c},a.rebind(d,b,"range","rangeRound","interpolate","clamp","tickFormat")}function F(){return E()}function G(a){var b=a.ownerDocument.defaultView.getComputedStyle(a);return{width:parseFloat(b.width)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight),height:parseFloat(b.height)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)}}function H(){var b=a.time.scale(),c=a.scale.linear(),d=[],f=e,i=g,k=h,l=j().selector("g.multi").children(!0).attr("class","multi").element("g").key(function(a,b){var c=this.__series__||a;return i.call(this,c,b)}),m=function(e){e.each(function(e,g){var h=l(this,d);h.each(function(d,g){this.__series__=d,(d.xScale||d.x).call(d,b),(d.yScale||d.y).call(d,c),a.select(this).datum(f.call(e,d,g)).call(d)}),a.selection.prototype.order.call(h),k(h,e,g)})};return m.xScale=function(a){return arguments.length?(b=a,m):b},m.yScale=function(a){return arguments.length?(c=a,m):c},m.series=function(a){return arguments.length?(d=a,m):d},m.mapping=function(a){return arguments.length?(f=a,m):f},m.key=function(a){return arguments.length?(i=a,m):i},m.decorate=function(a){return arguments.length?(k=a,m):k},m}function I(){var b=h,c=a.svg.symbol(),d=x(),e=j().selector("g.point").element("g").attr("class","point"),f=function(a,b){return"translate("+d.x(a,b)+", "+d.y(a,b)+")"},g=function(a){a.each(function(a,g){var h=a.filter(d.defined),i=e(this,h);i.enter().attr("transform",f).append("path"),i.attr("transform",f).select("path").attr("d",c),b(i,a,g)})};return g.decorate=function(a){return arguments.length?(b=a,g):b},a.rebind(g,d,"xScale","xValue","yScale","yValue"),a.rebind(g,e,"key"),a.rebind(g,c,"size","type"),g}function J(){function b(b){function c(a){return b.filter(function(b){return e(b)===a})[0]}var d=i.xValue(),e=i.yValue(),f=a.max(b,e),g=a.min(b,e);return[{x:d(b[0]),y:e(b[0])},{x:d(c(f)),y:f},{x:d(c(g)),y:g},{x:d(b[b.length-1]),y:e(b[b.length-1])}]}var c=F(),d=a.scale.linear(),e=2,f=y(),g=I().xValue(function(a){return a.x}).yValue(function(a){return a.y}).decorate(function(a){a.attr("class",function(a,b){switch(b){case 0:return"open";case 1:return"high";case 2:return"low";case 3:return"close"}})}),h=H().series([f,g]).mapping(function(a){switch(a){case g:return b(this);default:return this}}),i=function(b){g.size(e*e*Math.PI),b.each(function(b){var f=a.select(this),g=G(this),i=e;c.range([i,g.width-i]),d.range([g.height-i,i]),h.xScale(c).yScale(d),f.call(h)})};return kc(i,c,hc("discontinuityProvider","domain"),pc("x")),kc(i,d,hc("domain"),pc("y")),kc(i,f,hc("xValue","yValue")),i.xScale=function(){return c},i.yScale=function(){return d},i.radius=function(a){return arguments.length?(e=a,i):e},i}function K(b,c){function d(a){return j().selector("g."+a).element("g").attr("class",a)}function e(a){return[a%n,Math.floor(a/n)]}function f(a,b){return a[0]===b[0]&&a[1]===b[1]}function g(a,b){var c=b.filter(function(b,c){return f(e(c),a)});return[i(c),k(c)]}b=b||a.scale.linear(),c=c||a.scale.linear();var i,k,l=10,n=9,o=h,p=y(),q={bottom:30,right:30},s=function(a){return a.values},t=function(a){return a.key},u=r().ticks(2),v=r().orient("right").ticks(3),w=d("multiple"),x=d("x-axis"),A=d("y-axis"),B=function(d){d.each(function(d,f){function h(a,b){return{xOffset:(B+l)*a,yOffset:(C+l)*b}}var i=a.select(this),j=z(q);j.position="absolute";var k=i.selectAll("svg").data([d]);k.enter().append("svg").layout("flex",1).append("g").attr("class","multiples-chart");var r=k.select("g").layout(j);i.layout();var y=Math.ceil(d.length/n),B=r.layout("width")/n-l,C=r.layout("height")/y-l;m(b,[0,B]),m(c,[C,0]);var D=w(r,d);D.attr("transform",function(a,b){var c=h(b%n,Math.floor(b/n));return"translate("+c.xOffset+","+c.yOffset+")"});var E=D.enter().append("g");E.append("rect").attr("class","background"),E.append("g").attr("transform","translate("+B/2+", 0)").append("text").attr("class","label").text(t),D.select("g").each(function(f,h){var i=e(h),j=g(i,d);b.domain(j[0]),c.domain(j[1]),p.xScale(b).yScale(c),a.select(this).datum(s).call(p)}),D.select("rect").attr({width:B,height:C}),o(D,d,f);var F=x(r,a.range(n));F.attr("transform",function(a,b){var c="bottom"===u.orient()?y:0,d="bottom"===u.orient()?0:-l,e=h(b,c);return"translate("+e.xOffset+","+(e.yOffset+d)+")"}).each(function(c,f){var h=g(e(f),d);b.domain(h[0]),u.scale(b),a.select(this).call(u)});var G=A(r,a.range(y));G.attr("transform",function(a,b){var c="left"===v.orient()?0:n,d="left"===v.orient()?-l:0,e=h(c,b);return"translate("+(e.xOffset+d)+","+e.yOffset+")"}).each(function(b,f){var h=g(e(f),d);c.domain(h[1]),v.scale(c),a.select(this).call(v)})})},C=mc(/range\w*/,/tickFormat/,/domain/);return kc(B,b,C,pc("x")),kc(B,c,C,pc("y")),kc(B,u,pc("x")),kc(B,v,pc("y")),B.columns=function(a){return arguments.length?(n=a,B):n},B.margin=function(a){return arguments.length?(q=a,B):q},B.padding=function(a){return arguments.length?(l=a,B):l},B.plotArea=function(a){return arguments.length?(p=a,B):p},B.values=function(a){return arguments.length?(s=a,B):s},B.key=function(a){return arguments.length?(t=a,B):t},B.decorate=function(a){return arguments.length?(o=a,B):o},B.xDomain=function(b){return arguments.length?(i=a.functor(b),B):i},B.yDomain=function(b){return arguments.length?(k=a.functor(b),B):k},B}function L(){}function M(a,b){var c=new L;if(a instanceof L)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(null==b)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b(d=a[e],e,a),d)}else if(a)for(var g in a)c.set(g,a[g]);return c}function N(){for(var a,b=0,c=arguments.length,d={};c>b;++b){if(!(a=arguments[b]+"")||a in d)throw new Error("illegal type: "+a);d[a]=[]}return new O(d)}function O(a){this._=a}function P(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}function Q(a,b){for(var c,d=0,e=a.length;e>d;++d)if((c=a[d]).name===b)return c.value}function R(a,b,c){for(var d=0,e=a.length;e>d;++d)if(a[d].name===b){a[d]=Oc,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function S(a,b){function c(a){var b,c=j.status;if(!c&&U(j)||c>=200&&300>c||304===c){if(f)try{b=f.call(d,j)}catch(e){return void h.call("error",d,e)}else b=j;h.call("load",d,b)}else h.call("error",d,a)}var d,e,f,g,h=N("beforesend","progress","load","error"),i=M(),j=new XMLHttpRequest,k=null,l=null,m=0;return"undefined"==typeof XDomainRequest||"withCredentials"in j||!/^(http(s)?:)?\/\//.test(a)||(j=new XDomainRequest),"onload"in j?j.onload=j.onerror=j.ontimeout=c:j.onreadystatechange=function(a){j.readyState>3&&c(a)},j.onprogress=function(a){h.call("progress",d,a)},d={header:function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?i.get(a):(null==b?i.remove(a):i.set(a,b+""),d)},mimeType:function(a){return arguments.length?(e=null==a?null:a+"",d):e},responseType:function(a){return arguments.length?(g=a,d):g},timeout:function(a){return arguments.length?(m=+a,d):m},user:function(a){return arguments.length<1?k:(k=null==a?null:a+"",d)},password:function(a){return arguments.length<1?l:(l=null==a?null:a+"",d)},response:function(a){return f=a,d},get:function(a,b){return d.send("GET",a,b)},post:function(a,b){return d.send("POST",a,b)},send:function(b,c,f){return f||"function"!=typeof c||(f=c,c=null),f&&1===f.length&&(f=T(f)),j.open(b,a,!0,k,l),null==e||i.has("accept")||i.set("accept",e+",*/*"),j.setRequestHeader&&i.each(function(a,b){j.setRequestHeader(b,a)}),null!=e&&j.overrideMimeType&&j.overrideMimeType(e),null!=g&&(j.responseType=g),m>0&&(j.timeout=m),f&&d.on("error",f).on("load",function(a){f(null,a)}),h.call("beforesend",d,j),j.send(null==c?null:c),d},abort:function(){return j.abort(),d},on:function(){var a=h.on.apply(h,arguments);return a===h?d:a}},b?d.get(b):d}function T(a){return function(b,c){a(null==b?c:null)}}function U(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function V(a,b){return function(c,d){var e=S(c).mimeType(a).response(b);return d?e.get(d):e}}function W(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function X(a,b){var c=W(a);return function(d,e){return b(c(d),e,a)}}function Y(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}function Z(a){function b(a,b){var d,e,f=c(a,function(a,c){return d?d(a,c-1):(e=a,void(d=b?X(a,b):W(a)))});return f.columns=e,f}function c(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b,c=k;if(34===a.charCodeAt(c)){for(var d=c;d++<j;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}return k=d+2,b=a.charCodeAt(d+1),13===b?(e=!0,10===a.charCodeAt(d+2)&&++k):10===b&&(e=!0),a.slice(c+1,d).replace(/""/g,'"')}for(;j>k;){var h=1;if(b=a.charCodeAt(k++),10===b)e=!0;else if(13===b)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(b!==i)continue;return a.slice(c,k-h)}return a.slice(c)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h}function d(b,c){return null==c&&(c=Y(b)),[c.map(g).join(a)].concat(b.map(function(b){return c.map(function(a){return g(b[a])}).join(a)})).join("\n")}function e(a){return a.map(f).join("\n")}function f(b){return b.map(g).join(a)}function g(a){return null==a?"":h.test(a+="")?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return{parse:b,parseRows:c,format:d,formatRows:e}}function $(){var a="BTC-USD",b=null,c=null,d=null,e=function(e){var f=[];null!=b&&f.push("start="+b.toISOString()),null!=c&&f.push("end="+c.toISOString()),null!=d&&f.push("granularity="+d);var g="https://api.exchange.coinbase.com/products/"+a+"/candles?"+f.join("&");Pc(g,function(a,b){return a?void e(a):(b=b.map(function(a){return{date:new Date(1e3*a[0]),open:a[3],high:a[2],low:a[1],close:a[4],volume:a[5]}}),void e(a,b))})};return e.product=function(b){return arguments.length?(a=b,e):a},e.start=function(a){return arguments.length?(b=a,e):b},e.end=function(a){return arguments.length?(c=a,e):c},e.granularity=function(a){return arguments.length?(d=a,e):d},e}function _(){function a(a){return a[0].toLowerCase()+a.substr(1)}var b="YAHOO",c="GOOG",d=null,e=null,f=null,g=null,h=!1,i=null,j=a,k=function(a){var k=[];null!=d&&k.push("api_key="+d),null!=e&&k.push("start_date="+e.toISOString().substring(0,10)),null!=f&&k.push("end_date="+f.toISOString().substring(0,10)),null!=g&&k.push("rows="+g),h||k.push("order=asc"),null!=i&&k.push("collapse="+i);var l="https://www.quandl.com/api/v3/datasets/"+b+"/"+c+"/data.json?"+k.join("&");Pc(l,function(b,c){if(b)return void a(b);var d=c.dataset_data,e=j||function(a){return a},f=d.column_names.map(function(a,b){return[b,e(a)]}).filter(function(a){return a[1]}),g=d.data.map(function(a){var b={};return f.forEach(function(c){b[c[1]]=0===c[0]?new Date(a[c[0]]):a[c[0]]}),b});a(b,g)})};return k.database=function(a){return arguments.length?(b=a,k):b},k.dataset=function(a){return arguments.length?(c=a,k):c},k.apiKey=function(a){return arguments.length?(d=a,k):d},k.start=function(a){return arguments.length?(e=a,k):e},k.end=function(a){return arguments.length?(f=a,k):f},k.rows=function(a){return arguments.length?(g=a,k):g},k.descending=function(a){return arguments.length?(h=a,k):h},k.collapse=function(a){return arguments.length?(i=a,k):i},k.columnNameMap=function(a){return arguments.length?(j=a,k):j},k.defaultColumnNameMap=a,k}function aa(){var b=1,c=20,d=.1,e=.1,f=function(f){for(var g=a.random.normal(),h=b/c,i=[],j=0;c+1>j;j++){i.push(f);var k=g()*Math.sqrt(h)*e+(d-e*e/2)*h;f*=Math.exp(k)}return i};return f.period=function(a){return arguments.length?(b=a,f):b},f.steps=function(a){return arguments.length?(c=a,f):c},f.mu=function(a){return arguments.length?(d=a,f):d},f.sigma=function(a){return arguments.length?(e=a,f):e},f}function ba(){function b(a){var b=j.offset(a,k)-a;return(h.offset(a,i)-a)/b}function c(a,c){var d=b(a),e=n.period(d)(c),f={date:a,open:e[0],high:Math.max.apply(Math,e),low:Math.min.apply(Math,e),close:e[n.steps()]};return f.volume=m(f),f}function d(a){var b,d;do b=a?h.offset(a.date,i):new Date(f.getTime()),d=a?a.close:g,a=c(b,d);while(l&&!l(a));return a}function e(){var a,b={};return b.next=function(){var b=d(a);return a=b,b},b.take=function(a){return this.until(function(b,c){return!a||0>a||c===a})},b.until=function(b){for(var c=[],e=0,f=d(a);b&&!b(f,e);)c.push(f),a=f,f=d(a),e+=1;return c},b}var f=new Date,g=100,h=a.time.day,i=1,j=a.time.year,k=1,l=null,m=function(){var b=a.random.normal(1,.1);return Math.ceil(1e3*b())},n=aa(),o=function(a){var b=e();return b.take(a)};return o.stream=e,o.startDate=function(a){return arguments.length?(f=a,o):f},o.startPrice=function(a){return arguments.length?(g=a,o):g},o.interval=function(a){return arguments.length?(h=a,o):h},o.intervalStep=function(a){return arguments.length?(i=a,o):i},o.unitInterval=function(a){return arguments.length?(j=a,o):j},o.unitIntervalStep=function(a){return arguments.length?(k=a,o):k},o.filter=function(a){return arguments.length?(l=a,o):l},o.volume=function(b){return arguments.length?(m=a.functor(b),o):m},a.rebind(o,n,"steps","mu","sigma"),o}function ca(){return function(a){var b=a.date.getDay();return!(0===b||6===b)}}function da(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function ea(a){return 1===a.length&&(a=fa(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function fa(a){return function(b,c){return da(a(b),c)}}function ga(a){return null===a?NaN:+a}function ha(a,b){var c,d,e,f=-1,g=a.length;if(null==b){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b(a[f],f,a))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b(a[f],f,a))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]}function ia(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):3>e?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f}function ja(a,b){var c,d,e=-1,f=a.length;if(null==b){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b(a[e],e,a))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b(a[e],e,a))&&d>c&&(c=d)}return c}function ka(a,b){var c,d=0,e=a.length,f=-1,g=e;if(null==b)for(;++f<e;)isNaN(c=ga(a[f]))?--g:d+=c;else for(;++f<e;)isNaN(c=ga(b(a[f],f,a)))?--g:d+=c;return g?d/g:void 0}function la(){var a=10,b=function(b){return ia(0,Math.ceil(b.length/a)).map(function(c){return b.slice(c*a,(c+1)*a)})};return b.bucketSize=function(c){return arguments.length?(a=c,b):a},b}function ma(){function a(a){var b=a.map(function(a){return[c(a),d(a)]}),e=ia(1,b.length-1).map(function(a){var c=b[a-1],d=b[a],e=b[a+1],f=(c[0]-e[0])*(d[1]-c[1]),g=(c[0]-d[0])*(e[1]-c[1]);return Math.abs(.5*f*g)});return e}var b=la(),c=function(a){return a},d=function(a){return a},e=function(c){if(b.bucketSize()>=c.length)return c;var d=a(c),e=b(d),f=b(c.slice(1,c.length-1)),g=f.map(function(a,b){var c=e[b],d=ja(c),f=c.indexOf(d);return a[f]});return[].concat(c[0],g,c[c.length-1])};return lc(e,b,"bucketSize"),e.x=function(a){return arguments.length?(c=a,e):c},e.y=function(a){return arguments.length?(d=a,e):d},e}function na(){var a=function(a){return a},b=function(a){return a},c=la(),d=function(d){if(c.bucketSize()>=d.length)return d;var e=c(d.slice(1,d.length-1)),f=d[0],g=d[d.length-1],h=[].concat(f,e,g),i=a(f),j=b(f),k=e.map(function(c,d){var e=ka(h[d+1],a),f=ka(h[d+1],b),g=c.map(function(c){return[a(c),b(c)]}),k=g.map(function(a){var b=(i-e)*(a[1]-j),c=(i-a[0])*(f-j);return Math.abs(.5*b*c)}),l=k.indexOf(ja(k)),m=g[l];return i=m[0],j=m[1],c[l]});return[].concat(d[0],k,d[d.length-1]);
};return lc(d,c,"bucketSize"),d.x=function(b){return arguments.length?(a=b,d):a},d.y=function(a){return arguments.length?(b=a,d):b},d}function oa(){var a=la(),b=function(a){return a},c=function(c){if(a.bucketSize()>c.length)return c;var d=ha(c,b),e=a(c.slice(1,c.length-1)),f=e.map(function(a,c){var e,f,g={},h=!0,i=a.map(b),j=i.filter(function(a){return a===d[0]||a===d[1]}).map(function(a){return i.indexOf(a)})[0];return void 0!==j?a[j]:(i.forEach(function(a,b){void 0===g[a]&&(g[a]=0),g[a]++,g[a]>g[e]||void 0===e?(e=a,f=b,h=!0):g[a]===g[e]&&(h=!1)}),h?a[f]:a[Math.floor(a.length/2)])});return[].concat(c[0],f,c[c.length-1])};return lc(c,a,"bucketSize"),c.value=function(a){return arguments.length?(b=a,c):b},c}function pa(){function a(a){var b=Object.keys(a[0]).filter(function(a){return a!==c}).map(function(b){var d=a.filter(function(a){return a[b]}).map(function(a){return{x:a[c],y:e(a,b)}});return{key:b,values:d}});return b}function b(a){var b=a.map(function(a){var b=Object.keys(a).filter(function(a){return a!==c});return{key:a[c],values:b.map(function(b){return{x:b,y:e(a,b)}})}});return b}var c="",d="vertical",e=function(a,b){return Number(a[b])},f=function(c){return"vertical"===d?a(c):b(c)};return f.xValueKey=function(a){return arguments.length?(c=a,f):c},f.yValue=function(a){return arguments.length?(e=a,f):e},f.orient=function(a){return arguments.length?(d=a,f):d},f}function qa(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function ra(a){return 1===a.length&&(a=sa(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function sa(a){return function(b,c){return qa(a(b),c)}}function ta(a){return null===a?NaN:+a}function ua(a,b){var c,d,e=a.length,f=0,g=0,h=-1,i=0;if(null==b)for(;++h<e;)isNaN(c=ta(a[h]))||(d=c-f,f+=d/++i,g+=d*(c-f));else for(;++h<e;)isNaN(c=ta(b(a[h],h,a)))||(d=c-f,f+=d/++i,g+=d*(c-f));return i>1?g/(i-1):void 0}function va(a,b){var c=ua(a,b);return c?Math.sqrt(c):c}function wa(a,b){var c,d,e=-1,f=a.length;if(null==b){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b(a[e],e,a))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b(a[e],e,a))&&d>c&&(c=d)}return c}function xa(a,b){var c,d=0,e=a.length,f=-1,g=e;if(null==b)for(;++f<e;)isNaN(c=ta(a[f]))?--g:d+=c;else for(;++f<e;)isNaN(c=ta(b(a[f],f,a)))?--g:d+=c;return g?d/g:void 0}function ya(a,b){var c,d,e=-1,f=a.length;if(null==b){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b(a[e],e,a))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b(a[e],e,a))&&c>d&&(c=d)}return c}function za(a){if(!(e=a.length))return[];for(var b=-1,c=ya(a,Aa),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d}function Aa(a){return a.length}function Ba(){return za(arguments)}function Ca(a){return a}function Da(a){}function Ea(a){return"function"==typeof a?a:function(){return a}}function Fa(a){return"number"==typeof a&&isNaN(a)?void 0:a}function Ga(){var a=function(){return 10},b=Da,c=Ca,d=function(a){return null!=a},e=function(e){var f=a.apply(this,arguments),g=e.slice(0,f).map(c);return e.map(function(a,e){return e>=f&&(g.shift(),g.push(c(a,e))),f-1>e||g.some(function(a){return!d(a)})?b(void 0,e):b(g,e)})};return e.period=function(){return arguments.length?(a=Ea(arguments.length<=0?void 0:arguments[0]),e):a},e.accumulator=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],e):b},e.defined=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],e):d},e.value=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],e):c},e}function Ha(){var a=2,b=Ga().accumulator(function(b){var c=b&&va(b),d=b&&xa(b);return{average:d,upper:Fa(d+a*c),lower:Fa(d-a*c)}}),c=function(a){return b(a)};return c.multiplier=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},lc(c,b,"period","value"),c}function Ia(){var a=Ca,b=function(){return 9},c=function(a){var b=[];return function(c){var d=void 0;return b.length<a&&(null!=c?b.push(c):b=[]),b.length>=a&&(d=xa(b)),d}},d=function(d){var e=b.apply(this,arguments),f=2/(e+1),g=c(e),h=void 0;return d.map(function(b,c){var d=a(b,c);return h=void 0===h?g(d):d*f+(1-f)*h,Fa(h)})};return d.period=function(){return arguments.length?(b=Ea(arguments.length<=0?void 0:arguments[0]),d):b},d.value=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],d):a},d}function Ja(){var a=Ca,b=Ia().period(12),c=Ia().period(26),d=Ia().period(9),e=function(e){b.value(a),c.value(a);var f=Ba(b(e),c(e)).map(function(a){return void 0!==a[0]&&void 0!==a[1]?a[0]-a[1]:void 0}),g=d(f);return Ba(f,g).map(function(a){return{macd:a[0],signal:a[1],divergence:void 0!==a[0]&&void 0!==a[1]?a[0]-a[1]:void 0}})};return e.value=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],e):a},kc(e,b,nc({period:"fastPeriod"})),kc(e,c,nc({period:"slowPeriod"})),kc(e,d,nc({period:"signalPeriod"})),e}function Ka(){var a=Ga().period(14),b=function(a,b){return b+(a[a.length-1]-b)/a.length},c=function(a,b){return a+b},d=function(a,d,e){return function(f){if(!f)return void(void 0!==a&&(a=NaN));if(void 0===a)return void(a=f[0]);var g=[],h=[];f.forEach(function(b){var c=b>a?0:a-b,d=a>b?0:b-a;g.push(c),h.push(d),a=isNaN(a)?NaN:b});var i=d?b(g,d):g.reduce(c)/f.length,j=e?b(h,e):h.reduce(c)/f.length;d=i,e=j;var k=j/i;return Fa(100-100/(1+k))}},e=function(b){var c=d();return a.accumulator(c),a(b)};return lc(e,a,"period","value"),e}function La(){var a=Ga().accumulator(function(a){return a&&xa(a)}),b=function(b){return a(b)};return lc(b,a,"period","value"),b}function Ma(){var a=function(a,b){return a.close},b=function(a,b){return a.high},c=function(a,b){return a.low},d=Ga().period(5).defined(function(d){return null!=a(d)&&null!=b(d)&&null!=c(d)}).accumulator(function(d){var e=d&&wa(d,b),f=d&&ya(d,c),g=d&&100*(a(d[d.length-1])-f)/(e-f);return Fa(g)}),e=La().period(3),f=function(a){var b=d(a),c=e(b);return b.map(function(a,b){return{k:a,d:c[b]}})};return f.closeValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],f):a},f.highValue=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],f):b},f.lowValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],f):c},kc(f,d,nc({period:"kPeriod"})),kc(f,e,nc({period:"dPeriod"})),f}function Na(){var a=function(a,b){return a.volume},b=function(a,b){return a.close},c=Ia().period(13),d=Ga().period(2).defined(function(c){return null!=b(c)&&null!=a(c)}).accumulator(function(c){return c&&Fa((b(c[1])-b(c[0]))*a(c[1]))}),e=function(a){var b=d(a);return c(b)};return e.volumeValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],e):a},e.closeValue=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],e):b},lc(e,c,"period"),e}function Oa(){var a=.1,b=Ca,c=function(c){return c.map(function(c){var d=Fa(b(c)*(1-a)),e=Fa(b(c)*(1+a));return{lower:d,upper:e}})};return c.factor=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},c.value=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],c):b},c}function Pa(){var a=function(a,b){return a.close},b=function(a,b){return a.high},c=function(a,b){return a.low},d=Ia().period(13),e=function(e){return d.value(a),Ba(e,d(e)).map(function(a){var d=Fa(b(a[0])-a[1]),e=Fa(c(a[0])-a[1]);return{bullPower:d,bearPower:e}})};return e.closeValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],e):a},e.highValue=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],e):b},e.lowValue=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],e):c},lc(e,d,"period"),e}function Qa(){var b=h,c=f,d=function(d){return a.zip(d,c(d)).map(function(a){return b(a[0],a[1])})};return d.algorithm=function(a){return arguments.length?(c=a,d):c},d.merge=function(a){return arguments.length?(b=a,d):b},d}function Ra(){var a=Ha().value(function(a){return a.close}),b=Qa().algorithm(a).merge(function(a,b){return a.bollingerBands=b,a}),c=function(a){return b(a)};return c.root=function(a){return a.bollingerBands},lc(c,b,"merge"),lc(c,a,"period","value","multiplier"),c}function Sa(){var a=Ia().value(function(a){return a.close}),b=Qa().algorithm(a).merge(function(a,b){return a.exponentialMovingAverage=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"period","value"),c}function Ta(){var a=Ja().value(function(a){return a.close}),b=Qa().algorithm(a).merge(function(a,b){return a.macd=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"fastPeriod","slowPeriod","signalPeriod","value"),c}function Ua(){var a=La().value(function(a){return a.close}),b=Qa().algorithm(a).merge(function(a,b){return a.movingAverage=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"period","value"),c}function Va(){var a=Ka(),b=Qa().algorithm(a).merge(function(a,b){return a.rsi=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"period","value"),c}function Wa(){var a=Ma(),b=Qa().algorithm(a).merge(function(a,b){return a.stochastic=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"kPeriod","dPeriod","lowValue","closeValue","highValue"),c}function Xa(){var a=Na(),b=Qa().algorithm(a).merge(function(a,b){return a.force=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"period","volumeValue","closeValue"),c}function Ya(){var a=Oa(),b=Qa().algorithm(a).merge(function(a,b){return a.envelope=b,a}),c=function(a){return b(a)};return c.root=function(a){return a.envelope},lc(c,b,"merge"),lc(c,a,"value","factor"),c}function Za(){var a=Pa().closeValue(function(a){return a.close}),b=Qa().algorithm(a).merge(function(a,b){return a.elderRay=b,a}),c=function(a){return b(a)};return lc(c,b,"merge"),lc(c,a,"highValue","lowValue","period","value"),c}function $a(){var b=h,c=x(),d=a.svg.area().defined(c.defined).x(c.x).y0(c.y0).y1(c.y1),e=j().selector("path.area").element("path").attr("class","area"),f=function(a){a.each(function(a,c){var f=e(this,[a]);f.attr("d",d),b(f,a,c)})};return f.decorate=function(a){return arguments.length?(b=a,f):b},a.rebind(f,c,"xScale","xValue","yScale","yValue","y1Value","y0Value"),a.rebind(f,e,"key"),a.rebind(f,d,"interpolate","tension"),f}function _a(){var b=a.time.scale(),c=a.scale.linear(),d=function(a,b){return a.close},e=function(a,b){return a.date},f=function(a){return a.bollingerBands},g=h,i=$a().y0Value(function(a,b){return f(a).upper}).y1Value(function(a,b){return f(a).lower}),j=y().yValue(function(a,b){return f(a).upper}),k=y().yValue(function(a,b){return f(a).average}),l=y().yValue(function(a,b){return f(a).lower}),m=function(a){var d=H().xScale(b).yScale(c).series([i,j,l,k]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi bollinger "+["area","upper","lower","average"][b]}),g(a,b,c)});i.xValue(e),j.xValue(e),k.xValue(e),l.xValue(e),a.call(d)};return m.xScale=function(a){return arguments.length?(b=a,m):b},m.yScale=function(a){return arguments.length?(c=a,m):c},m.xValue=function(a){return arguments.length?(e=a,m):e},m.yValue=function(a){return arguments.length?(d=a,m):d},m.root=function(a){return arguments.length?(f=a,m):f},m.decorate=function(a){return arguments.length?(g=a,m):g},m}function ab(b){return function(c){if(c.length<=1)return 10;c.sort();var d=a.pairs(c).map(function(a){return Math.abs(a[0]-a[1])}),e=a.min(d);return b*e}}function bb(){function b(a,b){return"vertical"===k?"translate("+m.x1(a,b)+", "+m.y0(a,b)+")":"translate("+m.x0(a,b)+", "+m.y1(a,b)+")"}function c(a,b){return"vertical"===k?m.y1(a,b)-m.y0(a,b):m.x1(a,b)-m.x0(a,b)}function d(a){return"vertical"===k?a.height:a.width}function e(a){return"vertical"===k?a.width:a.height}function f(){return"vertical"===k?m.x:m.y}var g=h,i=ab(.75),k="vertical",l=_b(),m=x().xValue(function(a,b){return"vertical"===k?a.x:a.y}).yValue(function(a,b){return"vertical"===k?a.y:a.x}),n=j().selector("g.bar").element("g"),o=function(a){a.each(function(a,h){if("vertical"!==k&&"horizontal"!==k)throw new Error("The bar series does not support an orientation of "+k);n.attr("class","bar "+k);var j=a.filter(m.defined);l.x(0).y(0).width(0).height(0),"vertical"===k?l.verticalAlign("top"):l.horizontalAlign("right");var o=i(j.map(f()));e(l)(o);var p=n(this,j);p.enter().attr("transform",b).append("path").attr("d",function(a){return l([a])}),d(l)(c),p.attr("transform",b).select("path").attr("d",function(a){return l([a])}),g(p,j,h)})};return o.decorate=function(a){return arguments.length?(g=a,o):g},o.barWidth=function(b){return arguments.length?(i=a.functor(b),o):i},o.orient=function(a){return arguments.length?(k=a,o):k},a.rebind(o,m,"xScale","xValue","x1Value","x0Value","yScale","yValue","y1Value","y0Value"),a.rebind(o,n,"key"),o}function cb(){var b=a.time.scale(),c=a.scale.linear(),d=function(a){return a.date},e=function(a){return a.macd},f=y(),g=y(),i=bb(),j=H(),k=h,l=function(a){f.xValue(d).yValue(function(a,b){return e(a).macd}),g.xValue(d).yValue(function(a,b){return e(a).signal}),i.xValue(d).yValue(function(a,b){return e(a).divergence}),j.xScale(b).yScale(c).series([i,f,g]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["macd-divergence","macd","macd-signal"][b]}),k(a,b,c)}),a.call(j)};return l.xScale=function(a){return arguments.length?(b=a,l):b},l.xValue=function(a){return arguments.length?(d=a,l):d},l.yScale=function(a){return arguments.length?(c=a,l):c},l.root=function(a){return arguments.length?(e=a,l):e},l.decorate=function(a){return arguments.length?(k=a,l):k},a.rebind(l,i,"barWidth"),l}function db(){var b=a.time.scale(),c=a.scale.linear(),d=70,e=30,f=H(),g=h,i=q(),j=y().xValue(function(a,b){return a.date}).yValue(function(a,b){return a.rsi}),k=function(a){f.xScale(b).yScale(c).series([i,j]).mapping(function(a){return a===i?[d,50,e]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi rsi "+["annotations","indicator"][b]}),g(a,b,c)}),a.call(f)};return k.xScale=function(a){return arguments.length?(b=a,k):b},k.yScale=function(a){return arguments.length?(c=a,k):c},k.upperValue=function(a){return arguments.length?(d=a,k):d},k.lowerValue=function(a){return arguments.length?(e=a,k):e},k.decorate=function(a){return arguments.length?(g=a,k):g},a.rebind(k,j,"yValue","xValue"),k}function eb(){var b=a.time.scale(),c=a.scale.linear(),d=80,e=20,f=H(),g=h,i=q(),j=y().xValue(function(a,b){return a.date}).yValue(function(a,b){return a.stochastic.d}),k=y().yValue(function(a,b){return a.stochastic.k}),l=function(a){f.xScale(b).yScale(c).series([i,j,k]).mapping(function(a){return a===i?[d,e]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi stochastic "+["annotations","stochastic-d","stochastic-k"][b]}),g(a,b,c)}),a.call(f)};return l.xScale=function(a){return arguments.length?(b=a,l):b},l.yScale=function(a){return arguments.length?(c=a,l):c},l.upperValue=function(a){return arguments.length?(d=a,l):d},l.lowerValue=function(a){return arguments.length?(e=a,l):e},l.decorate=function(a){return arguments.length?(g=a,l):g},a.rebind(l,j,"yDValue","xDValue"),a.rebind(l,k,"yKValue","xKValue"),l}function fb(){var b=a.time.scale(),c=a.scale.linear(),d=H(),e=h,f=q(),g=y().xValue(function(a,b){return a.date}).yValue(function(a,b){return a.force}),i=function(a){d.xScale(b).yScale(c).series([f,g]).mapping(function(a){return a===f?[0]:this}).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["annotations","indicator"][b]}),e(a,b,c)}),a.call(d)};return i.xScale=function(a){return arguments.length?(b=a,f.xScale(a),i):b},i.yScale=function(a){return arguments.length?(c=a,f.yScale(a),i):c},i.decorate=function(a){return arguments.length?(e=a,i):e},a.rebind(i,g,"yValue","xValue"),i}function gb(){var b=a.time.scale(),c=a.scale.linear(),d=function(a,b){return a.close},e=function(a,b){return a.date},f=function(a){return a.envelope},g=h,i=$a().y0Value(function(a,b){return f(a).upper}).y1Value(function(a,b){return f(a).lower}),j=y().yValue(function(a,b){return f(a).upper}),k=y().yValue(function(a,b){return f(a).lower}),l=function(a){var d=H().xScale(b).yScale(c).series([i,j,k]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi envelope "+["area","upper","lower"][b]}),g(a,b,c)});i.xValue(e),j.xValue(e),k.xValue(e),a.call(d)};return l.xScale=function(a){return arguments.length?(b=a,l):b},l.yScale=function(a){return arguments.length?(c=a,l):c},l.xValue=function(a){return arguments.length?(e=a,l):e},l.yValue=function(a){return arguments.length?(d=a,l):d},l.root=function(a){return arguments.length?(f=a,l):f},l.decorate=function(a){return arguments.length?(g=a,l):g},l}function hb(){var b=a.time.scale(),c=a.scale.linear(),d=function(a){return a.date},e=function(a){return a.elderRay},f=ab(.75),g=bb(),i=bb(),j=bb(),k=bb(),l=H(),m=h,n=function(a){function h(a,b){return a*b>0&&Math.abs(a)<Math.abs(b)}g.xValue(d).yValue(function(a,b){return h(e(a).bullPower,e(a).bearPower)?void 0:e(a).bullPower}).barWidth(f),i.xValue(d).yValue(function(a,b){return h(e(a).bearPower,e(a).bullPower)?void 0:e(a).bearPower}).barWidth(f),j.xValue(d).yValue(function(a,b){return h(e(a).bullPower,e(a).bearPower)?e(a).bullPower:void 0}).barWidth(f),k.xValue(d).yValue(function(a,b){return h(e(a).bearPower,e(a).bullPower)?e(a).bearPower:void 0}).barWidth(f),l.xScale(b).yScale(c).series([g,i,j,k]).decorate(function(a,b,c){a.enter().attr("class",function(a,b){return"multi "+["bull","bear","bull top","bear top"][b]}),m(a,b,c)}),a.call(l)};return n.barWidth=function(b){return arguments.length?(f=a.functor(b),n):f},n.xScale=function(a){return arguments.length?(b=a,n):b},n.xValue=function(a){return arguments.length?(d=a,n):d},n.yScale=function(a){return arguments.length?(c=a,n):c},n.decorate=function(a){return arguments.length?(m=a,n):m},n}function ib(a){for(;a.ownerSVGElement;)a=a.ownerSVGElement;return a}function jb(a){if(!a)return{};var b=a.split(";"),c={};return b.forEach(function(a){var b=a.split(":");if(2===b.length){var d=b[0].trim(),e=b[1].trim();c[d]=isNaN(e)?e:Number(e)}}),c}function kb(a){function b(){for(var b=[],c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];1===d.nodeType&&d.getAttribute("layout-style")&&b.push(kb(d))}return b}return{style:jb(a.getAttribute("layout-style")),children:b(a),element:a}}function lb(a,b){b&&(a.element.setAttribute("layout-width",a.layout.width),a.element.setAttribute("layout-height",a.layout.height)),a.element.setAttribute("layout-x",a.layout.left),a.element.setAttribute("layout-y",a.layout.top);var c=a.element.nodeName.match(/(?:svg|rect)/i);c&&(a.element.setAttribute("width",a.layout.width),a.element.setAttribute("height",a.layout.height)),c&&b&&(a.element.setAttribute("x",a.layout.left),a.element.setAttribute("y",a.layout.top)),!c&&b&&a.element.setAttribute("transform","translate("+a.layout.left+", "+a.layout.top+")"),a.children.forEach(function(a){lb(a,!0)})}function mb(a){return a.hasAttribute("layout-width")&&a.hasAttribute("layout-height")?{width:Number(a.getAttribute("layout-width")),height:Number(a.getAttribute("layout-height"))}:G(a)}function nb(a){return a.hasAttribute("layout-x")&&a.hasAttribute("layout-y")?{x:Number(a.getAttribute("layout-x")),y:Number(a.getAttribute("layout-y"))}:{x:0,y:0}}function ob(a){if("suspended"!==ib(a).__layout__){var c=mb(a),d=nb(a),e=kb(a);e.style.width=c.width,e.style.height=c.height,e.style.left=d.x,e.style.top=d.y,b(e),lb(e)}}function pb(a){return arguments.length?this.each(function(){ib(this).__layout__=a?"suspended":""}):Boolean(ib(this.node()).__layout__)}function qb(a,b){var c=arguments.length;if(1===c&&"string"==typeof a){var d=this.node();return Number(d.getAttribute("layout-"+a))}return this.each(function(){if(2===c)"string"!=typeof a?(this.setAttribute("layout-width",a),this.setAttribute("layout-height",b),ob(this)):this.setAttribute("layout-style",a+":"+b);else if(1===c){if("string"!=typeof a){var d=jb(this.getAttribute("layout-style")),e=a;Object.keys(e).forEach(function(a){d[a]=e[a]});var f=Object.keys(d).map(function(a){return a+":"+d[a]}).join(";");this.setAttribute("layout-style",f)}}else 0===c&&ob(this)})}function rb(){function b(a){return 0===a.getDay()||6===a.getDay()}var c=864e5,d=5*c,e=7*c,f={};return f.clampDown=function(c){if(c&&b(c)){var d=0===c.getDay()?2:1,e=a.time.day.ceil(c);return a.time.day.offset(e,-d)}return c},f.clampUp=function(c){if(c&&b(c)){var d=0===c.getDay()?1:2,e=a.time.day.floor(c);return a.time.day.offset(e,d)}return c},f.distance=function(b,c){b=f.clampUp(b),c=f.clampDown(c);var g=a.time.saturday.ceil(b);if(g>c)return c.getTime()-b.getTime();var h=g.getTime()-b.getTime(),i=a.time.saturday.ceil(c),j=i.getTime()-c.getTime(),k=Math.round((i.getTime()-g.getTime())/e);return k*d+h-j},f.offset=function(c,e){var g=b(c)?f.clampUp(c):c;if(0===e)return g;var h=0>e,i=e>0,j=e,k=h?a.time.monday.floor(g):a.time.saturday.ceil(g);if(j-=k.getTime()-g.getTime(),h&&j>0||i&&0>j)return new Date(g.getTime()+e);g=h?k:a.time.day.offset(k,2);var l=Math.floor(j/d);return g=a.time.day.offset(g,7*l),j-=l*d,g=new Date(g.getTime()+j)},f.copy=function(){return f},f}function sb(){function b(){}var c=a.time.scale(),d=a.scale.linear(),e=function(a,b){return a.date},f=function(a,b){return a.open},g=function(a,b){return a.high},h=function(a,b){return a.low},j=function(a,b){return a.close},k=ab(.75),l=function(a,b){return c(e(a,b))};return b.width=function(a){return k(a.map(l))},b.defined=function(a,b){return i(e,f,h,g,j)(a,b)},b.values=function(a,b){var c=j(a,b),e=f(a,b),i="";return c>e?i="up":e>c&&(i="down"),{x:l(a,b),yOpen:d(e),yHigh:d(g(a,b)),yLow:d(h(a,b)),yClose:d(c),direction:i}},b.xScale=function(a){return arguments.length?(c=a,b):c},b.yScale=function(a){return arguments.length?(d=a,b):d},b.xValue=function(a){return arguments.length?(e=a,b):e},b.yOpenValue=function(a){return arguments.length?(f=a,b):f},b.yHighValue=function(a){return arguments.length?(g=a,b):g},b.yLowValue=function(a){return arguments.length?(h=a,b):h},b.yValue=b.yCloseValue=function(a){return arguments.length?(j=a,b):j},b.barWidth=function(c){return arguments.length?(k=a.functor(c),b):k},b}function tb(){function b(a){return"translate("+a.x+", "+a.yHigh+")"}var c=h,d=sb(),e=j().selector("g.candlestick").element("g").attr("class","candlestick"),f=function(f){f.each(function(f,g){var h=f.filter(d.defined),i=e(this,h);i.enter().attr("transform",function(a,c){return b(d.values(a,c))+" scale(1e-6, 1)"}).append("path");var j=ac().width(d.width(h));i.each(function(c,e){var f=d.values(c,e),g=a.transition(a.select(this)).attr({"class":"candlestick "+f.direction,transform:function(){return b(f)+" scale(1)"}});j.x(a.functor(0)).open(function(){return f.yOpen-f.yHigh}).high(function(){return f.yHigh-f.yHigh}).low(function(){return f.yLow-f.yHigh}).close(function(){return f.yClose-f.yHigh}),g.select("path").attr("d",j([c]))}),c(i,f,g)})};return f.decorate=function(a){return arguments.length?(c=a,f):c},a.rebind(f,e,"key"),kc(f,d),f}function ub(){var b=h,c=a.scale.linear(),d=a.scale.linear(),e=function(a,b){return a.date.getDay()},f=a.scale.linear(),g=y(),i=ab(.75),k=j().selector("g.cycle").element("g").attr("class","cycle"),l=function(h){h.each(function(h,j){var l=a.nest().key(e).map(h),m=Object.keys(l),n=i(m.map(c)),o=n/2,p=k(this,m);p.each(function(b,e){var h=a.select(this);h.attr("transform","translate("+c(b)+", 0)"),(f.rangeBands||f.range)([-o,o]),g.xScale(f).yScale(d),a.select(this).datum(l[b]).call(g)}),b(p,m,j)})};return l.decorate=function(a){return arguments.length?(b=a,l):b},l.xScale=function(a){return arguments.length?(c=a,l):c},l.yScale=function(a){return arguments.length?(d=a,l):d},l.xValue=function(a){return arguments.length?(e=a,l):e},l.subScale=function(a){return arguments.length?(f=a,l):f},l.subSeries=function(a){return arguments.length?(g=a,l):g},l.barWidth=function(b){return arguments.length?(i=a.functor(b),l):i},a.rebind(l,k,"key"),l}function vb(b){function c(a){return"translate("+a.x+", "+a.yHigh+")"}var d=h,e=sb(),f=j().selector("g.ohlc").element("g").attr("class","ohlc"),g=function(b){b.each(function(b,g){var h=b.filter(e.defined),i=f(this,h);i.enter().attr("transform",function(a,b){return c(e.values(a,b))+" scale(1e-6, 1)"}).append("path");var j=$b().width(e.width(h));i.each(function(b,d){var f=e.values(b,d),g=a.transition(a.select(this)).attr({"class":"ohlc "+f.direction,transform:function(){return c(f)+" scale(1)"}});j.x(a.functor(0)).open(function(){return f.yOpen-f.yHigh}).high(function(){return f.yHigh-f.yHigh}).low(function(){return f.yLow-f.yHigh}).close(function(){return f.yClose-f.yHigh}),g.select("path").attr("d",j([b]))}),d(i,b,g)})};return g.decorate=function(a){return arguments.length?(d=a,g):d},a.rebind(g,f,"key"),kc(g,e),g}function wb(){var b=h,c=function(a){return a.values},d=function(d){d.each(function(d){var e=a.select(this),f=j().selector("g.stacked").element("g").attr("class","stacked"),g=f(e,d);g.enter().append("g"),g.select("g").datum(c).call(b)})};return d.series=function(a){return arguments.length?(b=a,d):b},d.values=function(a){return arguments.length?(c=a,d):c},d}function xb(){var a=$a().yValue(function(a){return a.y0+a.y}).y0Value(function(a){return a.y0}),b=wb().series(a),c=function(a){a.call(b)};return kc(c,a),c}function yb(){var a=bb().yValue(function(a){return a.y0+a.y}).y0Value(function(a){return a.y0}),b=wb().series(a),c=function(a){a.call(b)};return kc(c,a),c}function zb(){var a=y().yValue(function(a){return a.y0+a.y}),b=wb().series(a),c=function(a){a.call(b)};return kc(c,a),c}function Ab(b){var c=ab(.75),d=h,e=a.scale.linear(),f=function(a){return a.values},g=j().selector("g.stacked").element("g").attr("class","stacked"),i=function(h){h.each(function(h){var i=b.xValue(),j=function(a,b){return e(i(a,b))},k=c(h[0].values.map(j)),l=a.scale.linear();if(b.barWidth){var m=k/(h.length-1);b.barWidth(m)}var n=k/2;l.domain([0,h.length-1]).range([-n,n]);var o=g(this,h);o.enter().append("g"),o.select("g").datum(f).each(function(c,f){var g=a.select(this),h=function(a){return e(a)+l(f)};b.xScale(h),b.decorate(function(a,b){d(a,b,f)}),g.call(b)})})};return i.groupWidth=function(b){return arguments.length?(c=a.functor(b),i):c},i.decorate=function(a){return arguments.length?(d=a,i):d},i.xScale=function(a){return arguments.length?(e=a,i):e},i.values=function(a){return arguments.length?(f=a,i):f},kc(i,b,mc("decorate","xScale")),i}function Bb(){var b=a.time.scale(),c=a.scale.linear(),d=function(a,b){return a.high},e=function(a,b){return a.low},f=function(a,b){return a.value},g="vertical",k=ab(.5),l=h,m=j().selector("g.errorBar").element("g").attr("class","errorBar"),n=cc().value(0),o=function(h){h.each(function(h,j){var o=h.filter(i(e,d,f,f)),p=m(this,o);p.enter().append("path");var q="vertical"===g?b:c,r=k(o.map(function(a,b){return q(f(a,b))}));n.orient(g).width(r),p.each(function(h,i){var j,k,l;if("vertical"===g){var m=c(d(h,i));j=b(f(h,i))+","+m,k=0,l=c(e(h,i))-m}else{var o=b(e(h,i));j=o+","+c(f(h,i)),k=b(d(h,i))-o,l=0}n.high(k).low(l),a.select(this).attr("transform","translate("+j+")").select("path").attr("d",n([h]))}),l(p,h,j)})};return o.orient=function(a){return arguments.length?(g=a,o):g},o.xScale=function(a){return arguments.length?(b=a,o):b},o.yScale=function(a){return arguments.length?(c=a,o):c},o.low=function(b){return arguments.length?(e=a.functor(b),o):e},o.high=function(b){return arguments.length?(d=a.functor(b),o):d},o.value=function(b){return arguments.length?(f=a.functor(b),o):f},o.barWidth=function(b){return arguments.length?(k=a.functor(b),o):k},o.decorate=function(a){return arguments.length?(l=a,o):l},a.rebind(o,m,"key"),o}function Cb(){function a(){return"vertical"===b.orient()}var b=bb(),c=function(c){b.xValue(function(b,c){return a()?b.x:b.y1}).yValue(function(b,c){return a()?b.y1:b.x}).x0Value(function(b,c){return a()?0:b.y0}).y0Value(function(b,c){return a()?b.y0:0}).decorate(function(a,c,d){a.enter().attr("class","waterfall "+b.orient()).classed("up",function(a){return"up"===a.direction}).classed("down",function(a){return"down"===a.direction})}),b(c)};return kc(c,b),c}function Db(){var a="",b=function(a){return a.y},c=!1,d=function(a,b,c){return b===c.length-1?"Final":void 0},e={up:"up",down:"down",unchanged:"unchanged"},f=function(f){var g,h,i,j=f.length,k=0,l=0,m=[];for(c&&(l=b(f[0]),m.push({x:f[0][a],y0:0,y1:l,direction:e.unchanged}),k=1),k;j>k;k+=1)g=l,h=b(f[k])+l,m.push({x:f[k][a],y0:g,y1:h,direction:h-g>0?e.up:e.down}),i=d(f[k],k,f),i&&m.push({x:i,y0:0,y1:h,direction:e.unchanged}),l=h;return m};return f.xValueKey=function(b){return arguments.length?(a=b,f):a},f.yValue=function(a){return arguments.length?(b=a,f):b},f.total=function(a){return arguments.length?(d=a,f):d},f.startsWithTotal=function(a){return arguments.length?(c=a,f):c},f}function Eb(){var b=a.time.scale(),c=a.scale.linear(),d=function(a,b){return a.upperQuartile},e=function(a,b){return a.lowerQuartile},f=function(a,b){return a.high},g=function(a,b){return a.low},k=function(a,b){return a.value},l=function(a,b){return a.median},m="vertical",n=ab(.5),o=h,p=j().selector("g.box-plot").element("g").attr("class","box-plot"),q=bc().value(0),r=function(h){h.each(function(h,j){var r=h.filter(i(g,f,e,d,k,l)),s=p(this,r);s.enter().append("path");var t="vertical"===m?b:c,u=n(r.map(function(a,b){return t(k(a,b))}));q.orient(m).width(u),s.each(function(h,i){var j,n,o,p,r,s;if("vertical"===m){var t=c(f(h,i));j=b(k(h,i))+","+t,r=0,o=c(d(h,i))-t,n=c(l(h,i))-t,p=c(e(h,i))-t,s=c(g(h,i))-t}else{var u=b(g(h,i));j=u+","+c(k(h,i)),r=b(f(h,i))-u,o=b(d(h,i))-u,n=b(l(h,i))-u,p=b(e(h,i))-u,s=0}q.median(n).upperQuartile(o).lowerQuartile(p).high(r).low(s),a.select(this).attr("transform","translate("+j+")").select("path").attr("d",q([h]))}),o(s,h,j)})};return r.orient=function(a){return arguments.length?(m=a,r):m},r.xScale=function(a){return arguments.length?(b=a,r):b},r.yScale=function(a){return arguments.length?(c=a,r):c},r.lowerQuartile=function(b){return arguments.length?(e=a.functor(b),r):e},r.upperQuartile=function(b){return arguments.length?(d=a.functor(b),r):d},r.low=function(b){return arguments.length?(g=a.functor(b),r):g},r.high=function(b){return arguments.length?(f=a.functor(b),r):f},r.value=function(b){return arguments.length?(k=a.functor(b),r):k},r.median=function(b){return arguments.length?(l=a.functor(b),r):l},r.barWidth=function(b){return arguments.length?(n=a.functor(b),r):n},r.decorate=function(a){return arguments.length?(o=a,r):o},a.rebind(r,p,"key"),a.rebind(r,q,"cap"),r}function Fb(a,b){return a.map(function(a,c){return[b(a,c),a,c]}).reduce(function(a,b){return a[0]>b[0]?b:a},[Number.MAX_VALUE,null,-1])}function Gb(a,b){return function(a,b){return{x:a,y:b}}}function Hb(a,b,c,d,e,f){return f=f||function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},function(g,h){var j=e.filter(function(a,b){return i(c,d)(a,b)}),k=Fb(j,function(e){return f(g,h,a(c(e)),b(d(e)))})[1];return{datum:k,x:k?a(c(k)):g,y:k?b(d(k)):h}}}function Ib(a,b,c){return function(d,e){var f=a.xScale(),g=a.yScale(),h=a.xValue(),i=(a.yValue||a.yCloseValue).call(a);return Hb(f,g,h,i,b,c)(d,e)}}function Jb(a,b){function c(a,b,c,d){var e=a-c;return Math.abs(e)}return Ib(a,b,c)}function Kb(a,b){function c(a,b,c,d){var e=b-d;return Math.abs(e)}return Ib(a,b,c)}function Lb(){function b(b){return a.scale.identity().range(l(b))}function c(){var b=a.mouse(this),c=a.select(this),d=k.apply(this,b),e=c.datum();e.push(d),c.call(u),f.trackingstart.apply(this,arguments)}function d(){var b=a.mouse(this),c=a.select(this),d=k.apply(this,b),e=c.datum();e[e.length-1]=d,c.call(u),f.trackingmove.apply(this,arguments)}function e(){var b=a.select(this),c=b.datum();c.pop(),b.call(u),f.trackingend.apply(this,arguments)}var f=a.dispatch("trackingstart","trackingmove","trackingend"),g=a.time.scale(),i=a.scale.linear(),k=function(a,b){
return Gb(g,i)(a,b)},m=h,n=function(a){return a.x},o=function(a){return a.y},p=j().children(!0).selector("g.crosshair").element("g").attr("class","crosshair"),r=I().xValue(n).yValue(o),s=q().value(o).label(function(a){return a.y}),t=q().orient("vertical").value(n).label(function(a){return a.x}),u=function(f){f.each(function(f,h){var j=a.select(this).style("pointer-events","all").on("mouseenter.crosshair",c).on("mousemove.crosshair",d).on("wheel.crosshair",d).on("mouseleave.crosshair",e),k=j.selectAll("rect").data([f]);k.enter().append("rect").style("visibility","hidden"),j.select("rect").attr("x",l(g)[0]).attr("y",l(i)[1]).attr("width",l(g)[1]).attr("height",l(i)[0]);var n=p(j,f);n.enter().style("pointer-events","none");var o=H().series([s,t,r]).xScale(b(g)).yScale(b(i)).mapping(function(){return[this]});n.call(o),m(n,f,h)})};u.xScale=function(a){return arguments.length?(g=a,u):g},u.yScale=function(a){return arguments.length?(i=a,u):i},u.snap=function(a){return arguments.length?(k=a,u):k},u.decorate=function(a){return arguments.length?(m=a,u):m},a.rebind(u,f,"on");var v=hc("label");return kc(u,s,v,pc("y")),kc(u,t,v,pc("x")),u}function Mb(){function b(){var b=a.select(this),c=b.datum()[0];if("DONE"!==c.state){var d=a.mouse(this),e=l.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function c(){var c=a.select(this).on("click.fan",f).on("mousemove.fan",d).on("mouseleave.fan",e),g=c.datum();null==g[0]&&g.push({state:"SELECT_SOURCE"}),b.call(this),c.call(q)}function d(){var c=a.select(this);b.call(this),c.call(q)}function e(){var b=a.select(this),c=b.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),b.on("click.fan",null).on("mousemove.fan",null).on("mouseleave.fan",null)}function f(){var c=a.select(this),d=c.datum()[0];switch(d.state){case"SELECT_SOURCE":b.call(this),g.fansource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":b.call(this),g.fantarget.apply(this,arguments),d.state="DONE";break;case"DONE":g.fanclear.apply(this,arguments),d.state="SELECT_SOURCE",b.call(this);break;default:throw new Error("Unknown state "+d.state)}c.call(q)}var g=a.dispatch("fansource","fantarget","fanclear"),i=a.time.scale(),k=a.scale.linear(),l=function(a,b){return Gb(i,k)(a,b)},m=h,n=function(a){return a.x},o=function(a){return a.y},p=j().selector("g.fan").element("g").attr("class","fan"),q=function(b){b.each(function(b,d){var e=a.select(this).style("pointer-events","all").on("mouseenter.fan",c),f=e.selectAll("rect").data([b]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.range()[0]).attr("y",k.range()[1]).attr("width",i.range()[1]).attr("height",k.range()[0]);var g=p(e,b);g.each(function(a){if(a.x=i.range()[1],a.ay=a.by=a.cy=o(a.target),n(a.source)!==n(a.target)){if("DONE"===a.state&&n(a.source)>n(a.target)){var b=a.source;a.source=a.target,a.target=b}var c=(o(a.target)-o(a.source))/(n(a.target)-n(a.source)),d=a.x-n(a.source),e=c*d;a.ay=.618*e+o(a.source),a.by=.5*e+o(a.source),a.cy=.382*e+o(a.source)}});var h=g.enter();h.append("line").attr("class","trend"),h.append("line").attr("class","a"),h.append("line").attr("class","b"),h.append("line").attr("class","c"),h.append("polygon").attr("class","area"),g.select("line.trend").attr("x1",function(a){return n(a.source)}).attr("y1",function(a){return o(a.source)}).attr("x2",function(a){return n(a.target)}).attr("y2",function(a){return o(a.target)}),g.select("line.a").attr("x1",function(a){return n(a.source)}).attr("y1",function(a){return o(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.ay}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.b").attr("x1",function(a){return n(a.source)}).attr("y1",function(a){return o(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.by}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.c").attr("x1",function(a){return n(a.source)}).attr("y1",function(a){return o(a.source)}).attr("x2",function(a){return a.x}).attr("y2",function(a){return a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("polygon.area").attr("points",function(a){return n(a.source)+","+o(a.source)+" "+a.x+","+a.ay+" "+a.x+","+a.cy}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),m(g,b,d)})};return q.xScale=function(a){return arguments.length?(i=a,q):i},q.yScale=function(a){return arguments.length?(k=a,q):k},q.snap=function(a){return arguments.length?(l=a,q):l},q.decorate=function(a){return arguments.length?(m=a,q):m},a.rebind(q,g,"on"),q}function Nb(){function b(){var b=a.select(this),c=b.datum()[0];if("DONE"!==c.state){var d=a.mouse(this),e=l.apply(this,d);if("SELECT_SOURCE"===c.state)c.source=c.target=e;else{if("SELECT_TARGET"!==c.state)throw new Error("Unknown state "+c.state);c.target=e}}}function c(){var c=a.select(this).on("click.measure",f).on("mousemove.measure",d).on("mouseleave.measure",e),g=c.datum();null==g[0]&&g.push({state:"SELECT_SOURCE"}),b.call(this),c.call(t)}function d(){var c=a.select(this);b.call(this),c.call(t)}function e(){var b=a.select(this),c=b.datum();null!=c[0]&&"SELECT_SOURCE"===c[0].state&&c.pop(),b.on("click.measure",null).on("mousemove.measure",null).on("mouseleave.measure",null)}function f(){var c=a.select(this),d=c.datum()[0];switch(d.state){case"SELECT_SOURCE":b.call(this),g.measuresource.apply(this,arguments),d.state="SELECT_TARGET";break;case"SELECT_TARGET":b.call(this),g.measuretarget.apply(this,arguments),d.state="DONE";break;case"DONE":g.measureclear.apply(this,arguments),d.state="SELECT_SOURCE",b.call(this);break;default:throw new Error("Unknown state "+d.state)}c.call(t)}var g=a.dispatch("measuresource","measuretarget","measureclear"),i=a.time.scale(),k=a.scale.linear(),l=function(a,b){return Gb(i,k)(a,b)},m=h,n=a.functor(""),o=a.functor(""),p=a.functor(2),q=function(a){return a.x},r=function(a){return a.y},s=j().selector("g.measure").element("g").attr("class","measure"),t=function(b){b.each(function(b,d){var e=a.select(this).style("pointer-events","all").on("mouseenter.measure",c),f=e.selectAll("rect").data([b]);f.enter().append("rect").style("visibility","hidden"),e.select("rect").attr("x",i.range()[0]).attr("y",k.range()[1]).attr("width",i.range()[1]).attr("height",k.range()[0]);var g=s(e,b),h=g.enter();h.append("line").attr("class","tangent"),h.append("line").attr("class","horizontal"),h.append("line").attr("class","vertical"),h.append("text").attr("class","horizontal"),h.append("text").attr("class","vertical"),g.select("line.tangent").attr("x1",function(a){return q(a.source)}).attr("y1",function(a){return r(a.source)}).attr("x2",function(a){return q(a.target)}).attr("y2",function(a){return r(a.target)}),g.select("line.horizontal").attr("x1",function(a){return q(a.source)}).attr("y1",function(a){return r(a.source)}).attr("x2",function(a){return q(a.target)}).attr("y2",function(a){return r(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}),g.select("line.vertical").attr("x1",function(a){return q(a.target)}).attr("y1",function(a){return r(a.target)}).attr("x2",function(a){return q(a.target)}).attr("y2",function(a){return r(a.source)}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"});var j=p.apply(this,arguments);g.select("text.horizontal").attr("x",function(a){return q(a.source)+(q(a.target)-q(a.source))/2}).attr("y",function(a){return r(a.source)-j}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(n),g.select("text.vertical").attr("x",function(a){return q(a.target)+j}).attr("y",function(a){return r(a.source)+(r(a.target)-r(a.source))/2}).style("visibility",function(a){return"DONE"!==a.state?"hidden":"visible"}).text(o),m(g,b,d)})};return t.xScale=function(a){return arguments.length?(i=a,t):i},t.yScale=function(a){return arguments.length?(k=a,t):k},t.snap=function(a){return arguments.length?(l=a,t):l},t.decorate=function(a){return arguments.length?(m=a,t):m},t.xLabel=function(b){return arguments.length?(n=a.functor(b),t):n},t.yLabel=function(b){return arguments.length?(o=a.functor(b),t):o},t.padding=function(b){return arguments.length?(p=a.functor(b),t):p},a.rebind(t,g,"on"),t}function Ob(){var b=0,c=h,d=h,e=j().selector("g.container").element("g").attr({"class":"container","layout-style":"flex: 1"}),f=function(f){f.each(function(f,g){var h=z(b),i=e(this,[f]);i.enter().append("rect").layout("flex",1),i.enter().append("g").layout({position:"absolute",top:h.top,left:h.left,bottom:h.bottom,right:h.right}),a.select(this).layout(),i.select("g").call(c),d(i,f,g)})};return f.decorate=function(a){return arguments.length?(d=a,f):d},f.padding=function(a){return arguments.length?(b=a,f):b},f.component=function(a){return arguments.length?(c=a,f):c},f}function Pb(){var b=[],c=[],d="percent",e=0,f=null,g=function(g){Array.isArray(g[0])||(g=[g]);var h=b.map(function(a){return"string"!=typeof a?a:function(b){return b[a]}}),i=a.min(g,function(b){return a.min(b,function(b){return a.min(h.map(function(a){return a(b)}))})}),j=a.max(g,function(b){return a.max(b,function(b){return a.max(h.map(function(a){return a(b)}))})}),k="[object Date]"===Object.prototype.toString.call(i),l=k?i.getTime():i,m=k?j.getTime():j;if(null!=f){var n=k?f.getTime():f,o=Math.abs(m-n),p=Math.abs(l-n),q=Math.max(o,p);l=n-q,m=n+q}if("domain"===d)Array.isArray(e)?(l-=e[0],m+=e[1]):(l-=e,m+=e);else if("percent"===d)if(Array.isArray(e)){var r=[e[0]*(m-l),e[1]*(m-l)];l-=r[0],m+=r[1]}else{var s=e*(m-l)/2;l-=s,m+=s}return c.length&&(l=Math.min(l,a.min(c)),m=Math.max(m,a.max(c))),k&&(l=new Date(l),m=new Date(m)),[l,m]};return g.fields=function(a){return arguments.length?(b=a,g):b},g.include=function(a){return arguments.length?(c=a,g):c},g.padUnit=function(a){return arguments.length?(d=a,g):d},g.pad=function(a){return arguments.length?(e=a,g):e},g.symmetricalAbout=function(a){return arguments.length?(f=a,g):f},g}function Qb(a){var b=null;return function(){null==b&&(b=requestAnimationFrame(function(){b=null,a()}))}}function Rb(a){return a[Sb(a)]}function Sb(a){return Math.floor(Math.random()*a.length)}function Tb(a,b,c){var d=a.slice();return d[b]=c,d}function Ub(){var b=a.functor(0),c=f,d=function(a){if(0===a.length)return[];var d=c(a[b(a)]);return a.map(function(a,b){return(c(a,b)-d)/d})};return d.baseIndex=function(c){return arguments.length?(b=a.functor(c),d):b},d.value=function(a){return arguments.length?(c=a,d):c},d}a="default"in a?a["default"]:a,b="default"in b?b["default"]:b;var Vb=Math.PI,Wb=2*Vb,Xb=1e-6,Yb=Wb-Xb;c.prototype=d.prototype={constructor:c,moveTo:function(a,b){this._.push("M",this._x0=this._x1=+a,",",this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(a,b){this._.push("L",this._x1=+a,",",this._y1=+b)},quadraticCurveTo:function(a,b,c,d){this._.push("Q",+a,",",+b,",",this._x1=+c,",",this._y1=+d)},bezierCurveTo:function(a,b,c,d,e,f){this._.push("C",+a,",",+b,",",+c,",",+d,",",this._x1=+e,",",this._y1=+f)},arcTo:function(a,b,c,d,e){a=+a,b=+b,c=+c,d=+d,e=+e;var f=this._x1,g=this._y1,h=c-a,i=d-b,j=f-a,k=g-b,l=j*j+k*k;if(0>e)throw new Error("negative radius: "+e);if(null===this._x1)this._.push("M",this._x1=a,",",this._y1=b);else if(l>Xb)if(Math.abs(k*h-i*j)>Xb&&e){var m=c-f,n=d-g,o=h*h+i*i,p=m*m+n*n,q=Math.sqrt(o),r=Math.sqrt(l),s=e*Math.tan((Vb-Math.acos((o+l-p)/(2*q*r)))/2),t=s/r,u=s/q;Math.abs(t-1)>Xb&&this._.push("L",a+t*j,",",b+t*k),this._.push("A",e,",",e,",0,0,",+(k*m>j*n),",",this._x1=a+u*h,",",this._y1=b+u*i)}else this._.push("L",this._x1=a,",",this._y1=b);else;},arc:function(a,b,c,d,e,f){a=+a,b=+b,c=+c;var g=c*Math.cos(d),h=c*Math.sin(d),i=a+g,j=b+h,k=1^f,l=f?d-e:e-d;if(0>c)throw new Error("negative radius: "+c);null===this._x1?this._.push("M",i,",",j):(Math.abs(this._x1-i)>Xb||Math.abs(this._y1-j)>Xb)&&this._.push("L",i,",",j),c&&(l>Yb?this._.push("A",c,",",c,",0,1,",k,",",a-g,",",b-h,"A",c,",",c,",0,1,",k,",",this._x1=i,",",this._y1=j):(0>l&&(l=l%Wb+Wb),this._.push("A",c,",",c,",0,",+(l>=Vb),",",k,",",this._x1=a+c*Math.cos(e),",",this._y1=b+c*Math.sin(e))))},rect:function(a,b,c,d){this._.push("M",this._x0=this._x1=+a,",",this._y0=this._y1=+b,"h",+c,"v",+d,"h",-c,"Z")},toString:function(){return this._.join("")}};var Zb=function(a){return"function"==typeof a?a:function(){return a}},$b=function(){var a=null,b=function(a){return a.date},c=function(a){return a.open},e=function(a){return a.high},f=function(a){return a.low},g=function(a){return a.close},h="vertical",i=Zb(3),j=function(j){var k=a?void 0:a=d();return j.forEach(function(d,j){var k=b(d,j),l=c(d,j),m=e(d,j),n=f(d,j),o=g(d,j),p=i(d,j)/2;"vertical"===h?(a.moveTo(k,n),a.lineTo(k,m),a.moveTo(k,l),a.lineTo(k-p,l),a.moveTo(k,o),a.lineTo(k+p,o)):(a.moveTo(n,k),a.lineTo(m,k),a.moveTo(l,k),a.lineTo(l,k+p),a.moveTo(o,k),a.lineTo(o,k-p))}),k&&(a=null,k.toString()||null)};return j.context=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],j):a},j.x=function(){return arguments.length?(b=Zb(arguments.length<=0?void 0:arguments[0]),j):b},j.open=function(){return arguments.length?(c=Zb(arguments.length<=0?void 0:arguments[0]),j):c},j.high=function(){return arguments.length?(e=Zb(arguments.length<=0?void 0:arguments[0]),j):e},j.low=function(){return arguments.length?(f=Zb(arguments.length<=0?void 0:arguments[0]),j):f},j.close=function(){return arguments.length?(g=Zb(arguments.length<=0?void 0:arguments[0]),j):g},j.width=function(){return arguments.length?(i=Zb(arguments.length<=0?void 0:arguments[0]),j):i},j.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],j):h},j},_b=function(){var a=null,b=function(a){return a.x},c=function(a){return a.y},e="center",f="center",g=function(a){return a.height},h=Zb(3),i=function(i,j){var k=a?void 0:a=d();return i.forEach(function(d,i){var k=b.call(this,d,j||i),l=c.call(this,d,j||i),m=g.call(this,d,j||i),n=h.call(this,d,j||i),o=void 0;switch(e){case"left":o=n;break;case"right":o=0;break;case"center":o=n/2;break;default:throw new Error("Invalid horizontal alignment "+e)}var p=void 0;switch(f){case"bottom":p=-m;break;case"top":p=0;break;case"center":p=m/2;break;default:throw new Error("Invalid vertical alignment "+f)}a.rect(k-o,l-p,n,m)},this),k&&(a=null,k.toString()||null)};return i.context=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],i):a},i.x=function(){return arguments.length?(b=Zb(arguments.length<=0?void 0:arguments[0]),i):b},i.y=function(){return arguments.length?(c=Zb(arguments.length<=0?void 0:arguments[0]),i):c},i.width=function(){return arguments.length?(h=Zb(arguments.length<=0?void 0:arguments[0]),i):h},i.horizontalAlign=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.height=function(){return arguments.length?(g=Zb(arguments.length<=0?void 0:arguments[0]),i):g},i.verticalAlign=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],i):f},i},ac=function(){var a=null,b=function(a){return a.date},c=function(a){return a.open},e=function(a){return a.high},f=function(a){return a.low},g=function(a){return a.close},h=Zb(3),i=function(i){var j=a?void 0:a=d();return i.forEach(function(d,i){var j=b(d,i),k=c(d,i),l=e(d,i),m=f(d,i),n=g(d,i),o=h(d,i),p=o/2;a.rect(j-p,k,o,n-k),a.moveTo(j,Math.min(n,k)),a.lineTo(j,l),a.moveTo(j,Math.max(n,k)),a.lineTo(j,m)}),j&&(a=null,j.toString()||null)};return i.context=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],i):a},i.x=function(){return arguments.length?(b=Zb(arguments.length<=0?void 0:arguments[0]),i):b},i.open=function(){return arguments.length?(c=Zb(arguments.length<=0?void 0:arguments[0]),i):c},i.high=function(){return arguments.length?(e=Zb(arguments.length<=0?void 0:arguments[0]),i):e},i.low=function(){return arguments.length?(f=Zb(arguments.length<=0?void 0:arguments[0]),i):f},i.close=function(){return arguments.length?(g=Zb(arguments.length<=0?void 0:arguments[0]),i):g},i.width=function(){return arguments.length?(h=Zb(arguments.length<=0?void 0:arguments[0]),i):h},i},bc=function(){var a=null,b=function(a){return a.value},c=function(a){return a.median},e=function(a){return a.upperQuartile},f=function(a){return a.lowerQuartile},g=function(a){return a.high},h=function(a){return a.low},i="vertical",j=Zb(5),k=Zb(.5),l=function(l){var m=a?void 0:a=d();return l.forEach(function(d,l){var m=b(d,l),n=j(d,l),o=n/2,p=n*k(d,l),q=p/2,r=g(d,l),s=e(d,l),t=c(d,l),u=f(d,l),v=h(d,l),w=u-s;"vertical"===i?(a.moveTo(m-q,r),a.lineTo(m+q,r),a.moveTo(m,r),a.lineTo(m,s),a.rect(m-o,s,n,w),a.moveTo(m-o,t),a.lineTo(m+o,t),a.moveTo(m,u),a.lineTo(m,v),a.moveTo(m-q,v),a.lineTo(m+q,v)):(a.moveTo(v,m-q),a.lineTo(v,m+q),a.moveTo(v,m),a.lineTo(u,m),a.rect(u,m-o,-w,n),a.moveTo(t,m-o),a.lineTo(t,m+o),a.moveTo(s,m),a.lineTo(r,m),a.moveTo(r,m-q),a.lineTo(r,m+q))}),m&&(a=null,m.toString()||null)};return l.context=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l.value=function(){return arguments.length?(b=Zb(arguments.length<=0?void 0:arguments[0]),l):b},l.median=function(){return arguments.length?(c=Zb(arguments.length<=0?void 0:arguments[0]),l):c},l.upperQuartile=function(){return arguments.length?(e=Zb(arguments.length<=0?void 0:arguments[0]),l):e},l.lowerQuartile=function(){return arguments.length?(f=Zb(arguments.length<=0?void 0:arguments[0]),l):f},l.high=function(){return arguments.length?(g=Zb(arguments.length<=0?void 0:arguments[0]),l):g},l.low=function(){return arguments.length?(h=Zb(arguments.length<=0?void 0:arguments[0]),l):h},l.width=function(){return arguments.length?(j=Zb(arguments.length<=0?void 0:arguments[0]),l):j},l.orient=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],l):i},l.cap=function(){return arguments.length?(k=Zb(arguments.length<=0?void 0:arguments[0]),l):k},l},cc=function(){var a=null,b=function(a){return a.x},c=function(a){return a.high},e=function(a){return a.low},f="vertical",g=Zb(5),h=function(h){var i=a?void 0:a=d();return h.forEach(function(d,h){var i=b(d,h),j=g(d,h),k=j/2,l=c(d,h),m=e(d,h);"vertical"===f?(a.moveTo(i-k,l),a.lineTo(i+k,l),a.moveTo(i,l),a.lineTo(i,m),a.moveTo(i-k,m),a.lineTo(i+k,m)):(a.moveTo(m,i-k),a.lineTo(m,i+k),a.moveTo(m,i),a.lineTo(l,i),a.moveTo(l,i-k),a.lineTo(l,i+k))}),i&&(a=null,i.toString()||null)};return h.context=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],h):a},h.value=function(){return arguments.length?(b=Zb(arguments.length<=0?void 0:arguments[0]),h):b},h.high=function(){return arguments.length?(c=Zb(arguments.length<=0?void 0:arguments[0]),h):c},h.low=function(){return arguments.length?(e=Zb(arguments.length<=0?void 0:arguments[0]),h):e},h.width=function(){return arguments.length?(g=Zb(arguments.length<=0?void 0:arguments[0]),h):g},h.orient=function(){return arguments.length?(f=arguments.length<=0?void 0:arguments[0],h):f},h},dc=Object.freeze({context:e,identity:f,index:g,noop:h,defined:i}),ec=1e-6,fc=Object.freeze({isOrdinal:k,range:l,setRange:m}),gc=function(a){return a.map(function(a){return"string"==typeof a?new RegExp("^"+a+"$"):a})},hc=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b=gc(b),function(a){return b.some(function(b){return b.test(a)})&&a}},ic=function(a){return function(b){return a.reduce(function(a,b){return a&&b(a)},b)}},jc=function(a,b,c){var d=b[c];if("function"!=typeof d)throw new Error("Attempt to rebind "+c+" which isn't a function on the source object");return function(){for(var c=arguments.length,e=Array(c),f=0;c>f;f++)e[f]=arguments[f];var g=d.apply(b,e);return g===b?a:g}},kc=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;c>e;e++)d[e-2]=arguments[e];var f=ic(d),g=!0,h=!1,i=void 0;try{for(var j,k=Object.keys(b)[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=f(l);m&&(a[m]=jc(a,b,l))}}catch(n){h=!0,i=n}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}return a},lc=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;c>e;e++)d[e-2]=arguments[e];return kc(a,b,hc.apply(void 0,d))},mc=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b=gc(b),function(a){return b.every(function(b){return!b.test(a)})&&a}},nc=function(a){return function(b){return a[b]}},oc=function(a){return a[0].toUpperCase()+a.slice(1)},pc=function(a){return function(b){return a+oc(b)}},qc={band:n,gridline:p,line:q},rc=1e-6,sc=function(){var b="g",c=!1,d="g",e={},f=function(a,b){return b},g=function(g,h){var i=h||function(a){return a};g.selectAll&&g.node||(g=a.select(g));var j=g.selectAll(b);c&&(j=j.filter(function(){return this.parentNode===g.node()}));var k=j.data(i,f),l=k.enter().insert(d).attr(e).style("opacity",rc),m=a.transition(k.exit()).style("opacity",rc).remove();return k=a.transition(k).style("opacity",1),k.enter=a.functor(l),k.exit=a.functor(m),k};return g.selector=function(a){return arguments.length?(b=a,g):b},g.children=function(a){return arguments.length?(c=a,g):c},g.element=function(a){return arguments.length?(d=a,g):d},g.attr=function(a){if(!arguments.length)return e;if(1===arguments.length)e=arguments[0];else if(2===arguments.length){var b=arguments[0],c=arguments[1];e[b]=c}return g},g.key=function(a){return arguments.length?(f=a,g):f},g},tc=function(a){return a.map(function(a){return"string"==typeof a?new RegExp("^"+a+"$"):a})},uc=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b=tc(b),function(a){return b.some(function(b){return b.test(a)})&&a}},vc=function(a){return function(b){return a.reduce(function(a,b){return a&&b(a)},b)}},wc=function(a,b,c){var d=b[c];if("function"!=typeof d)throw new Error("Attempt to rebind "+c+" which isn't a function on the source object");return function(){for(var c=arguments.length,e=Array(c),f=0;c>f;f++)e[f]=arguments[f];var g=d.apply(b,e);return g===b?a:g}},xc=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;c>e;e++)d[e-2]=arguments[e];var f=vc(d),g=!0,h=!1,i=void 0;try{for(var j,k=Object.keys(b)[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=f(l);m&&(a[m]=wc(a,b,l))}}catch(n){h=!0,i=n}finally{try{!g&&k["return"]&&k["return"]()}finally{if(h)throw i}}},yc=function(b){var c=2,d=function(a){return a},e=sc().selector("text").element("text"),f=sc().selector("rect").element("rect"),g=sc().selector("circle").element("circle"),h=function(a){a.each(function(a,b){var h=Number(this.getAttribute("layout-width")),i=Number(this.getAttribute("layout-height")),j=f(this,[a]);j.attr({width:h,height:i});var k=Number(this.getAttribute("anchor-x")),l=Number(this.getAttribute("anchor-y")),m=g(this,[a]);m.attr({r:2,cx:k,cy:l});var n=e(this,[a]);n.enter().attr({dy:"0.9em",transform:"translate("+c+", "+c+")"}),n.text(d)})};return h.padding=function(a){return arguments.length?(c=a,h):c},h.value=function(b){return arguments.length?(d=a.functor(b),h):d},h},zc=function(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)},Ac=function(a,b){if(zc(a,b)){var c=Math.max(a.x,b.x),d=Math.min(a.x+a.width,b.x+b.width),e=Math.max(a.y,b.y),f=Math.min(a.y+a.height,b.y+b.height);return(d-c)*(f-e)}return 0},Bc=function(b,c){return a.sum(b.map(function(a,d){return c===d?0:Ac(b[c],a)}))},Cc=function(b){return a.sum(b.map(function(a,c){return Bc(b,c)}))},Dc=function(a,b){return a.map(function(a,c){return[b(a,c),a,c]}).reduce(function(a,b){return a[0]>b[0]?b:a},[Number.MAX_VALUE,null,-1])},Ec=function(a){var b=a.x,c=a.y,d=a.width,e=a.height;return[u(b,c,d,e,"bottom-right"),u(b-d,c,d,e,"bottom-left"),u(b-d,c-e,d,e,"top-left"),u(b,c-e,d,e,"top-right"),u(b,c-e/2,d,e,"middle-right"),u(b-d/2,c,d,e,"bottom-center"),u(b-d,c-e/2,d,e,"middle-left"),u(b-d/2,c-e,d,e,"top-center")]},Fc=function(a){return a[Gc(a)]},Gc=function(a){return Math.floor(Math.random()*a.length)},Hc=function(a,b,c){var d=a.slice();return d[b]=c,d},Ic=function(){function b(a,b){var c=Gc(a),d=a[c],e=Ec(d),f=Fc(e);return Hc(b,c,f)}function c(b){var c=Cc(b),d=0;if(0!==f[0]&&0!==f[1]){var e={x:0,y:0,width:f[0],height:f[1]};d=a.sum(b.map(function(a){var b=a.width*a.height-Ac(a,e);return 2*b}))}var g=a.sum(b.map(function(a){var b=a.width*a.height/4;return"bottom-right"===a.location&&(b=0),"middle-right"!==a.location&&"bottom-center"!==a.location||(b/=2),b}));return c+d+g}var d=1e3,e=1,f=[0,0],g=function(a){for(var f=a,g=a,h=1/0,i=d;i>0;){var j=b(f,g),k=c(j),l=Math.exp((h-k)/i);(h>k||l>Math.random())&&(g=j,h=k),i-=e}return g};return g.temperature=function(a){return arguments.length?(d=a,g):d},g.cooling=function(a){return arguments.length?(e=a,g):e},g.bounds=function(a){return arguments.length?(f=a,g):f},g},Jc=function(a){a=a||function(a){return a};var b=function(b){b=a(b);var c=function(a){return function(b,c){return-Bc(a,c)}},d=!0;do{var e=b.filter(function(a){return!a.hidden}),f=Dc(e,c(e));f[0]<0?f[1].hidden=!0:d=!1}while(d);return b};return xc(b,a),b},Kc=function(){var a=[0,0],b=function(b){return b.map(function(b,c){var d=b.x,e=b.y;return d+b.width>a[0]&&(d-=b.width),e+b.height>a[1]&&(e-=b.height),{height:b.height,width:b.width,x:d,y:e}})};return b.bounds=function(c){return arguments.length?(a=c,b):a},b},Lc={label:w,textLabel:yc,strategy:{boundingBox:Kc,greedy:v,annealing:Ic,removeOverlaps:Jc}};F.tickTransformer=D;var Mc={cartesian:A,sparkline:J,tooltip:B,smallMultiples:K},Nc="$";L.prototype=M.prototype={constructor:L,has:function(a){return Nc+a in this},get:function(a){return this[Nc+a]},set:function(a,b){return this[Nc+a]=b,this},remove:function(a){var b=Nc+a;return b in this&&delete this[b]},clear:function(){for(var a in this)a[0]===Nc&&delete this[a]},keys:function ed(){var ed=[];for(var a in this)a[0]===Nc&&ed.push(a.slice(1));return ed},values:function fd(){var fd=[];for(var a in this)a[0]===Nc&&fd.push(this[a]);return fd},entries:function gd(){var gd=[];for(var a in this)a[0]===Nc&&gd.push({key:a.slice(1),value:this[a]});return gd},size:function hd(){var hd=0;for(var a in this)a[0]===Nc&&++hd;return hd},empty:function(){for(var a in this)if(a[0]===Nc)return!1;return!0},each:function(a){for(var b in this)b[0]===Nc&&a(this[b],b.slice(1),this)}};var Oc=(M.prototype,{value:function(){}});O.prototype=N.prototype={constructor:O,on:function(a,b){var c,d=this._,e=P(a+"",d),f=-1,g=e.length;{if(!(arguments.length<2)){if(null!=b&&"function"!=typeof b)throw new Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=R(d[c],a.name,b);else if(null==b)for(c in d)d[c]=R(d[c],a.name,null);return this}for(;++f<g;)if((c=(a=e[f]).type)&&(c=Q(d[c],a.name)))return c}},copy:function id(){var id={},a=this._;for(var b in a)id[b]=a[b].slice();return new O(id)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=new Array(c),f=0;c>f;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;c>f;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;f>e;++e)d[e].value.apply(b,c)}};var Pc=V("application/json",function(a){return JSON.parse(a.responseText)}),Qc=(Z(","),Z("	"),Object.freeze({coinbase:$,quandl:_})),Rc={filter:{skipWeekends:ca},financial:ba,walk:aa},Sc=(ea(da),Object.freeze({bucket:la,largestTriangleOneBucket:ma,largestTriangleThreeBucket:na,modeMedian:oa})),Tc={feed:Qc,random:Rc,spread:pa,sampler:Sc},Uc=(ra(qa),{bollingerBands:Ra,exponentialMovingAverage:Sa,macd:Ta,merge:Qa,movingAverage:Ua,relativeStrengthIndex:Va,stochasticOscillator:Wa,forceIndex:Xa,envelope:Ya,elderRay:Za}),Vc={bollingerBands:_a,macd:cb,relativeStrengthIndex:db,stochasticOscillator:eb,forceIndex:fb,envelope:gb,elderRay:hb},Wc={algorithm:Uc,renderer:Vc};a.selection.prototype.layoutSuspended=pb,a.transition.prototype.layoutSuspended=pb,a.selection.prototype.layout=qb,a.transition.prototype.layout=qb;var Xc={discontinuity:{identity:C,skipWeekends:rb},dateTime:F},Yc={area:xb,bar:yb,stack:wb,line:zb},Zc={waterfall:Db},$c={area:$a,axis:s,bar:bb,candlestick:tb,cycle:ub,line:y,multi:H,ohlc:vb,point:I,stacked:Yc,grouped:Ab,xyBase:x,ohlcBase:sb,errorBar:Bb,boxPlot:Eb,waterfall:Cb,algorithm:Zc},_c={axis:r,bar:_b,boxPlot:bc,candlestick:ac,errorBar:cc,ohlc:$b},ad={crosshair:Lb,fibonacciFan:Mb,container:Ob,measure:Nb},bd=Object.freeze({randomItem:Rb,randomIndex:Sb,cloneAndReplace:Tb}),cd={dataJoin:j,expandRect:z,extent:Pb,fn:dc,minimum:Fb,fractionalBarWidth:ab,innerDimensions:G,scale:fc,noSnap:Gb,pointSnap:Hb,seriesPointSnap:Ib,seriesPointSnapXOnly:Jb,seriesPointSnapYOnly:Kb,render:Qb,array:bd,percentageChange:Ub},dd={annotation:qc,chart:Mc,data:Tc,indicator:Wc,scale:Xc,series:$c,svg:_c,tool:ad,util:cd,layout:Lc};return dd});
//# sourceMappingURL=d3fc.min.js.map