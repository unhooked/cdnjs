function CodeFlask(){}CodeFlask.prototype.run=function(e,t){var n=document.querySelectorAll(e);if(n.length>1)throw"CodeFlask.js ERROR: run() expects only one element, "+n.length+" given. Use .runAll() instead.";this.scaffold(n[0],!1,t)},CodeFlask.prototype.runAll=function(e,t){this.update=null,this.onUpdate=null;var n,a=document.querySelectorAll(e);for(n=0;n<a.length;n++)this.scaffold(a[n],!0,t)},CodeFlask.prototype.scaffold=function(e,t,n){var a=document.createElement("TEXTAREA"),l=document.createElement("PRE"),o=document.createElement("CODE"),i=e.textContent;n.language=this.handleLanguage(n.language),this.defaultLanguage=e.dataset.language||n.language||"markup",t||(this.textarea=a,this.highlightCode=o),e.classList.add("CodeFlask"),a.classList.add("CodeFlask__textarea"),l.classList.add("CodeFlask__pre"),o.classList.add("CodeFlask__code"),o.classList.add("language-"+this.defaultLanguage),/iPad|iPhone|iPod/.test(navigator.platform)&&(o.style.paddingLeft="3px"),e.innerHTML="",e.appendChild(a),e.appendChild(l),l.appendChild(o),a.value=i,this.renderOutput(o,a),Prism.highlightAll(),this.handleInput(a,o,l),this.handleScroll(a,l)},CodeFlask.prototype.renderOutput=function(e,t){e.innerHTML=t.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"\n"},CodeFlask.prototype.handleInput=function(e,t,n){var a,l,o,i=this;e.addEventListener("input",function(e){a=this,i.renderOutput(t,a),Prism.highlightAll()}),e.addEventListener("keydown",function(e){a=this,l=a.selectionStart,o=a.value,9===e.keyCode&&(a.value=o.substring(0,l)+"    "+o.substring(l,a.value.length),a.selectionStart=l+4,a.selectionEnd=l+4,e.preventDefault(),t.innerHTML=a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"\n",Prism.highlightAll())})},CodeFlask.prototype.handleScroll=function(e,t){e.addEventListener("scroll",function(){roundedScroll=Math.floor(this.scrollTop),navigator.userAgent.toLowerCase().indexOf("firefox")<0&&(this.scrollTop=roundedScroll),t.style.top="-"+roundedScroll+"px"})},CodeFlask.prototype.handleLanguage=function(e){return e.match(/html|xml|xhtml|svg/)?"markup":e.match(/js/)?"javascript":e},CodeFlask.prototype.onUpdate=function(e){if("function"!=typeof e)throw"CodeFlask.js ERROR: onUpdate() expects function, "+typeof e+" given instead.";this.textarea.addEventListener("input",function(t){e(this.value)})},CodeFlask.prototype.update=function(e){var t=document.createEvent("HTMLEvents");this.textarea.value=e,this.renderOutput(this.highlightCode,this.textarea),Prism.highlightAll(),t.initEvent("input",!1,!0),this.textarea.dispatchEvent(t)};
//# sourceMappingURL=codeflask.min.js.map