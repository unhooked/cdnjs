/* MarkerWithGhost v0.2.3 29-05-2015 (C) 2015 Terikon Software */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery","SlidingMarker"],b.bind(null,a)):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports=b(window,require("jquery"),require("SlidingMarker")):a.MarkerWithGhost=b(a,a.jQuery,a.SlidingMarker)}(this,function(a,b,c){"use strict";var d=a.google;b=b||{},b.extend=b.extend||function g(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)b[c]&&b[c].constructor===Object?a[c]&&a[c].constructor!==Object?a[c]=b[c]:(a[c]=a[c]||{},g(a[c],b[c])):a[c]=b[c]}),a};var e=function(a,b){function c(){}c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a},f=function(a){this.ghostPosition=null,this.ghostAnimationPosition=null,c.call(this,a),this.bindTo("ghostPosition",this,"position"),this.bindTo("ghostAnimationPosition",this._instance,"position")};return e(f,c),b.extend(f.prototype,{_isGhost:!1,set:function(a,b){if("position"===a)this._turnGhostModeOff();else if("ghostPosition"===a)return this._turnGhostModeOn(),this.originalSet("ghostPosition",b),void c.prototype._setInstancePositionAnimated.call(this,b);c.prototype.set.apply(this,arguments)},_rebindEventListener:null,_turnGhostModeOn:function(){this._isGhost||(this._rebindEventListener||(d.maps.event.removeListener(this._rebindEventListener),this._rebindEventListener=null),this.unbind("animationPosition"),this.unbind("ghostPosition"),this._isGhost=!0)},_turnGhostModeOff:function(){var a=this;this._isGhost&&(this._rebindEventListener=d.maps.event.addListener(this._instance,"position_changed",function(){a.getPosition()===a._instance.getPosition()&&(a.bindTo("animationPosition",a._instance,"position"),d.maps.event.removeListener(a._rebindEventListener),a._rebindEventListener=null)}),this.bindTo("ghostPosition",this,"position"),this._isGhost=!1)},getGhostPosition:function(){return this.get("ghostPosition")},setGhostPosition:function(a){this.set("ghostPosition",a)},getGhostAnimationPosition:function(){return this.get("ghostAnimationPosition")},position_changed:function(){this._turnGhostModeOff(),c.prototype.position_changed.apply(this,arguments)}}),f.initializeGlobally=function(){d.maps.Marker=f},f});
//# sourceMappingURL=MarkerWithGhost.min.js.map