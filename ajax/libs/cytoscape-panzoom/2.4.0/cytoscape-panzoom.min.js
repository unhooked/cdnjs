!function(){"use strict";var n=function(n,o){n&&(o.fn.cyPanzoom=o.fn.cytoscapePanzoom=function(n){return a.apply(this,[n,o]),this},n("core","panzoom",function(n){var t=this;return a.apply(t.container(),[n,o]),this}))},o={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},a=function(n,a){var t=a.extend(!0,{},o,n),e=n,i={destroy:function(){var n=a(this),o=n.find(".cy-panzoom");o.data("winbdgs").forEach(function(n){a(window).unbind(n.evt,n.fn)}),o.data("cybdgs").forEach(function(o){n.cytoscape("get").off(o.evt,o.fn)}),o.remove()},init:function(){"ontouchstart"in window;return a(this).each(function(){function n(n){var o={x:n.originalEvent.pageX-P.offset().left-P.width()/2,y:n.originalEvent.pageY-P.offset().top-P.height()/2},a=t.panDragAreaSize,e=Math.sqrt(o.x*o.x+o.y*o.y),i=Math.min(e/a,1);if(e<t.panInactiveArea)return{x:NaN,y:NaN};o={x:o.x/e,y:o.y/e},i=Math.max(t.panMinPercentSpeed,i);var c={x:-1*o.x*(i*t.panDistance),y:-1*o.y*(i*t.panDistance)};return c}function o(){clearInterval(q),y("mousemove",Y),j.hide()}function e(n){var o=n,a=Math.sqrt(o.x*o.x+o.y*o.y),e={x:-1*o.x/a,y:-1*o.y/a},i=P.width(),c=P.height(),p=a/t.panDistance,r=Math.max(t.panIndicatorMinOpacity,p),s=255-Math.round(255*r);j.show().css({left:i/2*e.x+i/2,top:c/2*e.y+c/2,background:"rgb("+s+", "+s+", "+s+")"})}function i(){var n=u.cytoscape("get");n.pan(),n.zoom();k=u.width()/2,E=u.height()/2}function c(){C=!0,i()}function p(){C=!1}function r(n){var o=u.cytoscape("get");C||i(),o.zoom({level:n,renderedPosition:{x:k,y:E}})}function s(n,o){void 0===o&&(o=0);var a=X,e=0+a,i=I.height()-Z.height()-2*a,c=n.pageY-I.offset().top-o;e>c&&(c=e),c>i&&(c=i);var p=1-(c-e)/(i-e);Z.css("top",c);var s=t.minZoom,d=t.maxZoom,m=Math.log(s)/Math.log(d),u=(1-m)*p+m,f=Math.pow(d,u);s>f?f=s:f>d&&(f=d),r(f)}function d(){var n=u.cytoscape("get"),o=n.zoom(),a=t.minZoom,e=t.maxZoom,i=Math.log(a)/Math.log(e),c=Math.log(o)/Math.log(e),p=1-(c-i)/(1-i),r=X,s=I.height()-Z.height()-2*X,d=p*(s-r);r>d&&(d=r),d>s&&(d=s),Z.css("top",d)}function m(n,o){var a;n.bind("mousedown",function(n){if(n.preventDefault(),n.stopPropagation(),0==n.button){var e=u.cytoscape("get"),i=function(){var n=e.zoom(),a=e.zoom()*o;a<t.minZoom&&(a=t.minZoom),a>t.maxZoom&&(a=t.maxZoom),a==t.maxZoom&&n==t.maxZoom||a==t.minZoom&&n==t.minZoom||r(a)};return c(),i(),a=setInterval(i,t.zoomDelay),!1}}),l("mouseup blur",function(){clearInterval(a),p()})}var u=a(this),f=[],v=a(window),l=function(n,o){f.push({evt:n,fn:o}),v.bind(n,o)},y=function(n,o){for(var a=0;a<f.length;a++){var t=f[a];if(t.evt===n&&t.fn===o){f.splice(a,1);break}}v.unbind(n,o)},h=[],z=u.cytoscape("get"),g=function(n,o){h.push({evt:n,fn:o}),z.on(n,o)},b=a('<div class="cy-panzoom"></div>');u.prepend(b),b.css("position","absolute"),b.data("winbdgs",f),b.data("cybdgs",h),t.zoomOnly&&b.addClass("cy-panzoom-zoom-only");var x=a('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+t.zoomInIcon+'"></span></div>');b.append(x);var w=a('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+t.zoomOutIcon+'"></span></div>');b.append(w);var M=a('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+t.resetIcon+'"></span></div>');b.append(M);var I=a('<div class="cy-panzoom-slider"></div>');b.append(I),I.append('<div class="cy-panzoom-slider-background"></div>');var Z=a('<div class="cy-panzoom-slider-handle"><span class="icon '+t.sliderHandleIcon+'"></span></div>');I.append(Z);var D=a('<div class="cy-panzoom-no-zoom-tick"></div>');I.append(D);var P=a('<div class="cy-panzoom-panner"></div>');b.append(P);var O=a('<div class="cy-panzoom-panner-handle"></div>');P.append(O);var N=a('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),S=a('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),A=a('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),F=a('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');P.append(N).append(S).append(A).append(F);var j=a('<div class="cy-panzoom-pan-indicator"></div>');P.append(j);var k,E,q,C=!1,Y=function(o){o.stopPropagation(),o.preventDefault(),clearInterval(q);var a=n(o);return isNaN(a.x)||isNaN(a.y)?void j.hide():(e(a),void(q=setInterval(function(){u.cytoscape("get").panBy(a)},t.panSpeed)))};O.bind("mousedown",function(n){Y(n),l("mousemove",Y)}),O.bind("mouseup",function(){o()}),l("mouseup blur",function(){o()}),I.bind("mousedown",function(){return!1});var H,Q,B=!1,X=2;Z.bind("mousedown",H=function(n){var o=n.target===Z[0]?n.offsetY:0;B=!0,c(),Z.addClass("active");var a=0;return l("mousemove",Q=function(n){var t=+new Date;return t>a+10?(a=t,s(n,o),!1):!1}),l("mouseup",function(){y("mousemove",Q),B=!1,Z.removeClass("active"),p()}),!1}),I.bind("mousedown",function(n){n.target!==Z[0]&&(H(n),s(n))}),d(),g("zoom",function(){B||d()}),function(){var n=1,o=t.minZoom,a=t.maxZoom,e=Math.log(o)/Math.log(a),i=Math.log(n)/Math.log(a),c=1-(i-e)/(1-e);if(c>1||0>c)return void D.hide();var p=X,r=I.height()-Z.height()-2*X,s=c*(r-p);p>s&&(s=p),s>r&&(s=r),D.css("top",s)}(),m(x,1+t.zoomFactor),m(w,1-t.zoomFactor),M.bind("mousedown",function(n){if(0==n.button){var o=u.cytoscape("get"),a=t.fitSelector?o.elements(t.fitSelector):o.elements();if(0===a.size())o.reset();else{var e="function"==typeof t.animateOnFit?t.animateOnFit.call():t.animateOnFit;e?o.animate({fit:{eles:a,padding:t.fitPadding}},{duration:t.fitAnimationDuration}):o.fit(a,t.fitPadding)}return!1}})})}};return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(a.error("No such function `"+e+"` for jquery.cytoscapePanzoom"),a(this)):i.init.apply(this,arguments)};"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&n(cytoscape,jQuery)}();
//# sourceMappingURL=cytoscape-panzoom.min.js.map