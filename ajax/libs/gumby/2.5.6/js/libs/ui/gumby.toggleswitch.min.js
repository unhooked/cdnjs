!function(t){"use strict";function i(i){this.$el=t(i),this.targets=[],this.on="",this.$el.length&&(Gumby.debug("Initializing Toggle",i),this.init())}function e(i){this.$el=t(i),this.targets=[],this.on="",this.$el.length&&(Gumby.debug("Initializing Switch",i),this.init())}i.prototype.init=function(){var i=this;this.setup(),this.$el.on(this.on,function(e){e.stopImmediatePropagation(),"A"===t(this).prop("tagName")&&e.preventDefault(),i.trigger(i.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",i.$el),i.trigger(i.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+i.constructor,$el),i.setup()})},i.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active"},i.prototype.parseTargets=function(){var i=Gumby.selectAttr.apply(this.$el,["trigger"]),e=0,s=[];return i?(e=i.indexOf("|"),-1===e?this.checkTargets([i])?[t(i)]:!1:(s=i.split("|"),this.checkTargets(s)?s.length>1?[t(s[0]),t(s[1])]:[t(s[0])]:!1)):!1},i.prototype.checkTargets=function(i){var e=0;for(e;e<i.length;e++)if(i[e]&&!t(i[e]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+i[e]),!1;return!0},i.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},e.prototype=new i,e.prototype.constructor=e,i.prototype.trigger=function(t){Gumby.debug("Triggering Toggle",this.$el),this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(this.$el.add(this.targets[0]).removeClass(this.className),this.targets[1].addClass(this.className)):(this.targets[1].removeClass(this.className),this.$el.add(this.targets[0]).addClass(this.className))):this.$el.toggleClass(this.className),t&&"function"==typeof t&&t.apply(this)},e.prototype.trigger=function(t){Gumby.debug("Triggering Switch",this.$el),this.targets?1==this.targets.length?this.$el.add(this.targets[0]).addClass(this.className):this.targets.length>1&&(this.$el.add(this.targets[0]).addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),t&&"function"==typeof t&&t.apply(this)},Gumby.addInitalisation("toggles",function(e){t(".toggle").each(function(){var s=t(this);return s.data("isToggle")&&!e?!0:(s.data("isToggle")&&e&&s.trigger("gumby.initialize"),s.data("isToggle",!0),void new i(s))})}),Gumby.addInitalisation("switches",function(i){t(".switch").each(function(){var s=t(this);return s.data("isSwitch")&&!i?!0:s.data("isSwitch")&&i?(s.trigger("gumby.initialize"),!0):(s.data("isSwitch",!0),void new e(s))})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery);