if(typeof one==="undefined"){one={include:function(){}}}(function(){var e=[],c=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,b=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,d=new RegExp("^(rgb|hsl|hsv)a?\\("+c.source+","+c.source+","+c.source+"(?:,"+b.source+")?\\)$","i");function a(m){if(Object.prototype.toString.apply(m)==="[object Array]"){if(m[0].length===4){return new a.RGB(m[0]/255,m[1]/255,m[2]/255,m[3]/255)}else{return new a[m[0]](m.slice(1,m.length))}}else{if(m.charCodeAt){var j=m.match(d);if(j){var n=j[1].toUpperCase(),l=typeof j[8]==="undefined"?j[8]:parseFloat(j[8]),f=n[0]==="H",h=j[3]?100:(f?360:255),i=(j[5]||f)?100:255,k=(j[7]||f)?100:255;if(typeof a[n]==="undefined"){throw new Error("one.color."+n+" is not installed.")}return new a[n](parseFloat(j[2])/h,parseFloat(j[4])/i,parseFloat(j[6])/k,l)}if(m.length<6){m=m.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")}var g=m.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(g){return new a.RGB(parseInt(g[1],16)/255,parseInt(g[2],16)/255,parseInt(g[3],16)/255)}}else{if(typeof m==="object"&&m.isColor){return m}else{if(!isNaN(m)){return new a.RGB((m&255)/255,((m&65280)>>8)/255,((m&16711680)>>16)/255)}}}}return false}a.installColorSpace=function(l,i,k){a[l]=new Function(i.join(","),"if (Object.prototype.toString.apply("+i[0]+") === '[object Array]') {"+i.map(function(m,n){return m+"="+i[0]+"["+n+"];"}).reverse().join("")+"}if ("+i.filter(function(m){return m!=="alpha"}).map(function(m){return"isNaN("+m+")"}).join("||")+'){throw new Error("[one.color.'+l+']: Invalid color: ("+'+i.join('+","+')+'+")");}'+i.map(function(m){if(m==="hue"){return"this._hue=hue<0?hue-Math.floor(hue):hue%1"}else{if(m==="alpha"){return"this._alpha=(isNaN(alpha)||alpha>1)?1:(alpha<0?0:alpha);"}else{return"this._"+m+"="+m+"<0?0:("+m+">1?1:"+m+")"}}}).join(";")+";");a[l].propertyNames=i;var j=a[l].prototype;["valueOf","hex","css","cssa"].forEach(function(m){j[m]=j[m]||(l==="RGB"?j.hex:new Function("return this.rgb()."+m+"();"))});j.isColor=true;j.equals=function(o,n){if(typeof n==="undefined"){n=1e-10}o=o[l.toLowerCase()]();for(var m=0;m<i.length;m=m+1){if(Math.abs(this["_"+i[m]]-o["_"+i[m]])>n){return false}}return true};j.toJSON=new Function("return ['"+l+"', "+i.map(function(m){return"this._"+m},this).join(", ")+"];");for(var h in k){if(k.hasOwnProperty(h)){var g=h.match(/^from(.*)$/);if(g){a[g[1].toUpperCase()].prototype[l.toLowerCase()]=k[h]}else{j[h]=k[h]}}}j[l.toLowerCase()]=function(){return this};j.toString=new Function('return "[one.color.'+l+':"+'+i.map(function(m,n){return'" '+i[n]+'="+this._'+m}).join("+")+'+"]";');i.forEach(function(m,n){j[m]=new Function("value","isDelta","if (typeof value === 'undefined') {return this._"+m+";}if (isDelta) {return new this.constructor("+i.map(function(p,o){return"this._"+p+(m===p?"+value":"")}).join(", ")+");}return new this.constructor("+i.map(function(p,o){return m===p?"value":"this._"+p}).join(", ")+");")});function f(n,m){var o={};o[m.toLowerCase()]=new Function("return this.rgb()."+m.toLowerCase()+"();");a[m].propertyNames.forEach(function(q,r){o[q]=new Function("value","isDelta","return this."+m.toLowerCase()+"()."+q+"(value, isDelta);")});for(var p in o){if(o.hasOwnProperty(p)&&a[n].prototype[p]===undefined){a[n].prototype[p]=o[p]}}}e.forEach(function(m){f(l,m);f(m,l)});e.push(l)};one.color=a}());(function(){var a=Math.round;one.color.installColorSpace("RGB",["red","green","blue","alpha"],{hex:function(){var b=(a(255*this._red)*65536+a(255*this._green)*256+a(255*this._blue)).toString(16);return"#"+("00000".substr(0,6-b.length))+b},css:function(){return"rgb("+a(255*this._red)+","+a(255*this._green)+","+a(255*this._blue)+")"},cssa:function(){return"rgba("+a(255*this._red)+","+a(255*this._green)+","+a(255*this._blue)+","+this._alpha+")"}})}());one.color.installColorSpace("HSV",["hue","saturation","value","alpha"],{rgb:function(){var h=this._hue,g=this._saturation,l=this._value,e=Math.min(5,Math.floor(h*6)),j=h*6-e,b=l*(1-g),a=l*(1-j*g),m=l*(1-(1-j)*g),c,d,k;switch(e){case 0:c=l;d=m;k=b;break;case 1:c=a;d=l;k=b;break;case 2:c=b;d=l;k=m;break;case 3:c=b;d=a;k=l;break;case 4:c=m;d=b;k=l;break;case 5:c=l;d=b;k=a;break}return new one.color.RGB(c,d,k,this._alpha)},hsl:function(){var b=(2-this._saturation)*this._value,a=this._saturation*this._value,d=b<=1?b:(2-b),c;if(d<1e-9){c=0}else{c=a/d}return new one.color.HSL(this._hue,c,b/2,this._alpha)},fromRgb:function(){var a=this._red,b=this._green,h=this._blue,f=Math.max(a,b,h),c=Math.min(a,b,h),i=f-c,e,d=(f===0)?0:(i/f),g=f;if(i===0){e=0}else{switch(f){case a:e=(b-h)/i/6+(b<h?1:0);break;case b:e=(h-a)/i/6+1/3;break;case h:e=(a-b)/i/6+2/3;break}}return new one.color.HSV(e,d,g,this._alpha)}});one.color.installColorSpace("HSL",["hue","saturation","lightness","alpha"],{hsv:function(){var a=this._lightness*2,b=this._saturation*((a<=1)?a:2-a),c;if(a+b<1e-9){c=0}else{c=(2*b)/(a+b)}return new one.color.HSV(this._hue,c,(a+b)/2,this._alpha)},rgb:function(){return this.hsv().rgb()},fromRgb:function(){return this.hsv().hsl()}});if(typeof module!=="undefined"){module.exports=one.color};