angular.module("ngWig",["ngwig-app-templates"]),angular.module("ngWig").directive("ngWig",["ngWigToolbar",function(a){return{scope:{content:"=ngWig"},restrict:"A",replace:!0,templateUrl:"ng-wig/views/ng-wig.html",link:function(b,c,d){function e(a){return a.split(",").map(Function.prototype.call,String.prototype.trim)}b.editMode=!1,b.autoexpand=!("autoexpand"in d)||"off"!==d.autoexpand,b.toolbarButtons=a.getToolbarButtons(d.buttons&&e(d.buttons)),b.toggleEditMode=function(){b.editMode=!b.editMode},b.execCommand=function(a,c){return b.editMode?!1:void(("createlink"!==a||(c=prompt("Please enter the URL","http://")))&&b.$emit("execCommand",{command:a,options:c}))}}}}]),angular.module("ngWig").directive("ngWigEditable",function(){function a(a,b,c,d){function e(){d.$setViewValue(b.html())}var f=b[0].ownerDocument;b.attr("contenteditable",!0),d.$render=function(){b.html(d.$viewValue||"")},b.bind("blur keyup change paste",e),a.$on("execCommand",function(a,c){b[0].focus();var d=f.selection,g=c.command,h=c.options;if(d)var i=d.createRange();if(f.queryCommandSupported&&!f.queryCommandSupported(g))throw'The command "'+g+'" is not supported';f.execCommand(g,!1,h),d&&(i.collapse(!1),i.select()),e()})}return{restrict:"A",require:"ngModel",replace:!0,link:a}}),angular.module("ngWig").directive("ngWigPlugin",["$compile",function(a){return{restrict:"E",link:function(b,c){var d="<"+b.button.pluginName+" />",e=a(d)(b);c.replaceWith(e)}}}]),angular.module("ngWig").provider("ngWigToolbar",function(){var a={list1:{title:"Unordered List",command:"insertunorderedlist",styleClass:"fa-list-ul"},list2:{title:"Ordered List",command:"insertorderedlist",styleClass:"fa-list-ol"},bold:{title:"Bold",command:"bold",styleClass:"fa-bold"},italic:{title:"Italic",command:"italic",styleClass:"fa-italic"},link:{title:"Link",command:"createlink",styleClass:"fa-link"}},b=["list1","list2","bold","italic","link"];this.setButtons=function(a){if(!angular.isArray(a))throw'Argument "buttons" should be an array';b=a},this.addStandartButton=function(c,d,e,f){if(!c||!d||!e)throw'Arguments "name", "title" and "command" are required';f=f||"",a[c]={title:d,command:e,styleClass:f},b.push(c)},this.addCustomButton=function(c,d){if(!c||!d)throw'Arguments "name" and "pluginName" are required';a[c]={pluginName:d,isComplex:!0},b.push(c)},this.$get=function(){return{getToolbarButtons:function(c){var d=[];return(c||b).forEach(function(b){if(!a[b])throw'There is no "'+b+'" in your library. Possible variants: '+Object.keys(a);d.push(a[b])}),d}}}}),angular.module("ngWig").config(["ngWigToolbarProvider",function(a){a.addCustomButton("formats","nw-formats-button")}]).directive("nwFormatsButton",function(){return{restrict:"E",replace:!0,template:'<select class="nw-select" ng-model="format" ng-change="execCommand(\'formatblock\', format.value)" ng-options="format.name for format in formats" ng-disabled="editMode"></select>',link:function(a){a.formats=[{name:"Normal text",value:"p"},{name:"Header 1",value:"h1"},{name:"Header 2",value:"h2"},{name:"Header 3",value:"h3"}],a.format=a.formats[0]}}}),angular.module("ngwig-app-templates",["ng-wig/views/ng-wig.html"]),angular.module("ng-wig/views/ng-wig.html",[]).run(["$templateCache",function(a){a.put("ng-wig/views/ng-wig.html",'<div class="ng-wig">\n  <ul class="nw-toolbar">\n    <li class="nw-toolbar__item" ng-repeat="button in toolbarButtons" >\n        <div ng-if="!button.isComplex">\n          <button type="button" class="nw-button" title="{{button.title}}" ng-click="execCommand(button.command)" ng-disabled="editMode">\n            <i class="fa {{button.styleClass}}"></i>\n          </button>\n        </div>\n        <div ng-if="button.isComplex">\n          <ng-wig-plugin plugin="{{button}}"></ng-wig-plugin>\n        </div>\n    </li><!--\n    --><li class="nw-toolbar__item">\n      <button type="button" class="nw-button nw-button--source" ng-class="{ \'nw-button--active\': editMode }" ng-click="toggleEditMode()"><i class="fa fa-pencil"></i></button>\n    </li>\n  </ul>\n\n  <div class="nw-editor-container">\n    <div class="nw-editor">\n      <textarea class="nw-editor__src" ng-show="editMode" ng-model="content"></textarea>\n      <div ng-class="{\'nw-invisible\': editMode, \'nw-autoexpand\': autoexpand}" class="nw-editor__res" ng-model="content" ng-wig-editable></div>\n    </div>\n  </div>\n</div>\n')}]);