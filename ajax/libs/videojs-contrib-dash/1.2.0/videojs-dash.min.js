/*! videojs-contrib-dash - v1.2.0 - 2016-03-08
 * Copyright (c) 2016 Brightcove  */
!function(a,b,c){"use strict";function d(a,e){var f,g=e.options();this.tech_=e,this.el_=e.el(),this.elParent_=this.el_.parentNode,a.src&&(e.isReady_=!1,f=a.src,this.keySystemOptions_=d.buildDashJSProtData(a.keySystemOptions),d.hideErrors(this.elParent_),d.context_=d.context_||{},this.mediaPlayer_=c.MediaPlayer(d.context_).create(),d.useVideoJSDebug&&d.useVideoJSDebug(this.mediaPlayer_),this.mediaPlayer_.initialize(),this.mediaPlayer_.attachView(this.el_),g.autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.retrieveManifest(f,b.bind(this,this.initializeDashJS)))}var e=function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=function(a){return"[object Object]"===Object.prototype.toString.call(a)},g=function(a,b){var c,d,e,h;h={};for(c in b)b.hasOwnProperty(c)&&(d=a[c],e=b[c],f(d)&&f(e)?a[c]=g(d,e):a[c]=b[c]);return a};d.prototype.initializeDashJS=function(a,c){var e={};return c?(d.showErrors(this.elParent_),this.tech_.triggerReady(),void this.dispose()):(d.getWidevineProtectionData&&(e=d.getWidevineProtectionData(a),this.keySystemOptions_=g(this.keySystemOptions_,e)),void this.resetSrc_(b.bind(this,function(){d.showErrors(this.elParent_),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(a),this.tech_.triggerReady()})))},d.hideErrors=function(a){a.className+=" vjs-dashjs-hide-errors"},d.showErrors=function(a){setTimeout(function(){a.className=a.className.replace(" vjs-dashjs-hide-errors","")},250)},d.buildDashJSProtData=function(a){var b,c,d,f={};if(!a||!e(a))return f;for(d=0;d<a.length;d++)b=a[d],c=g({},b.options),c.licenseUrl&&(c.serverURL=c.licenseUrl,delete c.licenseUrl),f[b.name]=c;return f},d.prototype.resetSrc_=function(a){this.el_&&(this.el_.src="",this.el_.setMediaKeys?this.el_.setMediaKeys(null).then(a,a):a())},d.prototype.dispose=function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.resetSrc_(function(){})},a.MediaSource&&b.Html5.registerSourceHandler({canHandleSource:function(a){var b=/^application\/dash\+xml/i,c=/\.mpd/i;return b.test(a.type)?"probably":c.test(a.src)?"maybe":""},handleSource:function(a,b){return new d(a,b)}},0),b.Html5DashJS=d}(window,window.videojs,window.dashjs);