function $w(t){return t=t.strip(),t?t.split(/\s+/):[]}function $H(t){return t&&t.constructor==Hash?t:new Hash(t)}function $(t){if(arguments.length>1){for(var e=0,n=[],r=arguments.length;r>e;e++)n.push($(arguments[e]));return n}return"string"==typeof t&&(t=document.getElementById(t)),Element.extend(t)}function $$(){return Selector.findChildElements(document,$A(arguments))}var Prototype={Version:"1.5.0",BrowserFeatures:{XPath:!!document.evaluate},ScriptFragment:"(?:<script.*?>)((\n|\r|.)*?)(?:</script>)",emptyFunction:function(){},K:function(t){return t}},Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},Abstract=new Object;Object.extend=function(t,e){for(var n in e)t[n]=e[n];return t},Object.extend(Object,{inspect:function(t){try{return void 0===t?"undefined":null===t?"null":t.inspect?t.inspect():t.toString()}catch(e){if(e instanceof RangeError)return"...";throw e}},keys:function(t){var e=[];for(var n in t)e.push(n);return e},values:function(t){var e=[];for(var n in t)e.push(t[n]);return e},clone:function(t){return Object.extend({},t)}}),Function.prototype.bind=function(){var t=this,e=$A(arguments),n=e.shift();return function(){return t.apply(n,e.concat($A(arguments)))}},Function.prototype.bindAsEventListener=function(t){var e=this,n=$A(arguments),t=n.shift();return function(r){return e.apply(t,[r||window.event].concat(n).concat($A(arguments)))}},Object.extend(Number.prototype,{toColorPart:function(){var t=this.toString(16);return 16>this?"0"+t:t},succ:function(){return this+1},times:function(t){return $R(0,this,!0).each(t),this}});var Try={these:function(){for(var t,e=0,n=arguments.length;n>e;e++){var r=arguments[e];try{t=r();break}catch(i){}}return t}},PeriodicalExecuter=Class.create();PeriodicalExecuter.prototype={initialize:function(t,e){this.callback=t,this.frequency=e,this.currentlyExecuting=!1,this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.callback(this)}finally{this.currentlyExecuting=!1}}},String.interpret=function(t){return null==t?"":String(t)},Object.extend(String.prototype,{gsub:function(t,e){var n,r="",i=this;for(e=arguments.callee.prepareReplacement(e);i.length>0;)(n=i.match(t))?(r+=i.slice(0,n.index),r+=String.interpret(e(n)),i=i.slice(n.index+n[0].length)):(r+=i,i="");return r},sub:function(t,e,n){return e=this.gsub.prepareReplacement(e),n=void 0===n?1:n,this.gsub(t,function(t){return--n<0?t[0]:e(t)})},scan:function(t,e){return this.gsub(t,e),this},truncate:function(t,e){return t=t||30,e=void 0===e?"...":e,this.length>t?this.slice(0,t-e.length)+e:this},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var t=new RegExp(Prototype.ScriptFragment,"img"),e=new RegExp(Prototype.ScriptFragment,"im");return(this.match(t)||[]).map(function(t){return(t.match(e)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(script){return eval(script)})},escapeHTML:function(){var t=document.createElement("div"),e=document.createTextNode(this);return t.appendChild(e),t.innerHTML},unescapeHTML:function(){var t=document.createElement("div");return t.innerHTML=this.stripTags(),t.childNodes[0]?t.childNodes.length>1?$A(t.childNodes).inject("",function(t,e){return t+e.nodeValue}):t.childNodes[0].nodeValue:""},toQueryParams:function(t){var e=this.strip().match(/([^?#]*)(#.*)?$/);return e?e[1].split(t||"&").inject({},function(t,e){if((e=e.split("="))[0]){var n=decodeURIComponent(e[0]),r=e[1]?decodeURIComponent(e[1]):void 0;void 0!==t[n]?(t[n].constructor!=Array&&(t[n]=[t[n]]),r&&t[n].push(r)):t[n]=r}return t}):{}},toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},camelize:function(){var t=this.split("-"),e=t.length;if(1==e)return t[0];for(var n="-"==this.charAt(0)?t[0].charAt(0).toUpperCase()+t[0].substring(1):t[0],r=1;e>r;r++)n+=t[r].charAt(0).toUpperCase()+t[r].substring(1);return n},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},inspect:function(t){var e=this.replace(/\\/g,"\\\\");return t?'"'+e.replace(/"/g,'\\"')+'"':"'"+e.replace(/'/g,"\\'")+"'"}}),String.prototype.gsub.prepareReplacement=function(t){if("function"==typeof t)return t;var e=new Template(t);return function(t){return e.evaluate(t)}},String.prototype.parseQuery=String.prototype.toQueryParams;var Template=Class.create();Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/,Template.prototype={initialize:function(t,e){this.template=t.toString(),this.pattern=e||Template.Pattern},evaluate:function(t){return this.template.gsub(this.pattern,function(e){var n=e[1];return"\\"==n?e[2]:n+String.interpret(t[e[3]])})}};var $break=new Object,$continue=new Object,Enumerable={each:function(t){var e=0;try{this._each(function(n){try{t(n,e++)}catch(r){if(r!=$continue)throw r}})}catch(n){if(n!=$break)throw n}return this},eachSlice:function(t,e){for(var n=-t,r=[],i=this.toArray();(n+=t)<i.length;)r.push(i.slice(n,n+t));return r.map(e)},all:function(t){var e=!0;return this.each(function(n,r){if(e=e&&!!(t||Prototype.K)(n,r),!e)throw $break}),e},any:function(t){var e=!1;return this.each(function(n,r){if(e=!!(t||Prototype.K)(n,r))throw $break}),e},collect:function(t){var e=[];return this.each(function(n,r){e.push((t||Prototype.K)(n,r))}),e},detect:function(t){var e;return this.each(function(n,r){if(t(n,r))throw e=n,$break}),e},findAll:function(t){var e=[];return this.each(function(n,r){t(n,r)&&e.push(n)}),e},grep:function(t,e){var n=[];return this.each(function(r,i){var o=r.toString();o.match(t)&&n.push((e||Prototype.K)(r,i))}),n},include:function(t){var e=!1;return this.each(function(n){if(n==t)throw e=!0,$break}),e},inGroupsOf:function(t,e){return e=void 0===e?null:e,this.eachSlice(t,function(n){for(;n.length<t;)n.push(e);return n})},inject:function(t,e){return this.each(function(n,r){t=e(t,n,r)}),t},invoke:function(t){var e=$A(arguments).slice(1);return this.map(function(n){return n[t].apply(n,e)})},max:function(t){var e;return this.each(function(n,r){n=(t||Prototype.K)(n,r),(void 0==e||n>=e)&&(e=n)}),e},min:function(t){var e;return this.each(function(n,r){n=(t||Prototype.K)(n,r),(void 0==e||e>n)&&(e=n)}),e},partition:function(t){var e=[],n=[];return this.each(function(r,i){((t||Prototype.K)(r,i)?e:n).push(r)}),[e,n]},pluck:function(t){var e=[];return this.each(function(n,r){e.push(n[t])}),e},reject:function(t){var e=[];return this.each(function(n,r){t(n,r)||e.push(n)}),e},sortBy:function(t){return this.map(function(e,n){return{value:e,criteria:t(e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0}).pluck("value")},toArray:function(){return this.map()},zip:function(){var t=Prototype.K,e=$A(arguments);"function"==typeof e.last()&&(t=e.pop());var n=[this].concat(e).map($A);return this.map(function(e,r){return t(n.pluck(r))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});var $A=Array.from=function(t){if(!t)return[];if(t.toArray)return t.toArray();for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e};Object.extend(Array.prototype,Enumerable),Array.prototype._reverse||(Array.prototype._reverse=Array.prototype.reverse),Object.extend(Array.prototype,{_each:function(t){for(var e=0,n=this.length;n>e;e++)t(this[e])},clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(t){return null!=t})},flatten:function(){return this.inject([],function(t,e){return t.concat(e&&e.constructor==Array?e.flatten():[e])})},without:function(){var t=$A(arguments);return this.select(function(e){return!t.include(e)})},indexOf:function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return e;return-1},reverse:function(t){return(t!==!1?this:this.toArray())._reverse()},reduce:function(){return this.length>1?this:this[0]},uniq:function(){return this.inject([],function(t,e){return t.include(e)?t:t.concat([e])})},clone:function(){return[].concat(this)},size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}}),Array.prototype.toArray=Array.prototype.clone,window.opera&&(Array.prototype.concat=function(){for(var t=[],e=0,n=this.length;n>e;e++)t.push(this[e]);for(var e=0,n=arguments.length;n>e;e++)if(arguments[e].constructor==Array)for(var r=0,i=arguments[e].length;i>r;r++)t.push(arguments[e][r]);else t.push(arguments[e]);return t});var Hash=function(t){Object.extend(this,t||{})};Object.extend(Hash,{toQueryString:function(t){var e=[];return this.prototype._each.call(t,function(t){if(t.key){if(t.value&&t.value.constructor==Array){var n=t.value.compact();if(!(n.length<2))return key=encodeURIComponent(t.key),void n.each(function(t){t=void 0!=t?encodeURIComponent(t):"",e.push(key+"="+encodeURIComponent(t))});t.value=n.reduce()}void 0==t.value&&(t[1]=""),e.push(t.map(encodeURIComponent).join("="))}}),e.join("&")}}),Object.extend(Hash.prototype,Enumerable),Object.extend(Hash.prototype,{_each:function(t){for(var e in this){var n=this[e];if(!n||n!=Hash.prototype[e]){var r=[e,n];r.key=e,r.value=n,t(r)}}},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},merge:function(t){return $H(t).inject(this,function(t,e){return t[e.key]=e.value,t})},remove:function(){for(var t,e=0,n=arguments.length;n>e;e++){var r=this[arguments[e]];void 0!==r&&(void 0===t?t=r:(t.constructor!=Array&&(t=[t]),t.push(r))),delete this[arguments[e]]}return t},toQueryString:function(){return Hash.toQueryString(this)},inspect:function(){return"#<Hash:{"+this.map(function(t){return t.map(Object.inspect).join(": ")}).join(", ")+"}>"}}),ObjectRange=Class.create(),Object.extend(ObjectRange.prototype,Enumerable),Object.extend(ObjectRange.prototype,{initialize:function(t,e,n){this.start=t,this.end=e,this.exclusive=n},_each:function(t){for(var e=this.start;this.include(e);)t(e),e=e.succ()},include:function(t){return t<this.start?!1:this.exclusive?t<this.end:t<=this.end}});var $R=function(t,e,n){return new ObjectRange(t,e,n)},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0};if(Ajax.Responders={responders:[],_each:function(t){this.responders._each(t)},register:function(t){this.include(t)||this.responders.push(t)},unregister:function(t){this.responders=this.responders.without(t)},dispatch:function(t,e,n,r){this.each(function(i){if("function"==typeof i[t])try{i[t].apply(i,[e,n,r])}catch(o){}})}},Object.extend(Ajax.Responders,Enumerable),Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}}),Ajax.Base=function(){},Ajax.Base.prototype={setOptions:function(t){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:""},Object.extend(this.options,t||{}),this.options.method=this.options.method.toLowerCase(),"string"==typeof this.options.parameters&&(this.options.parameters=this.options.parameters.toQueryParams())}},Ajax.Request=Class.create(),Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"],Ajax.Request.prototype=Object.extend(new Ajax.Base,{_complete:!1,initialize:function(t,e){this.transport=Ajax.getTransport(),this.setOptions(e),this.request(t)},request:function(t){this.url=t,this.method=this.options.method;var e=this.options.parameters;["get","post"].include(this.method)||(e._method=this.method,this.method="post"),e=Hash.toQueryString(e),e&&/Konqueror|Safari|KHTML/.test(navigator.userAgent)&&(e+="&_="),"get"==this.method&&e&&(this.url+=(this.url.indexOf("?")>-1?"&":"?")+e);try{Ajax.Responders.dispatch("onCreate",this,this.transport),this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous),this.options.asynchronous&&setTimeout(function(){this.respondToReadyState(1)}.bind(this),10),this.transport.onreadystatechange=this.onStateChange.bind(this),this.setRequestHeaders();var n="post"==this.method?this.options.postBody||e:null;this.transport.send(n),!this.options.asynchronous&&this.transport.overrideMimeType&&this.onStateChange()}catch(r){this.dispatchException(r)}},onStateChange:function(){var t=this.transport.readyState;t>1&&(4!=t||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var t={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if("post"==this.method&&(t["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(t.Connection="close")),"object"==typeof this.options.requestHeaders){var e=this.options.requestHeaders;if("function"==typeof e.push)for(var n=0,r=e.length;r>n;n+=2)t[e[n]]=e[n+1];else $H(e).each(function(e){t[e.key]=e.value})}for(var i in t)this.transport.setRequestHeader(i,t[i])},success:function(){return!this.transport.status||this.transport.status>=200&&this.transport.status<300},respondToReadyState:function(t){var e=Ajax.Request.Events[t],n=this.transport,r=this.evalJSON();if("Complete"==e){try{this._complete=!0,(this.options["on"+this.transport.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(n,r)}catch(i){this.dispatchException(i)}(this.getHeader("Content-type")||"text/javascript").strip().match(/^(text|application)\/(x-)?(java|ecma)script(;.*)?$/i)&&this.evalResponse()}try{(this.options["on"+e]||Prototype.emptyFunction)(n,r),Ajax.Responders.dispatch("on"+e,this,n,r)}catch(i){this.dispatchException(i)}"Complete"==e&&(this.transport.onreadystatechange=Prototype.emptyFunction)},getHeader:function(t){try{return this.transport.getResponseHeader(t)}catch(e){return null}},evalJSON:function(){try{var json=this.getHeader("X-JSON");return json?eval("("+json+")"):null}catch(e){return null}},evalResponse:function(){try{return eval(this.transport.responseText)}catch(e){this.dispatchException(e)}},dispatchException:function(t){(this.options.onException||Prototype.emptyFunction)(this,t),Ajax.Responders.dispatch("onException",this,t)}}),Ajax.Updater=Class.create(),Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(t,e,n){this.container={success:t.success||t,failure:t.failure||(t.success?null:t)},this.transport=Ajax.getTransport(),this.setOptions(n);var r=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=function(t,e){this.updateContent(),r(t,e)}.bind(this),this.request(e)},updateContent:function(){var t=this.container[this.success()?"success":"failure"],e=this.transport.responseText;this.options.evalScripts||(e=e.stripScripts()),(t=$(t))&&(this.options.insertion?new this.options.insertion(t,e):t.update(e)),this.success()&&this.onComplete&&setTimeout(this.onComplete.bind(this),10)}}),Ajax.PeriodicalUpdater=Class.create(),Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base,{initialize:function(t,e,n){this.setOptions(n),this.onComplete=this.options.onComplete,this.frequency=this.options.frequency||2,this.decay=this.options.decay||1,this.updater={},this.container=t,this.url=e,this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this),this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0,clearTimeout(this.timer),(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(t){this.options.decay&&(this.decay=t.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=t.responseText),this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1e3)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}}),Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(t,e){for(var n=[],r=document.evaluate(t,$(e)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),i=0,o=r.snapshotLength;o>i;i++)n.push(r.snapshotItem(i));return n}),document.getElementsByClassName=function(t,e){if(Prototype.BrowserFeatures.XPath){var n=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]";return document._getElementsByXPath(n,e)}for(var r,i=($(e)||document.body).getElementsByTagName("*"),o=[],s=0,a=i.length;a>s;s++)r=i[s],Element.hasClassName(r,t)&&o.push(Element.extend(r));return o},!window.Element)var Element=new Object;Element.extend=function(t){if(!t||_nativeExtensions||3==t.nodeType)return t;if(!t._extended&&t.tagName&&t!=window){var e=Object.clone(Element.Methods),n=Element.extend.cache;"FORM"==t.tagName&&Object.extend(e,Form.Methods),["INPUT","TEXTAREA","SELECT"].include(t.tagName)&&Object.extend(e,Form.Element.Methods),Object.extend(e,Element.Methods.Simulated);for(var r in e){var i=e[r];"function"!=typeof i||r in t||(t[r]=n.findOrStore(i))}}return t._extended=!0,t},Element.extend.cache={findOrStore:function(t){return this[t]=this[t]||function(){return t.apply(null,[this].concat($A(arguments)))}}},Element.Methods={visible:function(t){return"none"!=$(t).style.display},toggle:function(t){return t=$(t),Element[Element.visible(t)?"hide":"show"](t),t},hide:function(t){return $(t).style.display="none",t},show:function(t){return $(t).style.display="",t},remove:function(t){return t=$(t),t.parentNode.removeChild(t),t},update:function(t,e){return e="undefined"==typeof e?"":e.toString(),$(t).innerHTML=e.stripScripts(),setTimeout(function(){e.evalScripts()},10),t},replace:function(t,e){if(t=$(t),e="undefined"==typeof e?"":e.toString(),t.outerHTML)t.outerHTML=e.stripScripts();else{var n=t.ownerDocument.createRange();n.selectNodeContents(t),t.parentNode.replaceChild(n.createContextualFragment(e.stripScripts()),t)}return setTimeout(function(){e.evalScripts()},10),t},inspect:function(t){t=$(t);var e="<"+t.tagName.toLowerCase();return $H({id:"id",className:"class"}).each(function(n){var r=n.first(),i=n.last(),o=(t[r]||"").toString();o&&(e+=" "+i+"="+o.inspect(!0))}),e+">"},recursivelyCollect:function(t,e){t=$(t);for(var n=[];t=t[e];)1==t.nodeType&&n.push(Element.extend(t));return n},ancestors:function(t){return $(t).recursivelyCollect("parentNode")},descendants:function(t){return $A($(t).getElementsByTagName("*"))},immediateDescendants:function(t){if(!(t=$(t).firstChild))return[];for(;t&&1!=t.nodeType;)t=t.nextSibling;return t?[t].concat($(t).nextSiblings()):[]},previousSiblings:function(t){return $(t).recursivelyCollect("previousSibling")},nextSiblings:function(t){return $(t).recursivelyCollect("nextSibling")},siblings:function(t){return t=$(t),t.previousSiblings().reverse().concat(t.nextSiblings())},match:function(t,e){return"string"==typeof e&&(e=new Selector(e)),e.match($(t))},up:function(t,e,n){return Selector.findElement($(t).ancestors(),e,n)},down:function(t,e,n){return Selector.findElement($(t).descendants(),e,n)},previous:function(t,e,n){return Selector.findElement($(t).previousSiblings(),e,n)},next:function(t,e,n){return Selector.findElement($(t).nextSiblings(),e,n)},getElementsBySelector:function(){var t=$A(arguments),e=$(t.shift());return Selector.findChildElements(e,t)},getElementsByClassName:function(t,e){return document.getElementsByClassName(e,t)},readAttribute:function(t,e){if(t=$(t),document.all&&!window.opera){var n=Element._attributeTranslations;if(n.values[e])return n.values[e](t,e);n.names[e]&&(e=n.names[e]);var r=t.attributes[e];if(r)return r.nodeValue}return t.getAttribute(e)},getHeight:function(t){return $(t).getDimensions().height},getWidth:function(t){return $(t).getDimensions().width},classNames:function(t){return new Element.ClassNames(t)},hasClassName:function(t,e){if(t=$(t)){var n=t.className;return 0==n.length?!1:!(n!=e&&!n.match(new RegExp("(^|\\s)"+e+"(\\s|$)")))}},addClassName:function(t,e){return(t=$(t))?(Element.classNames(t).add(e),t):void 0},removeClassName:function(t,e){return(t=$(t))?(Element.classNames(t).remove(e),t):void 0},toggleClassName:function(t,e){return(t=$(t))?(Element.classNames(t)[t.hasClassName(e)?"remove":"add"](e),t):void 0},observe:function(){return Event.observe.apply(Event,arguments),$A(arguments).first()},stopObserving:function(){return Event.stopObserving.apply(Event,arguments),$A(arguments).first()},cleanWhitespace:function(t){t=$(t);for(var e=t.firstChild;e;){var n=e.nextSibling;3!=e.nodeType||/\S/.test(e.nodeValue)||t.removeChild(e),e=n}return t},empty:function(t){return $(t).innerHTML.match(/^\s*$/)},descendantOf:function(t,e){for(t=$(t),e=$(e);t=t.parentNode;)if(t==e)return!0;return!1},scrollTo:function(t){t=$(t);var e=Position.cumulativeOffset(t);return window.scrollTo(e[0],e[1]),t},getStyle:function(t,e){t=$(t),["float","cssFloat"].include(e)&&(e="undefined"!=typeof t.style.styleFloat?"styleFloat":"cssFloat"),e=e.camelize();var n=t.style[e];if(!n)if(document.defaultView&&document.defaultView.getComputedStyle){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}else t.currentStyle&&(n=t.currentStyle[e]);return"auto"==n&&["width","height"].include(e)&&"none"!=t.getStyle("display")&&(n=t["offset"+e.capitalize()]+"px"),window.opera&&["left","top","right","bottom"].include(e)&&"static"==Element.getStyle(t,"position")&&(n="auto"),"opacity"==e?n?parseFloat(n):(n=(t.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&n[1]?parseFloat(n[1])/100:1:"auto"==n?null:n},setStyle:function(t,e){t=$(t);for(var n in e){var r=e[n];"opacity"==n?1==r?(r=/Gecko/.test(navigator.userAgent)&&!/Konqueror|Safari|KHTML/.test(navigator.userAgent)?.999999:1,/MSIE/.test(navigator.userAgent)&&!window.opera&&(t.style.filter=t.getStyle("filter").replace(/alpha\([^\)]*\)/gi,""))):""==r?/MSIE/.test(navigator.userAgent)&&!window.opera&&(t.style.filter=t.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"")):(1e-5>r&&(r=0),/MSIE/.test(navigator.userAgent)&&!window.opera&&(t.style.filter=t.getStyle("filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*r+")")):["float","cssFloat"].include(n)&&(n="undefined"!=typeof t.style.styleFloat?"styleFloat":"cssFloat"),t.style[n.camelize()]=r}return t},getDimensions:function(t){t=$(t);var e=$(t).getStyle("display");if("none"!=e&&null!=e)return{width:t.offsetWidth,height:t.offsetHeight};var n=t.style,r=n.visibility,i=n.position,o=n.display;n.visibility="hidden",n.position="absolute",n.display="block";var s=t.clientWidth,a=t.clientHeight;return n.display=o,n.position=i,n.visibility=r,{width:s,height:a}},makePositioned:function(t){t=$(t);var e=Element.getStyle(t,"position");return"static"!=e&&e||(t._madePositioned=!0,t.style.position="relative",window.opera&&(t.style.top=0,t.style.left=0)),t},undoPositioned:function(t){return t=$(t),t._madePositioned&&(t._madePositioned=void 0,t.style.position=t.style.top=t.style.left=t.style.bottom=t.style.right=""),t},makeClipping:function(t){return t=$(t),t._overflow?t:(t._overflow=t.style.overflow||"auto","hidden"!=(Element.getStyle(t,"overflow")||"visible")&&(t.style.overflow="hidden"),t)},undoClipping:function(t){return t=$(t),t._overflow?(t.style.overflow="auto"==t._overflow?"":t._overflow,t._overflow=null,t):t}},Object.extend(Element.Methods,{childOf:Element.Methods.descendantOf}),Element._attributeTranslations={},Element._attributeTranslations.names={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc"},Element._attributeTranslations.values={_getAttr:function(t,e){return t.getAttribute(e,2)},_flag:function(t,e){return $(t).hasAttribute(e)?e:null},style:function(t){return t.style.cssText.toLowerCase()},title:function(t){var e=t.getAttributeNode("title");return e.specified?e.nodeValue:null}},Object.extend(Element._attributeTranslations.values,{href:Element._attributeTranslations.values._getAttr,src:Element._attributeTranslations.values._getAttr,disabled:Element._attributeTranslations.values._flag,checked:Element._attributeTranslations.values._flag,readonly:Element._attributeTranslations.values._flag,multiple:Element._attributeTranslations.values._flag}),Element.Methods.Simulated={hasAttribute:function(t,e){var n=Element._attributeTranslations;return e=n.names[e]||e,$(t).getAttributeNode(e).specified}},document.all&&!window.opera&&(Element.Methods.update=function(t,e){t=$(t),e="undefined"==typeof e?"":e.toString();var n=t.tagName.toUpperCase();if(["THEAD","TBODY","TR","TD"].include(n)){var r=document.createElement("div");switch(n){case"THEAD":case"TBODY":r.innerHTML="<table><tbody>"+e.stripScripts()+"</tbody></table>",depth=2;break;case"TR":r.innerHTML="<table><tbody><tr>"+e.stripScripts()+"</tr></tbody></table>",depth=3;break;case"TD":r.innerHTML="<table><tbody><tr><td>"+e.stripScripts()+"</td></tr></tbody></table>",depth=4}$A(t.childNodes).each(function(e){t.removeChild(e)}),depth.times(function(){r=r.firstChild}),$A(r.childNodes).each(function(e){t.appendChild(e)})}else t.innerHTML=e.stripScripts();return setTimeout(function(){e.evalScripts()},10),t}),Object.extend(Element,Element.Methods);var _nativeExtensions=!1;/Konqueror|Safari|KHTML/.test(navigator.userAgent)&&["","Form","Input","TextArea","Select"].each(function(t){var e="HTML"+t+"Element";if(!window[e]){var n=window[e]={};n.prototype=document.createElement(t?t.toLowerCase():"div").__proto__}}),Element.addMethods=function(t){function e(t,e,n){n=n||!1;var r=Element.extend.cache;for(var i in t){var o=t[i];n&&i in e||(e[i]=r.findOrStore(o))}}Object.extend(Element.Methods,t||{}),"undefined"!=typeof HTMLElement&&(e(Element.Methods,HTMLElement.prototype),e(Element.Methods.Simulated,HTMLElement.prototype,!0),e(Form.Methods,HTMLFormElement.prototype),[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement].each(function(t){e(Form.Element.Methods,t.prototype)}),_nativeExtensions=!0)};var Toggle=new Object;Toggle.display=Element.toggle,Abstract.Insertion=function(t){this.adjacency=t},Abstract.Insertion.prototype={initialize:function(t,e){if(this.element=$(t),this.content=e.stripScripts(),this.adjacency&&this.element.insertAdjacentHTML)try{this.element.insertAdjacentHTML(this.adjacency,this.content)}catch(n){var r=this.element.tagName.toUpperCase();if(!["TBODY","TR"].include(r))throw n;this.insertContent(this.contentFromAnonymousTable())}else this.range=this.element.ownerDocument.createRange(),this.initializeRange&&this.initializeRange(),this.insertContent([this.range.createContextualFragment(this.content)]);setTimeout(function(){e.evalScripts()},10)},contentFromAnonymousTable:function(){var t=document.createElement("div");return t.innerHTML="<table><tbody>"+this.content+"</tbody></table>",$A(t.childNodes[0].childNodes[0].childNodes)}};var Insertion=new Object;Insertion.Before=Class.create(),Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element)},insertContent:function(t){t.each(function(t){this.element.parentNode.insertBefore(t,this.element)}.bind(this))}}),Insertion.Top=Class.create(),Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element),this.range.collapse(!0)},insertContent:function(t){t.reverse(!1).each(function(t){this.element.insertBefore(t,this.element.firstChild)}.bind(this))}}),Insertion.Bottom=Class.create(),Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element),this.range.collapse(this.element)},insertContent:function(t){t.each(function(t){this.element.appendChild(t)}.bind(this))}}),Insertion.After=Class.create(),Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element)},insertContent:function(t){t.each(function(t){this.element.parentNode.insertBefore(t,this.element.nextSibling)}.bind(this))}}),Element.ClassNames=Class.create(),Element.ClassNames.prototype={initialize:function(t){this.element=$(t)},_each:function(t){this.element.className.split(/\s+/).select(function(t){return t.length>0})._each(t)},set:function(t){this.element.className=t},add:function(t){this.include(t)||this.set($A(this).concat(t).join(" "))},remove:function(t){this.include(t)&&this.set($A(this).without(t).join(" "))},toString:function(){return $A(this).join(" ")}},Object.extend(Element.ClassNames.prototype,Enumerable);var Selector=Class.create();Selector.prototype={initialize:function(t){this.params={classNames:[]},this.expression=t.toString().strip(),this.parseExpression(),this.compileMatcher()},parseExpression:function(){function t(t){throw"Parse error in selector: "+t}""==this.expression&&t("empty expression");for(var e,n,r,i,o=this.params,s=this.expression;e=s.match(/^(.*)\[([a-z0-9_:-]+?)(?:([~\|!]?=)(?:"([^"]*)"|([^\]\s]*)))?\]$/i);)o.attributes=o.attributes||[],o.attributes.push({name:e[2],operator:e[3],value:e[4]||e[5]||""}),s=e[1];if("*"==s)return this.params.wildcard=!0;for(;e=s.match(/^([^a-z0-9_-])?([a-z0-9_-]+)(.*)/i);){switch(n=e[1],r=e[2],i=e[3],n){case"#":o.id=r;break;case".":o.classNames.push(r);break;case"":case void 0:o.tagName=r.toUpperCase();break;default:t(s.inspect())}s=i}s.length>0&&t(s.inspect())},buildMatchExpression:function(){var t,e=this.params,n=[];if(e.wildcard&&n.push("true"),(t=e.id)&&n.push('element.readAttribute("id") == '+t.inspect()),(t=e.tagName)&&n.push("element.tagName.toUpperCase() == "+t.inspect()),(t=e.classNames).length>0)for(var r=0,i=t.length;i>r;r++)n.push("element.hasClassName("+t[r].inspect()+")");return(t=e.attributes)&&t.each(function(t){var e="element.readAttribute("+t.name.inspect()+")",r=function(t){return e+" && "+e+".split("+t.inspect()+")"};switch(t.operator){case"=":n.push(e+" == "+t.value.inspect());break;case"~=":n.push(r(" ")+".include("+t.value.inspect()+")");break;case"|=":n.push(r("-")+".first().toUpperCase() == "+t.value.toUpperCase().inspect());break;case"!=":n.push(e+" != "+t.value.inspect());break;case"":case void 0:n.push("element.hasAttribute("+t.name.inspect()+")");break;default:throw"Unknown operator "+t.operator+" in selector"}}),n.join(" && ")},compileMatcher:function(){this.match=new Function("element","if (!element.tagName) return false;       element = $(element);       return "+this.buildMatchExpression())},findElements:function(t){var e;if((e=$(this.params.id))&&this.match(e)&&(!t||Element.childOf(e,t)))return[e];t=(t||document).getElementsByTagName(this.params.tagName||"*");for(var n=[],r=0,i=t.length;i>r;r++)this.match(e=t[r])&&n.push(Element.extend(e));return n},toString:function(){return this.expression}},Object.extend(Selector,{matchElements:function(t,e){var n=new Selector(e);return t.select(n.match.bind(n)).map(Element.extend)},findElement:function(t,e,n){return"number"==typeof e&&(n=e,e=!1),Selector.matchElements(t,e||"*")[n||0]},findChildElements:function(t,e){return e.map(function(e){return e.match(/[^\s"]+(?:"[^"]*"[^\s"]+)*/g).inject([null],function(e,n){var r=new Selector(n);return e.inject([],function(e,n){return e.concat(r.findElements(n||t));
})})}).flatten()}});var Form={reset:function(t){return $(t).reset(),t},serializeElements:function(t,e){var n=t.inject({},function(t,e){if(!e.disabled&&e.name){var n=e.name,r=$(e).getValue();void 0!=r&&(t[n]?(t[n].constructor!=Array&&(t[n]=[t[n]]),t[n].push(r)):t[n]=r)}return t});return e?n:Hash.toQueryString(n)}};Form.Methods={serialize:function(t,e){return Form.serializeElements(Form.getElements(t),e)},getElements:function(t){return $A($(t).getElementsByTagName("*")).inject([],function(t,e){return Form.Element.Serializers[e.tagName.toLowerCase()]&&t.push(Element.extend(e)),t})},getInputs:function(t,e,n){t=$(t);var r=t.getElementsByTagName("input");if(!e&&!n)return $A(r).map(Element.extend);for(var i=0,o=[],s=r.length;s>i;i++){var a=r[i];e&&a.type!=e||n&&a.name!=n||o.push(Element.extend(a))}return o},disable:function(t){return t=$(t),t.getElements().each(function(t){t.blur(),t.disabled="true"}),t},enable:function(t){return t=$(t),t.getElements().each(function(t){t.disabled=""}),t},findFirstElement:function(t){return $(t).getElements().find(function(t){return"hidden"!=t.type&&!t.disabled&&["input","select","textarea"].include(t.tagName.toLowerCase())})},focusFirstElement:function(t){return t=$(t),t.findFirstElement().activate(),t}},Object.extend(Form,Form.Methods),Form.Element={focus:function(t){return $(t).focus(),t},select:function(t){return $(t).select(),t}},Form.Element.Methods={serialize:function(t){if(t=$(t),!t.disabled&&t.name){var e=t.getValue();if(void 0!=e){var n={};return n[t.name]=e,Hash.toQueryString(n)}}return""},getValue:function(t){t=$(t);var e=t.tagName.toLowerCase();return Form.Element.Serializers[e](t)},clear:function(t){return $(t).value="",t},present:function(t){return""!=$(t).value},activate:function(t){return t=$(t),t.focus(),!t.select||"input"==t.tagName.toLowerCase()&&["button","reset","submit"].include(t.type)||t.select(),t},disable:function(t){return t=$(t),t.disabled=!0,t},enable:function(t){return t=$(t),t.blur(),t.disabled=!1,t}},Object.extend(Form.Element,Form.Element.Methods);var Field=Form.Element,$F=Form.Element.getValue;if(Form.Element.Serializers={input:function(t){switch(t.type.toLowerCase()){case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(t);default:return Form.Element.Serializers.textarea(t)}},inputSelector:function(t){return t.checked?t.value:null},textarea:function(t){return t.value},select:function(t){return this["select-one"==t.type?"selectOne":"selectMany"](t)},selectOne:function(t){var e=t.selectedIndex;return e>=0?this.optionValue(t.options[e]):null},selectMany:function(t){var e,n=t.length;if(!n)return null;for(var r=0,e=[];n>r;r++){var i=t.options[r];i.selected&&e.push(this.optionValue(i))}return e},optionValue:function(t){return Element.extend(t).hasAttribute("value")?t.value:t.text}},Abstract.TimedObserver=function(){},Abstract.TimedObserver.prototype={initialize:function(t,e,n){this.frequency=e,this.element=$(t),this.callback=n,this.lastValue=this.getValue(),this.registerCallback()},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},onTimerEvent:function(){var t=this.getValue(),e="string"==typeof this.lastValue&&"string"==typeof t?this.lastValue!=t:String(this.lastValue)!=String(t);e&&(this.callback(this.element,t),this.lastValue=t)}},Form.Element.Observer=Class.create(),Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.Observer=Class.create(),Form.Observer.prototype=Object.extend(new Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}}),Abstract.EventObserver=function(){},Abstract.EventObserver.prototype={initialize:function(t,e){this.element=$(t),this.callback=e,this.lastValue=this.getValue(),"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var t=this.getValue();this.lastValue!=t&&(this.callback(this.element,t),this.lastValue=t)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback.bind(this))},registerCallback:function(t){if(t.type)switch(t.type.toLowerCase()){case"checkbox":case"radio":Event.observe(t,"click",this.onElementEvent.bind(this));break;default:Event.observe(t,"change",this.onElementEvent.bind(this))}}},Form.Element.EventObserver=Class.create(),Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.EventObserver=Class.create(),Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}}),!window.Event)var Event=new Object;Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(t){return t.target||t.srcElement},isLeftClick:function(t){return t.which&&1==t.which||t.button&&1==t.button},pointerX:function(t){return t.pageX||t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(t){return t.pageY||t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},stop:function(t){t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0)},findElement:function(t,e){for(var n=Event.element(t);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=e.toUpperCase());)n=n.parentNode;return n},observers:!1,_observeAndCache:function(t,e,n,r){this.observers||(this.observers=[]),t.addEventListener?(this.observers.push([t,e,n,r]),t.addEventListener(e,n,r)):t.attachEvent&&(this.observers.push([t,e,n,r]),t.attachEvent("on"+e,n))},unloadCache:function(){if(Event.observers){for(var t=0,e=Event.observers.length;e>t;t++)Event.stopObserving.apply(this,Event.observers[t]),Event.observers[t][0]=null;Event.observers=!1}},observe:function(t,e,n,r){t=$(t),r=r||!1,"keypress"==e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||t.attachEvent)&&(e="keydown"),Event._observeAndCache(t,e,n,r)},stopObserving:function(t,e,n,r){if(t=$(t),r=r||!1,"keypress"==e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||t.detachEvent)&&(e="keydown"),t.removeEventListener)t.removeEventListener(e,n,r);else if(t.detachEvent)try{t.detachEvent("on"+e,n)}catch(i){}}}),navigator.appVersion.match(/\bMSIE\b/)&&Event.observe(window,"unload",Event.unloadCache,!1);var Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},realOffset:function(t){var e=0,n=0;do e+=t.scrollTop||0,n+=t.scrollLeft||0,t=t.parentNode;while(t);return[n,e]},cumulativeOffset:function(t){var e=0,n=0;do e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent;while(t);return[n,e]},positionedOffset:function(t){var e=0,n=0;do if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t=t.offsetParent){if("BODY"==t.tagName)break;var r=Element.getStyle(t,"position");if("relative"==r||"absolute"==r)break}while(t);return[n,e]},offsetParent:function(t){if(t.offsetParent)return t.offsetParent;if(t==document.body)return t;for(;(t=t.parentNode)&&t!=document.body;)if("static"!=Element.getStyle(t,"position"))return t;return document.body},within:function(t,e,n){return this.includeScrollOffsets?this.withinIncludingScrolloffsets(t,e,n):(this.xcomp=e,this.ycomp=n,this.offset=this.cumulativeOffset(t),n>=this.offset[1]&&n<this.offset[1]+t.offsetHeight&&e>=this.offset[0]&&e<this.offset[0]+t.offsetWidth)},withinIncludingScrolloffsets:function(t,e,n){var r=this.realOffset(t);return this.xcomp=e+r[0]-this.deltaX,this.ycomp=n+r[1]-this.deltaY,this.offset=this.cumulativeOffset(t),this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+t.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+t.offsetWidth},overlap:function(t,e){return t?"vertical"==t?(this.offset[1]+e.offsetHeight-this.ycomp)/e.offsetHeight:"horizontal"==t?(this.offset[0]+e.offsetWidth-this.xcomp)/e.offsetWidth:void 0:0},page:function(t){var e=0,n=0,r=t;do if(e+=r.offsetTop||0,n+=r.offsetLeft||0,r.offsetParent==document.body&&"absolute"==Element.getStyle(r,"position"))break;while(r=r.offsetParent);r=t;do window.opera&&"BODY"!=r.tagName||(e-=r.scrollTop||0,n-=r.scrollLeft||0);while(r=r.parentNode);return[n,e]},clone:function(t,e){var n=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},arguments[2]||{});t=$(t);var r=Position.page(t);e=$(e);var i=[0,0],o=null;"absolute"==Element.getStyle(e,"position")&&(o=Position.offsetParent(e),i=Position.page(o)),o==document.body&&(i[0]-=document.body.offsetLeft,i[1]-=document.body.offsetTop),n.setLeft&&(e.style.left=r[0]-i[0]+n.offsetLeft+"px"),n.setTop&&(e.style.top=r[1]-i[1]+n.offsetTop+"px"),n.setWidth&&(e.style.width=t.offsetWidth+"px"),n.setHeight&&(e.style.height=t.offsetHeight+"px")},absolutize:function(t){if(t=$(t),"absolute"!=t.style.position){Position.prepare();var e=Position.positionedOffset(t),n=e[1],r=e[0],i=t.clientWidth,o=t.clientHeight;t._originalLeft=r-parseFloat(t.style.left||0),t._originalTop=n-parseFloat(t.style.top||0),t._originalWidth=t.style.width,t._originalHeight=t.style.height,t.style.position="absolute",t.style.top=n+"px",t.style.left=r+"px",t.style.width=i+"px",t.style.height=o+"px"}},relativize:function(t){if(t=$(t),"relative"!=t.style.position){Position.prepare(),t.style.position="relative";var e=parseFloat(t.style.top||0)-(t._originalTop||0),n=parseFloat(t.style.left||0)-(t._originalLeft||0);t.style.top=e+"px",t.style.left=n+"px",t.style.height=t._originalHeight,t.style.width=t._originalWidth}}};/Konqueror|Safari|KHTML/.test(navigator.userAgent)&&(Position.cumulativeOffset=function(t){var e=0,n=0;do{if(e+=t.offsetTop||0,n+=t.offsetLeft||0,t.offsetParent==document.body&&"absolute"==Element.getStyle(t,"position"))break;t=t.offsetParent}while(t);return[n,e]}),Element.addMethods();