/*!***************************************************
 * jmHighlight
 * Version 4.0.0
 * Copyright (c) 2014–2016, Julian Motz
 * For the full copyright and license information, 
 * please view the LICENSE file that was distributed 
 * with this source code.
 *****************************************************/
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(a,c){return b(a,c)}):"object"==typeof exports?b(require("jquery"),a):b(a.jQuery,a)}(this,function(a,b){"use strict";function c(a,c,e){return this.options=d.extend({},{debug:!1,log:b.console,element:"*",className:"*",filter:[],separateWordSearch:!1,diacritics:!0,synonyms:{}},c),this.keyword="string"==typeof e?this.escapeStr(e):"",this.$elements=d(),a instanceof d&&a.length>0&&!a.is(d("html"))&&(this.$elements=a.add(a.find("*")),this.filterElements()),this}var d=a;c.prototype.diacritics=["aÀÁÂÃÄÅàáâãäåĀāąĄ","cÇçćĆčČ","dđĐďĎ","eÈÉÊËèéêëěĚĒēęĘ","iÌÍÎÏìíîïĪī","lłŁ","nÑñňŇńŃ","oÒÓÔÕÕÖØòóôõöøŌō","rřŘ","sŠšśŚ","tťŤ","uÙÚÛÜùúûüůŮŪū","yŸÿýÝ","zŽžżŻźŹ"],c.prototype.escapeStr=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},c.prototype.log=function(a,b){"string"!=typeof b&&(b="debug"),"string"==typeof a&&this.options.debug&&this.options.log[b]("jmHighlight: "+a),"object"==typeof a&&this.options.debug&&this.options.log[b]("jmHighlight: ",a)},c.prototype.filterElements=function(){var a=this.options.filter;"object"==typeof a&&"[object Array]"===Object.prototype.toString.call(a)&&this.$elements instanceof d!=!1&&(this.$elements=this.$elements.filter(function(){for(var b=0,c=a.length;c>b;b++)if(d(this).is(a[b]))return!1;return!0}).filter(":not(script):not(style)"))},c.prototype.getKeywordRegexp=function(a){var b="string"!=typeof a?this.keyword:a;if("string"!=typeof b||""===b)return b;var c=b;return"object"!=typeof this.options.synonyms||d.isEmptyObject(this.options.synonyms)||(c=this.getSynonymsRegexp(c)),"boolean"==typeof this.options.diacritics&&this.options.diacritics&&(c=this.getDiacriticsRegexp(c)),c},c.prototype.getSynonymsRegexp=function(a){var b=a;if("string"!=typeof b)return b;var c=this;return d.each(this.options.synonyms,function(a,d){var e=c.escapeStr(a),f=c.escapeStr(d);b=b.replace(new RegExp("("+e+"|"+f+")","gmi"),"("+e+"|"+f+")")}),b},c.prototype.getDiacriticsRegexp=function(a){var b=a;if("string"!=typeof b)return b;for(var c=b.split(""),d=[],e=0,f=c.length;f>e;e++)for(var g=c[e],h=0,i=this.diacritics.length;i>h;h++){var j=this.diacritics[h];if(-1!==j.indexOf(g)){if(d.indexOf(j)>-1)continue;b=b.replace(new RegExp("["+j+"]","gmi"),"["+j+"]"),d.push(j)}}return b},c.prototype.highlight=function(a){var b="string"!=typeof a?this.keyword:a;if(""===b)return!0;if(0===this.$elements.length)return this.log("No search context provided","warn"),!1;var c=this.options.separateWordSearch,e=b.split(" ");if("boolean"==typeof c&&c&&e.length>1){for(var f=0,g=e.length;g>f;f++)if(!this.highlight(e[f]))return!1;return!0}this.$elements=this.$elements.filter("*:not([data-jmHighlight])");var h=this.getKeywordRegexp(b),i=new RegExp(h,"gmi"),j=this.options.element,k=this.options.className;return j="*"==j?"span":j,k="*"==k?"highlight":k,this.log("Highlighting keyword '"+b+"' with regex '"+h+"' in elements:"),this.log(this.$elements),this.$elements.contents().filter(function(){return 3===this.nodeType&&""!==this.textContent.trim()}).each(function(){for(var a,b,c=this;null!==(a=i.exec(c.textContent));)b=c.splitText(a.index),c=b.splitText(a[0].length),i.lastIndex=0,d(b).replaceWith(d("<"+j+" />",{"class":k,"data-jmHighlight":!0,text:a[0]}))}),!0},c.prototype.removeHighlight=function(){if(0===this.$elements.length)return this.log("No search context provided","warn"),!1;var a=this.options.element+"[data-jmHighlight]";"*"!=this.options.className&&(a+="."+this.options.className),this.log("Removing highlight elements with selector: '"+a+"'");var b=this.$elements.filter(a);return b.each(function(){var a=d(this),b=a.parent();a.replaceWith(a.text()),b[0].normalize()}),!0},d.fn.jmHighlight=function(a,b){var e=new c(d(this),b,a);return e.highlight()},d.fn.jmRemoveHighlight=function(a){var b=new c(d(this),a);return b.removeHighlight()}});