/*!***************************************************
 * jmHighlight
 * Version 2.2.2
 * Copyright (c) 2014-2015, Julian Motz
 * For the full copyright and license information, 
 * please view the LICENSE file that was distributed 
 * with this source code.
 *****************************************************/
(function(e,g){"function"===typeof define&&define.amd?define(["jquery"],function(h){return g(h,e)}):"object"===typeof exports?g(require("jquery"),e):g(e.jQuery,e)})(this,function(e,g){function h(c,d,b){if(0==d instanceof f||0==d.length||"string"!==typeof c||""==c)return!1;if("boolean"===typeof b.separateWordSearch&&b.separateWordSearch){var a=c.split(" ");if(1<a.length){b.debug&&console.log("Highlighting keywords separately");for(var k=0,e=a.length;k<e;k++)if(0==h(a[k],d.filter("*:not([data-jmHighlight])"),
b))return!1;return!0}}b.debug&&(console.log("Highlighting keyword '"+c+"' in elements:"),console.log(d));n(d,function(a){if("object"===typeof a&&"string"===typeof a.nodeValue){if(-1==a.nodeValue.toLowerCase().indexOf(c.toLowerCase()))return!0;b.debug&&console.log(a);var d="<"+b.element+" class='"+b.className+"' data-jmHighlight='true'>",f="</"+b.element+">";null!=a.parentNode&&(a.parentNode.innerHTML=a.parentNode.innerHTML.replace(new RegExp("((?![^<]*>)"+c+")","gim"),d+"$1"+f))}});return!0}function p(c,
d,b){if(0==c instanceof f||0==c.length)return!1;d.debug&&("string"===typeof b&&""!=b?console.log("Remove highlight with keyword: '"+b+"'"):console.log("Remove highlight"));c.each(function(){f(this).find(d.element+"."+d.className).each(function(){var a=f(this);if("string"!==typeof b||""==b||-1!=a.text().toLowerCase().indexOf(b.toLowerCase()))0<a.length&&"undefined"!==typeof a[0]&&null!=a[0]&&"undefined"!==typeof a[0].nextSibling&&null!=a[0].nextSibling&&"undefined"!==typeof a[0].nextSibling.nodeValue&&
null!=a[0].nextSibling.nodeValue?(a[0].nextSibling.nodeValue=a.text()+a[0].nextSibling.nodeValue,a.remove()):a.replaceWith(a.text())})});return!0}function l(c,d){if("object"!==typeof d||0==c instanceof f||"[object Array]"!=Object.prototype.toString.call(d))return!1;var b;return b=c.filter(function(){var a=f(this),b=!1;d.forEach(function(c){a.is(c)&&(b=!0)});return b?!1:!0})}function n(c,d){if("undefined"===typeof c||0==c instanceof f||"function"!==typeof d)return!1;c.each(function(){f(this).contents().filter(function(){return 3==
this.nodeType?!0:!1}).each(function(){d(this)})});return!0}var f=e,m={debug:!1,element:"span",className:"highlight",filter:[],separateWordSearch:!1};e.fn.jmHighlight=function(c,d){var b;var a=f(this);if(0==a instanceof f||"string"!==typeof c||""==c)b=!1;else{b=f.extend({},m,d);a=a.find("*:not([data-jmHighlight])");if("object"===typeof b&&"object"===typeof b.filter){var e=l(a,b.filter);0!=e&&(a=e)}b=h(c,a,b)}return b};e.fn.jmRemoveHighlight=function(c,d){var b;var a=f(this);if("undefined"===typeof a||
0==a instanceof f)b=!1;else{b=f.extend({},m,c);a=a.find("*:not([data-jmHighlight])");if("object"===typeof b&&"object"===typeof b.filter){var e=l(a,b.filter);0!=e&&(a=e)}b=p(a,b,d)}return b}});
