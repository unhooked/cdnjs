!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define("d3-dsv",["exports"],r):r(n.d3_dsv={})}(this,function(n){"use strict";function r(n){return new o(n)}function t(n){return new Function("d","return {"+n.map(function(n,r){return JSON.stringify(n)+": d["+r+"]"}).join(",")+"}")}function e(n,r){var e=t(n);return function(n,t){return r(e(n),t)}}function o(n){function r(r){return r.map(o).join(n)}function o(n){return i.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var i=new RegExp('["'+n+"\n]"),u=n.charCodeAt(0);this.parse=function(n,r){var o,i,u=this.parseRows(n,function(n,u){return o?o(n,u-1):(i=n,void(o=r?e(n,r):t(n)))});return u.columns=i,u},this.parseRows=function(n,r){function t(){if(s>=a)return f;if(o)return o=!1,i;var r=s;if(34===n.charCodeAt(r)){for(var t=r;t++<a;)if(34===n.charCodeAt(t)){if(34!==n.charCodeAt(t+1))break;++t}s=t+2;var e=n.charCodeAt(t+1);return 13===e?(o=!0,10===n.charCodeAt(t+2)&&++s):10===e&&(o=!0),n.slice(r+1,t).replace(/""/g,'"')}for(;a>s;){var e=n.charCodeAt(s++),c=1;if(10===e)o=!0;else if(13===e)o=!0,10===n.charCodeAt(s)&&(++s,++c);else if(e!==u)continue;return n.slice(r,s-c)}return n.slice(r)}for(var e,o,i={},f={},c=[],a=n.length,s=0,p=0;(e=t())!==f;){for(var d=[];e!==i&&e!==f;)d.push(e),e=t();r&&null==(d=r(d,p++))||c.push(d)}return c},this.format=function(r){if(Array.isArray(r[0]))return this.formatRows(r);var t=Object.create(null),e=[];return r.forEach(function(n){for(var r in n)(r+="")in t||e.push(t[r]=r)}),[e.map(o).join(n)].concat(r.map(function(r){return e.map(function(n){return o(r[n])}).join(n)})).join("\n")},this.formatRows=function(n){return n.map(r).join("\n")}}r.prototype=o.prototype;var i=r(","),u=r("	"),f="0.1.10";n.version=f,n.dsv=r,n.csv=i,n.tsv=u});