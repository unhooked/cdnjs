!function(){"use strict";var a={project:{name:"urBrowser",version:"3.160508",author:"Kei Cheng",github:"https://github.com/keicheng/urbrowser",website:"http://urbrowser.kule.tw",facebook:"https://www.facebook.com/kule.tw",cdnjs:"https://cdnjs.com/libraries/kule.lazy",license:"MIT License"},root:document.documentElement,getAgent:navigator.userAgent.toLowerCase(),getPlatform:navigator.platform.toLowerCase(),docSize:{width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},scrSize:{width:function(){return screen.width},height:function(){return screen.height}},bpsInfo:{xs:480,sm:768,md:992,lg:1200},getInformation:{getData:{data:{},size:{}}},getName:function(){var a=this.getAgent;return-1!=a.indexOf("iemobile")?"iemobile":-1!=a.indexOf("cordova")?"cordova":-1!=a.indexOf("vivaldi")?"vivaldi":-1!=a.indexOf("opr")||-1!=a.indexOf("opera")||-1!=a.indexOf("opios")?-1!=a.indexOf("version")?"version":-1!=a.indexOf("opios")?"opios":"opr":-1!=a.indexOf("firefox")?"firefox":-1!=a.indexOf("fxios")?"fxios":-1!=a.indexOf("msie")?"msie":-1!=a.indexOf("rv:")&&-1!=a.indexOf("windows")?"rv":-1!=a.indexOf("applewebkit")?-1!=a.indexOf("edge")?"edge":-1!=a.indexOf("chrome")?"chrome":-1!=a.indexOf("version")?"version":-1!=a.indexOf("crios")?"crios":"safari":null},getVersion:function(a){var b=this;a=a||b.getInformation.getName;var c=b.getAgent,d=[];if(a){var e=a.length,f=c.indexOf(a)+e+1,g=20,h=c.substr(f,g),i=/[0-9\.]*/g;return h=h.match(i)[0],d=[parseInt(h,10),h]}return null},OSName:function(a){var b=this,c=b.root,d=b.getAgent,e=b.platforms(),f=e;return a=a||"get","linux"==e?f=-1!=d.indexOf("ubuntu")?"ubuntu":"linux":"windows"==e?f=-1!=d.indexOf("windows nt")?"windows nt":"windows":"iphone"==e||"ipad"==e||"ipod"==e?f="ios":"android"==e&&(f="android"),"get"===a?f:void("set"===a&&c.setAttribute("data-os-name",f))},OSVersion:function(a){var b=this,c=b.root,d=b.getAgent,e=b.getPlatform,f=b.getInformation.getData.data["os-name"],g="mac"===f||"iphone"===e||"ipad"===e?/[0-9_]*/g:/[0-9\.]*/g;a=a||"get","wp"===f?f="windows phone":"chromeos"==f?f="cros i686":"mac"===f?f="mac os x":"ipad"===e?f="cpu os":"iphone"===e&&(f="iphone os");var h=f.length,i=d.indexOf(f)+h+1,j=10,k=d.substr(i,j);return k=k.match(g)[0],k=k.replace(/[_]+/g,"."),"get"===a?k:void("set"===a&&k.length&&c.setAttribute("data-os-version",k))},getBrowserNameAndCore:function(){var e,f,g,a=this,b=a.getAgent,c=a.getInformation.getName||a.getName(),d=a.getInformation.getVersions||a.getVersion(c);if(d=d[0],null===c?g=null:"fxios"==c?(e=" firefox",f="fxios",g=f+e):"opr"==c||"opera"==c||"opios"==c?(f="opera",e=-1!=b.indexOf("applewebkit")?" webkit":" presto",g=f+e):"version"==c||"chrome"==c||"crios"==c||"safari"==c?(e=" webkit","edge"==c?f="edge":"chrome"==c||"crios"==c?f="chrome":"version"==c?-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?(f="opera",e=-1!=b.indexOf("applewebkit")?"webkit":"presto",g=f+e):f=-1!=b.indexOf("android")?"adrBuiltin":"safari":f="safari",g=f+e):"msie"==c||"rv"==c||"iemobile"==c?(e="ie",f="ie",g=e):("cordova"===c?(e=" webkit inapp",-1!=b.indexOf("cordova-android")?f="cordova-adr cordova":-1!=b.indexOf("cordova-ios")&&(f="cordova-ios cordova"),g=f+e,d=null):-1!=b.indexOf("iemobile")||-1!=b.indexOf("msie")?g=c+" ie":-1!=b.indexOf("applewebkit")?(e=" webkit",e=-1!=b.indexOf("edge")?" webkit":-1!=b.indexOf("chrome")||-1!=b.indexOf("crios")?" chrome webkit":-1!=b.indexOf("version")&&-1!=b.indexOf("android")?" adrBuiltin webkit":" safari webkit",g=c+e):g=c,f=c),null!==d){var h=f+d,i=g.split(" "),j=d>1?i[0]+" "+h:i[0];if(i.length>1)for(var k=1;k<i.length;k++)j+=" "+i[k];if("ie"===f)for(var l=11,m=Number(d),n=m;l>n;n++)j+=" "+f+(n+1)+"lt";return j}return g},platforms:function(a){var f,b=this,c=b.root,d=b.getAgent,e=b.getPlatform;return a=a||"get",e.match("win32")||e.match("win64")||e.match("windows")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("windows")&&(f="windows"):e.match("arm")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("android")&&(f="android"):f=-1!=e.indexOf("linux")?-1!=d.indexOf("cros")?"chromeos":-1!=d.indexOf("android")?"android":"linux":-1!=e.indexOf("iphone")?"iphone":-1!=e.indexOf("ipad")?"ipad":-1!=e.indexOf("ipod")?"ipod":-1!=e.indexOf("android")?"android":-1!=e.indexOf("mac")?"mac":-1!=e.indexOf("x11")?"unix":-1!=e.indexOf("sunos")?"solaris":"unknown","get"===a?f:void("set"===a&&(c.id=f))},browserName:function(a){var e,b=this,c=b.root,d=b.getInformation.getBrowserNameAndCore||b.getBrowserNameAndCore(),f=c.className;if(a=a||"get",d){var g=d.split(" ");e=g[0]}else e="unknown";return f.length>0&&(d=-1==f.indexOf(d)?c.className+" "+d:f),"get"===a?[e,d]:void("set"===a&&(c.className=d,c.setAttribute("data-browser-name",e)))},browserVersion:function(a){var g,b=this,c=b.root,d=b.getAgent,e=b.getInformation.getName||b.getName(),f=b.getInformation.getVersions[1];return a=a||"get",g=-1!=d.indexOf(e)?f:"unknown","get"===a?g:void("set"===a&&c.setAttribute("data-browser-version",g))},device:function(a){var i,j,k,b=this,c=b.root,d=b.getAgent,e=b.docSize.width(),f=b.scrSize.width(),g=b.bpsInfo,h=b.getInformation.getData.id||b.platforms();return a=a||"get",i=-1!=d.indexOf("mobile")||window.orientation?"mobile":"android"===h?"mobile":"desktop",j="mobile"==i?f<g.sm?"phone":"tablet":"desktop",e<g.sm?k="phone":e>=g.sm&&e<g.md?k="tablet":e>=g.md&&(k="desktop"),"get"==a?[j,i,k]:void("set"==a&&(c.setAttribute("data-device",j),c.setAttribute("data-device-type",i),c.setAttribute("data-device-sim",k)))},orientation:function(a){var f,b=this,c=b.root,d=b.docSize,e=b.getInformation.getDevice;return a=a||"get",e=e[1],f="desktop"!==e&&void 0!=window.orientation?90==Math.abs(window.orientation)?"landscape":"portrait":d.width()>=d.height()?"landscape":"portrait","get"===a?f:void("set"===a&&c.setAttribute("data-orientation",f))},breakpoints:function(a){var g,h,b=this,c=b.root,d=b.docSize.width(),e=b.scrSize.width(),f=b.bpsInfo;return a=a||"get",d<f.sm?g="screen-xs":d>=f.sm&&d<f.md?g="screen-sm":d>=f.md&&d<f.lg?g="screen-md":d>=f.lg&&(g="screen-lg"),e<f.sm?h="screen-xs":e>=f.sm&&e<f.md?h="screen-sm":e>=f.md&&e<f.lg?h="screen-md":e>=f.lg&&(h="screen-lg"),"get"===a?[h,g]:void("set"===a&&(c.setAttribute("data-screen-range",h),c.setAttribute("data-doc-range",g)))},language:function(a){var b=this,c=b.root,d=c.lang;return a=a||"get",b=b||this,c=c||b.root,(null===d||""===d||"undefined"==d)&&(d=navigator.language||navigator.browserLanguage||navigator.systemLanguage),"get"===a?d:void("set"===a&&(c.lang=d))},resizing:function(){var a=this,b=a.storage.get(),c=a.device(),d=a.breakpoints(),e="mobile"===b.data["device-type"]&&"tablet"===b.data.device;"tablet"===b.data.device&&(a.layout("set"),b.data["layout-mode"]=a.layout()),a.device("set"),b.data["device-sim"]=c[2],a.orientation("set"),b.data.orientation=a.orientation(),a.breakpoints("set"),b.data["doc-range"]=d[1],a.storage.save(b,a,e)},inApp:function(a){var b=this,c=b.root,d=b.getAgent,e=-1!=d.indexOf("cordova")?!0:!1;a=a||"get";var f=function(){return-1!=d.indexOf("cordova-ios")?"ios":-1!=d.indexOf("cordova-android")?"android":void 0};return"get"===a?e?f():!1:void("set"===a&&(e?c.setAttribute("data-inapp",f()):c.setAttribute("data-inapp",e)))},layout:function(a){var g,b=this,c=b.root,d=b.bpsInfo,e=b.scrSize.width(),f=b.getInformation.getDevice;return a=a||"get",f=f[0],"phone"==f||"tablet"==f&&e<d.md?g="mobile":("desktop"==f||"tablet"==f&&e>=d.md)&&(g=b.inApp()!==!1?"mobile":"desktop"),"get"===a?g:void("set"===a&&c.setAttribute("data-layout-mode",g))},urCookies:{isEnabled:function(){var a=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?!0:!1),a},getDomainByParams:function(){function c(a){var b=new Object;if(!a)return b;for(var c=a.split(/[;&]/),d=0;d<c.length;d++){var e=c[d].split("=");if(e&&2==e.length){var f=unescape(e[0]),g=unescape(e[1]);g=g.replace(/\+/g," "),b[f]=g}}return b}var a=document.getElementById("urbrowser"),b=window.location.hostname;if(a){var d=a.src.replace(/^[^\?]+\??/,""),e=c(d);return e.domain&&-1!=b.indexOf(e.domain)?e.domain:b}return b},set:function(a,b,c){var d=this;if(d.isEnabled()){var e="string"==typeof b&&b.length>0,f="urbrowser="+b,g=e?365:-1,h=location.href;g=new Date((new Date).getTime()+1e3*g*60*60*24+288e5),f+="; expires="+g.toUTCString();var i=d.getDomainByParams();f+=i?"; domain="+i+"; path=/":"; path=/",document.cookie=f,c&&-1==h.indexOf("file:///")&&location.reload()}else console.log("Please open browser cookie.")},get:function(){for(var a="urbrowser=",b=document.cookie.split(";"),c=[],d=0;d<b.length;d++){for(var e=b[d];" "==e.charAt(0);)e=e.substring(1);0==e.indexOf(a)&&c.push(e.substring(a.length,e.length))}return 1==c.length?c[0]:0==c.length?!1:c.length>1?c:void 0},remove:function(){function d(a,d){document.cookie="urbrowser=; expires="+c;for(var e=0;e<a.length;e++){var f="urbrowser=; expires="+c+"; path="+a[e]+"; domain="+b;document.cookie=f;for(var g=0;g<d.length;g++){var h="urbrowser=; expires="+c+"; path="+a[e]+"; domain="+d[g];document.cookie=h}}}function e(){var a=location.pathname.replace(/\/$/,""),b=a.split("/"),c=[],e=window.location.hostname.split("."),f=[],g="";e.reverse();for(var j,h=0,i=b.length;i>h;h++)j=b.slice(0,h+1).join("/"),c.push(j),c.push(j+"/");for(var h=0;h<e.length;h++)g=0==g.length?e[h]:e[h]+"."+g,f.push(g),f.push("."+g);d(c,f)}var a=this,b=a.getDomainByParams(),c=new Date(0).toUTCString();e()},rebuild:function(a,b){this.remove(),b="object"==typeof b?JSON.stringify(b):b,this.set(a,b,!0)}},storage:{save:function(a,b,c){a||a.length?(a=JSON.stringify(a),c=c||!1,localStorage.setItem("urbrowser",a),b.urCookies.set(b,a,c)):(localStorage.removeItem("urbrowser"),b.urCookies.set(b,"",c))},get:function(){var a=localStorage.getItem("urbrowser");return a=JSON.parse(a)}},build:function(a,b){var c=b.getData.data,d=b.getData.size;a.buildBase(a);var e={lang:b.getData.lang,id:b.getData.id,"class":b.getData["class"],data:{device:c.device,"device-type":c["device-type"],"device-sim":c["device-sim"],"browser-name":c["browser-name"],"browser-version":c["browser-version"],"os-name":c["os-name"],"os-version":c["os-version"],"screen-range":c["screen-range"],"doc-range":c["doc-range"],orientation:c.orientation,"layout-mode":c["layout-mode"],inapp:c.inapp,"urb-version":c["urb-version"]},size:{width:d.width,height:d.height}};a.storage.save(e,a)},buildBase:function(a){a.language("set"),a.platforms("set"),a.browserName("set"),a.device("set"),a.browserVersion("set"),a.OSName("set"),a.OSVersion("set"),a.breakpoints("set"),a.orientation("set"),a.layout("set"),a.inApp("set"),a.root.setAttribute("data-urb-version",a.project.version)},diff:function(a,b){var c=this,d=c.root,f=(d.className,a.data),g=a.size,h=c.init(),i=h.getData,k=(h.getCookie,f?f["urb-version"]:0),l=c.project.version,m=!1,n=[],o=[],p=!1,q={};return d.lang=i.lang,d.setAttribute("id",i.id),d.className=i["class"],d.setAttribute("data-device",i.data.device),d.setAttribute("data-device-type",i.data["device-type"]),d.setAttribute("data-device-sim",i.data["device-sim"]),d.setAttribute("data-browser-name",i.data["browser-name"]),d.setAttribute("data-browser-version",i.data["browser-version"]),d.setAttribute("data-os-name",i.data["os-name"]),d.setAttribute("data-os-version",i.data["os-version"]),d.setAttribute("data-screen-range",i.data["screen-range"]),d.setAttribute("data-doc-range",i.data["doc-range"]),d.setAttribute("data-orientation",i.data.orientation),d.setAttribute("data-layout-mode",i.data["layout-mode"]),d.setAttribute("data-inapp",i.data.inapp),d.setAttribute("data-urb-version",i.data["urb-version"]),b&&(a["class"]!==i["class"]&&(a["class"]=i["class"],m=!0,n.push("class")),f["device-type"]!==i.data["device-type"]&&(f["device-type"]=i.data["device-type"],m=!0,n.push("data-device-type")),f["browser-version"]!==i["browser-version"]&&(f["browser-version"]=i["browser-version"],m=!0,n.push("data-browser-version")),f["screen-range"]!==i.data["screen-range"]&&(f["screen-range"]=i.data["screen-range"],m=!0,n.push("data-screen-range")),Number(l)!=Number(k)&&(f["urb-version"]=i.data["urb-version"],m=!0,n.push("data-urb-version"))),f.device!==i.data.device&&(f.device=i.data.device,m=!0,n.push("data-device")),f["device-sim"]!==i["device-sim"]&&(f["device-sim"]=i["device-sim"],m=!0,n.push("data-device-sim")),f.orientation!==i.data.orientation&&(f.orientation=i.data.orientation,m=!0,n.push("data-orientation"),"mobile"===i.data["device-type"]&&"tablet"===i.data.device&&(p=!0)),f["doc-range"]!==i.data["doc-range"]&&(f["doc-range"]=i.data["doc-range"],m=!0,n.push("data-doc-range")),f["layout-mode"]!==i.data["layout-mode"]&&(f["layout-mode"]=i.data["layout-mode"],m=!0,n.push("layout")),g.width=i.size.width,g.height=i.size.height,a.data=f,a.size=g,h.getCookie?(h.getCookie.data&&h.getCookie.data["urb-version"]?Number(i.data["urb-version"])!==Number(h.getCookie.data["urb-version"])&&(m=!0,o.push("data-urb-version")):(m=!0,o.push("no-data")),c.urCookies.get()!==localStorage.getItem("urbrowser")&&(m=!0,c.urCookies.rebuild(c,i),o.push("cookie-old"))):(m=!0,c.urCookies.rebuild(c,i),o.push("multiple-cookie")),q.whichs=n,q.cookies=o,q.isDiff=m,q.reload=p,q},update:function(a,b){var c=this,e=(c.root,a),g=(e.data,c.diff(e,b)),h=c.getInformation.getData;g.isDiff&&(g.cookies.length>0?c.storage.save(h,c,!0):c.storage.save(h,c,g.reload))},init:function(){var a=this,b=a.getInformation,c=a.urCookies.get();return c instanceof Array&&(a.urCookies.remove(),c=a.urCookies.get()),b.getNames=a.getName(),b.getVersions=a.getVersion(b.getNames),b.getDevice=a.device(),b.getBrowserNames=a.browserName(),b.getRanges=a.breakpoints(),b.getBrowserNameAndCore=a.getBrowserNameAndCore(),b.getCookie=c?JSON.parse(c):"",b.getData.lang=a.language("get"),b.getData.id=a.platforms(),b.getData["class"]=b.getBrowserNames[1],b.getData.data.device=b.getDevice[0],b.getData.data["device-type"]=b.getDevice[1],b.getData.data["device-sim"]=b.getDevice[2],b.getData.data["browser-name"]=b.getBrowserNames[0],b.getData.data["browser-version"]=b.getVersions[1],b.getData.data["os-name"]=a.OSName(),b.getData.data["os-version"]=a.OSVersion(),b.getData.data["screen-range"]=b.getRanges[0],b.getData.data["doc-range"]=b.getRanges[1],b.getData.data.orientation=a.orientation(),b.getData.data["layout-mode"]=a.layout(),b.getData.data.inapp=a.inApp(),b.getData.data["urb-version"]=a.project.version,b.getData.size.width=a.scrSize.width(),b.getData.size.height=a.scrSize.height(),b},done:function(){var c,a=this,d=(a.root,500);if("undefined"==typeof localStorage)a.buildBase(a);else{var e=a.init(),f=a.storage.get();f?a.update(f,!0):a.build(a,e),window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){a.resizing()},d)},!1)}}};a.done()}(window);