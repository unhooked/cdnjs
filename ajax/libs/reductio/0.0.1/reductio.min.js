!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.reductio=n()}}(function(){return function n(t,e,u){function r(o,c){if(!e[o]){if(!t[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=e[o]={exports:{}};t[o][0].call(s.exports,function(n){var e=t[o][1][n];return r(e?e:n)},s,s.exports,n,t,e,u)}return e[o].exports}for(var i="function"==typeof require&&require,o=0;o<u.length;o++)r(u[o]);return r}({1:[function(n,t){var e={add:function(n,t){return function(n,e){return t&&t(n,e),n.avg=n.count>0?n.sum/n.count:0,n}},remove:function(n,t){return function(n,e){return t&&t(n,e),n.avg=n.count>0?n.sum/n.count:0,n}},initial:function(n){return function(t){return t=n(t),t.avg=0,t}}};t.exports=e},{}],2:[function(n,t){var e={add:function(n){return n.count++,n},remove:function(n){return n.count--,n},initial:function(n){return void 0===n&&(n={}),n.count=0,n}};t.exports=e},{}],3:[function(n,t){var e={add:function(n,t){var e,u;return function(r,i){return t&&t(r,i),e=r.bisect(r.values,n(i),0,r.values.length),u=r.values[e],u&&u[0]===n(i)&&0!==u[1]||r.exceptionCount++,r}},remove:function(n,t){var e,u;return function(r,i){return t&&t(r,i),e=r.bisect(r.values,n(i),0,r.values.length),u=r.values[e],u&&u[0]===n(i)&&1===u[1]&&r.exceptionCount--,r}},initial:function(n){return function(t){return t=n(t),t.exceptionCount=0,t}}};t.exports=e},{}],4:[function(n,t){var e={add:function(n,t,e){var u,r;return function(i,o){return e&&e(i,o),u=i.bisect(i.values,n(o),0,i.values.length),r=i.values[u],r&&r[0]===n(o)&&0!==r[1]||(i.exceptionSum=i.exceptionSum+t(o)),i}},remove:function(n,t,e){var u,r;return function(i,o){return e&&e(i,o),u=i.bisect(i.values,n(o),0,i.values.length),r=i.values[u],r&&r[0]===n(o)&&1===r[1]&&(i.exceptionSum=i.exceptionSum-t(o)),i}},initial:function(n){return function(t){return t=n(t),t.exceptionSum=0,t}}};t.exports=e},{}],5:[function(n,t){var e={add:function(n,t){var e,u=crossfilter.bisect.by(function(n){return n}).left,r=crossfilter.bisect.by(function(n){return n.x}).right;return function(i,o){return t&&t(i,o),e=i.histogram[r(i.histogram,n(o),0,i.histogram.length)-1],e.y++,e.splice(u(e,n(o),0,e.length),0,n(o)),i}},remove:function(n,t){var e,u=crossfilter.bisect.by(function(n){return n}).left,r=crossfilter.bisect.by(function(n){return n.x}).right;return function(i,o){return t&&t(i,o),e=i.histogram[r(i.histogram,n(o),0,i.histogram.length)-1],e.y--,e.splice(u(e,n(o),0,e.length),1),i}},initial:function(n,t){return function(e){e=t(e),e.histogram=[];for(var u=[],r=1;r<n.length;r++)u=[],u.x=n[r-1],u.dx=n[r]-n[r-1],u.y=0,e.histogram.push(u);return e}}};t.exports=e},{}],6:[function(n,t){var e={add:function(n){return function(t,e){return n&&n(t,e),t.max=t.valueList[t.valueList.length-1],t}},remove:function(n){return function(t,e){return n&&n(t,e),0===t.valueList.length?(t.max=void 0,t):(t.max=t.valueList[t.valueList.length-1],t)}},initial:function(n){return function(t){return t=n(t),t.max=void 0,t}}};t.exports=e},{}],7:[function(n,t){var e={add:function(n){var t;return function(e,u){return n&&n(e,u),t=Math.floor(e.valueList.length/2),e.median=e.valueList.length%2?e.valueList[t]:(e.valueList[t-1]+e.valueList[t])/2,e}},remove:function(n){var t;return function(e,u){return n&&n(e,u),t=Math.floor(e.valueList.length/2),0===e.valueList.length?(e.median=void 0,e):(e.median=1===e.valueList.length||e.valueList.length%2?e.valueList[t]:(e.valueList[t-1]+e.valueList[t])/2,e)}},initial:function(n){return function(t){return t=n(t),t.median=void 0,t}}};t.exports=e},{}],8:[function(n,t){var e={add:function(n){return function(t,e){return n&&n(t,e),t.min=t.valueList[0],t}},remove:function(n){return function(t,e){return n&&n(t,e),0===t.valueList.length?(t.min=void 0,t):(t.min=t.valueList[0],t)}},initial:function(n){return function(t){return t=n(t),t.min=void 0,t}}};t.exports=e},{}],9:[function(n,t){function e(){function n(n){return t(),n.reduce(g,p,x),n}function t(){r&&(g=reductio_count.add,p=reductio_count.remove,x=reductio_count.initial),i&&(g=reductio_sum.add(i,g),p=reductio_sum.remove(i,p),x=reductio_sum.initial(x)),u&&(!r|!i?console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true)."):(g=reductio_avg.add(i,g),p=reductio_avg.remove(i,p),x=reductio_avg.initial(x))),c&&(o?(g=reductio_exception_count.add(o,g),p=reductio_exception_count.remove(o,p),x=reductio_exception_count.initial(x)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),a&&(o?(g=reductio_exception_sum.add(o,a,g),p=reductio_exception_sum.remove(o,a,p),x=reductio_exception_sum.initial(x)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(s||l||v||d)&&(g=reductio_value_list.add(s,g),p=reductio_value_list.remove(s,p),x=reductio_value_list.initial(x)),l&&(g=reductio_median.add(g),p=reductio_median.remove(p),x=reductio_median.initial(x)),v&&(g=reductio_min.add(g),p=reductio_min.remove(p),x=reductio_min.initial(x)),d&&(g=reductio_max.add(g),p=reductio_max.remove(p),x=reductio_max.initial(x)),o&&(g=reductio_value_count.add(o,g),p=reductio_value_count.remove(o,p),x=reductio_value_count.initial(x)),f&&m&&(g=reductio_histogram.add(f,g),p=reductio_histogram.remove(f,p),x=reductio_histogram.initial(m,x))}var e,u,r,i,o,c,a,s,l,f,v,d,m,g,p,x;return g=function(n){return n},g=function(n){return n},x=function(){return{}},n.order=function(t){return arguments.length?(e=t,n):e},n.count=function(t){return arguments.length?(r=t,n):r},n.sum=function(t){return arguments.length?(i=t,n):i},n.avg=function(t){return arguments.length?("function"==typeof t?(i&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),i=t,u=!0,r=!0):u=t,n):u},n.exception=function(t){return arguments.length?(o=t,n):o},n.valueList=function(t){return arguments.length?(s=t,n):s},n.median=function(t){return arguments.length?(s&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),s=t,l=t,n):l},n.min=function(t){return arguments.length?(s&&console.warn("VALUELIST accessor is being overwritten by min aggregation"),s=t,v=t,n):v},n.max=function(t){return arguments.length?(s&&console.warn("VALUELIST accessor is being overwritten by max aggregation"),s=t,d=t,n):d},n.exceptionCount=function(t){return arguments.length?("function"==typeof t?(i&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),o=t,c=!0):c=t,n):c},n.exceptionSum=function(t){return arguments.length?(a=t,n):a},n.histogramValue=function(t){return arguments.length?(f=t,n):f},n.histogramBins=function(t){return arguments.length?(m=t,n):m},n}reductio_count=n("./count.js"),reductio_sum=n("./sum.js"),reductio_avg=n("./avg.js"),reductio_median=n("./median.js"),reductio_min=n("./min.js"),reductio_max=n("./max.js"),reductio_value_count=n("./value-count.js"),reductio_value_list=n("./value-list.js"),reductio_exception_count=n("./exception-count.js"),reductio_exception_sum=n("./exception-sum.js"),reductio_histogram=n("./histogram.js"),t.exports=e},{"./avg.js":1,"./count.js":2,"./exception-count.js":3,"./exception-sum.js":4,"./histogram.js":5,"./max.js":6,"./median.js":7,"./min.js":8,"./sum.js":10,"./value-count.js":11,"./value-list.js":12}],10:[function(n,t){var e={add:function(n,t){return function(e,u){return t&&t(e,u),e.sum=e.sum+n(u),e}},remove:function(n,t){return function(e,u){return t&&t(e,u),e.sum=e.sum-n(u),e}},initial:function(n){return function(t){return t=n(t),t.sum=0,t}}};t.exports=e},{}],11:[function(n,t){var e={add:function(n,t){var e,u;return function(r,i){return t&&t(r,i),e=r.bisect(r.values,n(i),0,r.values.length),u=r.values[e],u&&u[0]===n(i)?u[1]++:r.values.splice(e,0,[n(i),1]),r}},remove:function(n,t){var e;return function(u,r){return t&&t(u,r),e=u.bisect(u.values,n(r),0,u.values.length),u.values[e][1]--,u}},initial:function(n){return function(t){return t=n(t),t.values=[],t.bisect=crossfilter.bisect.by(function(n){return n[0]}).left,t}}};t.exports=e},{}],12:[function(n,t){var e={add:function(n,t){var e,u=crossfilter.bisect.by(function(n){return n}).left;return function(r,i){return t&&t(r,i),e=u(r.valueList,n(i),0,r.valueList.length),r.valueList.splice(e,0,n(i)),r}},remove:function(n,t){var e,u=crossfilter.bisect.by(function(n){return n}).left;return function(r,i){return t&&t(r,i),e=u(r.valueList,n(i),0,r.valueList.length),r.valueList.splice(e,1),r}},initial:function(n){return function(t){return t=n(t),t.valueList=[],t}}};t.exports=e},{}]},{},[9])(9)});