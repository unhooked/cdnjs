/*
* A fast javascript implementation of simplex noise by Jonas Wagner
*
* Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.
* Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).
* With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
* Better rank ordering method by Stefan Gustavson in 2012.
*
*
* Copyright (C) 2012 Jonas Wagner
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*
*/(function(){function g(a){a||(a=Math.random),this.p=new Uint8Array(256),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var b=0;b<256;b++)this.p[b]=a()*255;for(b=0;b<512;b++)this.perm[b]=this.p[b&255],this.permMod12[b]=this.perm[b]%12}var a=.5*(Math.sqrt(3)-1),b=(3-Math.sqrt(3))/6,c=1/3,d=1/6,e=(Math.sqrt(5)-1)/4,f=(5-Math.sqrt(5))/20;g.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(c,d){var e=this.permMod12,f=this.perm,g=this.grad3,h,i,j,k=(c+d)*a,l=Math.floor(c+k),m=Math.floor(d+k),n=(l+m)*b,o=l-n,p=m-n,q=c-o,r=d-p,s,t;q>r?(s=1,t=0):(s=0,t=1);var u=q-s+b,v=r-t+b,w=q-1+2*b,x=r-1+2*b,y=l&255,z=m&255,A=.5-q*q-r*r;if(A<0)h=0;else{var B=e[y+f[z]]*3;A*=A,h=A*A*(g[B]*q+g[B+1]*r)}var C=.5-u*u-v*v;if(C<0)i=0;else{var D=e[y+s+f[z+t]]*3;C*=C,i=C*C*(g[D]*u+g[D+1]*v)}var E=.5-w*w-x*x;if(E<0)j=0;else{var F=e[y+1+f[z+1]]*3;E*=E,j=E*E*(g[F]*w+g[F+1]*x)}return 70*(h+i+j)},noise3D:function(a,b,e){var f=this.permMod12,g=this.perm,h=this.grad3,i,j,k,l,m=(a+b+e)*c,n=Math.floor(a+m),o=Math.floor(b+m),p=Math.floor(e+m),q=(n+o+p)*d,r=n-q,s=o-q,t=p-q,u=a-r,v=b-s,w=e-t,x,y,z,A,B,C;u>=v?v>=w?(x=1,y=0,z=0,A=1,B=1,C=0):u>=w?(x=1,y=0,z=0,A=1,B=0,C=1):(x=0,y=0,z=1,A=1,B=0,C=1):v<w?(x=0,y=0,z=1,A=0,B=1,C=1):u<w?(x=0,y=1,z=0,A=0,B=1,C=1):(x=0,y=1,z=0,A=1,B=1,C=0);var D=u-x+d,E=v-y+d,F=w-z+d,G=u-A+2*d,H=v-B+2*d,I=w-C+2*d,J=u-1+3*d,K=v-1+3*d,L=w-1+3*d,M=n&255,N=o&255,O=p&255,P=.6-u*u-v*v-w*w;if(P<0)i=0;else{var Q=f[M+g[N+g[O]]]*3;P*=P,i=P*P*(h[Q]*u+h[Q+1]*v+h[Q+2]*w)}var R=.6-D*D-E*E-F*F;if(R<0)j=0;else{var S=f[M+x+g[N+y+g[O+z]]]*3;R*=R,j=R*R*(h[S]*D+h[S+1]*E+h[S+2]*F)}var T=.6-G*G-H*H-I*I;if(T<0)k=0;else{var U=f[M+A+g[N+B+g[O+C]]]*3;T*=T,k=T*T*(h[U]*G+h[U+1]*H+h[U+2]*I)}var V=.6-J*J-K*K-L*L;if(V<0)l=0;else{var W=f[M+1+g[N+1+g[O+1]]]*3;V*=V,l=V*V*(h[W]*J+h[W+1]*K+h[W+2]*L)}return 32*(i+j+k+l)},noise4D:function(a,b,c,d){var g=this.permMod12,h=this.perm,i=this.grad4,j,k,l,m,n,o=(a+b+c+d)*e,p=Math.floor(a+o),q=Math.floor(b+o),r=Math.floor(c+o),s=Math.floor(d+o),t=(p+q+r+s)*f,u=p-t,v=q-t,w=r-t,x=s-t,y=a-u,z=b-v,A=c-w,B=d-x,C=0,D=0,E=0,F=0;y>z?C++:D++,y>A?C++:E++,y>B?C++:F++,z>A?D++:E++,z>B?D++:F++,A>B?E++:F++;var G,H,I,J,K,L,M,N,O,P,Q,R;G=C>=3?1:0,H=D>=3?1:0,I=E>=3?1:0,J=F>=3?1:0,K=C>=2?1:0,L=D>=2?1:0,M=E>=2?1:0,N=F>=2?1:0,O=C>=1?1:0,P=D>=1?1:0,Q=E>=1?1:0,R=F>=1?1:0;var S=y-G+f,T=z-H+f,U=A-I+f,V=B-J+f,W=y-K+2*f,X=z-L+2*f,Y=A-M+2*f,Z=B-N+2*f,$=y-O+3*f,_=z-P+3*f,ab=A-Q+3*f,bb=B-R+3*f,cb=y-1+4*f,db=z-1+4*f,eb=A-1+4*f,fb=B-1+4*f,gb=p&255,hb=q&255,ib=r&255,jb=s&255,kb=.6-y*y-z*z-A*A-B*B;if(kb<0)j=0;else{var lb=h[gb+h[hb+h[ib+h[jb]]]]%32*4;kb*=kb,j=kb*kb*(i[lb]*y+i[lb+1]*z+i[lb+2]*A+i[lb+3]*B)}var mb=.6-S*S-T*T-U*U-V*V;if(mb<0)k=0;else{var nb=h[gb+G+h[hb+H+h[ib+I+h[jb+J]]]]%32*4;mb*=mb,k=mb*mb*(i[nb]*S+i[nb+1]*T+i[nb+2]*U+i[nb+3]*V)}var ob=.6-W*W-X*X-Y*Y-Z*Z;if(ob<0)l=0;else{var pb=h[gb+K+h[hb+L+h[ib+M+h[jb+N]]]]%32*4;ob*=ob,l=ob*ob*(i[pb]*W+i[pb+1]*X+i[pb+2]*Y+i[pb+3]*Z)}var qb=.6-$*$-_*_-ab*ab-bb*bb;if(qb<0)m=0;else{var rb=h[gb+O+h[hb+P+h[ib+Q+h[jb+R]]]]%32*4;qb*=qb,m=qb*qb*(i[rb]*$+i[rb+1]*_+i[rb+2]*ab+i[rb+3]*bb)}var sb=.6-cb*cb-db*db-eb*eb-fb*fb;if(sb<0)n=0;else{var tb=h[gb+1+h[hb+1+h[ib+1+h[jb+1]]]]%32*4;sb*=sb,n=sb*sb*(i[tb]*cb+i[tb+1]*db+i[tb+2]*eb+i[tb+3]*fb)}return 27*(j+k+l+m+n)}},typeof window!="undefined"&&(window.SimplexNoise=g),typeof exports!="undefined"&&(exports.SimplexNoise=g)})();