/* Riot v3.0.0-alpha.4, @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.riot=t()}(this,function(){"use strict";function e(e){var t,n=je;for(~e.indexOf("\r")&&(e=e.replace(/\r\n?/g,"\n")),n.lastIndex=0;t=n.exec(e);)"<"===t[0][0]&&(e=RegExp.leftContext+RegExp.rightContext,n.lastIndex=t[3]+1);return e}function t(e,t){var n,r,i,o=[];for(Re.lastIndex=0,e=e.replace(/\s+/g," ");n=Re.exec(e);){var a=n[1].toLowerCase(),s=n[2];s?(s[0]!==De&&(s=De+(s[0]===Ve?s.slice(1,-1):s)+De),"type"===a&&He.test(s)?r=s:(Be.test(s)&&("value"===a?i=1:~$e.indexOf(a)&&(a="riot-"+a)),o.push(a+"="+s))):o.push(a)}return r&&(i&&(r=De+t._bp[0]+Ve+r.slice(1,-1)+Ve+t._bp[1]+De),o.push("type="+r)),o.join(" ")}function n(e,t,n){var r=n._bp;if(e&&r[4].test(e)){for(var i,o=t.expr&&(t.parser||t.type)?s:0,a=Ne.split(e,0,r),u=1;u<a.length;u+=2)i=a[u],"^"===i[0]?i=i.slice(1):o&&(i=o(i,t).trim(),";"===i.slice(-1)&&(i=i.slice(0,-1))),a[u]=Ue+(n.push(i)-1)+r[1];e=a.join("")}return e}function r(e,t){return t.length&&(e=e.replace(ze,function(e,n){return t._bp[0]+t[n].trim().replace(/[\r\n]+/g," ").replace(/"/g,Ze)})),e}function i(e,i,o){if(e=n(e,i,o).replace(Ae,function(e,n,r,i){return n=n.toLowerCase(),i=i&&!ke.test(n)?"></"+n:"",r&&(n+=" "+t(r,o)),"<"+n+i+">"}),!i.whitespace){var a=[];/<pre[\s>]/.test(e)&&(e=e.replace(Fe,function(e){return a.push(e),""})),e=e.trim().replace(/\s+/g," "),a.length&&(e=e.replace(/\u0002/g,function(){return a.shift()}))}return i.compact&&(e=e.replace(Ie,"><$1")),r(e,o).replace(Pe,"")}function o(t,n,r){return Array.isArray(n)?(r=n,n={}):(r||(r=[]),n||(n={})),r._bp=Ne.array(n.brackets),i(e(t),n,r)}function a(e){function t(e,t,n){for(t.lastIndex=0;n=t.exec(e);)"/"!==n[0][0]||n[1]||n[2]||(e=u.leftContext+" "+u.rightContext,t.lastIndex=n[3]+1);return e}function n(e,t){var n,r=1;for(t.lastIndex=0;r&&(n=t.exec(e));)"{"===n[0]?++r:"}"===n[0]&&--r;return r?e.length:t.lastIndex}var r,i,o,a,s=[],u=RegExp;for(~e.indexOf("/")&&(e=t(e,qe));r=e.match(Ge);)s.push(u.leftContext),e=u.rightContext,o=n(e,Ke),a=r[1],i=!/^(?:if|while|for|switch|catch|function)$/.test(a),a=i?r[0].replace(a,"this."+a+" = function"):r[0],s.push(a,e.slice(0,o)),e=e.slice(o),i&&!/^\s*.\s*bind\b/.test(e)&&s.push(".bind(this)");return s.length?s.join("")+e:e}function s(e,t,n,r,i){if(!/\S/.test(e))return"";n||(n=t.type);var o=t.parser||(n?Oe.js[n]:a);if(!o)throw new Error('JS parser not found: "'+n+'"');return o(e,r,i).replace(/\r\n?/g,"\n").replace(Pe,"")}function u(e,t,n,r){return"string"==typeof t&&(r=n,n=t,t={}),n&&"object"==typeof n&&(r=n,n=""),r||(r={}),s(e,t||{},n,r.parserOptions,r.url)}function c(e,t){var n=":scope";return t.replace(Qe,function(t,r,i){return i?(i=i.replace(/[^,]+/g,function(t){var r=t.trim();return r&&"from"!==r&&"to"!==r&&"%"!==r.slice(-1)?r=r.indexOf(n)<0?e+" "+r+',[riot-tag="'+e+'"] '+r+',[data-is="'+e+'"] '+r:r.replace(n,e)+","+r.replace(n,'[riot-tag="'+e+'"]')+","+r.replace(n,'[data-is="'+e+'"]'):t}),r?r+" "+i:i):t})}function l(e,t,n,r){var i=(r||(r={})).scoped;if(n)if("scoped-css"===n)i=!0;else if(Oe.css[n])e=Oe.css[n](t,e,r.parserOpts||{},r.url);else if("css"!==n)throw new Error('CSS parser not found: "'+n+'"');if(e=e.replace(Ne.R_MLCOMMS,"").replace(/\s+/g," ").trim(),i){if(!t)throw new Error("Can not parse scoped CSS without a tagName");e=c(t,e)}return e}function f(e,t,n){return t&&"object"==typeof t?(n=t,t=""):n||(n={}),l(e,n.tagName,t,n)}function p(e,t){return e?(e=Ve+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+Ve,t&&~e.indexOf("\n")?e.replace(/\n/g,"\\n"):e):"''"}function d(e,t,n,r,i,o){var a=o.debug?",\n  ":", ",s="});";return i&&"\n"!==i.slice(-1)&&(s="\n"+s),"riot.tag2('"+e+Ve+a+p(t,1)+a+p(n)+a+p(r)+", function(opts) {\n"+i+s}function h(e){if(/<[-\w]/.test(e))for(var t,n=e.lastIndexOf("<"),r=e.length;~n;){if(t=e.slice(n,r).match(Ye))return n+=t.index+t[0].length,[e.slice(0,n),e.slice(n)];r=n,n=e.lastIndexOf("<",n-1)}return["",e]}function g(e){if(e){var t=e.match(Je);if(t=t&&(t[2]||t[3]))return t.replace("text/","")}return""}function m(e,t){if(e){var n=e.match(RegExp("\\s"+t+Xe,"i"));if(n=n&&n[1])return/^['"]/.test(n)?n.slice(1,-1):n}return""}function v(e){return e.replace("&amp;",/&/g).replace("&lt;",/</g).replace("&gt;",/>/g).replace("&quot;",/"/g).replace("&#039;",/'/g)}function x(e){var t=v(m(e,"options"));return t?JSON.parse(t):null}function y(e,t,n,r){var i=g(n),o=m(n,"src");return o?!1:s(e,t,i,x(n),r)}function b(e,t,n,r,i){var o={parserOpts:x(n),scoped:n&&/\sscoped(\s|=|$)/i.test(n),url:r};return l(e,i,g(n)||t.style,o)}function w(e,t,n,r){var i=Oe.html[n];if(!i)throw new Error('Template parser not found: "'+n+'"');return i(e,r,t)}function C(o,a,u){var c,l=[];a||(a={}),c=a.exclude?function(e){return a.exclude.indexOf(e)<0}:function(){return 1},u||(u="");var f=Ne.array(a.brackets);return a.template&&(o=w(o,u,a.template,a.templateOptions)),o=e(o).replace(We,function(e,o,p,g,m,v){var x="",w="",C="",_=[];if(_._bp=f,p=p.toLowerCase(),g=g&&c("attribs")?r(t(n(g,a,_),_),_):"",(m||(m=v))&&/\S/.test(m))if(v)c("html")&&(C=i(v,a,_));else{m=m.replace(RegExp("^"+o,"gm"),""),m=m.replace(tt,function(e,t,n){return c("css")&&(w+=(w?" ":"")+b(n,a,t,u,p)),""}),m=m.replace(et,function(e,t,n){if(c("js")){var r=y(n,a,t,u);r&&(x+=(x?"\n":"")+r)}return""});var S=h(m.replace(Pe,""));c("html")&&(C=i(S[0],a,_)),c("js")&&(m=s(S[1],a,null,null,u),m&&(x+=(x?"\n":"")+m))}return x=/\S/.test(x)?x.replace(/\n{3,}/g,"\n\n"):"",a.entities?(l.push({tagName:p,html:C,css:w,attribs:g,js:x}),""):d(p,C,w,g,x,a)}),a.entities?l:o}function _(e,t,n,r){n[e]=function(e){var i=r._parent,o=r._item;if(!o)for(;i&&!o;)o=i._item,i=i._parent;e=e||ht.event,ie(e,"currentTarget")&&(e.currentTarget=n),ie(e,"target")&&(e.target=e.srcElement),ie(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=o,t.call(r,e),e.preventUpdate||X(r).update()}}function S(e,t){F(e,function(e,n){var r=e.dom,i=e.attr,o=Le(e.expr,t),a=r&&r.parentNode,s="value"==i;if(e.bool?o=o?i:!1:null==o&&(o=""),e._riot_id){if(e.isMounted)e.update();else if(e.mount(),"VIRTUAL"==e.root.tagName){var u=document.createDocumentFragment();ve(e,u),e.root.parentElement.replaceChild(u,e.root)}}else{if(e.update)return void e.update();var c=e.value;if(e.value=o,e.isRtag&&o)return E(e,t);if(!(s&&r.value==o||!s&&c===o)){if(!i)return o+="",void(a&&("TEXTAREA"===a.tagName?(a.value=o,yt||(r.nodeValue=o)):r.nodeValue=o));if(D(r,i),H(o))_(i,o,r,t);else if(/^(show|hide)$/.test(i))"hide"==i&&(o=!o),r.style.display=o?"":"none";else if("value"==i)r.value=o;else if(ge(i,st)&&i!=ut)o&&K(r,i.slice(st.length),o);else{if("selected"==i&&a&&/^(SELECT|OPTGROUP)$/.test(a.nodeName)&&o&&(a.value=r.value),e.bool&&(r[i]=o,!o))return;(0===o||o&&typeof o!==ft)&&K(r,i,o)}}}})}function E(e,t){var n,r=Le(e.value,t);if(e.tag&&e.tagName==r)return void e.tag.update();if(e.tag){var i=e.tag.opts.riotTag,o=e.tag._parent.tags[i];re(o)?o.splice(o.indexOf(e.tag),1):delete e.tag._parent.tags[i]}e.impl=ot[r],n={root:e.dom,parent:t,hasImpl:!0,tagName:r},e.tag=J(e.impl,n,e.dom.innerHTML,t),e.tagName=r,e.tag.mount(),e.tag.update()}function N(e,t,n){D(e,"if"),this.parentTag=t,this.expr=n,this.stub=document.createTextNode(""),this.pristine=e;var r=e.parentNode;r.insertBefore(this.stub,e),r.removeChild(e)}function L(e,t,n,r){this.dom=e,this.attr=t,this.rawValue=n,this.parent=r,this.customParent=X(r),this.hasExp=Le.hasExpr(n),this.firstRun=!0}function O(e,t,n,r){var i=r?Object.create(r):{};return i[e.key]=t,e.pos&&(i[e.pos]=n),i}function T(e,t,n,r){for(var i,o=t.length,a=e.length;o>a;)i=t[--o],t.splice(o,1),i.unmount(),he(r.tags,n,i,!0)}function M(e,t){Object.keys(e.tags).forEach(function(n){var r=e.tags[n];re(r)?F(r,function(e){Q(e,n,t)}):Q(r,n,t)})}function R(e,t,n){D(e,"each");var r,i=typeof G(e,"no-reorder")!==lt||D(e,"no-reorder"),o=ee(e),a=ot[o]||{tmpl:P(e)},s=gt.test(o),u=e.parentNode,c=document.createTextNode(""),l=q(e),f="option"===o.toLowerCase(),p=[],d=[],h="VIRTUAL"==e.tagName;n=Le.loopKeys(n),n.isLoop=!0;var g=G(e,"if");return g&&D(e,"if"),u.insertBefore(c,e),u.removeChild(e),n.update=function(){var m=Le(n.val,t),v=document.createDocumentFragment();if(u=c.parentNode,re(m)||(r=m||!1,m=r?Object.keys(m).map(function(e){return O(n,e,m[e])}):[]),g&&(m=m.filter(function(e,r){var i=O(n,e,r,t);return!!Le(g,i)})),m.forEach(function(c,f){var g,m=i&&typeof c==ft&&!r,x=d.indexOf(c),y=~x&&m?x:f,b=p[y];c=!r&&n.key?O(n,c,f):c,!m&&!b||m&&!~x||!b?(b=new k(a,{parent:t,isLoop:!0,hasImpl:!!ot[o],root:s?u:e.cloneNode(),item:c},e.innerHTML),b.mount(),g=b.root,f==p.length?h?ve(b,v):v.appendChild(g):(h?ve(b,u,p[f]):u.insertBefore(g,p[f].root),d.splice(f,0,c)),p.splice(f,0,b),l&&de(t.tags,o,b,!0),y=f):b.update(c),y!==f&&m&&(h?xe(b,u,p[f]):u.insertBefore(b.root,p[f].root),n.pos&&(b[n.pos]=f),p.splice(f,0,p.splice(y,1)[0]),d.splice(f,0,d.splice(y,1)[0]),!l&&b.tags&&M(b,f)),b._item=c,W(b,"_parent",t)}),T(m,p,o,t),f){if(u.appendChild(v),bt&&!u.multiple)for(var x=0;x<u.length;x++)if(u[x].__riot1374){u.selectedIndex=x,delete u[x].__riot1374;break}}else u.insertBefore(v,c);d=m.slice()},n.unmount=function(){F(p,function(e){e.unmount()})},n}function j(e,t,n,r){var i={parent:{children:n}};ae(e,function(n,i){var o,a,s,u=n.nodeType,c=i.parent;if(3==u&&"STYLE"!=n.parentNode.tagName&&Le.hasExpr(n.nodeValue)&&c.children.push({dom:n,expr:n.nodeValue}),1!=u)return i;if(o=G(n,"each"))return c.children.push(R(n,t,o)),!1;if(o=G(n,"if"))return c.children.push(new N(n,t,o)),!1;var l=[],f=[];F(n.attributes,function(e){var r=e.name,i=xt.test(r),o=Le.hasExpr(e.value);return"name"===r||"id"===r?(a=new L(n,r,e.value,t),c.children.push(a),f.push(a),void l.push(a)):(a={dom:n,expr:e.value,attr:e.name,bool:i},l.push(a),o?(c.children.push(a),i?(D(n,r),!1):void 0):void 0)}),(a=G(n,ut))&&Le.hasExpr(a)&&(o={isRtag:!0,expr:a,dom:n,children:[]},c.children.push(o),c=o);var p=q(n);if(p&&(n!==e||r)){var d={root:n,parent:t,hasImpl:!0,ownAttrs:l};return s=J(p,d,n.innerHTML,t),c.children.push(s),F(f,function(e){e.tag=s}),!1}return{parent:c}},i)}function A(e,t,n){var r="o"===n[0],i=r?"select>":"table>";if(e.innerHTML="<"+i+t.trim()+"</"+i,i=e.firstChild,r)i.selectedIndex=-1;else{var o=Lt[n];o&&1===i.childElementCount&&(i=fe(o,i))}return i}function I(e,t){if(!_t.test(e))return e;var n={};return t=t&&t.replace(Et,function(e,t,r){return n[t]=n[t]||r,""}).trim(),e.replace(Nt,function(e,t,r){return n[t]||r||""}).replace(St,function(e,n){return t||n||""})}function $(e,t){var n=e&&e.match(/^\s*<([-\w]+)/),r=n&&n[1].toLowerCase(),i=ce(Tt,z(r));return e=I(e,t),Ot.test(r)?i=A(i,e,r):B(i,e),i.stub=!0,i}function k(e,t,n){function r(){var e=f&&l?s:c||s;p?F(p||[],function(e){var t=e.hasOwnProperty("value")?e.value:e.expr;u[V(e.attr)]=t}):F(g.attributes,function(t){var n=t.value,r=Le.hasExpr(n);r&&p||(u[V(t.name)]=r?Le(n,e):n)})}function i(e){for(var t in d)typeof s[t]!==pt&&ie(s,t)&&(s[t]=e[t])}function o(){F(Object.keys(s.parent),function(e){var t=!mt.test(e)&&ne(x,e);(typeof s[e]===pt||t)&&(t||x.push(e),s[e]=s.parent[e])})}var a,s=Ee(this),u=pe(t.opts)||{},c=t.parent,l=t.isLoop,f=t.hasImpl,p=t.ownAttrs,d=oe(t.item),h=[],g=t.root,m=t.tagName||g.tagName.toLowerCase(),v={},x=[];e.name&&g._tag&&g._tag.unmount(!0),this.isMounted=!1,g.isLoop=l,this._hasImpl=f,W(this,"_riot_id",++Mt),te(this,{parent:c,root:g,opts:u},d),W(this,"tags",{}),F(g.attributes,function(e){var t=e.value;Le.hasExpr(t)&&(v[e.name]=t)}),a=$(e.tmpl,n),W(this,"update",function(e){return!H(s.shouldUpdate)||s.shouldUpdate()?(e=oe(e),l&&!f&&o(),e&&U(d)&&(i(e),d=e),te(s,e),r(),s.isMounted&&s.trigger("update",e),S(h,s),s.isMounted&&s.trigger("updated"),this):void 0}),W(this,"mixin",function(){return F(arguments,function(e){var t;e=typeof e===lt?kt(e):e,H(e)?(t=new e,e=e.prototype):t=e,F(Object.getOwnPropertyNames(e),function(e){"init"!=e&&(s[e]=H(t[e])?t[e].bind(s):t[e])}),t.init&&t.init.bind(s)()}),this}),W(this,"mount",function(t){r(),g._tag=this;var n=kt(at);if(n)for(var i in n)n.hasOwnProperty(i)&&s.mixin(n[i]);if(e.fn&&e.fn.call(s,u),e.attrs&&se(e.attrs,function(e,t){K(g,e,t)}),(e.attrs||f)&&j(s.root,s,h),j(a,s,h),s.update(d),s.trigger("before-mount"),l&&!f)s.root=g=a.firstChild;else{for(;a.firstChild;)g.appendChild(a.firstChild);g.stub&&(s.root=g=c.root)}W(s,"root",g),s.isMounted=!0,!s.parent||s.parent.isMounted?s.trigger("mount"):s.parent.one("mount",function(){ue(s.root)||s.trigger("mount")})}),W(this,"unmount",function(e){var t,n=s.root,r=n.parentNode,i=it.indexOf(s);if(s.trigger("before-unmount"),~i&&it.splice(i,1),r){if(c)t=X(c),he(t.tags,m,s);else for(;n.firstChild;)n.removeChild(n.firstChild);e?(D(r,ct),D(r,ut)):r.removeChild(n)}this._virts&&F(this._virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),Y(h),s.trigger("unmount"),s.off("*"),s.isMounted=!1,delete s.root._tag})}function F(e,t){for(var n,r=e?e.length:0,i=0;r>i;i++)n=e[i],null!=n&&t(n,i)===!1&&i--;return e}function H(e){return typeof e===dt||!1}function P(e){if(e.outerHTML)return e.outerHTML;var t=ce("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function B(e,t){if(typeof e.innerHTML!=pt)e.innerHTML=t;else{var n=(new DOMParser).parseFromString(t,"application/xml");e.appendChild(e.ownerDocument.importNode(n.documentElement,!0))}}function z(e){return~vt.indexOf(e)}function U(e){return e&&typeof e===ft}function Z(e){return typeof e===pt||null===e||""===e}function D(e,t){e.removeAttribute(t)}function V(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function G(e,t){return e.getAttribute(t)}function K(e,t,n){e.setAttribute(t,n)}function q(e){return e.tagName&&ot[G(e,ct)||G(e,ut)||e.tagName.toLowerCase()]}function Q(e,t,n){var r,i=e.parent;i&&(r=i.tags[t],re(r)?r.splice(n,0,r.splice(r.indexOf(e),1)[0]):de(i.tags,t,e))}function J(e,t,n,r){var i=new k(e,t,n),o=t.tagName||ee(t.root,!0),a=X(r);return i.parent=a,i._parent=r,de(a.tags,o,i),a!==r&&de(r.tags,o,i),t.root.innerHTML="",i}function X(e){for(var t=e;!t._hasImpl&&t.parent;)t=t.parent;return t}function Y(e){var t,n,r=e.length;for(t=0;r>t;t++)n=e[t],n instanceof k?n.unmount(!0):n.unmount&&n.unmount()}function W(e,t,n,r){return Object.defineProperty(e,t,te({value:n,enumerable:!1,writable:!1,configurable:!0},r)),e}function ee(e,t){var n=q(e),r=!t&&G(e,"name"),i=r&&!Le.hasExpr(r)?r:n?n.name:e.tagName.toLowerCase();return i}function te(e){for(var t,n=arguments,r=1;r<n.length;++r)if(t=n[r])for(var i in t)ie(e,i)&&(e[i]=t[i]);return e}function ne(e,t){return~e.indexOf(t)}function re(e){return Array.isArray(e)||e instanceof Array}function ie(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return typeof e[t]===pt||n&&n.writable}function oe(e){if(!(e instanceof k||e&&typeof e.trigger==dt))return e;var t={};for(var n in e)mt.test(n)||(t[n]=e[n]);return t}function ae(e,t,n){if(e){var r,i=t(e,n);if(i===!1)return;for(e=e.firstChild;e;)r=e.nextSibling,ae(e,t,i),e=r}}function se(e,t){for(var n,r=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=r.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}function ue(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function ce(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(e)}function le(e,t){return(t||document).querySelectorAll(e)}function fe(e,t){return(t||document).querySelector(e)}function pe(e){function t(){}return t.prototype=e,new t}function de(e,t,n,r){var i=e[t],o=re(i);i&&i===n||(!i&&r?e[t]=[n]:i?(!o||o&&!ne(i,n))&&(o?i.push(n):e[t]=[i,n]):e[t]=n)}function he(e,t,n,r){re(e[t])?(F(e[t],function(r,i){r===n&&e[t].splice(i,1)}),e[t].length?1!=e[t].length||r||(e[t]=e[t][0]):delete e[t]):delete e[t]}function ge(e,t){return e.slice(0,t.length)===t}function me(e,t,n){var r=ot[t],i=e._innerHTML=e._innerHTML||e.innerHTML;e.innerHTML="";var o={root:e,opts:n};return n&&n.parent&&(o.parent=n.parent),r&&e&&(r=new k(r,o,i)),r&&r.mount&&(r.mount(!0),ne(it,r)||it.push(r)),r}function ve(e,t,n){var r,i,o=document.createTextNode(""),a=document.createTextNode("");for(e._head=e.root.insertBefore(o,e.root.firstChild),e._tail=e.root.appendChild(a),i=e._head,e._virts=[];i;)r=i.nextSibling,n?t.insertBefore(i,n._head):t.appendChild(i),e._virts.push(i),i=r}function xe(e,t,n){for(var r,i=e._head;i;)if(r=i.nextSibling,t.insertBefore(i,n._head),i=r,i==e._tail){t.insertBefore(i,n._head);break}}function ye(e,t,n,r,i){return H(r)&&(i=r,/^[\w\-]+\s?=/.test(n)?(r=n,n=""):r=""),n&&(H(n)?i=n:jt.add(n)),e=e.toLowerCase(),ot[e]={name:e,tmpl:t,attrs:r,fn:i},e}function be(e,t,n,r,i){return n&&jt.add(n),ot[e]={name:e,tmpl:t,attrs:r,fn:i},e}function we(e,t,n){function r(e){var t="";return F(e,function(e){/[^-\w]/.test(e)||(e=e.trim().toLowerCase(),t+=",["+ct+'="'+e+'"],['+ut+'="'+e+'"]')}),t}function i(){var e=Object.keys(ot);return e+r(e)}function o(e){if(e.tagName){var r=G(e,ct)||G(e,ut);t&&r!==t&&(r=t,K(e,ct,t),K(e,ut,t));var i=me(e,r||e.tagName.toLowerCase(),n);i&&u.push(i)}else e.length&&F(e,o)}var a,s,u=[];if(jt.inject(),U(t)&&(n=t,t=0),typeof e===lt?("*"===e?e=s=i():e+=r(e.split(/, */)),a=e?le(e):[]):a=e,"*"===t){if(t=s||i(),a.tagName)a=le(t,a);else{var c=[];F(a,function(e){c.push(le(t,e))}),a=c}t=0}return o(a),u}function Ce(){return F(it,function(e){e.update()})}function _e(e){delete ot[e]}function Se(e,t,n){var r;return Pt(function(){r=we(e,t,n)}),r}var Ee=function(e){function t(e,t){for(var n,r,i=e.split(" "),o=i.length,a=0;o>a;a++)n=i[a],r=n.indexOf("."),n&&t(~r?n.substring(0,r):n,a,~r?n.slice(r+1):null)}e=e||{};var n={},r=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(r,i){return"function"!=typeof i?e:(t(r,function(e,t,r){(n[e]=n[e]||[]).push(i),i.typed=t>0,i.ns=r}),e)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(r,i){return"*"!=r||i?t(r,function(e,t,r){if(i||r)for(var o,a=n[e],s=0;o=a&&a[s];++s)(o==i||r&&o.ns==r)&&a.splice(s--,1);else delete n[e]}):n={},e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,n){function r(){e.off(t,r),n.apply(e,arguments)}return e.on(t,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(i){for(var o,a=arguments.length-1,s=new Array(a),u=0;a>u;u++)s[u]=arguments[u+1];return t(i,function(t,i,a){o=r.call(n[t]||[],0);for(var u,c=0;u=o[c];++c)u.busy||(u.busy=1,a&&u.ns!=a||u.apply(e,u.typed?[t].concat(s):s),o[c]!==u&&c--,u.busy=0);n["*"]&&"*"!=t&&e.trigger.apply(e,["*",t].concat(s))}),e},enumerable:!1,writable:!1,configurable:!1}}),e},Ne=function(e){function t(e){return e}function n(e,t){return t||(t=v),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?c:"")}function r(e){if(e===h)return g;var t=e.split(" ");if(2!==t.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),t[4]=n(t[1].length>1?/{[\S\s]*?}/:g[4],t),t[5]=n(e.length>3?/\\({|})/g:g[5],t),t[6]=n(g[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+p,c),t[8]=e,t}function i(e){return e instanceof RegExp?s(e):v[e]}function o(e){(e||(e=h))!==v[8]&&(v=r(e),s=e===h?t:n,v[9]=s(g[9])),m=e}function a(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,"brackets",{set:o,get:function(){return m},enumerable:!0}),u=e,o(t)}var s,u,c="g",l=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,f=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,p=f.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d={"(":RegExp("([()])|"+p,c),"[":RegExp("([[\\]])|"+p,c),"{":RegExp("([{}])|"+p,c)},h="{ }",g=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,c),h,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],m=e,v=[];return i.split=function(e,t,n){function r(e){t||a?c.push(e&&e.replace(n[5],"$1")):c.push(e)}function i(e,t,n){var r,i=d[t];for(i.lastIndex=n,n=1;(r=i.exec(e))&&(!r[1]||(r[1]===t?++n:--n)););return n?e.length:i.lastIndex}n||(n=v);var o,a,s,u,c=[],l=n[6];for(a=s=l.lastIndex=0;o=l.exec(e);){if(u=o.index,a){if(o[2]){l.lastIndex=i(e,o[2],l.lastIndex);continue}if(!o[3])continue}o[1]||(r(e.slice(s,u)),s=l.lastIndex,l=n[6+(a^=1)],l.lastIndex=s)}return e&&s<e.length&&r(e.slice(s)),c},i.hasExpr=function(e){return v[4].test(e)},i.loopKeys=function(e){var t=e.match(v[9]);return t?{key:t[1],pos:t[2],val:v[0]+t[3].trim()+v[1]}:{val:e.trim()}},i.array=function(e){return e?r(e):v},Object.defineProperty(i,"settings",{set:a,get:function(){return u}}),i.settings="undefined"!=typeof riot&&riot.settings||{},i.set=o,i.R_STRINGS=f,i.R_MLCOMMS=l,i.S_QBLOCKS=p,i}(),Le=function(){function e(e,r){return e?(a[e]||(a[e]=n(e))).call(r,t):e}function t(t,n){e.errorHandler&&(t.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},e.errorHandler(t))}function n(e){var t=r(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}function r(e){var t,n=[],r=Ne.split(e.replace(l,'"'),1);if(r.length>2||r[0]){var o,a,s=[];for(o=a=0;o<r.length;++o)t=r[o],t&&(t=1&o?i(t,1,n):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=t);t=2>a?s[0]:"["+s.join(",")+'].join("")'}else t=i(r[1],0,n);return n[0]&&(t=t.replace(f,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}function i(e,t,n){function r(t,n){var r,i=1,o=p[t];for(o.lastIndex=n.lastIndex;r=o.exec(e);)if(r[0]===t)++i;else if(!--i)break;n.lastIndex=i?e.length:o.lastIndex}if(e=e.replace(c,function(e,t){return e.length>2&&!t?s+(n.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,a=[],l=0;e&&(i=e.match(u))&&!i.index;){var f,d,h=/,|([[{(])|$/g;for(e=RegExp.rightContext,f=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];d=(i=h.exec(e))[1];)r(d,h);d=e.slice(0,i.index),e=RegExp.rightContext,a[l++]=o(d,1,f)}e=l?l>1?"["+a.join(",")+'].join(" ").trim()':a[0]:o(e,t)}return e}function o(e,t,n){var r;return e=e.replace(h,function(e,t,n,i,o){return n&&(i=r?0:i+e.length,"this"!==n&&"global"!==n&&"window"!==n?(e=t+'("'+n+d+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!g.test(o.slice(i)))),e}),r&&(e="try{return "+e+"}catch(e){E(e,this)}"),n?e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""':t&&(e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}var a={};e.haveRaw=Ne.hasRaw,e.hasExpr=Ne.hasExpr,e.loopKeys=Ne.loopKeys,e.errorHandler=null;var s="⁗",u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,c=RegExp(Ne.S_QBLOCKS,"g"),l=/\u2057/g,f=/\u2057(\d+)~/g,p={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},d='"in this?this:'+("object"!=typeof window?"global":"window")+").",h=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,g=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.parse=function(e){return e},e.version=Ne.version="v2.4.0",e}(),Oe=function(){function e(e){var t=window[e];if(t)return t;throw new Error(e+" parser not found.")}function t(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var n={html:{jade:function(n,r,i){return r=t({pretty:!0,filename:i,doctype:"html"},r),e("jade").render(n,r)}},css:{less:function(n,r,i,o){var a;return i=t({sync:!0,syncImport:!0,filename:o},i),e("less").render(r,i,function(e,t){if(e)throw e;a=t.css}),a}},js:{es6:function(n,r){return r=t({blacklist:["useStrict","strict","react"],sourceMaps:!1,comments:!1},r),e("babel").transform(n,r).code},babel:function(n,r,i){return e("babel").transform(n,t({filename:i},r)).code},coffee:function(n,r){return e("CoffeeScript").compile(n,t({bare:!0},r))},livescript:function(n,r){return e("livescript").compile(n,t({bare:!0,header:!1},r))},typescript:function(t,n){return e("typescript")(t,n)},none:function(e){return e}}};return n.js.javascript=n.js.none,n.js.coffeescript=n.js.coffee,n}(),Te=/"[^"\n\\]*(?:\\[\S\s][^"\n\\]*)*"|'[^'\n\\]*(?:\\[\S\s][^'\n\\]*)*'/.source,Me=Ne.R_STRINGS.source,Re=/ *([-\w:\xA0-\xFF]+) ?(?:= ?('[^']*'|"[^"]*"|\S+))?/g,je=RegExp(/<!--(?!>)[\S\s]*?-->/.source+"|"+Te,"g"),Ae=/<(-?[A-Za-z][-\w\xA0-\xFF]*)(?:\s+([^"'\/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"\/>]*)*)|\s*)(\/?)>/g,Ie=/>[ \t]+<(-?[A-Za-z]|\/[-A-Za-z])/g,$e=["style","src","d"],ke=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/,Fe=/<pre(?:\s+(?:[^">]*|"[^"]*")*)?>([\S\s]+?)<\/pre\s*>/gi,He=/^"(?:number|date(?:time)?|time|month|email|color)\b/i,Pe=/[ \t]+$/gm,Be=/\x01#\d/,ze=/\x01#(\d+)/g,Ue="#",Ze="⁗",De='"',Ve="'",Ge=/^[ \t]*([$_A-Za-z][$\w]*)\s*\([^()]*\)\s*{/m,Ke=RegExp("[{}]|"+Ne.S_QBLOCKS,"g"),qe=RegExp(Ne.R_MLCOMMS.source+"|//[^\r\n]*|"+Ne.S_QBLOCKS,"g"),Qe=RegExp("([{}]|^)[ ;]*([^@ ;{}][^{}]*)(?={)|"+Te,"g"),Je=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i,Xe="\\s*=\\s*("+Me+"|{[^}]+}|\\S+)",Ye=/\/>\n|^<(?:\/?-?[A-Za-z][-\w\xA0-\xFF]*\s*|-?[A-Za-z][-\w\xA0-\xFF]*\s+[-\w:\xA0-\xFF][\S\s]*?)>\n/,We=RegExp(/^([ \t]*)<(-?[A-Za-z][-\w\xA0-\xFF]*)(?:\s+([^'"\/>]+(?:(?:@|\/[^>])[^'"\/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@",Me),"gim"),et=/<script(\s+[^>]*)?>\n?([\S\s]*?)<\/script\s*>/gi,tt=/<style(\s+[^>]*)?>\n?([\S\s]*?)<\/style\s*>/gi,nt="v3.0.0-alpha.1",rt={compile:C,compileHTML:o,compileCSS:f,compileJS:u,parsers:Oe,version:nt},it=[],ot={},at="__global_mixin",st="riot-",ut="data-is",ct="data-is",lt="string",ft="object",pt="undefined",dt="function",ht=typeof window==pt?void 0:window,gt=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,mt=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,vt=["altGlyph","animate","animateColor","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","filter","font","foreignObject","g","glyph","glyphRef","image","line","linearGradient","marker","mask","missing-glyph","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tref","tspan","use"],xt=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,yt=0|(ht&&ht.document||{}).documentMode,bt=ht&&!!ht.InstallTrigger;N.prototype.update=function(){var e=Le(this.expr,this.parentTag);e&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],j(this.current,this.parentTag,this.expressions,!0)):!e&&this.current&&(Y(this.expressions),this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),e&&S(this.expressions,this.parentTag)},N.prototype.unmount=function(){Y(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub},L.prototype.update=function(){var e=this.rawValue;if(this.hasExp&&(e=Le(this.rawValue,this.parent)),this.firstRun||e!==this.value){var t=this.tag||this.dom;Z(this.value)||he(this.customParent,this.value,t),Z(e)?D(this.dom,this.attr):(de(this.customParent,e,t),K(this.dom,this.attr,e)),this.value=e,this.firstRun=!1}},L.prototype.unmount=function(){var e=this.tag||this.dom;Z(this.value)||he(this.customParent,this.value,e),delete this.dom,delete this.parent,delete this.customParent};var wt,Ct,_t=/<yield\b/i,St=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,Et=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,Nt=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,Lt={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},Ot=yt&&10>yt?gt:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,Tt="div",Mt=0,Rt="";ht&&(wt=function(){var e=ce("style");K(e,"type","text/css");var t=fe("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),Ct=wt.styleSheet);var jt={styleNode:wt,add:function(e){ht&&(Rt+=e)},inject:function(){Rt&&ht&&(Ct?Ct.cssText+=Rt:wt.innerHTML+=Rt,Rt="")}},At=Ee,It=Ne.settings,$t={tmpl:Le,brackets:Ne,styleNode:jt.styleNode},kt=function(){var e={},t=e[at]={},n=0;return function(r,i,o){if(U(r))return void kt("__unnamed_"+n++,r,!0);var a=o?t:e;if(!i){if(typeof a[r]===pt)throw new Error("Unregistered mixin: "+r);return a[r]}H(i)?(te(i.prototype,a[r]||{}),a[r]=i):a[r]=te(a[r]||{},i)}}(),Ft=it,Ht=Object.freeze({observable:At,settings:It,util:$t,mixin:kt,tag:ye,tag2:be,mount:we,update:Ce,unregister:_e,vdom:Ft}),Pt=function(){function e(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status||!r.status&&r.responseText.length)&&t(r.responseText,n,e)},r.open("GET",e,!0),r.send("")}function t(e,t){if(typeof e===lt){var n=ce("script"),r=document.documentElement;t&&(e+="\n//# sourceURL="+t+".js"),n.text=e,r.appendChild(n),r.removeChild(n)}}function n(n,o){function a(){r.trigger("ready"),i=!0,n&&n()}function s(e,n,r){var i=rt.compile(e,n,r);t(i,r),--c||a()}var u=le('script[type="riot/tag"]'),c=u.length;if(c)for(var l=0;l<u.length;++l){var f=u[l],p=te({template:G(f,"template")},o),d=G(f,"src");d?e(d,s,p):s(f.innerHTML,p)}else a()}var r,i;return function(o,a,s){if(typeof o===lt){if(U(a)&&(s=a,a=!1),/^\s*</m.test(o)){var u=rt.compile(o,s);return a!==!0&&t(u),H(a)&&a(u,o,s),u}e(o,function(e,n,r){var i=rt.compile(e,n,r);t(i,r),a&&a(i,e,n)})}else{if(H(o)?(s=a,a=o):(s=o,a=void 0),i)return a&&a();r?a&&r.on("ready",a):(r=Ee(),n(a,s))}}}(),Bt=te({},Ht,{compile:Pt,mount:Se,parsers:rt.parsers});return Bt});
