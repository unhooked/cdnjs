/*! Native Promise Only
    v0.4.1-a (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(e,t,n){t[e]=t[e]||n(),"undefined"!=typeof module&&module.exports?module.exports=t[e]:"function"==typeof define&&define.amd&&define(function(){return t[e]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function e(e){a?(a=!1,e()):l(e,0)}function t(e){var t,n=typeof e;return null===e||"object"!==n&&"function"!==n||(t=e.then),"function"==typeof t?t:!1}function n(e){return function(){var n,r,i,o,c;if(0===e.state)return a=!1;for(1===e.state?(c=e.success,e.failure.length=0):(c=e.failure,e.success.length=0);(n=c.shift())||n===!1;){o=e.chained.shift();try{n===!1?(a=!0,o.reject(e.msg)):(r=n===!0?e.msg:n(e.msg),a=!0,r===o.promise?o.reject(TypeError("Promise-chain cycle")):(i=t(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(u){a=!0,o.reject(u)}}}}function r(o){var c,u,f=this;if(f.def){if(f.triggered)return a=!1;f.triggered=!0,f=f.def}if(0!==f.state)return a=!1;u={def:f,triggered:!1};try{(c=t(o))?c.call(o,function(){r.apply(u,arguments)},function(){i.apply(u,arguments)}):(f.msg=o,f.state=1,e(n(f)))}catch(s){i.call(u,s)}}function i(t){var r=this;if(r.def){if(r.triggered)return a=!1;r.triggered=!0,r=r.def}return 0!==r.state?a=!1:(r.msg=t,r.state=2,void e(n(r)))}function o(e,t){a=!0,e(t)}function c(e,t){return Array.isArray(t)?void 0:e.reject(TypeError("Expected array argument"))}function u(e,t){if("function"!=typeof e)throw Error("Resolver is not a function");if("function"!=typeof t)throw Error("Rejecter is not a function")}function f(e,t,n,r){for(var i=0;i<t.length;i++)e.resolve(t[i]).then(function(e){n(i,e)},r)}function s(t){if("function"!=typeof t)throw TypeError("Expected function argument");var o={Constructor:s,promise:this,state:0,triggered:!1,success:[],failure:[],chained:[]};d(this,"then",function(t,r){o.success.push("function"==typeof t?t:!0),o.failure.push("function"==typeof r?r:!1);var i=new o.Constructor(function(e,t){u(e,t),o.chained.push({resolve:e,reject:t})});return o.chained[o.chained.length-1].promise=i,e(n(o)),i}),d(this,"catch",function(e){return o.promise.then(void 0,e)});try{t.call(void 0,function(e){return o.triggered?void(a=!1):(o.triggered=!0,void r.call(o,e))},function(e){return o.triggered?void(a=!1):(o.triggered=!0,void i.call(o,e))})}catch(c){i.call(o,c)}}var a=!1,l="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:setTimeout,d=Object.defineProperty?function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:r!==!1})}:function(e,t,n){return e[t]=n,e};return d(s,"prototype",{value:d({},"constructor",s)},!1),d(s,"resolve",function(t){var n=this;return"object"==typeof t&&t instanceof n?t:new n(function(n,r){u(n,r),e(function(){o(n,t)})})}),d(s,"reject",function(e){return new this(function(t,n){u(t,n),n(e)})}),d(s,"all",function(e){var t,n=this;return(t=c(n,e))?t:0===e.length?n.resolve([]):new n(function(t,r){u(t,r);var i=e.length,c=Array(i),s=0;f(n,e,function(e,n){c[e]=n,++s===i&&o(t,c)},r)})}),d(s,"race",function(e){var t,n=this;return(t=c(n,e))?t:new n(function(t,r){u(t,r),f(n,e,function(e,n){o(t,n)},r)})}),s});
