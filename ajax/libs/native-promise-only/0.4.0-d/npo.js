/*! Native Promise Only
    v0.4.0-d (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(t,e,n){e[t]=e[t]||n(),"undefined"!=typeof module&&module.exports?module.exports=e[t]:"function"==typeof define&&define.amd&&define(function(){return e[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function t(t,e){s?(s=!1,t.call(e)):l(function(){t.call(e)},0)}function e(t){var e,n=typeof t;return null===t||"object"!==n&&"function"!==n||(e=t.then),"function"==typeof e?e:!1}function n(){var t,n,r,o,i=this;if(0===i.state)return s=!1;for(;o=i.chain.shift();){t=1===i.state?o.success:o.failure;try{t===!1?(s=!0,o.reject(i.msg)):(n=t===!0?i.msg:t.call(void 0,i.msg),s=!0,n===o.promise?o.reject(TypeError("Promise-chain cycle")):(r=e(n))?r.call(n,o.resolve,o.reject):o.resolve(n))}catch(c){s=!0,o.reject(c)}}}function r(i){var c,f,u=this;if(u.def){if(u.triggered)return s=!1;u.triggered=!0,u=u.def}if(0!==u.state)return s=!1;f={def:u,triggered:!1};try{(c=e(i))?c.call(i,function(){r.apply(f,arguments)},function(){o.apply(f,arguments)}):(u.msg=i,u.state=1,t(n,u))}catch(a){o.call(f,a)}}function o(e){var r=this;if(r.def){if(r.triggered)return s=!1;r.triggered=!0,r=r.def}return 0!==r.state?s=!1:(r.msg=e,r.state=2,void t(n,r))}function i(t,e){s=!0,t(e)}function c(t,e,n,r){for(var o=0;o<e.length;o++)t.resolve(e[o]).then(function(t){n(o,t)},r)}function f(t,e){return Array.isArray(e)?void 0:t.reject(TypeError("Not an array"))}function u(t,e){if("function"!=typeof t)throw TypeError("Not a function");if("function"!=typeof e)throw TypeError("Not a function")}function a(e){if("function"!=typeof e)throw TypeError("Not a function");var i={Constructor:a,promise:this,state:0,triggered:!1,chain:[],msg:void 0};d(this,"then",function(e,r){var o={success:"function"==typeof e?e:!0,failure:"function"==typeof r?r:!1};return o.promise=new i.Constructor(function(t,e){u(t,e),o.resolve=t,o.reject=e}),i.chain.push(o),t(n,i),o.promise}),d(this,"catch",function(t){return i.promise.then(void 0,t)});try{e.call(void 0,function(t){return i.triggered?void(s=!1):(i.triggered=!0,void r.call(i,t))},function(t){return i.triggered?void(s=!1):(i.triggered=!0,void o.call(i,t))})}catch(c){o.call(i,c)}}var s=!1,l="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:setTimeout,d=Object.defineProperty?function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:r!==!1})}:function(t,e,n){return t[e]=n,t};return d(a,"prototype",{value:d({},"constructor",a)},!1),d(a,"resolve",function(e){var n=this;return"object"==typeof e&&e instanceof n?e:new n(function(n,r){u(n,r),t(function(){i(n,e)})})}),d(a,"reject",function(t){return new this(function(e,n){u(e,n),n(t)})}),d(a,"all",function(t){var e,n=this;return(e=f(n,t))?e:0===t.length?n.resolve([]):new n(function(e,r){u(e,r);var o=t.length,f=Array(o),a=0;c(n,t,function(t,n){f[t]=n,++a===o&&i(e,f)},r)})}),d(a,"race",function(t){var e,n=this;return(e=f(n,t))?e:new n(function(e,r){u(e,r),c(n,t,function(t,n){i(e,n)},r)})}),a});
