"undefined"==typeof PDFJS&&(("undefined"!=typeof window?window:this).PDFJS={}),function(){"use strict";function t(t){var e=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,n=e/i;return{sx:n,sy:n,scaled:1!==n}}function e(t,e){var i=t.offsetParent,n=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;if(!i)return void console.error("offsetParent is not set -- cannot scroll");for(;i.clientHeight===i.scrollHeight;)if(i.dataset._scaleY&&(n/=i.dataset._scaleY,r/=i.dataset._scaleX),n+=i.offsetTop,r+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(void 0!==e.top&&(n+=e.top),void 0!==e.left&&(r+=e.left,i.scrollLeft=r)),i.scrollTop=n}function i(t,e){var i=function(i){r||(r=window.requestAnimationFrame(function(){r=null;var i=t.scrollTop,s=n.lastY;i>s?n.down=!0:s>i&&(n.down=!1),n.lastY=i,e(n)}))},n={down:!0,lastY:t.scrollTop,_eventHandler:i},r=null;return t.addEventListener("scroll",i,!0),n}function n(t,e,i){for(var n,r,s,a,o,h,d,l=t.scrollTop,c=l+t.clientHeight,u=t.scrollLeft,f=u+t.clientWidth,v=[],g=0,p=e.length;p>g;++g)if(n=e[g],r=n.el.offsetTop+n.el.clientTop,s=n.el.clientHeight,!(l>r+s)){if(r>c)break;h=n.el.offsetLeft+n.el.clientLeft,d=n.el.clientWidth,u>h+d||h>f||(a=Math.max(0,l-r)+Math.max(0,r+s-c),o=100*(s-a)/s|0,v.push({id:n.id,x:h,y:r,view:n,percent:o}))}var m=v[0],w=v[v.length-1];return i&&v.sort(function(t,e){var i=t.percent-e.percent;return Math.abs(i)>.001?-i:t.id-e.id}),{first:m,last:w,views:v}}function r(t){return!L.test(t)}function s(){}function a(){}var o=96/72,h="auto",d=0,l=1.25,c=40,u=5,f=function(){function t(){}var e=["ms","Moz","Webkit","O"],i={};return t.getProp=function(t,n){if(1===arguments.length&&"string"==typeof i[t])return i[t];n=n||document.documentElement;var r,s,a=n.style;if("string"==typeof a[t])return i[t]=t;s=t.charAt(0).toUpperCase()+t.slice(1);for(var o=0,h=e.length;h>o;o++)if(r=e[o]+s,"string"==typeof a[r])return i[t]=r;return i[t]="undefined"},t.setProp=function(t,e,i){var n=this.getProp(t);"undefined"!==n&&(e.style[n]=i)},t}(),v=(function(){function t(t,e,i){return Math.min(Math.max(t,e),i)}function e(t,e){this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=e.height||100,this.width=e.width||100,this.units=e.units||"%",this.div.style.height=this.height+this.units,this.percent=0}return e.prototype={updateBar:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units},get percent(){return this._percent},set percent(e){this._indeterminate=isNaN(e),this._percent=t(e,0,100),this.updateBar()},setWidth:function(t){if(t){var e=t.parentNode,i=e.offsetWidth-t.offsetWidth;i>0&&this.bar.setAttribute("style","width: calc(100% - "+i+"px);")}},hide:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))},show:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},e}(),{UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3}),g=!1,p=10,m=3e4,w={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},y=function(){function t(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return t.prototype={setViewer:function(t){this.pdfViewer=t},setThumbnailViewer:function(t){this.pdfThumbnailViewer=t},isHighestPriority:function(t){return this.highestPriorityPage===t.renderingId},renderHighestPriority:function(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),m))},getHighestPriority:function(t,e,i){var n=t.views,r=n.length;if(0===r)return!1;for(var s=0;r>s;++s){var a=n[s].view;if(!this.isViewFinished(a))return a}if(i){var o=t.last.id;if(e[o]&&!this.isViewFinished(e[o]))return e[o]}else{var h=t.first.id-2;if(e[h]&&!this.isViewFinished(e[h]))return e[h]}return null},isViewFinished:function(t){return t.renderingState===w.FINISHED},renderView:function(t){var e=t.renderingState;switch(e){case w.FINISHED:return!1;case w.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case w.RUNNING:this.highestPriorityPage=t.renderingId;break;case w.INITIAL:this.highestPriorityPage=t.renderingId;var i=function(){this.renderHighestPriority()}.bind(this);t.draw().then(i,i)}return!0}},t}(),P=200,b=function(){function e(t){var e=t.container,i=t.id,n=t.scale,r=t.defaultViewport,s=t.renderingQueue,a=t.textLayerFactory,o=t.annotationsLayerFactory;this.id=i,this.renderingId="page"+i,this.rotation=0,this.scale=n||1,this.viewport=r,this.pdfPageRotate=r.rotation,this.hasRestrictedScaling=!1,this.renderingQueue=s,this.textLayerFactory=a,this.annotationsLayerFactory=o,this.renderingState=w.INITIAL,this.resume=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.textLayer=null,this.zoomLayer=null,this.annotationLayer=null;var h=document.createElement("a");h.name=""+this.id;var d=document.createElement("div");d.id="pageContainer"+this.id,d.className="page",d.style.width=Math.floor(this.viewport.width)+"px",d.style.height=Math.floor(this.viewport.height)+"px",this.el=d,this.div=d,e.appendChild(h),e.appendChild(d)}return e.prototype={setPdfPage:function(t){this.pdfPage=t,this.pdfPageRotate=t.rotate;var e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport(this.scale*o,e),this.stats=t.stats,this.reset()},destroy:function(){this.zoomLayer=null,this.reset(),this.pdfPage&&this.pdfPage.destroy()},reset:function(t){this.renderTask&&this.renderTask.cancel(),this.resume=null,this.renderingState=w.INITIAL;var e=this.div;e.style.width=Math.floor(this.viewport.width)+"px",e.style.height=Math.floor(this.viewport.height)+"px";for(var i=e.childNodes,n=this.zoomLayer||null,r=t&&this.annotationLayer&&this.annotationLayer.div||null,s=e.childNodes.length-1;s>=0;s--){var a=i[s];n!==a&&r!==a&&e.removeChild(a)}e.removeAttribute("data-loaded"),t?this.annotationLayer&&this.annotationLayer.hide():this.annotationLayer=null,this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",e.appendChild(this.loadingIconDiv)},update:function(e,i){this.scale=e||this.scale,"undefined"!=typeof i&&(this.rotation=i);var n=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*o,rotation:n});var r=!1;if(this.canvas&&PDFJS.maxCanvasPixels>0){var s=this.canvas.getContext("2d"),a=t(s),h=this.viewport.width*this.viewport.height;Math.sqrt(PDFJS.maxCanvasPixels/h);(Math.floor(this.viewport.width)*a.sx|0)*(Math.floor(this.viewport.height)*a.sy|0)>PDFJS.maxCanvasPixels&&(r=!0)}return this.canvas&&(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&r)?void this.cssTransform(this.canvas,!0):(this.canvas&&!this.zoomLayer&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute"),this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),void this.reset(!0))},updatePosition:function(){this.textLayer&&this.textLayer.render(P)},cssTransform:function(t,e){var i=this.viewport.width,n=this.viewport.height,r=this.div;t.style.width=t.parentNode.style.width=r.style.width=Math.floor(i)+"px",t.style.height=t.parentNode.style.height=r.style.height=Math.floor(n)+"px";var s=this.viewport.rotation-t._viewport.rotation,a=Math.abs(s),o=1,h=1;90!==a&&270!==a||(o=n/i,h=i/n);var d="rotate("+s+"deg) scale("+o+","+h+")";if(f.setProp("transform",t,d),this.textLayer){var l=this.textLayer.viewport,c=this.viewport.rotation-l.rotation,u=Math.abs(c),v=i/l.width;90!==u&&270!==u||(v=i/l.height);var g,p,m=this.textLayer.textLayerDiv;switch(u){case 0:g=p=0;break;case 90:g=0,p="-"+m.style.height;break;case 180:g="-"+m.style.width,p="-"+m.style.height;break;case 270:g="-"+m.style.width,p=0;break;default:console.error("Bad rotation value.")}f.setProp("transform",m,"rotate("+u+"deg) scale("+v+", "+v+") translate("+g+", "+p+")"),f.setProp("transformOrigin",m,"0% 0%")}e&&this.annotationLayer&&this.annotationLayer.setupAnnotations(this.viewport)},get width(){return this.viewport.width},get height(){return this.viewport.height},getPagePoint:function(t,e){return this.viewport.convertToPdfPoint(t,e)},draw:function(){function e(t){if(L===y.renderTask&&(y.renderTask=null),"cancelled"===t)return void p(t);y.renderingState=w.FINISHED,y.loadingIconDiv&&(r.removeChild(y.loadingIconDiv),delete y.loadingIconDiv),y.zoomLayer&&(r.removeChild(y.zoomLayer),y.zoomLayer=null),y.error=t,y.stats=i.stats,y.onAfterDraw&&y.onAfterDraw();var e=document.createEvent("CustomEvent");e.initCustomEvent("pagerender",!0,!0,{pageNumber:i.pageNumber}),r.dispatchEvent(e),t?p(t):g(void 0)}this.renderingState!==w.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=w.RUNNING;var i=this.pdfPage,n=this.viewport,r=this.div,s=document.createElement("div");s.style.width=r.style.width,s.style.height=r.style.height,s.classList.add("canvasWrapper");var a=document.createElement("canvas");a.id="page"+this.id,s.appendChild(a),this.annotationLayer?r.insertBefore(s,this.annotationLayer.div):r.appendChild(s),this.canvas=a;var h=a.getContext("2d"),d=t(h);if(PDFJS.useOnlyCssZoom){var l=n.clone({scale:o});d.sx*=l.width/n.width,d.sy*=l.height/n.height,d.scaled=!0}if(PDFJS.maxCanvasPixels>0){var c=n.width*n.height,u=Math.sqrt(PDFJS.maxCanvasPixels/c);d.sx>u||d.sy>u?(d.sx=u,d.sy=u,d.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}a.width=Math.floor(n.width)*d.sx|0,a.height=Math.floor(n.height)*d.sy|0,a.style.width=Math.floor(n.width)+"px",a.style.height=Math.floor(n.height)+"px",a._viewport=n;var f=null,v=null;this.textLayerFactory&&(f=document.createElement("div"),f.className="textLayer",f.style.width=a.style.width,f.style.height=a.style.height,this.annotationLayer?r.insertBefore(f,this.annotationLayer.div):r.appendChild(f),v=this.textLayerFactory.createTextLayerBuilder(f,this.id-1,this.viewport)),this.textLayer=v,h._scaleX=d.sx,h._scaleY=d.sy,d.scaled&&h.scale(d.sx,d.sy);var g,p,m=new Promise(function(t,e){g=t,p=e}),y=this,b=null;this.renderingQueue&&(b=function(t){return y.renderingQueue.isHighestPriority(y)?void t():(y.renderingState=w.PAUSED,void(y.resume=function(){y.renderingState=w.RUNNING,t()}))});var x={canvasContext:h,viewport:this.viewport,continueCallback:b},L=this.renderTask=this.pdfPage.render(x);return this.renderTask.promise.then(function(){e(null),v&&y.pdfPage.getTextContent().then(function(t){v.setTextContent(t),v.render(P)})},function(t){e(t)}),this.annotationsLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationsLayerFactory.createAnnotationsLayerBuilder(r,this.pdfPage)),this.annotationLayer.setupAnnotations(this.viewport)),r.setAttribute("data-loaded",!0),y.onBeforeDraw&&y.onBeforeDraw(),m},beforePrint:function(){var t=this.pdfPage,e=t.getViewport(1),i=2,n=document.createElement("canvas");n.width=Math.floor(e.width)*i,n.height=Math.floor(e.height)*i,n.style.width=i*e.width+"pt",n.style.height=i*e.height+"pt";var r="scale("+1/i+", "+1/i+")";f.setProp("transform",n,r),f.setProp("transformOrigin",n,"0% 0%");var s=document.getElementById("printContainer"),a=document.createElement("div");a.style.width=e.width+"pt",a.style.height=e.height+"pt",a.appendChild(n),s.appendChild(a),n.mozPrintCallback=function(r){var s=r.context;s.save(),s.fillStyle="rgb(255, 255, 255)",s.fillRect(0,0,n.width,n.height),s.restore(),s.scale(i,i);var a={canvasContext:s,viewport:e,intent:"print"};t.render(a).promise.then(function(){r.done()},function(t){console.error(t),"abort"in r?r.abort():r.done()})}}},e}(),x=1e5,L=/\S/,S=function(){function t(t){this.textLayerDiv=t.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=t.pageIndex,this.matches=[],this.viewport=t.viewport,this.textDivs=[],this.findController=t.findController||null}return t.prototype={renderLayer:function(){var t=document.createDocumentFragment(),e=this.textDivs,i=e.length,n=document.createElement("canvas"),r=n.getContext("2d");if(i>x)return void(this.renderingDone=!0);for(var s,a,o=0;i>o;o++){var h=e[o];if(void 0===h.dataset.isWhitespace){var d=h.style.fontSize,l=h.style.fontFamily;d===s&&l===a||(r.font=d+" "+l,s=d,a=l);var c=r.measureText(h.textContent).width;if(c>0){t.appendChild(h);var u;if(void 0!==h.dataset.canvasWidth){var v=h.dataset.canvasWidth/c;u="scaleX("+v+")"}else u="";var g=h.dataset.angle;g&&(u="rotate("+g+"deg) "+u),u&&f.setProp("transform",h,u)}}}this.textLayerDiv.appendChild(t),this.renderingDone=!0,this.updateMatches()},render:function(t){if(this.divContentDone&&!this.renderingDone)if(this.renderTimer&&(clearTimeout(this.renderTimer),this.renderTimer=null),t){var e=this;this.renderTimer=setTimeout(function(){e.renderLayer(),e.renderTimer=null},t)}else this.renderLayer()},appendText:function(t,e){var i=e[t.fontName],n=document.createElement("div");if(this.textDivs.push(n),r(t.str))return void(n.dataset.isWhitespace=!0);var s=PDFJS.Util.transform(this.viewport.transform,t.transform),a=Math.atan2(s[1],s[0]);i.vertical&&(a+=Math.PI/2);var o=Math.sqrt(s[2]*s[2]+s[3]*s[3]),h=o;i.ascent?h=i.ascent*h:i.descent&&(h=(1+i.descent)*h);var d,l;0===a?(d=s[4],l=s[5]-h):(d=s[4]+h*Math.sin(a),l=s[5]-h*Math.cos(a)),n.style.left=d+"px",n.style.top=l+"px",n.style.fontSize=o+"px",n.style.fontFamily=i.fontFamily,n.textContent=t.str,PDFJS.pdfBug&&(n.dataset.fontName=t.fontName),0!==a&&(n.dataset.angle=a*(180/Math.PI)),n.textContent.length>1&&(i.vertical?n.dataset.canvasWidth=t.height*this.viewport.scale:n.dataset.canvasWidth=t.width*this.viewport.scale)},setTextContent:function(t){this.textContent=t;for(var e=t.items,i=0,n=e.length;n>i;i++)this.appendText(e[i],t.styles);this.divContentDone=!0},convertMatches:function(t){for(var e=0,i=0,n=this.textContent.items,r=n.length-1,s=null===this.findController?0:this.findController.state.query.length,a=[],o=0,h=t.length;h>o;o++){for(var d=t[o];e!==r&&d>=i+n[e].str.length;)i+=n[e].str.length,e++;e===n.length&&console.error("Could not find a matching mapping");var l={begin:{divIdx:e,offset:d-i}};for(d+=s;e!==r&&d>i+n[e].str.length;)i+=n[e].str.length,e++;l.end={divIdx:e,offset:d-i},a.push(l)}return a},renderMatches:function(t){function e(t,e){var n=t.divIdx;r[n].textContent="",i(n,0,t.offset,e)}function i(t,e,i,s){var a=r[t],o=n[t].str.substring(e,i),h=document.createTextNode(o);if(s){var d=document.createElement("span");return d.className=s,d.appendChild(h),void a.appendChild(d)}a.appendChild(h)}if(0!==t.length){var n=this.textContent.items,r=this.textDivs,s=null,a=this.pageIdx,o=null===this.findController?!1:a===this.findController.selected.pageIdx,h=null===this.findController?-1:this.findController.selected.matchIdx,d=null===this.findController?!1:this.findController.state.highlightAll,l={divIdx:-1,offset:void 0},c=h,u=c+1;if(d)c=0,u=t.length;else if(!o)return;for(var f=c;u>f;f++){var v=t[f],g=v.begin,p=v.end,m=o&&f===h,w=m?" selected":"";if(this.findController&&this.findController.updateMatchPosition(a,f,r,g.divIdx,p.divIdx),s&&g.divIdx===s.divIdx?i(s.divIdx,s.offset,g.offset):(null!==s&&i(s.divIdx,s.offset,l.offset),e(g)),g.divIdx===p.divIdx)i(g.divIdx,g.offset,p.offset,"highlight"+w);else{i(g.divIdx,g.offset,l.offset,"highlight begin"+w);for(var y=g.divIdx+1,P=p.divIdx;P>y;y++)r[y].className="highlight middle"+w;e(p,"highlight end"+w)}s=p}s&&i(s.divIdx,s.offset,l.offset)}},updateMatches:function(){if(this.renderingDone){for(var t=this.matches,e=this.textDivs,i=this.textContent.items,n=-1,r=0,s=t.length;s>r;r++){for(var a=t[r],o=Math.max(n,a.begin.divIdx),h=o,d=a.end.divIdx;d>=h;h++){var l=e[h];l.textContent=i[h].str,l.className=""}n=a.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}}},t}();s.prototype={createTextLayerBuilder:function(t,e,i){return new S({textLayerDiv:t,pageIndex:e,viewport:i})}};var C=function(){function t(t){this.pageDiv=t.pageDiv,this.pdfPage=t.pdfPage,this.linkService=t.linkService,this.div=null}return t.prototype={setupAnnotations:function(t){function e(t,e){t.href=n.getDestinationHash(e),t.onclick=function(){return e&&n.navigateTo(e),!1},e&&(t.className="internalLink")}function i(t,e){t.href=n.getAnchorUrl(""),t.onclick=function(){return n.executeNamedAction(e),!1},t.className="internalLink"}var n=this.linkService,r=this.pdfPage,s=this;r.getAnnotations().then(function(n){t=t.clone({dontFlip:!0});var a,o,h,d,l=t.transform,c="matrix("+l.join(",")+")";if(s.div){for(h=0,d=n.length;d>h;h++)a=n[h],o=s.div.querySelector('[data-annotation-id="'+a.id+'"]'),o&&f.setProp("transform",o,c);s.div.removeAttribute("hidden")}else for(h=0,d=n.length;d>h;h++)if(a=n[h],a&&a.hasHtml){o=PDFJS.AnnotationUtils.getHtmlElement(a,r.commonObjs),o.setAttribute("data-annotation-id",a.id),"undefined"!=typeof mozL10n&&mozL10n.translate(o);var u=a.rect,v=r.view;u=PDFJS.Util.normalizeRect([u[0],v[3]-u[1]+v[1],u[2],v[3]-u[3]+v[1]]),o.style.left=u[0]+"px",o.style.top=u[1]+"px",o.style.position="absolute",f.setProp("transform",o,c);var g=-u[0]+"px "+-u[1]+"px";if(f.setProp("transformOrigin",o,g),"Link"===a.subtype&&!a.url){var p=o.getElementsByTagName("a")[0];p&&(a.action?i(p,a.action):e(p,"dest"in a?a.dest:null))}if(!s.div){var m=document.createElement("div");m.className="annotationLayer",s.pageDiv.appendChild(m),s.div=m}s.div.appendChild(o)}})},hide:function(){this.div&&this.div.setAttribute("hidden","true")}},t}();a.prototype={createAnnotationsLayerBuilder:function(t,e){return new C({pageDiv:t,pdfPage:e})}};var I=function(){function t(t){var e=[];this.push=function(i){var n=e.indexOf(i);n>=0&&e.splice(n,1),e.push(i),e.length>t&&e.shift().destroy()},this.resize=function(i){for(t=i;e.length>t;)e.shift().destroy()}}function r(t){this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,this.linkService=t.linkService||new N(this),this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new y,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this.scroll=i(this.container,this._scrollUpdate.bind(this)),this.updateInProgress=!1,this.presentationModeState=v.UNKNOWN,this._resetView()}return r.prototype={get pagesCount(){return this.pages.length},getPageView:function(t){return this.pages[t]},get currentPageNumber(){return this._currentPageNumber},set currentPageNumber(t){if(!this.pdfDocument)return void(this._currentPageNumber=t);var e=document.createEvent("UIEvents");return e.initUIEvent("pagechange",!0,!0,window,0),e.updateInProgress=this.updateInProgress,t>0&&t<=this.pagesCount?(e.previousPageNumber=this._currentPageNumber,this._currentPageNumber=t,e.pageNumber=t,void this.container.dispatchEvent(e)):(e.pageNumber=this._currentPageNumber,e.previousPageNumber=t,void this.container.dispatchEvent(e))},get currentScale(){return this._currentScale},set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale");return this.pdfDocument?void this._setScale(t,!1):(this._currentScale=t,void(this._currentScaleValue=t.toString()))},get currentScaleValue(){return this._currentScaleValue},set currentScaleValue(t){return this.pdfDocument?void this._setScale(t,!1):(this._currentScale=isNaN(t)?d:t,void(this._currentScaleValue=t))},get pagesRotation(){return this._pagesRotation},set pagesRotation(t){this._pagesRotation=t;for(var e=0,i=this.pages.length;i>e;e++){var n=this.pages[e];n.update(n.scale,t)}this._setScale(this._currentScaleValue,!0)},setDocument:function(t){if(this.pdfDocument&&this._resetView(),this.pdfDocument=t,t){var e,i=t.numPages,n=this.pagesRefMap={},r=this,s=new Promise(function(t){e=t});this.pagesPromise=s,s.then(function(){var t=document.createEvent("CustomEvent");t.initCustomEvent("pagesloaded",!0,!0,{pagesCount:i}),r.container.dispatchEvent(t)});var a=!1,h=null,d=new Promise(function(t){h=t});this.onePageRendered=d;var l=function(t){t.onBeforeDraw=function(){r._buffer.push(this)},t.onAfterDraw=function(){a||(a=!0,h());var e=document.createEvent("CustomEvent");e.initCustomEvent("pagerendered",!0,!0,{pageNumber:t.id}),r.container.dispatchEvent(e)}},c=t.getPage(1);return this.firstPagePromise=c,c.then(function(s){for(var a=this._currentScale||1,h=s.getViewport(a*o),c=1;i>=c;++c){var u=null;PDFJS.disableTextLayer||(u=this);var f=new b({container:this.viewer,id:c,scale:a,defaultViewport:h.clone(),renderingQueue:this.renderingQueue,textLayerFactory:u,annotationsLayerFactory:this});l(f),this.pages.push(f)}d.then(function(){if(PDFJS.disableAutoFetch)e();else for(var s=i,a=1;i>=a;++a)t.getPage(a).then(function(t,i){var a=r.pages[t-1];a.pdfPage||a.setPdfPage(i);var o=i.ref.num+" "+i.ref.gen+" R";n[o]=t,s--,s||e()}.bind(null,a))});var v=document.createEvent("CustomEvent");v.initCustomEvent("pagesinit",!0,!0,null),r.container.dispatchEvent(v),this.defaultRenderingQueue&&this.update()}.bind(this))}},_resetView:function(){this.pages=[],this._currentPageNumber=1,this._currentScale=d,this._currentScaleValue=null,this._buffer=new t(p),this.location=null,this._pagesRotation=0,this._pagesRequests=[];for(var e=this.viewer;e.hasChildNodes();)e.removeChild(e.lastChild)},_scrollUpdate:function(){if(0!==this.pagesCount){this.update();for(var t=0,e=this.pages.length;e>t;t++)this.pages[t].updatePosition()}},_setScaleUpdatePages:function(t,e,i,n){if(this._currentScaleValue=e,t!==this._currentScale){for(var r=0,s=this.pages.length;s>r;r++)this.pages[r].update(t);if(this._currentScale=t,!i){var a,o=this._currentPageNumber,h=this.presentationModeState===v.CHANGING||this.presentationModeState===v.FULLSCREEN;!this.location||h||g||(o=this.location.pageNumber,a=[null,{name:"XYZ"},this.location.left,this.location.top,null]),this.scrollPageIntoView(o,a)}var d=document.createEvent("UIEvents");d.initUIEvent("scalechange",!0,!0,window,0),d.scale=t,n&&(d.presetValue=e),this.container.dispatchEvent(d)}},_setScale:function(t,e){if("custom"!==t){var i=parseFloat(t);if(i>0)this._setScaleUpdatePages(i,t,e,!1);else{var n=this.pages[this._currentPageNumber-1];if(!n)return;var r=this.presentationModeState===v.FULLSCREEN,s=r?0:c,a=r?0:u,o=(this.container.clientWidth-s)/n.width*n.scale,h=(this.container.clientHeight-a)/n.height*n.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=o;break;case"page-height":i=h;break;case"page-fit":i=Math.min(o,h);break;case"auto":var d=n.width>n.height,f=d?Math.min(h,o):o;i=Math.min(l,f);break;default:return void console.error("pdfViewSetScale: '"+t+"' is an unknown zoom value.")}this._setScaleUpdatePages(i,t,e,!0)}}},scrollPageIntoView:function(t,i){var n=this.pages[t-1];if(this.presentationModeState===v.FULLSCREEN){if(this.linkService.page!==n.id)return void(this.linkService.page=n.id);i=null,this._setScale(this.currentScaleValue,!0)}if(!i)return void e(n.div);var r,s,a=0,l=0,u=0,f=0,g=n.rotation%180!==0,p=(g?n.height:n.width)/n.scale/o,m=(g?n.width:n.height)/n.scale/o,w=0;switch(i[1].name){case"XYZ":a=i[2],l=i[3],w=i[4],a=null!==a?a:0,l=null!==l?l:m;break;case"Fit":case"FitB":w="page-fit";break;case"FitH":case"FitBH":l=i[2],w="page-width";break;case"FitV":case"FitBV":a=i[2],u=p,f=m,w="page-height";break;case"FitR":a=i[2],l=i[3],u=i[4]-a,f=i[5]-l;var y=this.container;r=(y.clientWidth-c)/u/o,s=(y.clientHeight-c)/f/o,w=Math.min(Math.abs(r),Math.abs(s));break;default:return}if(w&&w!==this.currentScale?this.currentScaleValue=w:this.currentScale===d&&(this.currentScaleValue=h),"page-fit"===w&&!i[4])return void e(n.div);var P=[n.viewport.convertToViewportPoint(a,l),n.viewport.convertToViewportPoint(a+u,l+f)],b=Math.min(P[0][0],P[1][0]),x=Math.min(P[0][1],P[1][1]);e(n.div,{left:b,top:x})},_updateLocation:function(t){var e=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===e?Math.round(1e4*e)/100:i,r=t.id,s="#page="+r;s+="&zoom="+n;var a=this.pages[r-1],o=this.container,h=a.getPagePoint(o.scrollLeft-t.x,o.scrollTop-t.y),d=Math.round(h[0]),l=Math.round(h[1]);s+=","+d+","+l,this.location={pageNumber:r,scale:n,top:l,left:d,pdfOpenParams:s}},update:function(){var t=this._getVisiblePages(),e=t.views;if(0!==e.length){this.updateInProgress=!0;var i=Math.max(p,2*e.length+1);this._buffer.resize(i),this.renderingQueue.renderHighestPriority(t);for(var n=this.currentPageNumber,r=t.first,s=0,a=e.length,o=!1;a>s;++s){var h=e[s];if(h.percent<100)break;if(h.id===n){o=!0;break}}o||(n=e[0].id),this.presentationModeState!==v.FULLSCREEN&&(this.currentPageNumber=n),this._updateLocation(r),this.updateInProgress=!1;var d=document.createEvent("UIEvents");d.initUIEvent("updateviewarea",!0,!0,window,0),this.container.dispatchEvent(d)}},containsElement:function(t){return this.container.contains(t)},focus:function(){this.container.focus()},blur:function(){this.container.blur()},get isHorizontalScrollbarEnabled(){return this.presentationModeState===v.FULLSCREEN?!1:this.container.scrollWidth>this.container.clientWidth},_getVisiblePages:function(){if(this.presentationModeState!==v.FULLSCREEN)return n(this.container,this.pages,!0);var t=[],e=this.pages[this._currentPageNumber-1];return t.push({id:e.id,view:e}),{first:e,last:e,views:t}},cleanup:function(){for(var t=0,e=this.pages.length;e>t;t++)this.pages[t]&&this.pages[t].renderingState!==w.FINISHED&&this.pages[t].reset()},_ensurePdfPageLoaded:function(t){if(t.pdfPage)return Promise.resolve(t.pdfPage);var e=t.id;if(this._pagesRequests[e])return this._pagesRequests[e];var i=this.pdfDocument.getPage(e).then(function(i){return t.setPdfPage(i),this._pagesRequests[e]=null,i}.bind(this));return this._pagesRequests[e]=i,i},forceRendering:function(t){var e=t||this._getVisiblePages(),i=this.renderingQueue.getHighestPriority(e,this.pages,this.scroll.down);return i?(this._ensurePdfPageLoaded(i).then(function(){this.renderingQueue.renderView(i)}.bind(this)),!0):!1},getPageTextContent:function(t){return this.pdfDocument.getPage(t+1).then(function(t){return t.getTextContent()})},createTextLayerBuilder:function(t,e,i){var n=this.presentationModeState===v.FULLSCREEN;return new S({textLayerDiv:t,pageIndex:e,viewport:i,findController:n?null:this.findController})},createAnnotationsLayerBuilder:function(t,e){return new C({pageDiv:t,pdfPage:e,linkService:this.linkService})},setFindController:function(t){this.findController=t}},r}(),N=function(){function t(t){this.pdfViewer=t}return t.prototype={get page(){return this.pdfViewer.currentPageNumber},set page(t){this.pdfViewer.currentPageNumber=t},navigateTo:function(t){},getDestinationHash:function(t){return"#"},getAnchorUrl:function(t){return"#"},setHash:function(t){},executeNamedAction:function(t){}},t}();PDFJS.PDFViewer=I,PDFJS.PDFPageView=b,PDFJS.TextLayerBuilder=S,PDFJS.DefaultTextLayerFactory=s,PDFJS.AnnotationsLayerBuilder=C,PDFJS.DefaultAnnotationsLayerFactory=a}.call("undefined"==typeof window?this:window);
//# sourceMappingURL=pdf_viewer.min.js.map