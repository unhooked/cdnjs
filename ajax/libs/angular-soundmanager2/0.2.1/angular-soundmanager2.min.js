!function(t,e){"use strict";function n(n,o){function i(t){return gt.preferFlash&&ut&&!gt.ignoreFlash&&gt.flash[t]!==e&&gt.flash[t]}function a(t){return function(e){var n,o=this._s;return o&&o._a?n=t.call(this,e):(o&&o.id?gt._wD(o.id+": Ignoring "+e.type):gt._wD(bt+"Ignoring "+e.type),n=null),n}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=o||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20131201",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,s,l,u,d,c,f,p,h,m,g,y,_,v,w,b,M,O,T,D,P,L,S,k,F,I,A,H,E,C,x,R,N,U,B,$,j,W,V,q,Q,K,J,X,G,Z,Y,z,tt,et,nt,ot,it,at,rt,st,lt,ut,dt,ct,ft,pt,ht,mt,gt=this,yt=null,_t=null,vt="soundManager",wt=vt+": ",bt="HTML5::",Mt=navigator.userAgent,Ot=t.location.href.toString(),Tt=document,Dt=[],Pt=!0,Lt=!1,St=!1,kt=!1,Ft=!1,It=!1,At=0,Ht=["log","info","warn","error"],Et=8,Ct=null,xt=null,Rt=!1,Nt=!1,Ut=0,Bt=null,$t=[],jt=null,Wt=Array.prototype.slice,Vt=!1,qt=0,Qt=Mt.match(/(ipad|iphone|ipod)/i),Kt=Mt.match(/android/i),Jt=Mt.match(/msie/i),Xt=Mt.match(/webkit/i),Gt=Mt.match(/safari/i)&&!Mt.match(/chrome/i),Zt=Mt.match(/opera/i),Yt=Mt.match(/(mobile|pre\/|xoom)/i)||Qt||Kt,zt=!Ot.match(/usehtml5audio/i)&&!Ot.match(/sm2\-ignorebadua/i)&&Gt&&!Mt.match(/silk/i)&&Mt.match(/OS X 10_6_([3-7])/i),te=t.console!==e&&console.log!==e,ee=Tt.hasFocus!==e?Tt.hasFocus():null,ne=Gt&&(Tt.hasFocus===e||!Tt.hasFocus()),oe=!ne,ie=/(mp3|mp4|mpa|m4a|m4b)/i,ae=1e3,re="about:blank",se="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",le=Tt.location?Tt.location.protocol.match(/http/i):null,ue=le?"":"http://",de=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ce=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],fe=new RegExp("\\.("+ce.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!le,W={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(Zt&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var n=!gt.url;return t!==e&&kt&&jt&&gt.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&K(B("setupLate")),g(t),t&&(n&&I&&t.url!==e&&gt.beginDelayedInit(),I||t.url===e||"complete"!==Tt.readyState||setTimeout(k,1)),gt},this.ok=function(){return jt?kt&&!Ft:gt.useHTML5Audio&&gt.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return s(e)||Tt[e]||t[e]},this.createSound=function(t,n){function o(){return s=q(s),gt.sounds[s.id]=new r(s),gt.soundIDs.push(s.id),gt.sounds[s.id]}var i,a,s,l=null;if(i=vt+".createSound(): ",a=i+B(kt?"notOK":"notReady"),!kt||!gt.ok())return K(a),!1;if(n!==e&&(t={id:t,url:n}),s=m(t),s.url=Y(s.url),void 0===s.id&&(s.id=gt.setupOptions.idPrefix+qt++),s.id.toString().charAt(0).match(/^[0-9]$/)&&gt._wD(i+B("badID",s.id),2),gt._wD(i+s.id+(s.url?" ("+s.url+")":""),1),J(s.id,!0))return gt._wD(i+s.id+" exists",1),gt.sounds[s.id];if(et(s))l=o(),gt._wD(s.id+": Using HTML5"),l._setup_html5(s);else{if(gt.html5Only)return gt._wD(s.id+": No HTML5 support for this sound, and no Flash. Exiting."),o();if(gt.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return gt._wD(s.id+": data: URIs not supported via Flash. Exiting."),o();c>8&&(null===s.isMovieStar&&(s.isMovieStar=!!(s.serverURL||(s.type?s.type.match(de):!1)||s.url&&s.url.match(fe))),s.isMovieStar&&(gt._wD(i+"using MovieStar handling"),s.loops>1&&p("noNSLoop"))),s=Q(s,i),l=o(),8===c?_t._createSound(s.id,s.loops||1,s.usePolicyFile):(_t._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(l.connected=!0,s.onconnect&&s.onconnect.apply(l))),s.serverURL||!s.autoLoad&&!s.autoPlay||l.load(s)}return!s.serverURL&&s.autoPlay&&l.play(),l},this.destroySound=function(t,e){if(!J(t))return!1;var n,o=gt.sounds[t];for(o._iO={},o.stop(),o.unload(),n=0;n<gt.soundIDs.length;n++)if(gt.soundIDs[n]===t){gt.soundIDs.splice(n,1);break}return e||o.destruct(!0),o=null,delete gt.sounds[t],!0},this.load=function(t,e){return J(t)?gt.sounds[t].load(e):!1},this.unload=function(t){return J(t)?gt.sounds[t].unload():!1},this.onPosition=function(t,e,n,o){return J(t)?gt.sounds[t].onposition(e,n,o):!1},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,n){return J(t)?gt.sounds[t].clearOnPosition(e,n):!1},this.play=function(t,e){var n=null,o=e&&!(e instanceof Object);if(!kt||!gt.ok())return K(vt+".play(): "+B(kt?"notOK":"notReady")),!1;if(J(t,o))o&&(e={url:e});else{if(!o)return!1;o&&(e={url:e}),e&&e.url&&(gt._wD(vt+'.play(): Attempting to create "'+t+'"',1),e.id=t,n=gt.createSound(e).play())}return null===n&&(n=gt.sounds[t].play(e)),n},this.start=this.play,this.setPosition=function(t,e){return J(t)?gt.sounds[t].setPosition(e):!1},this.stop=function(t){return J(t)?(gt._wD(vt+".stop("+t+")",1),gt.sounds[t].stop()):!1},this.stopAll=function(){var t;gt._wD(vt+".stopAll()",1);for(t in gt.sounds)gt.sounds.hasOwnProperty(t)&&gt.sounds[t].stop()},this.pause=function(t){return J(t)?gt.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=gt.soundIDs.length-1;t>=0;t--)gt.sounds[gt.soundIDs[t]].pause()},this.resume=function(t){return J(t)?gt.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=gt.soundIDs.length-1;t>=0;t--)gt.sounds[gt.soundIDs[t]].resume()},this.togglePause=function(t){return J(t)?gt.sounds[t].togglePause():!1},this.setPan=function(t,e){return J(t)?gt.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return J(t)?gt.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return J(t)?(gt._wD(vt+'.mute(): Muting "'+t+'"'),gt.sounds[t].mute()):!1;for(gt._wD(vt+".mute(): Muting all sounds"),e=gt.soundIDs.length-1;e>=0;e--)gt.sounds[gt.soundIDs[e]].mute();return gt.muted=!0,!0},this.muteAll=function(){gt.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return J(t)?(gt._wD(vt+'.unmute(): Unmuting "'+t+'"'),gt.sounds[t].unmute()):!1;for(gt._wD(vt+".unmute(): Unmuting all sounds"),e=gt.soundIDs.length-1;e>=0;e--)gt.sounds[gt.soundIDs[e]].unmute();return gt.muted=!1,!0},this.unmuteAll=function(){gt.unmute()},this.toggleMute=function(t){return J(t)?gt.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return _t&&8!==c&&(t=parseInt(_t._getMemoryUse(),10)),t},this.disable=function(n){var o;if(n===e&&(n=!1),Ft)return!1;for(Ft=!0,p("shutdown",1),o=gt.soundIDs.length-1;o>=0;o--)R(gt.sounds[gt.soundIDs[o]]);return h(n),st.remove(t,"load",w),!0},this.canPlayMIME=function(t){var e;return gt.hasHTML5&&(e=nt({type:t})),!e&&jt&&(e=t&&gt.ok()?!!((c>8?t.match(de):null)||t.match(gt.mimePattern)):null),e},this.canPlayURL=function(t){var e;return gt.hasHTML5&&(e=nt({url:t})),!e&&jt&&(e=t&&gt.ok()?!!t.match(gt.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&gt.canPlayMIME(t.type)?!0:gt.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var n=gt.sounds[t];return n||e||gt._wD(vt+'.getSoundById(): Sound "'+t+'" not found.',2),n},this.onready=function(e,n){var o="onready",i=!1;if("function"!=typeof e)throw B("needFunction",o);return kt&&gt._wD(B("queue",o)),n||(n=t),_(o,e,n),v(),i=!0,i},this.ontimeout=function(e,n){var o="ontimeout",i=!1;if("function"!=typeof e)throw B("needFunction",o);return kt&&gt._wD(B("queue",o)),n||(n=t),_(o,e,n),v({type:o}),i=!0,i},this._writeDebug=function(t,n){var o,i,a="soundmanager-debug";return gt.debugMode?te&&gt.useConsole&&(n&&"object"==typeof n?console.log(t,n):Ht[n]!==e?console[Ht[n]](t):console.log(t),gt.consoleOnly)?!0:(o=s(a))?(i=Tt.createElement("div"),++At%2===0&&(i.className="sm2-alt"),n=n===e?0:parseInt(n,10),i.appendChild(Tt.createTextNode(t)),n&&(n>=2&&(i.style.fontWeight="bold"),3===n&&(i.style.color="#ff3333")),o.insertBefore(i,o.firstChild),o=null,!0):!1:!1},-1!==Ot.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t,e;for(p("currentObj",1),t=0,e=gt.soundIDs.length;e>t;t++)gt.sounds[gt.soundIDs[t]]._debug()},this.reboot=function(e,n){gt.soundIDs.length&&gt._wD("Destroying "+gt.soundIDs.length+" SMSound object"+(1!==gt.soundIDs.length?"s":"")+"...");var o,i,a;for(o=gt.soundIDs.length-1;o>=0;o--)gt.sounds[gt.soundIDs[o]].destruct();if(_t)try{Jt&&(xt=_t.innerHTML),Ct=_t.parentNode.removeChild(_t)}catch(r){p("badRemove",2)}if(xt=Ct=jt=_t=null,gt.enabled=I=kt=Rt=Nt=Lt=St=Ft=Vt=gt.swfLoaded=!1,gt.soundIDs=[],gt.sounds={},qt=0,e)Dt=[];else for(o in Dt)if(Dt.hasOwnProperty(o))for(i=0,a=Dt[o].length;a>i;i++)Dt[o][i].fired=!1;return n||gt._wD(vt+": Rebooting..."),gt.html5={usingFlash:null},gt.flash={},gt.html5Only=!1,gt.ignoreFlash=!1,t.setTimeout(function(){S(),n||gt.beginDelayedInit()},20),gt},this.reset=function(){return p("reset"),gt.reboot(!0,!0)},this.getMoviePercent=function(){return _t&&"PercentLoaded"in _t?_t.PercentLoaded():null},this.beginDelayedInit=function(){It=!0,k(),setTimeout(function(){return Nt?!1:(H(),L(),Nt=!0,!0)},20),b()},this.destruct=function(){gt._wD(vt+".destruct()"),gt.disable(!0)},r=function(t){var n,o,i,a,r,s,l,u,d,h,g=this,y=!1,_=[],v=0,w=null;d={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=m(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,h=!this.url,this.id3={},this._debug=function(){gt._wD(g.id+": Merged options:",g.options)},this.load=function(t){var n,o=null;if(t!==e?g._iO=m(t,g.options):(t=g.options,g._iO=t,w&&w!==g.url&&(p("manURL"),g._iO.url=g.url,g.url=null)),g._iO.url||(g._iO.url=g.url),g._iO.url=Y(g._iO.url),g.instanceOptions=g._iO,n=g._iO,gt._wD(g.id+": load ("+n.url+")"),!n.url&&!g.url)return gt._wD(g.id+": load(): url is unassigned. Exiting.",2),g;if(g.isHTML5||8!==c||g.url||n.autoPlay||gt._wD(g.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),n.url===g.url&&0!==g.readyState&&2!==g.readyState)return p("onURL",1),3===g.readyState&&n.onload&&mt(g,function(){n.onload.apply(g,[!!g.duration])}),g;if(g.loaded=!1,g.readyState=1,g.playState=0,g.id3={},et(n))o=g._setup_html5(n),o._called_load?gt._wD(g.id+": Ignoring request to load again"):(g._html5_canplay=!1,g.url!==n.url&&(gt._wD(p("manURL")+": "+n.url),g._a.src=n.url,g.setPosition(0)),g._a.autobuffer="auto",g._a.preload="auto",g._a._called_load=!0);else{if(gt.html5Only)return gt._wD(g.id+": No flash support. Exiting."),g;if(g._iO.url&&g._iO.url.match(/data\:/i))return gt._wD(g.id+": data: URIs not supported via Flash. Exiting."),g;try{g.isHTML5=!1,g._iO=Q(q(n)),n=g._iO,8===c?_t._load(g.id,n.url,n.stream,n.autoPlay,n.usePolicyFile):_t._load(g.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}catch(i){p("smError",2),f("onload",!1),E({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return g.url=n.url,g},this.unload=function(){return 0!==g.readyState&&(gt._wD(g.id+": unload()"),g.isHTML5?(a(),g._a&&(g._a.pause(),w=it(g._a))):8===c?_t._unload(g.id,re):_t._unload(g.id),n()),g},this.destruct=function(t){gt._wD(g.id+": Destruct"),g.isHTML5?(a(),g._a&&(g._a.pause(),it(g._a),Vt||i(),g._a._s=null,g._a=null)):(g._iO.onfailure=null,_t._destroySound(g.id)),t||gt.destroySound(g.id,!0)},this.play=function(t,n){var o,i,a,l,d,f,p,_=!0,v=null;if(o=g.id+": play(): ",n=n===e?!0:n,t||(t={}),g.url&&(g._iO.url=g.url),g._iO=m(g._iO,g.options),g._iO=m(t,g._iO),g._iO.url=Y(g._iO.url),g.instanceOptions=g._iO,!g.isHTML5&&g._iO.serverURL&&!g.connected)return g.getAutoPlay()||(gt._wD(o+" Netstream not connected yet - setting autoPlay"),g.setAutoPlay(!0)),g;if(et(g._iO)&&(g._setup_html5(g._iO),r()),1!==g.playState||g.paused||(i=g._iO.multiShot,i?gt._wD(o+"Already playing (multi-shot)",1):(gt._wD(o+"Already playing (one-shot)",1),g.isHTML5&&g.setPosition(g._iO.position),v=g)),null!==v)return v;if(t.url&&t.url!==g.url&&(g.readyState||g.isHTML5||8!==c||!h?g.load(g._iO):h=!1),g.loaded?gt._wD(o.substr(0,o.lastIndexOf(":"))):0===g.readyState?(gt._wD(o+"Attempting to load"),g.isHTML5||gt.html5Only?g.isHTML5?g.load(g._iO):(gt._wD(o+"Unsupported type. Exiting."),v=g):(g._iO.autoPlay=!0,g.load(g._iO)),g.instanceOptions=g._iO):2===g.readyState?(gt._wD(o+"Could not load - exiting",2),v=g):gt._wD(o+"Loading - attempting to play..."),null!==v)return v;if(!g.isHTML5&&9===c&&g.position>0&&g.position===g.duration&&(gt._wD(o+"Sound at end, resetting to position:0"),t.position=0),g.paused&&g.position>=0&&(!g._iO.serverURL||g.position>0))gt._wD(o+"Resuming from paused state",1),g.resume();else{if(g._iO=m(t,g._iO),null!==g._iO.from&&null!==g._iO.to&&0===g.instanceCount&&0===g.playState&&!g._iO.serverURL){if(l=function(){g._iO=m(t,g._iO),g.play(g._iO)},g.isHTML5&&!g._html5_canplay?(gt._wD(o+"Beginning load for from/to case"),g.load({_oncanplay:l}),v=!1):g.isHTML5||g.loaded||g.readyState&&2===g.readyState||(gt._wD(o+"Preloading for from/to case"),g.load({onload:l}),v=!1),null!==v)return v;g._iO=u()}(!g.instanceCount||g._iO.multiShotEvents||g.isHTML5&&g._iO.multiShot&&!Vt||!g.isHTML5&&c>8&&!g.getAutoPlay())&&g.instanceCount++,g._iO.onposition&&0===g.playState&&s(g),g.playState=1,g.paused=!1,g.position=g._iO.position===e||isNaN(g._iO.position)?0:g._iO.position,g.isHTML5||(g._iO=Q(q(g._iO))),g._iO.onplay&&n&&(g._iO.onplay.apply(g),y=!0),g.setVolume(g._iO.volume,!0),g.setPan(g._iO.pan,!0),g.isHTML5?g.instanceCount<2?(r(),a=g._setup_html5(),g.setPosition(g._iO.position),a.play()):(gt._wD(g.id+": Cloning Audio() for instance #"+g.instanceCount+"..."),d=new Audio(g._iO.url),f=function(){st.remove(d,"ended",f),g._onfinish(g),it(d),d=null},p=function(){st.remove(d,"canplay",p);try{d.currentTime=g._iO.position/ae}catch(t){K(g.id+": multiShot play() failed to apply position of "+g._iO.position/ae)}d.play()},st.add(d,"ended",f),void 0!==g._iO.volume&&(d.volume=Math.max(0,Math.min(1,g._iO.volume/100))),g.muted&&(d.muted=!0),g._iO.position?st.add(d,"canplay",p):d.play()):(_=_t._start(g.id,g._iO.loops||1,9===c?g.position:g.position/ae,g._iO.multiShot||!1),9!==c||_||(gt._wD(o+"No sound hardware, or 32-sound ceiling hit",2),g._iO.onplayerror&&g._iO.onplayerror.apply(g)))}return g},this.start=this.play,this.stop=function(t){var e,n=g._iO;return 1===g.playState&&(gt._wD(g.id+": stop()"),g._onbufferchange(0),g._resetOnPosition(0),g.paused=!1,g.isHTML5||(g.playState=0),l(),n.to&&g.clearOnPosition(n.to),g.isHTML5?g._a&&(e=g.position,g.setPosition(0),g.position=e,g._a.pause(),g.playState=0,g._onTimer(),a()):(_t._stop(g.id,t),n.serverURL&&g.unload()),g.instanceCount=0,g._iO={},n.onstop&&n.onstop.apply(g)),g},this.setAutoPlay=function(t){gt._wD(g.id+": Autoplay turned "+(t?"on":"off")),g._iO.autoPlay=t,g.isHTML5||(_t._setAutoPlay(g.id,t),t&&(g.instanceCount||1!==g.readyState||(g.instanceCount++,gt._wD(g.id+": Incremented instance count to "+g.instanceCount))))},this.getAutoPlay=function(){return g._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var n,o,i=g.isHTML5?Math.max(t,0):Math.min(g.duration||g._iO.duration,Math.max(t,0));if(g.position=i,o=g.position/ae,g._resetOnPosition(g.position),g._iO.position=i,g.isHTML5){if(g._a){if(g._html5_canplay){if(g._a.currentTime!==o){gt._wD(g.id+": setPosition("+o+")");try{g._a.currentTime=o,(0===g.playState||g.paused)&&g._a.pause()}catch(a){gt._wD(g.id+": setPosition("+o+") failed: "+a.message,2)}}}else if(o)return gt._wD(g.id+": setPosition("+o+"): Cannot seek yet, sound not ready",2),g;g.paused&&g._onTimer(!0)}}else n=9===c?g.position:o,g.readyState&&2!==g.readyState&&_t._setPosition(g.id,n,g.paused||!g.playState,g._iO.multiShot);return g},this.pause=function(t){return g.paused||0===g.playState&&1!==g.readyState?g:(gt._wD(g.id+": pause()"),g.paused=!0,g.isHTML5?(g._setup_html5().pause(),a()):(t||t===e)&&_t._pause(g.id,g._iO.multiShot),g._iO.onpause&&g._iO.onpause.apply(g),g)},this.resume=function(){var t=g._iO;return g.paused?(gt._wD(g.id+": resume()"),g.paused=!1,g.playState=1,g.isHTML5?(g._setup_html5().play(),r()):(t.isMovieStar&&!t.serverURL&&g.setPosition(g.position),_t._pause(g.id,t.multiShot)),!y&&t.onplay?(t.onplay.apply(g),y=!0):t.onresume&&t.onresume.apply(g),g):g},this.togglePause=function(){return gt._wD(g.id+": togglePause()"),0===g.playState?(g.play({position:9!==c||g.isHTML5?g.position/ae:g.position}),g):(g.paused?g.resume():g.pause(),g)},this.setPan=function(t,n){return t===e&&(t=0),n===e&&(n=!1),g.isHTML5||_t._setPan(g.id,t),g._iO.pan=t,n||(g.pan=t,g.options.pan=t),g},this.setVolume=function(t,n){return t===e&&(t=100),n===e&&(n=!1),g.isHTML5?g._a&&(gt.muted&&!g.muted&&(g.muted=!0,g._a.muted=!0),g._a.volume=Math.max(0,Math.min(1,t/100))):_t._setVolume(g.id,gt.muted&&!g.muted||g.muted?0:t),g._iO.volume=t,n||(g.volume=t,g.options.volume=t),g},this.mute=function(){return g.muted=!0,g.isHTML5?g._a&&(g._a.muted=!0):_t._setVolume(g.id,0),g},this.unmute=function(){g.muted=!1;var t=g._iO.volume!==e;return g.isHTML5?g._a&&(g._a.muted=!1):_t._setVolume(g.id,t?g._iO.volume:g.options.volume),g},this.toggleMute=function(){return g.muted?g.unmute():g.mute()},this.onPosition=function(t,n,o){return _.push({position:parseInt(t,10),method:n,scope:o!==e?o:g,fired:!1}),g},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var n;if(t=parseInt(t,10),isNaN(t))return!1;for(n=0;n<_.length;n++)t===_[n].position&&(e&&e!==_[n].method||(_[n].fired&&v--,_.splice(n,1)))},this._processOnPosition=function(){var t,e,n=_.length;if(!n||!g.playState||v>=n)return!1;for(t=n-1;t>=0;t--)e=_[t],!e.fired&&g.position>=e.position&&(e.fired=!0,v++,e.method.apply(e.scope,[e.position]),n=_.length);return!0},this._resetOnPosition=function(t){var e,n,o=_.length;if(!o)return!1;for(e=o-1;e>=0;e--)n=_[e],n.fired&&t<=n.position&&(n.fired=!1,v--);return!0},u=function(){var t,e,n=g._iO,o=n.from,i=n.to;return e=function(){gt._wD(g.id+': "To" time of '+i+" reached."),g.clearOnPosition(i,e),g.stop()},t=function(){gt._wD(g.id+': Playing "from" '+o),null===i||isNaN(i)||g.onPosition(i,e)},null===o||isNaN(o)||(n.position=o,n.multiShot=!1,t()),n},s=function(){var t,e=g._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&g.onPosition(parseInt(t,10),e[t])},l=function(){var t,e=g._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&g.clearOnPosition(parseInt(t,10))},r=function(){g.isHTML5&&X(g)},a=function(){g.isHTML5&&G(g)},n=function(t){t||(_=[],v=0),y=!1,g._hasTimer=null,g._a=null,g._html5_canplay=!1,g.bytesLoaded=null,g.bytesTotal=null,g.duration=g._iO&&g._iO.duration?g._iO.duration:null,g.durationEstimate=null,g.buffered=[],g.eqData=[],g.eqData.left=[],g.eqData.right=[],g.failures=0,g.isBuffering=!1,g.instanceOptions={},g.instanceCount=0,g.loaded=!1,g.metadata={},g.readyState=0,g.muted=!1,g.paused=!1,g.peakData={left:0,right:0},g.waveformData={left:[],right:[]},g.playState=0,g.position=null,g.id3={}},n(),this._onTimer=function(t){var e,n,o=!1,i={};return g._hasTimer||t?(g._a&&(t||(g.playState>0||1===g.readyState)&&!g.paused)&&(e=g._get_html5_duration(),e!==d.duration&&(d.duration=e,g.duration=e,o=!0),g.durationEstimate=g.duration,n=g._a.currentTime*ae||0,n!==d.time&&(d.time=n,o=!0),(o||t)&&g._whileplaying(n,i,i,i,i)),o):void 0},this._get_html5_duration=function(){var t=g._iO,e=g._a&&g._a.duration?g._a.duration*ae:t&&t.duration?t.duration:null,n=e&&!isNaN(e)&&e!==1/0?e:null;return n},this._apply_loop=function(t,e){!t.loop&&e>1&&gt._wD("Note: Native HTML5 looping is infinite.",1),t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,i=m(g._iO,t),a=Vt?yt:g._a,r=decodeURI(i.url);if(Vt?r===decodeURI(lt)&&(e=!0):r===decodeURI(w)&&(e=!0),a){if(a._s)if(Vt)a._s&&a._s.playState&&!e&&a._s.stop();else if(!Vt&&r===decodeURI(w))return g._apply_loop(a,i.loops),a;e||(w&&n(!1),a.src=i.url,g.url=i.url,w=i.url,lt=i.url,a._called_load=!1)}else i.autoLoad||i.autoPlay?(g._a=new Audio(i.url),g._a.load()):g._a=Zt&&opera.version()<10?new Audio(null):new Audio,a=g._a,a._called_load=!1,Vt&&(yt=a);return g.isHTML5=!0,g._a=a,a._s=g,o(),g._apply_loop(a,i.loops),i.autoLoad||i.autoPlay?g.load():(a.autobuffer=!1,a.preload="auto"),a},o=function(){function t(t,e,n){return g._a?g._a.addEventListener(t,e,n||!1):null}if(g._a._added_events)return!1;var e;g._a._added_events=!0;for(e in ft)ft.hasOwnProperty(e)&&t(e,ft[e]);return!0},i=function(){function t(t,e,n){return g._a?g._a.removeEventListener(t,e,n||!1):null}var e;gt._wD(g.id+": Removing event listeners"),g._a._added_events=!1;for(e in ft)ft.hasOwnProperty(e)&&t(e,ft[e])},this._onload=function(t){var e,n=!!t||!g.isHTML5&&8===c&&g.duration;return e=g.id+": ",gt._wD(e+(n?"onload()":"Failed to load / invalid sound?"+(g.duration?" -":" Zero-length duration reported.")+" ("+g.url+")"),n?1:2),n||g.isHTML5||(gt.sandbox.noRemote===!0&&gt._wD(e+B("noNet"),1),gt.sandbox.noLocal===!0&&gt._wD(e+B("noLocal"),1)),g.loaded=n,g.readyState=n?3:2,g._onbufferchange(0),g._iO.onload&&mt(g,function(){g._iO.onload.apply(g,[n])}),!0},this._onbufferchange=function(t){return 0===g.playState?!1:t&&g.isBuffering||!t&&!g.isBuffering?!1:(g.isBuffering=1===t,g._iO.onbufferchange&&(gt._wD(g.id+": Buffer state change: "+t),g._iO.onbufferchange.apply(g)),!0)},this._onsuspend=function(){return g._iO.onsuspend&&(gt._wD(g.id+": Playback suspended"),g._iO.onsuspend.apply(g)),!0},this._onfailure=function(t,e,n){g.failures++,gt._wD(g.id+": Failures = "+g.failures),g._iO.onfailure&&1===g.failures?g._iO.onfailure(g,t,e,n):gt._wD(g.id+": Ignoring failure")},this._onfinish=function(){var t=g._iO.onfinish;g._onbufferchange(0),g._resetOnPosition(0),g.instanceCount&&(g.instanceCount--,g.instanceCount||(l(),g.playState=0,g.paused=!1,g.instanceCount=0,g.instanceOptions={},g._iO={},a(),g.isHTML5&&(g.position=0)),g.instanceCount&&!g._iO.multiShotEvents||t&&(gt._wD(g.id+": onfinish()"),mt(g,function(){t.apply(g)})))},this._whileloading=function(t,e,n,o){var i=g._iO;g.bytesLoaded=t,g.bytesTotal=e,g.duration=Math.floor(n),g.bufferLength=o,g.isHTML5||i.isMovieStar?g.durationEstimate=g.duration:i.duration?g.durationEstimate=g.duration>i.duration?g.duration:i.duration:g.durationEstimate=parseInt(g.bytesTotal/g.bytesLoaded*g.duration,10),g.isHTML5||(g.buffered=[{start:0,end:g.duration}]),(3!==g.readyState||g.isHTML5)&&i.whileloading&&i.whileloading.apply(g)},this._whileplaying=function(t,n,o,i,a){var r,s=g._iO;return isNaN(t)||null===t?!1:(g.position=Math.max(0,t),g._processOnPosition(),!g.isHTML5&&c>8&&(s.usePeakData&&n!==e&&n&&(g.peakData={left:n.leftPeak,right:n.rightPeak}),s.useWaveformData&&o!==e&&o&&(g.waveformData={left:o.split(","),right:i.split(",")}),s.useEQData&&a!==e&&a&&a.leftEQ&&(r=a.leftEQ.split(","),g.eqData=r,g.eqData.left=r,a.rightEQ!==e&&a.rightEQ&&(g.eqData.right=a.rightEQ.split(",")))),1===g.playState&&(g.isHTML5||8!==c||g.position||!g.isBuffering||g._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(g)),!0)},this._oncaptiondata=function(t){gt._wD(g.id+": Caption data received."),g.captiondata=t,g._iO.oncaptiondata&&g._iO.oncaptiondata.apply(g,[t])},this._onmetadata=function(t,e){gt._wD(g.id+": Metadata received.");var n,o,i={};for(n=0,o=t.length;o>n;n++)i[t[n]]=e[n];g.metadata=i,g._iO.onmetadata&&g._iO.onmetadata.apply(g)},this._onid3=function(t,e){gt._wD(g.id+": ID3 data received.");var n,o,i=[];for(n=0,o=t.length;o>n;n++)i[t[n]]=e[n];g.id3=m(g.id3,i),g._iO.onid3&&g._iO.onid3.apply(g)},this._onconnect=function(t){t=1===t,gt._wD(g.id+": "+(t?"Connected.":"Failed to connect? - "+g.url),t?1:2),g.connected=t,t&&(g.failures=0,J(g.id)&&(g.getAutoPlay()?g.play(e,g.getAutoPlay()):g._iO.autoLoad&&g.load()),g._iO.onconnect&&g._iO.onconnect.apply(g,[t]))},this._ondataerror=function(t){g.playState>0&&(gt._wD(g.id+": Data error: "+t),g._iO.ondataerror&&g._iO.ondataerror.apply(g))},this._debug()},A=function(){return Tt.body||Tt.getElementsByTagName("div")[0]},s=function(t){return Tt.getElementById(t)},m=function(t,n){var o,i,a=t||{};o=n===e?gt.defaultOptions:n;for(i in o)o.hasOwnProperty(i)&&a[i]===e&&("object"!=typeof o[i]||null===o[i]?a[i]=o[i]:a[i]=m(a[i],o[i]));return a},mt=function(e,n){e.isHTML5||8!==c?n():t.setTimeout(n,0)},y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},g=function(t,n){var o,i=!0,a=n!==e,r=gt.setupOptions,s=y;if(t===e){i=[];for(o in r)r.hasOwnProperty(o)&&i.push(o);for(o in s)s.hasOwnProperty(o)&&("object"==typeof gt[o]?i.push(o+": {...}"):gt[o]instanceof Function?i.push(o+": function() {...}"):i.push(o));return gt._wD(B("setup",i.join(", "))),!1}for(o in t)if(t.hasOwnProperty(o))if("object"!=typeof t[o]||null===t[o]||t[o]instanceof Array||t[o]instanceof RegExp)a&&s[n]!==e?gt[n][o]=t[o]:r[o]!==e?(gt.setupOptions[o]=t[o],gt[o]=t[o]):s[o]===e?(K(B(gt[o]===e?"setupUndef":"setupError",o),2),i=!1):gt[o]instanceof Function?gt[o].apply(gt,t[o]instanceof Array?t[o]:[t[o]]):gt[o]=t[o];else{if(s[o]!==e)return g(t[o],o);K(B(gt[o]===e?"setupUndef":"setupError",o),2),i=!1}return i},st=function(){function e(t){var e=Wt.call(t),n=e.length;return a?(e[1]="on"+e[1],n>3&&e.pop()):3===n&&e.push(!1),e}function n(t,e){var n=t.shift(),o=[r[e]];a?n[o](t[0],t[1]):n[o].apply(n,t)}function o(){n(e(arguments),"add")}function i(){n(e(arguments),"remove")}var a=t.attachEvent,r={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:o,remove:i}}(),ft={abort:a(function(){gt._wD(this._s.id+": abort")}),canplay:a(function(){var t,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,gt._wD(n.id+": canplay"),n._onbufferchange(0),t=n._iO.position===e||isNaN(n._iO.position)?null:n._iO.position/ae,n.position&&this.currentTime!==t){gt._wD(n.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(o){gt._wD(n.id+": canplay: Setting position of "+t+" failed: "+o.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:a(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),ended:a(function(){var t=this._s;gt._wD(t.id+": ended"),t._onfinish()}),error:a(function(){gt._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:a(function(){var t=this._s;gt._wD(t.id+": loadeddata"),t._loaded||Gt||(t.duration=t._get_html5_duration())}),loadedmetadata:a(function(){gt._wD(this._s.id+": loadedmetadata")}),loadstart:a(function(){gt._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){gt._wD(this._s.id+": playing"),this._s._onbufferchange(0)}),progress:a(function(t){var e,n,o,i=this._s,a=0,r="progress"===t.type,s=t.target.buffered,l=t.loaded||0,u=t.total||1;if(i.buffered=[],s&&s.length){for(e=0,n=s.length;n>e;e++)i.buffered.push({start:s.start(e)*ae,end:s.end(e)*ae});if(a=(s.end(0)-s.start(0))*ae,l=Math.min(1,a/(t.target.duration*ae)),r&&s.length>1){for(o=[],n=s.length,e=0;n>e;e++)o.push(t.target.buffered.start(e)*ae+"-"+t.target.buffered.end(e)*ae);gt._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}r&&!isNaN(l)&&gt._wD(this._s.id+": progress, "+Math.floor(100*l)+"% loaded")}isNaN(l)||(i._onbufferchange(0),i._whileloading(l,u,i._get_html5_duration()),l&&u&&l===u&&ft.canplaythrough.call(this,t))}),ratechange:a(function(){gt._wD(this._s.id+": ratechange")}),suspend:a(function(t){var e=this._s;gt._wD(this._s.id+": suspend"),ft.progress.call(this,t),e._onsuspend()}),stalled:a(function(){gt._wD(this._s.id+": stalled")}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){var t=this._s;gt._wD(this._s.id+": waiting"),t._onbufferchange(1)})},et=function(t){var e;return e=t&&(t.type||t.url||t.serverURL)?t.serverURL||t.type&&i(t.type)?!1:t.type?nt({type:t.type}):nt({url:t.url})||gt.html5Only||t.url.match(/data\:/i):!1},it=function(t){var e;return t&&(e=Gt?re:gt.html5.canPlayType("audio/wav")?se:re,t.src=e,void 0!==t._called_unload&&(t._called_load=!1)),Vt&&(lt=null),e},nt=function(t){if(!gt.useHTML5Audio||!gt.hasHTML5)return!1;var n,o,a,r,s=t.url||null,l=t.type||null,u=gt.audioFormats;if(l&&gt.html5[l]!==e)return gt.html5[l]&&!i(l);if(!ot){ot=[];for(r in u)u.hasOwnProperty(r)&&(ot.push(r),u[r].related&&(ot=ot.concat(u[r].related)));ot=new RegExp("\\.("+ot.join("|")+")(\\?.*)?$","i")}return a=s?s.toLowerCase().match(ot):null,a&&a.length?a=a[1]:l?(o=l.indexOf(";"),a=(-1!==o?l.substr(0,o):l).substr(6)):n=!1,a&&gt.html5[a]!==e?n=gt.html5[a]&&!i(a):(l="audio/"+a,n=gt.html5.canPlayType({type:l}),gt.html5[a]=n,n=n&&gt.html5[l]&&!i(l)),n},rt=function(){function t(t){var e,n,o=!1,i=!1;if(!r||"function"!=typeof r.canPlayType)return o;if(t instanceof Array){for(a=0,n=t.length;n>a;a++)(gt.html5[t[a]]||r.canPlayType(t[a]).match(gt.html5Test))&&(i=!0,gt.html5[t[a]]=!0,gt.flash[t[a]]=!!t[a].match(ie));o=i}else e=r&&"function"==typeof r.canPlayType?r.canPlayType(t):!1,o=!(!e||!e.match(gt.html5Test));return o}if(!gt.useHTML5Audio||!gt.hasHTML5)return gt.html5.usingFlash=!0,jt=!0,!1;var n,o,i,a,r=Audio!==e?Zt&&opera.version()<10?new Audio(null):new Audio:null,s={};i=gt.audioFormats;for(n in i)if(i.hasOwnProperty(n)&&(o="audio/"+n,s[n]=t(i[n].type),s[o]=s[n],n.match(ie)?(gt.flash[n]=!0,gt.flash[o]=!0):(gt.flash[n]=!1,gt.flash[o]=!1),i[n]&&i[n].related))for(a=i[n].related.length-1;a>=0;a--)s["audio/"+i[n].related[a]]=s[n],gt.html5[i[n].related[a]]=s[n],gt.flash[i[n].related[a]]=s[n];return s.canPlayType=r?t:null,gt.html5=m(gt.html5,s),gt.html5.usingFlash=tt(),jt=gt.html5.usingFlash,!0},P={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:vt+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:wt+"Verify that %s is a valid path.",tryDebug:"Try "+vt+".debugFlash = true for more security details (output goes to SWF.)",
checkSWF:"See SWF output for more debug info.",localFail:wt+"Non-HTTP page ("+Tt.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:wt+"Special case: Waiting for SWF to load with window focus...",waitForever:wt+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:wt+"Waiting for 100% SWF load...",needFunction:wt+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:wt+"_debug(): Current sound objects",waitOnload:wt+"Waiting for window.onload()",docLoaded:wt+"Document already loaded",onload:wt+"initComplete(): calling soundManager.onload()",onloadOK:vt+".onload() complete",didInit:wt+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:wt+"Failed to remove Flash node.",shutdown:vt+".disable(): Shutting down",queue:wt+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+W.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:wt+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:vt+".load(): current URL already assigned.",badFV:vt+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:wt+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:wt+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:vt+".setup(): allowed parameters: %s",setupError:vt+'.setup(): "%s" cannot be assigned with this method.',setupUndef:vt+'.setup(): Could not find option "%s"',setupLate:vt+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:wt+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:vt+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},B=function(){var t,e,n,o,i;if(t=Wt.call(arguments),o=t.shift(),i=P&&P[o]?P[o]:"",i&&t&&t.length)for(e=0,n=t.length;n>e;e++)i=i.replace("%s",t[e]);return i},q=function(t){return 8===c&&t.loops>1&&t.stream&&(p("as2loop"),t.stream=!1),t},Q=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(gt._wD((e||"")+B("policy")),t.usePolicyFile=!0),t},K=function(t){te&&console.warn!==e?console.warn(t):gt._wD(t)},l=function(){return!1},R=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=l);e=null},N=function(t){t===e&&(t=!1),(Ft||t)&&gt.disable(t)},U=function(t){var e,n=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(n=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+gt.movieURL,gt.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},T=function(){c=parseInt(gt.flashVersion,10),8!==c&&9!==c&&(gt._wD(B("badFV",c,Et)),gt.flashVersion=c=Et);var t=gt.debugMode||gt.debugFlash?"_debug.swf":".swf";gt.useHTML5Audio&&!gt.html5Only&&gt.audioFormats.mp4.required&&9>c&&(gt._wD(B("needfl9")),gt.flashVersion=c=9),gt.version=gt.versionNumber+(gt.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(gt.defaultOptions=m(gt.defaultOptions,gt.flash9Options),gt.features.buffering=!0,gt.defaultOptions=m(gt.defaultOptions,gt.movieStarOptions),gt.filePatterns.flash9=new RegExp("\\.(mp3|"+ce.join("|")+")(\\?.*)?$","i"),gt.features.movieStar=!0):gt.features.movieStar=!1,gt.filePattern=gt.filePatterns[8!==c?"flash9":"flash8"],gt.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),gt.features.peakData=gt.features.waveformData=gt.features.eqData=c>8},C=function(t,e){return _t?void _t._setPolling(t,e):!1},x=function(){if(gt.debugURLParam.test(Ot)&&(gt.debugMode=!0),s(gt.debugID))return!1;var t,e,n,o,i;if(gt.debugMode&&!s(gt.debugID)&&(!te||!gt.useConsole||!gt.consoleOnly)){t=Tt.createElement("div"),t.id=gt.debugID+"-toggle",o={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(Tt.createTextNode("-")),t.onclick=V,t.title="Toggle SM2 debug console",Mt.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand");for(i in o)o.hasOwnProperty(i)&&(t.style[i]=o[i]);if(e=Tt.createElement("div"),e.id=gt.debugID,e.style.display=gt.debugMode?"block":"none",gt.debugMode&&!s(t.id)){try{n=A(),n.appendChild(t)}catch(a){throw new Error(B("domError")+" \n"+a.toString())}n.appendChild(e)}}n=null},J=this.getSoundById,p=function(t,e){return t?gt._wD(B(t),e):""},V=function(){var t=s(gt.debugID),e=s(gt.debugID+"-toggle");return t?(Pt?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),void(Pt=!Pt)):!1},f=function(n,o,i){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(n,o,i)}catch(a){return!1}return!0},j=function(){var t=[];return gt.debugMode&&t.push(W.sm2Debug),gt.debugFlash&&t.push(W.flashDebug),gt.useHighPerformance&&t.push(W.highPerf),t.join(" ")},$=function(){var t=B("fbHandler"),e=gt.getMoviePercent(),n=W,o={type:"FLASHBLOCK"};return gt.html5Only?!1:void(gt.ok()?(gt.didFlashBlock&&gt._wD(t+": Unblocked"),gt.oMC&&(gt.oMC.className=[j(),n.swfDefault,n.swfLoaded+(gt.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(jt&&(gt.oMC.className=j()+" "+n.swfDefault+" "+(null===e?n.swfTimedout:n.swfError),gt._wD(t+": "+B("fbTimeout")+(e?" ("+B("fbLoaded")+")":""))),gt.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:o}),E(o)))},_=function(t,n,o){Dt[t]===e&&(Dt[t]=[]),Dt[t].push({method:n,scope:o||null,fired:!1})},v=function(t){if(t||(t={type:gt.ok()?"onready":"ontimeout"}),!kt&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(gt.ok()||Ft&&!t.ignoreInit))return!1;var e,n,o={success:t&&t.ignoreInit?gt.ok():!Ft},i=t&&t.type?Dt[t.type]||[]:[],a=[],r=[o],s=jt&&!gt.ok();for(t.error&&(r[0].error=t.error),e=0,n=i.length;n>e;e++)i[e].fired!==!0&&a.push(i[e]);if(a.length)for(e=0,n=a.length;n>e;e++)a[e].scope?a[e].method.apply(a[e].scope,r):a[e].method.apply(this,r),s||(a[e].fired=!0);return!0},w=function(){t.setTimeout(function(){gt.useFlashBlock&&$(),v(),"function"==typeof gt.onload&&(p("onload",1),gt.onload.apply(t),p("onloadOK",1)),gt.waitForWindowLoad&&st.add(t,"load",w)},1)},dt=function(){if(ut!==e)return ut;var n,o,i,a=!1,r=navigator,s=r.plugins,l=t.ActiveXObject;if(s&&s.length)o="application/x-shockwave-flash",i=r.mimeTypes,i&&i[o]&&i[o].enabledPlugin&&i[o].enabledPlugin.description&&(a=!0);else if(l!==e&&!Mt.match(/MSAppHost/i)){try{n=new l("ShockwaveFlash.ShockwaveFlash")}catch(u){n=null}a=!!n,n=null}return ut=a,a},tt=function(){var t,e,n=gt.audioFormats,o=Qt&&!!Mt.match(/os (1|2|3_0|3_1)/i);if(o?(gt.hasHTML5=!1,gt.html5Only=!0,gt.oMC&&(gt.oMC.style.display="none")):gt.useHTML5Audio&&(gt.html5&&gt.html5.canPlayType||(gt._wD("SoundManager: No HTML5 Audio() support detected."),gt.hasHTML5=!1),zt&&gt._wD(wt+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ut?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),gt.useHTML5Audio&&gt.hasHTML5){z=!0;for(e in n)n.hasOwnProperty(e)&&n[e].required&&(gt.html5.canPlayType(n[e].type)?gt.preferFlash&&(gt.flash[e]||gt.flash[n[e].type])&&(t=!0):(z=!1,t=!0))}return gt.ignoreFlash&&(t=!1,z=!0),gt.html5Only=gt.hasHTML5&&gt.useHTML5Audio&&!t,!gt.html5Only},Y=function(t){var e,n,o,i=0;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)if(t[e]instanceof Object){if(gt.canPlayMIME(t[e].type)){i=e;break}}else if(gt.canPlayURL(t[e])){i=e;break}t[i].url&&(t[i]=t[i].url),o=t[i]}else o=t;return o},X=function(t){t._hasTimer||(t._hasTimer=!0,!Yt&&gt.html5PollingInterval&&(null===Bt&&0===Ut&&(Bt=setInterval(Z,gt.html5PollingInterval)),Ut++))},G=function(t){t._hasTimer&&(t._hasTimer=!1,!Yt&&gt.html5PollingInterval&&Ut--)},Z=function(){var t;if(null!==Bt&&!Ut)return clearInterval(Bt),Bt=null,!1;for(t=gt.soundIDs.length-1;t>=0;t--)gt.sounds[gt.soundIDs[t]].isHTML5&&gt.sounds[gt.soundIDs[t]]._hasTimer&&gt.sounds[gt.soundIDs[t]]._onTimer()},E=function(n){n=n!==e?n:{},"function"==typeof gt.onerror&&gt.onerror.apply(t,[{type:n.type!==e?n.type:null}]),n.fatal!==e&&n.fatal&&gt.disable()},ct=function(){if(!zt||!dt())return!1;var t,e,n=gt.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(gt._wD(vt+": Using flash fallback for "+e+" format"),gt.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)gt.html5[n[e].related[t]]=!1},this._setSandboxType=function(t){var n=gt.sandbox;n.type=t,n.description=n.types[n.types[t]!==e?t:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,p("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(t){if(gt.swfLoaded)return!1;var e;return f("swf",!0),f("flashtojs",!0),gt.swfLoaded=!0,ne=!1,zt&&ct(),t&&t.replace(/\+dev/i,"")===gt.versionNumber.replace(/\+dev/i,"")?void setTimeout(d,Jt?100:1):(e=vt+': Fatal: JavaScript file build "'+gt.versionNumber+'" does not match Flash SWF build "'+t+'" at '+gt.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(e)},0),!1)},H=function(t,n){function o(){var t,e=[],n=[],o=" + ";t="SoundManager "+gt.version+(!gt.html5Only&&gt.useHTML5Audio?gt.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),gt.html5Only?gt.html5PollingInterval&&e.push("html5PollingInterval ("+gt.html5PollingInterval+"ms)"):(gt.preferFlash&&e.push("preferFlash"),gt.useHighPerformance&&e.push("useHighPerformance"),gt.flashPollingInterval&&e.push("flashPollingInterval ("+gt.flashPollingInterval+"ms)"),gt.html5PollingInterval&&e.push("html5PollingInterval ("+gt.html5PollingInterval+"ms)"),gt.wmode&&e.push("wmode ("+gt.wmode+")"),gt.debugFlash&&e.push("debugFlash"),gt.useFlashBlock&&e.push("flashBlock")),e.length&&(n=n.concat([e.join(o)])),gt._wD(t+(n.length?o+n.join(", "):""),1),pt()}function i(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(Lt&&St)return!1;if(gt.html5Only)return T(),o(),gt.oMC=s(gt.movieID),d(),Lt=!0,St=!0,!1;var a,r,l,u,c,f,p,h,m=n||gt.url,g=gt.altURL||m,y="JS/Flash audio component (SoundManager 2)",_=A(),v=j(),w=null,b=Tt.getElementsByTagName("html")[0];if(w=b&&b.dir&&b.dir.match(/rtl/i),t=t===e?gt.id:t,T(),gt.url=U(le?m:g),n=gt.url,gt.wmode=!gt.wmode&&gt.useHighPerformance?"transparent":gt.wmode,null!==gt.wmode&&(Mt.match(/msie 8/i)||!Jt&&!gt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&($t.push(P.spcWmode),gt.wmode=null),a={name:t,id:t,src:n,quality:"high",allowScriptAccess:gt.allowScriptAccess,bgcolor:gt.bgColor,pluginspage:ue+"www.macromedia.com/go/getflashplayer",title:y,type:"application/x-shockwave-flash",wmode:gt.wmode,hasPriority:"true"},gt.debugFlash&&(a.FlashVars="debug=1"),gt.wmode||delete a.wmode,Jt)r=Tt.createElement("div"),u=['<object id="'+t+'" data="'+n+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+ue+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',i("movie",n),i("AllowScriptAccess",gt.allowScriptAccess),i("quality",a.quality),gt.wmode?i("wmode",gt.wmode):"",i("bgcolor",gt.bgColor),i("hasPriority","true"),gt.debugFlash?i("FlashVars",a.FlashVars):"","</object>"].join("");else{r=Tt.createElement("embed");for(l in a)a.hasOwnProperty(l)&&r.setAttribute(l,a[l])}if(x(),v=j(),_=A())if(gt.oMC=s(gt.movieID)||Tt.createElement("div"),gt.oMC.id)h=gt.oMC.className,gt.oMC.className=(h?h+" ":W.swfDefault)+(v?" "+v:""),gt.oMC.appendChild(r),Jt&&(c=gt.oMC.appendChild(Tt.createElement("div")),c.className=W.swfBox,c.innerHTML=u),St=!0;else{if(gt.oMC.id=gt.movieID,gt.oMC.className=W.swfDefault+" "+v,f=null,c=null,gt.useFlashBlock||(gt.useHighPerformance?f={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(f={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},w&&(f.left=Math.abs(parseInt(f.left,10))+"px"))),Xt&&(gt.oMC.style.zIndex=1e4),!gt.debugFlash)for(p in f)f.hasOwnProperty(p)&&(gt.oMC.style[p]=f[p]);try{Jt||gt.oMC.appendChild(r),_.appendChild(gt.oMC),Jt&&(c=gt.oMC.appendChild(Tt.createElement("div")),c.className=W.swfBox,c.innerHTML=u),St=!0}catch(M){throw new Error(B("domError")+" \n"+M.toString())}}return Lt=!0,o(),!0},L=function(){return gt.html5Only?(H(),!1):_t?!1:gt.url?(_t=gt.getMovie(gt.id),_t||(Ct?(Jt?gt.oMC.innerHTML=xt:gt.oMC.appendChild(Ct),Ct=null,Lt=!0):H(gt.id,gt.url),_t=gt.getMovie(gt.id)),"function"==typeof gt.oninitmovie&&setTimeout(gt.oninitmovie,1),ht(),!0):(p("noURL"),!1)},b=function(){setTimeout(M,1e3)},O=function(){t.setTimeout(function(){K(wt+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),gt.setup({preferFlash:!1}).reboot(),gt.didFlashBlock=!0,gt.beginDelayedInit()},1)},M=function(){var e,n=!1;return gt.url?Rt?!1:(Rt=!0,st.remove(t,"load",b),ut&&ne&&!ee?(p("waitFocus"),!1):(kt||(e=gt.getMoviePercent(),e>0&&100>e&&(n=!0)),void setTimeout(function(){return e=gt.getMoviePercent(),n?(Rt=!1,gt._wD(B("waitSWF")),t.setTimeout(b,1),!1):(kt||(gt._wD(vt+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(gt.debugFlash?" "+B("checkSWF"):""),2),!le&&e&&(p("localFail",2),gt.debugFlash||p("tryDebug",2)),0===e&&gt._wD(B("swf404",gt.url),1),f("flashtojs",!1," (Check flash security or flash blockers)")),void(!kt&&oe&&(null===e?gt.useFlashBlock||0===gt.flashLoadTimeout?(gt.useFlashBlock&&$(),p("waitForever")):!gt.useFlashBlock&&z?O():(p("waitForever"),v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===gt.flashLoadTimeout?p("waitForever"):!gt.useFlashBlock&&z?O():N(!0))))},gt.flashLoadTimeout))):!1},D=function(){function e(){st.remove(t,"focus",D)}return ee||!ne?(e(),!0):(oe=!0,ee=!0,p("gotFocus"),Rt=!1,b(),e(),!0)},ht=function(){$t.length&&(gt._wD("SoundManager 2: "+$t.join(" "),1),$t=[])},pt=function(){ht();var t,e=[];if(gt.useHTML5Audio&&gt.hasHTML5){for(t in gt.audioFormats)gt.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+gt.html5[t]+(!gt.html5[t]&&jt&&gt.flash[t]?" (using flash)":gt.preferFlash&&gt.flash[t]&&jt?" (preferring flash)":gt.html5[t]?"":" ("+(gt.audioFormats[t].required?"required, ":"")+"and no flash support)"));gt._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},h=function(e){if(kt)return!1;if(gt.html5Only)return p("sm2Loaded"),kt=!0,w(),f("onload",!0),!0;var n,o=gt.useFlashBlock&&gt.flashLoadTimeout&&!gt.getMoviePercent(),i=!0;return o||(kt=!0),n={type:!ut&&jt?"NO_FLASH":"INIT_TIMEOUT"},gt._wD("SoundManager 2 "+(Ft?"failed to load":"loaded")+" ("+(Ft?"Flash security/load error":"OK")+")",Ft?2:1),Ft||e?(gt.useFlashBlock&&gt.oMC&&(gt.oMC.className=j()+" "+(null===gt.getMoviePercent()?W.swfTimedout:W.swfError)),v({type:"ontimeout",error:n,ignoreInit:!0}),f("onload",!1),E(n),i=!1):f("onload",!0),Ft||(gt.waitForWindowLoad&&!It?(p("waitOnload"),st.add(t,"load",w)):(gt.waitForWindowLoad&&It&&p("docLoaded"),w())),i},u=function(){var t,n=gt.setupOptions;for(t in n)n.hasOwnProperty(t)&&(gt[t]===e?gt[t]=n[t]:gt[t]!==n[t]&&(gt.setupOptions[t]=gt[t]))},d=function(){function e(){st.remove(t,"load",gt.beginDelayedInit)}if(kt)return p("didInit"),!1;if(gt.html5Only)return kt||(e(),gt.enabled=!0,h()),!0;L();try{_t._externalInterfaceTest(!1),C(!0,gt.flashPollingInterval||(gt.useHighPerformance?10:50)),gt.debugMode||_t._disableDebug(),gt.enabled=!0,f("jstoflash",!0),gt.html5Only||st.add(t,"unload",l)}catch(n){return gt._wD("js/flash exception: "+n.toString()),f("jstoflash",!1),E({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),N(!0),h(),!1}return h(),e(),!0},k=function(){return I?!1:(I=!0,u(),x(),function(){var t="sm2-usehtml5audio=",e="sm2-preferflash=",n=null,o=null,i=Ot.toLowerCase();-1!==i.indexOf(t)&&(n="1"===i.charAt(i.indexOf(t)+t.length),te&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),gt.setup({useHTML5Audio:n})),-1!==i.indexOf(e)&&(o="1"===i.charAt(i.indexOf(e)+e.length),te&&console.log((o?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),gt.setup({preferFlash:o}))}(),!ut&&gt.hasHTML5&&(gt._wD("SoundManager 2: No Flash detected"+(gt.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),gt.setup({useHTML5Audio:!0,preferFlash:!1})),rt(),!ut&&jt&&($t.push(P.needFlash),gt.setup({flashLoadTimeout:1})),Tt.removeEventListener&&Tt.removeEventListener("DOMContentLoaded",k,!1),L(),!0)},at=function(){return"complete"===Tt.readyState&&(k(),Tt.detachEvent("onreadystatechange",at)),!0},F=function(){It=!0,st.remove(t,"load",F)},S=function(){Yt&&(gt.setupOptions.useHTML5Audio&&!gt.setupOptions.preferFlash||$t.push(P.mobileUA),gt.setupOptions.useHTML5Audio=!0,gt.setupOptions.preferFlash=!1,(Qt||Kt&&!Mt.match(/android\s2\.3/i))&&($t.push(P.globalHTML5),Qt&&(gt.ignoreFlash=!0),Vt=!0))},S(),dt(),st.add(t,"focus",D),st.add(t,"load",b),st.add(t,"load",F),Tt.addEventListener?Tt.addEventListener("DOMContentLoaded",k,!1):Tt.attachEvent?Tt.attachEvent("onreadystatechange",at):(f("onload",!1),E({type:"NO_DOM2_EVENTS",fatal:!0}))}var o=null;void 0!==t.SM2_DEFER&&SM2_DEFER||(o=new n),t.SoundManager=n,t.soundManager=o}(window),angular.module("angularSoundManager",[]).filter("humanTime",function(){return function(t){function e(t){return 10>t?"0"+t.toString():t.toString()}var n=t/1e3/60<<0,o=Math.round(t/1e3%60);return e(n)+":"+e(o)}}).factory("angularPlayer",["$rootScope",function(t){var e=null,n=!1,o=!0,i=!1,a=90,r=0,s=[];return{init:function(){"undefined"==typeof soundManager&&alert("Please include SoundManager2 Library!"),soundManager.setup({preferFlash:!1,debugMode:!1,useHTML5Audio:!0,onready:function(){},ontimeout:function(){alert("SM2 failed to start. Flash missing, blocked or security error?"),alert("The status is "+status.success+", the error type is "+status.error.type)},defaultOptions:{autoLoad:!1,autoPlay:!1,from:null,loops:1,multiShot:!1,multiShotEvents:!1,onid3:null,onload:null,onstop:null,onpause:null,onplay:null,onresume:null,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:a,whileloading:function(){},whileplaying:function(){e=this.id,r=this.position/this.duration*100,t.$broadcast("track:progress",r),t.$broadcast("currentTrack:position",this.position),t.$broadcast("currentTrack:duration",this.duration)},onfinish:function(){if(soundManager._writeDebug(this.id+" finished playing"),o===!0){var n=angular.element(document.querySelector("[ng-controller]")),i=n.injector(),a=i.get("angularPlayer");a.nextTrack(),t.$broadcast("track:id",e)}}}}),soundManager.onready(function(){console.log("song manager ready!");var e=soundManager.ok();console.log("is supported: "+e),t.$broadcast("angularPlayer:ready",!0)})},isInArray:function(t,e){for(var n=0;n<t.length;n++)if(t[n].id===e)return n;return!1},getIndexByValue:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return!1},asyncLoop:function(t){var e=-1,n=function(){return e++,e==t.length?void t.callback():void t.functionToLoop(n,e)};n()},setCurrentTrack:function(t){e=t},getCurrentTrack:function(){return e},currentTrackData:function(){var t=this.getCurrentTrack(),e=this.isInArray(s,t);return s[e]},getPlaylist:function(t){return"undefined"==typeof t?s:s[t]},addToPlaylist:function(e){s.push(e),t.$broadcast("player:playlist",s)},addTrack:function(t){if(soundManager.canPlayURL(t.url)!==!0)return console.log("invalid song url"),null;var e=this.isInArray(this.getPlaylist(),t.id);return e===!1&&(console.log("song does not exists in playlist"),soundManager.createSound({id:t.id,url:t.url}),this.addToPlaylist(t)),t.id},removeSong:function(n,o){n===e&&this.stop(),soundManager.destroySound(n),s.splice(o,1),t.$broadcast("player:playlist",s)},initPlayTrack:function(e,n){n!==!0&&(this.stop(),this.setCurrentTrack(e)),soundManager.play(e),t.$broadcast("track:id",e),i=!0,t.$broadcast("music:isPlaying",i)},play:function(){var t=null;if(null===this.getCurrentTrack()){if(0===soundManager.soundIDs.length)return void console.log("playlist is empty!");t=soundManager.soundIDs[0],this.initPlayTrack(t)}else t=this.getCurrentTrack(),this.initPlayTrack(t,!0)},pause:function(){soundManager.pause(this.getCurrentTrack()),i=!1,t.$broadcast("music:isPlaying",i)},stop:function(){this.pause(),this.resetProgress(),t.$broadcast("track:progress",r),t.$broadcast("currentTrack:position",0),t.$broadcast("currentTrack:duration",0),soundManager.stopAll(),soundManager.unload(this.getCurrentTrack())},playTrack:function(t){this.initPlayTrack(t)},nextTrack:function(){var t=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),e=+t+1,o=soundManager.soundIDs[e];"undefined"!=typeof o?this.playTrack(o):n===!0&&this.playTrack(soundManager.soundIDs[0])},prevTrack:function(){var t=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),e=+t-1,n=soundManager.soundIDs[e];"undefined"!=typeof n?this.playTrack(n):console.log("no prev track found!")},mute:function(){soundManager.muted===!0?soundManager.unmute():soundManager.mute(),t.$broadcast("music:mute",soundManager.muted)},getMuteStatus:function(){return soundManager.muted},repeatToggle:function(){n=n!==!0,t.$broadcast("music:repeat",n)},getRepeatStatus:function(){return n},getVolume:function(){return a},adjustVolume:function(e){var n=function(e){for(var n=0;n<soundManager.soundIDs.length;n++){var o=soundManager.getSoundById(soundManager.soundIDs[n]);o.setVolume(e)}t.$broadcast("music:volume",e)};e===!0?100>a&&(a+=10,n(a)):a>0&&(a-=10,n(a))},clearPlaylist:function(e){console.log("clear playlist"),this.resetProgress();var n=soundManager.soundIDs.length;this.asyncLoop({length:n,functionToLoop:function(t,e){setTimeout(function(){soundManager.destroySound(soundManager.soundIDs[0]),t()},100)},callback:function(){console.log("All done!"),s=[],t.$broadcast("player:playlist",s),e(!0)}})},resetProgress:function(){r=0}}}]).directive("soundManager",["$filter","angularPlayer",function(t,e){return{restrict:"E",link:function(n,o,i){e.init(),n.$on("track:progress",function(t,e){n.$apply(function(){n.progress=e})}),n.$on("track:id",function(t,o){n.$apply(function(){n.currentPlaying=e.currentTrackData()})}),n.$on("currentTrack:position",function(e,o){n.$apply(function(){n.currentPostion=t("humanTime")(o)})}),n.$on("currentTrack:duration",function(e,o){n.$apply(function(){n.currentDuration=t("humanTime")(o)})}),n.isPlaying=!1,n.$on("music:isPlaying",function(t,e){n.$apply(function(){n.isPlaying=e})}),n.playlist=e.getPlaylist(),n.$on("player:playlist",function(t,e){n.$apply(function(){n.playlist=e})})}}}]).directive("musicPlayer",["angularPlayer",function(t){return{restrict:"EA",scope:{song:"=addSong"},link:function(e,n,o){var i=function(){var n=t.addTrack(e.song);"play"===o.musicPlayer&&t.playTrack(n)};n.bind("click",function(){console.log("adding song to playlist"),i()})}}}]).directive("playFromPlaylist",["angularPlayer",function(t){return{restrict:"EA",scope:{song:"=playFromPlaylist"},link:function(e,n,o){n.bind("click",function(n){t.playTrack(e.song.id)})}}}]).directive("removeFromPlaylist",["angularPlayer",function(t){return{restrict:"EA",scope:{song:"=removeFromPlaylist"},link:function(e,n,o){n.bind("click",function(n){t.removeSong(e.song.id,o.index)})}}}]).directive("seekTrack",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){if(null===t.getCurrentTrack())return void console.log("no track loaded");var o=soundManager.getSoundById(t.getCurrentTrack()),i=e.offsetX,a=n[0].clientWidth,r=o.durationEstimate;o.setPosition(i/a*r)})}}}]).directive("playMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.play()})}}}]).directive("pauseMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.pause()})}}}]).directive("stopMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.stop()})}}}]).directive("nextTrack",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.nextTrack()})}}}]).directive("prevTrack",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.prevTrack()})}}}]).directive("muteMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.mute()}),e.mute=t.getMuteStatus(),e.$on("music:mute",function(t,n){e.$apply(function(){e.mute=n})})}}}]).directive("repeatMusic",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.repeatToggle()}),e.repeat=t.getRepeatStatus(),e.$on("music:repeat",function(t,n){e.$apply(function(){e.repeat=n})})}}}]).directive("musicVolume",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){"increase"===o.type?t.adjustVolume(!0):t.adjustVolume(!1)}),e.volume=t.getVolume(),e.$on("music:volume",function(t,n){e.$apply(function(){e.volume=n})})}}}]).directive("clearPlaylist",["angularPlayer",function(t){return{restrict:"EA",link:function(e,n,o){n.bind("click",function(e){t.stop(),t.setCurrentTrack(null),t.clearPlaylist(function(t){console.log("all clear!")})})}}}]).directive("playAll",["angularPlayer",function(t){return{restrict:"EA",scope:{songs:"=playAll"},link:function(e,n,o){n.bind("click",function(n){t.clearPlaylist(function(n){console.log("cleared, ok now add to playlist");for(var o=0;o<e.songs.length;o++)t.addTrack(e.songs[o]);t.play()})})}}}]);