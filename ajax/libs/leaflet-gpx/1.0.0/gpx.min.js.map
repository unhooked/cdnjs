{"version":3,"sources":["gpx.js"],"names":["_MAX_POINT_INTERVAL_MS","_SECOND_IN_MILLIS","_MINUTE_IN_MILLIS","_HOUR_IN_MILLIS","_DEFAULT_MARKER_OPTS","startIconUrl","endIconUrl","shadowUrl","wptIconUrls","iconSize","shadowSize","iconAnchor","shadowAnchor","_DEFAULT_POLYLINE_OPTS","color","_DEFAULT_GPX_OPTS","parseElements","L","GPX","FeatureGroup","extend","initialize","gpx","options","max_point_interval","marker_options","this","_merge_objs","polyline_options","gpx_options","Util","setOptions","GPXTrackIcon","Icon","_gpx","_layers","_info","name","length","elevation","gain","loss","max","min","Infinity","_points","hr","avg","_total","duration","start","end","moving","total","_parse","async","get_duration_string","hidems","s","Math","floor","mins","secs","round","to_miles","v","to_ft","m_to_km","m_to_mi","get_name","get_desc","desc","get_author","author","get_copyright","copyright","get_distance","get_distance_imp","get_start_time","get_end_time","get_moving_time","get_total_time","get_moving_pace","get_moving_pace_imp","get_moving_speed","get_moving_speed_imp","get_total_speed","get_total_speed_imp","get_elevation_gain","get_elevation_loss","get_elevation_data","_this","map","p","_prepare_data_point","a","b","toFixed","get_elevation_data_imp","get_elevation_max","get_elevation_min","get_elevation_max_imp","get_elevation_min_imp","get_average_hr","get_heartrate_data","get_heartrate_data_imp","reload","clearLayers","_","attr","trans1","trans2","trans_tooltip","r","push","_load_xml","url","cb","undefined","req","window","XMLHttpRequest","open","overrideMimeType","e","onreadystatechange","readyState","status","responseXML","send","input","layers","_parse_gpx_data","addLayer","fire","substr","parser","DOMParser","setTimeout","parseFromString","xml","j","i","el","tags","indexOf","getElementsByTagName","textContent","coords","_parse_trkseg","l","Polyline","line","Marker","clickable","icon","iconUrl","point","ll","LatLng","getAttribute","nameEl","descEl","symEl","symKey","symIcon","marker","title","Default","bindPopup","openPopup","layer","tag","last","meta","time","ele","Date","parse","parseFloat","getElementsByTagNameNS","parseInt","_dist3d","t","abs","_dist2d","R","dLat","_deg2rad","lat","dLon","lng","sin","cos","c","atan2","sqrt","d","planar","height","pow","deg","PI"],"mappings":"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","file":"gpx.min.js"}