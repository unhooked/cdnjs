var cytoscape;!function(){var e=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};e.init=function(t){return void 0===t&&(t={}),e.is.plainObject(t)?new e.Core(t):e.is.string(t)?e.extension.apply(e.extension,arguments):void 0},e.fn={},"undefined"!=typeof exports&&(exports=module.exports=cytoscape),window.cytoscape=cytoscape}(),function(e){e.is={string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?!(!e.is.string(t)||""!==t&&!t.match(/^\s+$/)):!0},nonemptyString:function(t){return!(!t||!e.is.string(t)||""===t||t.match(/^\s+$/))},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement}}}(cytoscape),function(e){e.util={extend:function(){var t,r,a,i,n,o,s=arguments[0]||{},l=1,c=arguments.length,p=!1;for("boolean"==typeof s&&(p=s,s=arguments[1]||{},l=2),"object"==typeof s||e.is.fn(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(r in t)a=s[r],i=t[r],s!==i&&(p&&i&&(e.is.plainObject(i)||(n=e.is.array(i)))?(n?(n=!1,o=a&&e.is.array(a)?a:[]):o=a&&e.is.plainObject(a)?a:{},s[r]=e.util.extend(p,o,i)):void 0!==i&&(s[r]=i));return s},error:function(e){if(!console)throw e;if(console.error)console.error(e);else{if(!console.log)throw e;console.log(e)}},clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},copy:function(t){return null==t?t:e.is.array(t)?t.slice():e.is.plainObject(t)?e.util.clone(t):t},mapEmpty:function(e){var t=!0;if(null!=e)for(var r in e){t=!1;break}return t},pushMap:function(t){var r=e.util.getMap(t);null==r?e.util.setMap($.extend({},t,{value:[t.value]})):r.push(t.value)},setMap:function(t){for(var r,a=t.map,i=t.keys,n=i.length,o=0;n>o;o++){var r=i[o];e.is.plainObject(r)&&e.util.error("Tried to set map with object key"),o<i.length-1?(null==a[r]&&(a[r]={}),a=a[r]):a[r]=t.value}},getMap:function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;i>n;n++){var o=a[n];if(e.is.plainObject(o)&&e.util.error("Tried to get map with object key"),r=r[o],null==r)return r}return r},deleteMap:function(t){for(var r=t.map,a=t.keys,i=a.length,n=t.keepChildren,o=0;i>o;o++){var s=a[o];e.is.plainObject(s)&&e.util.error("Tried to delete map with object key");var l=o===t.keys.length-1;if(l)if(n)for(var c in r)n[c]||delete r[c];else delete r[s];else r=r[s]}},capitalize:function(t){return e.is.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},camel2dash:function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],i=a.toLowerCase(),n=a!==i;n?(t.push("-"),t.push(i)):t.push(a)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],r=!1,a=0;a<e.length;a++){var i=e[a],n="-"===i;n?r=!0:(r?t.push(i.toUpperCase()):t.push(i),r=!1)}return t.join("")},trim:function(e){var t,r;for(t=0;t<e.length&&" "===e[t];t++);for(r=e.length-1;r>t&&" "===e[r];r--);return e.substring(t,r+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,a,i=4===e.length,n=16;return i?(t=parseInt(e[1]+e[1],n),r=parseInt(e[2]+e[2],n),a=parseInt(e[3]+e[3],n)):(t=parseInt(e[1]+e[2],n),r=parseInt(e[3]+e[4],n),a=parseInt(e[5]+e[6],n)),[t,r,a]}},hsl2tuple:function(t){function r(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}var a,i,n,o,s,l,c,p,u=(e.util.regex.number,new RegExp("^"+e.util.regex.hsla+"$").exec(t));if(u){if(i=parseInt(u[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,n=parseFloat(u[2]),0>n||n>100)return;if(n/=100,o=parseFloat(u[3]),0>o||o>100)return;if(o/=100,s=u[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===n)l=c=p=Math.round(255*o);else{var d=.5>o?o*(1+n):o+n-o*n,h=2*o-d;l=Math.round(255*r(h,d,i+1/3)),c=Math.round(255*r(h,d,i)),p=Math.round(255*r(h,d,i-1/3))}a=[l,c,p,s]}return a},rgb2tuple:function(t){var r,a=(e.util.regex.number,new RegExp("^"+e.util.regex.rgba+"$").exec(t));if(a){r=[];for(var i=[],n=1;3>=n;n++){var o=a[n];if("%"===o[o.length-1]&&(i[n]=!0),o=parseFloat(o),i[n]&&(o=o/100*255),0>o||o>255)return;r.push(Math.floor(o))}var s=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(s&&!l)return;var c=a[4];if(void 0!==c){if(c=parseFloat(c),0>c||c>1)return;r.push(c)}}return r},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var r=e[0],a=e[1],i=e[2];return"#"+t(r)+t(a)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},e.util.regex={},e.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)",e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hex3="\\#[0-9a-fA-F]{3}",e.util.regex.hex6="\\#[0-9a-fA-F]{6}"}(cytoscape),function(e){e.math={},e.math.boxInBezierVicinity=function(e,t,r,a,i,n,o,s,l,c,p){var u=Math.min(e,r)-p,d=Math.min(t,a)-p,h=Math.max(e,r)+p,v=Math.max(t,a)+p;if(i>=u&&h>=i&&n>=d&&v>=n)return 2;if(l>=u&&h>=l&&c>=d&&v>=c)return 2;if(o>=u&&h>=o&&s>=d&&v>=s)return 1;var g=Math.min(i,o,l),f=Math.min(n,s,c),y=Math.max(i,o,l),m=Math.max(n,s,c);return g>h||u>y||f>v||d>m?0:1},e.math.checkStraightEdgeCrossesBox=function(e,t,r,a,i,n,o,s,l){var c,p,u=Math.min(e,r)-l,d=Math.min(t,a)-l,h=Math.max(e,r)+l,v=Math.max(t,a)+l,g=o-i,f=i,y=s-n,m=n;if(Math.abs(g)<1e-4)return i>=u&&h>=i&&Math.min(n,s)<=d&&Math.max(n,s)>=v;var w=(u-f)/g;if(w>0&&1>=w&&(c=y*w+m,c>=d&&v>=c))return!0;var b=(h-f)/g;if(b>0&&1>=b&&(c=y*b+m,c>=d&&v>=c))return!0;var _=(d-m)/y;if(_>0&&1>=_&&(p=g*_+f,p>=u&&h>=p))return!0;var x=(v-m)/y;return x>0&&1>=x&&(p=g*x+f,p>=u&&h>=p)},e.math.checkBezierCrossesBox=function(e,t,r,a,i,n,o,s,l,c,p){var u=Math.min(e,r)-p,d=Math.min(t,a)-p,h=Math.max(e,r)+p,v=Math.max(t,a)+p;if(i>=u&&h>=i&&n>=d&&v>=n)return!0;if(l>=u&&h>=l&&c>=d&&v>=c)return!0;var g=i-2*o+l,f=-2*i+2*o,y=i,m=[];if(Math.abs(g)<1e-4){var w=(u-i)/f,b=(h-i)/f;m.push(w,b)}else{var _,x,M=f*f-4*g*(y-u);if(M>0){var E=Math.sqrt(M);_=(-f+E)/(2*g),x=(-f-E)/(2*g),m.push(_,x)}var S,D,C=f*f-4*g*(y-h);if(C>0){var E=Math.sqrt(C);S=(-f+E)/(2*g),D=(-f-E)/(2*g),m.push(S,D)}}m.sort(function(e,t){return e-t});var P=n-2*s+c,k=-2*n+2*s,T=n,I=[];if(Math.abs(P)<1e-4){var N=(d-n)/k,z=(v-n)/k;I.push(N,z)}else{var R,B,q=k*k-4*P*(T-d);if(q>0){var E=Math.sqrt(q);R=(-k+E)/(2*P),B=(-k-E)/(2*P),I.push(R,B)}var A,X,Y=k*k-4*P*(T-v);if(Y>0){var E=Math.sqrt(Y);A=(-k+E)/(2*P),X=(-k-E)/(2*P),I.push(A,X)}}I.sort(function(e,t){return e-t});for(var V=0;V<m.length;V+=2)for(var $=1;$<I.length;$+=2)if(m[V]<I[$]&&I[$]>=0&&m[V]<=1&&m[V+1]>I[$-1]&&I[$-1]<=1&&m[V+1]>=0)return!0;return!1},e.math.inBezierVicinity=function(e,t,r,a,i,n,o,s,l){var c,p,u=.25*r+.5*i+.25*o,d=.25*a+.5*n+.25*s,h=function(e,t,r,a,i,n,o,s){if(c=(n-a)*(e-r)+(r-i)*(t-a),p=c*c,sideSquared=(n-a)*(n-a)+(r-i)*(r-i),s){if(c>0)return!1}else if(0>c)return!1;return p/sideSquared>o},v=(u+i)/2,g=(d+n)/2,f=!0;return h(v,g,r,a,i,n,0,f)&&(f=!f),!h(e,t,r,a,i,n,l,f)&&!h(e,t,i,n,o,s,l,f)&&!h(e,t,o,s,r,a,l,f)},e.math.solveCubic=function(e,t,r,a,i){t/=e,r/=e,a/=e;var n,o,s,l,c,p,u,d;return o=(3*r-t*t)/9,s=-(27*a)+t*(9*r-2*(t*t)),s/=54,n=o*o*o+s*s,i[1]=0,u=t/3,n>0?(c=s+Math.sqrt(n),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),p=s-Math.sqrt(n),p=0>p?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-u+c+p,u+=(c+p)/2,i[4]=i[2]=-u,u=Math.sqrt(3)*(-p+c)/2,i[3]=u,void(i[5]=-u)):(i[5]=i[3]=0,0==n?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-u+2*d,void(i[4]=i[2]=-(d+u))):(o=-o,l=o*o*o,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(o),i[0]=-u+d*Math.cos(l/3),i[2]=-u+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-u+d*Math.cos((l+4*Math.PI)/3))))},e.math.sqDistanceToQuadraticBezier=function(e,r,a,i,n,o,s,l){var c=1*a*a-4*a*n+2*a*s+4*n*n-4*n*s+s*s+i*i-4*i*o+2*i*l+4*o*o-4*o*l+l*l,p=9*a*n-3*a*a-3*a*s-6*n*n+3*n*s+9*i*o-3*i*i-3*i*l-6*o*o+3*o*l,u=3*a*a-6*a*n+a*s-a*e+2*n*n+2*n*e-s*e+3*i*i-6*i*o+i*l-i*r+2*o*o+2*o*r-l*r,d=1*a*n-a*a+a*e-n*e+i*o-i*i+i*r-o*r;t("coefficients: "+c/c+", "+p/c+", "+u/c+", "+d/c);var h=[];this.solveCubic(c,p,u,d,h);for(var v=1e-7,g=[],f=0;6>f;f+=2)Math.abs(h[f+1])<v&&h[f]>=0&&h[f]<=1&&g.push(h[f]);g.push(1),g.push(0);for(var y,m,w,b,_=-1,x=0;x<g.length;x++)m=Math.pow(1-g[x],2)*a+2*(1-g[x])*g[x]*n+g[x]*g[x]*s,w=Math.pow(1-g[x],2)*i+2*(1-g[x])*g[x]*o+g[x]*g[x]*l,b=Math.pow(m-e,2)+Math.pow(w-r,2),t("distance for param "+g[x]+": "+Math.sqrt(b)),_>=0?_>b&&(_=b,y=g[x]):(_=b,y=g[x]);return t("given: ( "+e+", "+r+"), ( "+a+", "+i+"), ( "+n+", "+o+"), ( "+s+", "+l+")"),t("roots: "+h),t("params: "+g),t("closest param: "+y),_};var t=function(e){}}(cytoscape),function(e){e.instances=[],e.instanceCounter=0,e.lastInstanceTime,e.registerInstance=function(t,r){var a;e.is.core(t)?a=t:e.is.domElement(t)&&(r=t);var i=e.getRegistrationForInstance(t,r);if(i)return i.cy?e.util.error("Tried to register on a pre-existing registration"):(i.cy=t,i.domElement=r),i;var n,o=+new Date;e.lastInstanceTime&&e.lastInstanceTime!==o?++e.instanceCounter:e.instanceCounter=0,e.lastInstanceTime=o,n=e.instanceCounter;var s="cy-"+o+"-"+n,l={id:s,cy:a,domElement:r,readies:[]};return e.instances.push(l),e.instances[s]=l,l},e.removeRegistrationForInstance=function(t,r){var a;if(e.is.core(t)?a=t:e.is.domElement(t)&&(r=t),e.is.core(a)){var i=a._private.instanceId;delete e.instances[i],e.instances.splice(i,1)}else if(e.is.domElement(r))for(var n=0;n<e.instances.length;n++){var o=e.instances[n];o.domElement===r&&(delete e.instances[o.id],e.instances.splice(n,1),n--)}},e.getRegistrationForInstance=function(t,r){var a;if(e.is.core(t)?t.registered()&&(a=t):e.is.domElement(t)&&(r=t),e.is.core(a)){var i=a._private.instanceId;return e.instances[i]}if(e.is.domElement(r))for(var n=e.instances.length-1;n>=0;n--){var o=e.instances[n];if(o.domElement===r)return o}}}(cytoscape),function(e){function t(t,r,a){var i={};switch(i[r]=a,t){case"core":case"collection":e.fn[t](i)}return e.util.setMap({map:n,keys:[t,r],value:a})}function r(t,r){return e.util.getMap({map:n,keys:[t,r]})}function a(t,r,a,i,n){return e.util.setMap({map:o,keys:[t,r,a,i],value:n})}function i(t,r,a,i){return e.util.getMap({map:o,keys:[t,r,a,i]})}var n={};e.extensions=n;var o={};e.modules=o,e.extension=function(){return 2==arguments.length?r.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?a.apply(this,arguments):void $.error("Invalid extension access syntax")}}(cytoscape),function(e,t){e&&(e.fn.cytoscape=function(r){var a=e(this);if("get"===r){var i=t.getRegistrationForInstance(a[0]);return i.cy}if(!t.is.fn(r)){if(t.is.plainObject(r))return a.each(function(){var t=e.extend({},r,{container:e(this)[0]});cytoscape(t)});for(var n=a[0],o=[],s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return a.each(function(){var e=t.getRegistrationForInstance(n),a=e.cy,i=r;if(a&&t.is.fn(a[i])){var l=a[i].apply(a,s);o.push(l)}}),1===o.length?o=o[0]:0==o.length&&(o=e(this)),o}var c=r,n=a[0],i=t.getRegistrationForInstance(n);i||(i=t.registerInstance(n)),i&&i.cy&&i.cy.ready()?i.cy.trigger("ready",[],c):i.readies.push(c)},e.cytoscape=cytoscape,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape))}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(e){function t(){return!1}function r(){return!0}e.Event=function(a,i){return this instanceof e.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?r:t):this.type=a,i&&e.util.extend(this,i),void(this.timeStamp=a&&a.timeStamp||+new Date)):new e.Event(a,i)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(cytoscape),function(e){e.define={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateMappers:!1};return t=e.util.extend({},r,t),function(r,a){var i=t,n=this,o=void 0!==n.length,s=o?n:[n],l=o?n[0]:n;if(e.is.string(r)){if(i.allowGetting&&void 0===a){var c;return l&&(c=l._private[i.field][r]),c}if(i.allowSetting&&void 0!==a){var p=!i.immutableKeys[r];if(p){for(var u=0,d=s.length;d>u;u++)s[u]._private[i.field][r]=a;i.updateMappers&&n.updateMappers(),i.settingTriggersEvent&&n[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&e.is.plainObject(r)){var h,v,g=r;for(h in g){v=g[h];var p=!i.immutableKeys[h];if(p)for(var u=0,d=s.length;d>u;u++)s[u]._private[i.field][h]=v}i.updateMappers&&n.updateMappers(),i.settingTriggersEvent&&n[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&e.is.fn(r)){var f=r;n.bind(i.bindingEvent,f)}else if(i.allowGetting&&void 0===r){var c;return l&&(c=l._private[i.field]),c}return n}},batchData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:!1},a=t=e.util.extend({},r,t);return function(t){var r=this,i=void 0!==r.length,n=i?r:r._private.elements;if(0===n.length)return r;for(var o=i?n[0]._private.cy:r,s=0;s<n.length;s++){var l=n[s],c=l._private.data.id,p=t[c];if(void 0!==p&&null!==p){var u,d,h=p;for(u in h){d=h[u];var v=!a.immutableKeys[u];v&&(l._private[a.field][u]=d)}}}var g=new e.Collection(o,n);return a.updateMappers&&g.updateMappers(),g[a.triggerFnName](a.event),r}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},r,t),function(r){var a=t,i=this,n=void 0!==i.length,o=n?i:[i];n?i[0]:i;if(e.is.string(r)){for(var s=r.split(/\s+/),l=s.length,c=0;l>c;c++){var p=s[c];if(!e.is.emptyString(p)){var u=!a.immutableKeys[p];if(u)for(var d=0,h=o.length;h>d;d++)delete o[d]._private[a.field][p]}}a.triggerEvent&&i[a.triggerFnName](a.event)}else if(void 0===r){for(var d=0,h=o.length;h>d;d++){var v=o[d]._private[a.field];for(var p in v){var g=!a.immutableKeys[p];g&&delete v[p]}}a.triggerEvent&&i[a.triggerFnName](a.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(t){for(var r=e.define.event.aliases,a=0;a<r.length;a++){var i=r[a];t[i]=function(t,r){return e.is.fn(r)?this.on(i,t,r):e.is.fn(t)?(r=t,this.on(i,r)):this.trigger(i),this}}},falseCallback:function(){return!1}},on:function(t){var r={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},r,t),function(r,a,i,n){var o=this,s=void 0!==o.length,l=s?o:[o],c=(s?o[0]:o,e.is.string(r)),p=t;if(e.is.plainObject(a)?(n=i,i=a,a=void 0):(e.is.fn(a)||a===!1)&&(n=a,i=void 0,a=void 0),(e.is.fn(i)||i===!1)&&(n=i,i=void 0),!e.is.fn(n)&&n!==!1&&c)return o;if(c){var u={};u[r]=n,r=u}for(var d in r)if(n=r[d],n===!1&&(n=e.define.event.falseCallback),e.is.fn(n)){d=d.split(/\s+/);for(var h=0;h<d.length;h++){var v=d[h];if(!e.is.emptyString(v)){var g=v.match(e.define.event.regex);if(g)for(var f=g[1],y=g[2]?g[2]:void 0,m={callback:n,data:i,delegated:!!a,selector:a,type:f,namespace:y,unbindSelfOnTrigger:p.unbindSelfOnTrigger,unbindAllBindersOnTrigger:p.unbindAllBindersOnTrigger,binders:l},w=0;w<l.length;w++)l[w]._private.listeners.push(m)}}}return o}},off:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,a){var i=this,n=void 0!==i.length,o=n?i:[i],s=(n?i[0]:i,e.is.string(t));if(0===arguments.length){for(var l=0;l<o.length;l++)o[l]._private.listeners=[];return i}if((e.is.fn(r)||r===!1)&&(a=r,r=void 0),s){var c={};c[t]=a,t=c}for(var p in t){a=t[p],a===!1&&(a=e.define.event.falseCallback),p=p.split(/\s+/);for(var u=0;u<p.length;u++){var d=p[u];if(!e.is.emptyString(d)){var h=d.match(e.define.event.optionalTypeRegex);if(h)for(var v=h[1]?h[1]:void 0,g=h[2]?h[2]:void 0,l=0;l<o.length;l++)for(var f=o[l]._private.listeners,y=0;y<f.length;y++){var m=f[y],w=!g||g===m.namespace,b=!v||m.type===v,_=!a||a===m.callback,x=w&&b&&_;x&&(f.splice(y,1),y--)}}}}return i}},trigger:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,a){var i=this,n=void 0!==i.length,o=n?i:[i],s=(n?i[0]:i,e.is.string(t)),l=e.is.plainObject(t),c=e.is.event(t),p=this._private.cy||this;if(s){var u=t.split(/\s+/);t=[];for(var d=0;d<u.length;d++){var h=u[d];if(!e.is.emptyString(h)){var v=h.match(e.define.event.regex),g=v[1],f=v[2]?v[2]:void 0;t.push({type:g,namespace:f})}}}else if(l){var y=t;t=[y]}r?e.is.array(r)||(r=[r]):r=[];for(var d=0;d<t.length;d++)for(var m=t[d],w=0;w<o.length;w++){var h,b=o[w],_=b._private.listeners,x=e.is.element(b),M=x;if(c)h=m,h.cyTarget=h.cyTarget||b,h.cy=h.cy||p,h.namespace=h.namespace||m.namespace;else{h=new e.Event(m,{cyTarget:b,cy:p,namespace:m.namespace});for(var E=e.define.event.props,S=0;S<E.length;S++){var D=E[S];h[D]=m[D]}}a&&(_=[{namespace:h.namespace,type:h.type,callback:a}]);for(var S=0;S<_.length;S++){var C=_[S],P=!C.namespace||C.namespace===h.namespace,k=C.type===h.type,T=C.delegated?b!==h.cyTarget&&e.is.element(h.cyTarget)&&h.cyTarget.is(C.selector):!0,I=P&&k&&T;if(I){var N=[h];if(N=N.concat(r),C.data?h.data=C.data:h.data=void 0,(C.unbindSelfOnTrigger||C.unbindAllBindersOnTrigger)&&(_.splice(S,1),S--),C.unbindAllBindersOnTrigger)for(var z=C.binders,R=0;R<z.length;R++){var B=z[R];if(B&&B!==b)for(var q=B._private.listeners,A=0;A<q.length;A++){var X=q[A];X===C&&(q.splice(A,1),A--)}}var Y=C.delegated?h.cyTarget:b,V=C.callback.apply(Y,N);(V===!1||h.isPropagationStopped())&&(M=!1,V===!1&&(h.stopPropagation(),h.preventDefault()))}}if(M){var $=b.parent(),O=0!==$.length;O?($=$[0],$.trigger(h)):p.trigger(h)}}return i}}}}(cytoscape),function(e,t){var r="ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch;e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t,r){for(var a in t){var i=t[a];e.Style.prototype=i}},e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.Stylesheet.prototype.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.Stylesheet.prototype.css=function(t,r){var a=this.length-1;if(e.is.string(t))this[a].properties.push({name:t,value:r});else if(e.is.plainObject(t)){map=t;for(var i=0;i<e.style.properties.length;i++){var n=e.style.properties[i],o=map[n.name];if(void 0===o&&(o=map[e.util.dash2camel(n.name)]),void 0!==o){var t=n.name,r=o;this[a].properties.push({name:t,value:r})}}}return this},e.Stylesheet.prototype.generateStyle=function(t){for(var r=new e.Style(t),a=0;a<this.length;a++){var i=this[a],n=i.selector,o=i.properties;r.selector(n);for(var s=0;s<o.length;s++){var l=o[s];r.css(l.name,l.value)}}return r},e.Stylesheet.prototype.assignToStyle=function(e,t){e.clear(),(t||void 0===t)&&e.addDefaultStylesheet();for(var r=0;r<this.length;r++){var a=this[r],i=a.selector,n=a.properties;e.selector(i);for(var o=0;o<n.length;o++){var s=n[o];e.css(s.name,s.value)}}},function(){var t=e.util.regex.number,r=e.util.regex.rgbaNoBackRefs,a=e.util.regex.hslaNoBackRefs,i=e.util.regex.hex3,n=e.util.regex.hex6;e.style.types={zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},size:{number:!0,min:0,enums:["auto"]},bgSize:{number:!0,min:0,allowPercent:!0},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:!0,allowPercent:!0},positiony:{enums:["top","center","bottom"],number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:!0},data:{mapping:!0,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:!0,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+r+"|"+a+"|"+i+"|"+n+")\\s*\\,\\s*("+t+"|\\w+|"+r+"|"+a+"|"+i+"|"+n+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};var o=e.style.types;e.style.properties=[{name:"cursor",type:o.cursor},{name:"text-valign",type:o.valign},{name:"text-halign",type:o.halign},{name:"color",type:o.color},{name:"content",type:o.text},{name:"text-outline-color",type:o.color},{name:"text-outline-width",type:o.size},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-opacity",type:o.zeroOneNumber},{name:"text-decoration",type:o.textDecoration},{name:"text-transform",type:o.textTransform},{name:"font-family",type:o.fontFamily},{name:"font-style",type:o.fontStyle},{name:"font-variant",type:o.fontVariant},{name:"font-weight",type:o.fontWeight},{name:"font-size",type:o.size},{name:"min-zoomed-font-size",type:o.size},{name:"visibility",type:o.visibility},{name:"opacity",type:o.zeroOneNumber},{name:"z-index",type:o.nonNegativeInt},{name:"overlay-padding",type:o.size},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber},{name:"background-color",type:o.color},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-image",type:o.url},{name:"background-position-x",type:o.positionx},{name:"background-position-y",type:o.positiony},{name:"background-repeat",type:o.bgRepeat},{name:"background-size-x",type:o.bgSize},{name:"background-size-y",type:o.bgSize},{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size},{name:"border-style",type:o.lineStyle},{name:"height",type:o.size},{name:"width",type:o.size},{name:"padding-left",type:o.size},{name:"padding-right",type:o.size},{name:"padding-top",type:o.size},{name:"padding-bottom",type:o.size},{name:"shape",type:o.nodeShape},{name:"source-arrow-shape",type:o.arrowShape},{name:"target-arrow-shape",type:o.arrowShape},{name:"source-arrow-color",type:o.color},{name:"target-arrow-color",type:o.color},{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"control-point-step-size",type:o.size},{name:"curve-style",type:o.curveStyle},{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"panning-cursor",type:o.cursor},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size}];for(var s=e.style.properties,l=0;l<s.length;l++){var c=s[l];s[c.name]=c}}(),e.styfn.addDefaultStylesheet=function(){var e=this.containerPropertyAsString("font-family")||"sans-serif",t=this.containerPropertyAsString("font-style")||"normal",a=this.containerPropertyAsString("font-variant")||"normal",i=this.containerPropertyAsString("font-weight")||"normal",n=this.containerPropertyAsString("color")||"#000",o=this.containerPropertyAsString("text-transform")||"none",s=(this.containerPropertyAsString("text-decoration")||"none",this.containerPropertyAsString("font-size")||12);this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:n,content:void 0,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":o,"font-family":e,"font-style":t,"font-variant":a,"font-weight":i,"font-size":s,"min-zoomed-font-size":0,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":r?40:15})},e.styfn.clear=function(){this._private.newStyle=!0;for(var e=0;e<this.length;e++)delete this[e];return this.length=0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,r,a){t=e.util.camel2dash(t);var i=e.style.properties[t],n=r;if(!i)return null;if(void 0===r||null===r)return null;var o=e.is.string(r);o&&(r=e.util.trim(r));var s=i.type;if(!s)return null;if(a&&(""===r||null===r))return{name:t,value:r,bypass:!0,deleteBypass:!0};var l,c;if(o){if(l=new RegExp(e.style.types.data.regex).exec(r))return{name:t,value:l,strValue:r,mapped:e.style.types.data,field:l[1],bypass:a};if(c=new RegExp(e.style.types.mapData.regex).exec(r)){if(!s.color&&!s.number)return!1;var p=this.parse(t,c[4]);if(!p||p.mapped)return!1;var u=this.parse(t,c[5]);if(!u||u.mapped)return!1;if(p.value===u.value)return!1;if(s.color){var d=p.value,h=u.value,v=!(d[0]!==h[0]||d[1]!==h[1]||d[2]!==h[2]||d[3]!==h[3]&&(null!=d[3]&&1!==d[3]||null!=h[3]&&1!==h[3]));if(v)return!1}return{name:t,value:c,strValue:r,mapped:e.style.types.mapData,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:p.value,valueMax:u.value,
bypass:a}}}else;if(s.number){var g;if(!s.unitless)if(o){var f=r.match("^("+e.util.regex.number+")(px|em"+(s.allowPercent?"|\\%":"")+")?$");if(!s.enums){if(!f)return null;r=f[1],g=f[2]||"px"}}else g="px";if(r=parseFloat(r),isNaN(r)&&void 0!==s.enums){r=n;for(var y=0;y<s.enums.length;y++){var m=s.enums[y];if(m===r)return{name:t,value:r,strValue:r,bypass:a}}return null}if(s.integer&&!e.is.integer(r))return null;if(void 0!==s.min&&r<s.min||void 0!==s.max&&r>s.max)return null;var w={name:t,value:r,strValue:""+r+(g?g:""),units:g,bypass:a,pxValue:s.unitless||"%"===g?void 0:"px"!==g&&g?this.getEmSizeInPixels()*r:r};return w}if(s.color){var b=e.util.color2tuple(r);return{name:t,value:b,strValue:r,bypass:a}}if(!s.enums){if(s.regex){var _=new RegExp(s.regex),x=_.exec(r);return x?{name:t,value:x,strValue:r,bypass:a}:null}return s.string?{name:t,value:r,strValue:r,bypass:a}:null}for(var y=0;y<s.enums.length;y++){var m=s.enums[y];if(m===r)return{name:t,value:r,strValue:r,bypass:a}}},e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,r=e.container();if(t&&r){var a=t.getComputedStyle(r).getPropertyValue("font-size"),i=parseFloat(a);return i}return 1},e.styfn.containerCss=function(e){var r=this._private.cy,a=r.container();return t&&a?t.getComputedStyle(a).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),r=this.parse(e,t);return r},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0},e.styfn.selector=function(t){var r="core"===t?null:new e.Selector(t),a=this.length++;return this[a]={selector:r,properties:[]},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var r=t[0],a=0;a<e.style.properties.length;a++){var i=e.style.properties[a],n=r[i.name];void 0===n&&(n=r[e.util.dash2camel(i.name)]),void 0!==n&&this.cssRule(i.name,n)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var a=this.length-1;this[a].properties.push(r);var i=!this[a].selector;i&&(this._private.coreStyle[r.name]=r)}return this},e.styfn.applyParsedProperty=function(t,r,a){r=e.util.clone(r);var i,n,o=r,s=t._private.style,l=e.style.properties[o.name].type,c=o.bypass,p=s[o.name],u=p&&p.bypass;if(("height"===r.name||"width"===r.name)&&"auto"===r.value&&t.isNode()&&!t.isParent())return!1;if(c&&o.deleteBypass){var d=s[o.name];return d?d.bypass&&d.bypassed?(s[o.name]=d.bypassed,!0):!1:!0}switch(o.mapped){case e.style.types.mapData:if(i=t._private.data[o.field],!e.is.number(i))return!1;var h=(i-o.fieldMin)/(o.fieldMax-o.fieldMin);if(l.color){var v=o.valueMin[0],g=o.valueMax[0],f=o.valueMin[1],y=o.valueMax[1],m=o.valueMin[2],w=o.valueMax[2],b=null==o.valueMin[3]?1:o.valueMin[3],_=null==o.valueMax[3]?1:o.valueMax[3],x=[Math.round(v+(g-v)*h),Math.round(f+(y-f)*h),Math.round(m+(w-m)*h),Math.round(b+(_-b)*h)];n={bypass:o.bypass,name:o.name,value:x,strValue:["rgba(",x[0],", ",x[1],", ",x[2],", ",x[3],")"].join("")}}else{if(!l.number)return!1;var M=o.valueMin+(o.valueMax-o.valueMin)*h;n=this.parse(o.name,M,o.bypass)}n||(n=this.parse(o.name,p.strValue,o.bypass)),n.mapping=o,o=n;break;case e.style.types.data:i=t._private.data[o.field],n=this.parse(o.name,i,o.bypass),n||(n=this.parse(o.name,p.strValue,o.bypass)),n.mapping=o,o=n;break;case void 0:break;default:return!1}if(c)u?o.bypassed=p.bypassed:o.bypassed=p,s[o.name]=o;else{var E;u?(E=p.bypassed,p.bypassed=o):(E=s[o.name],s[o.name]=o),E&&E.mapping&&o.mapping&&E.context===a&&(E=E.prev),E&&E!==o&&(o.prev=E)}return o.context=a,!0},e.styfn.rollBackContext=function(e,t){for(var r=0;r<t.properties.length;r++){var a=t.properties[r],i=e._private.style[a.name];i.bypassed&&(i=i.bypassed);for(var n,o=!0,s=0;i.prev;){var l=i.prev;i.context===t&&(o?e._private.style[a.name]=l:n&&(n.prev=l)),n=i,i=l,o=!1,s++}}},e.styfn.apply=function(e){for(var t=this,r=0;r<e.length;r++){var a=e[r];t._private.newStyle&&(a._private.styleCxts=[],a._private.style={});for(var i=0;i<this.length;i++){var n=this[i],o=n.selector&&n.selector.filter(a).length>0,s=n.properties;if(o){for(var l=0;l<s.length;l++){var c=s[l];a._private.styleCxts[i]&&!c.mapped||this.applyParsedProperty(a,c,n)}a._private.styleCxts[i]=n}else a._private.styleCxts[i]&&this.rollBackContext(a,n),delete a._private.styleCxts[i]}}t._private.newStyle=!1},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var r={},a=t._private.style,i=this._private.cy,n=i.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],l=a[s.name];if(l){var c=l.unitless?l.strValue:l.pxValue*n+"px";r[s.name]=c,r[e.util.dash2camel(s.name)]=c}}return r}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var r={},a=t._private.style,i=0;i<e.style.properties.length;i++){var n=e.style.properties[i],o=a[n.name];o&&(r[n.name]=o.strValue,r[e.util.dash2camel(n.name)]=o.strValue)}return r}},e.styfn.getValueStyle=function(t){var r,a;if(e.is.element(t)?(r={},a=t._private.style):(r={},a=t),a)for(var i=0;i<e.style.properties.length;i++){var n=e.style.properties[i],o=a[n.name]||a[e.util.dash2camel(n.name)];if(void 0===o||e.is.plainObject(o)||(o=this.parse(n.name,o)),o){var s=void 0===o.value?o:o.value;r[n.name]=s,r[e.util.dash2camel(n.name)]=s}}return r},e.styfn.updateFunctionalProperties=function(t){for(var r=0;r<t.length;r++)for(var a=t[r],i=a._private.style,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],s=i[o.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(a,l)}}},e.styfn.applyBypass=function(t,r,a){var i=[];if("*"===r||"**"===r){if(void 0!==a)for(var n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],r=o.name,s=this.parse(r,a,!0);s&&i.push(s)}}else if(e.is.string(r)){var s=this.parse(r,a,!0);s&&i.push(s)}else{if(!e.is.plainObject(r))return!1;for(var l=r,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],r=o.name,a=l[r];if(void 0===a&&(a=l[e.util.dash2camel(r)]),void 0!==a){var s=this.parse(r,a,!0);s&&i.push(s)}}}if(0===i.length)return!1;for(var c=!1,n=0;n<t.length;n++)for(var p=t[n],u=0;u<i.length;u++){var o=i[u];c=this.applyParsedProperty(p,o)||c}return c},e.styfn.removeAllBypasses=function(t){for(var r=0;r<e.style.properties.length;r++)for(var a=e.style.properties[r],i=a.name,n="",o=this.parse(i,n,!0),s=0;s<t.length;s++){var l=t[s];this.applyParsedProperty(l,o)}}}(cytoscape,"undefined"==typeof window?null:window),function(e){var t={showOverlay:!0,hideEdgesOnViewport:!1},r=e.util.copy(t);e.defaults=function(a){t=e.util.extend({},r,a)},e.fn.core=function(t,r){for(var a in t){var i=t[a];e.Core.prototype[a]=i}},e.Core=function(r){if(!(this instanceof e.Core))return new e.Core(r);var a=this;r=e.util.extend({},t,r);var i=r.container,n=e.getRegistrationForInstance(a,i);n&&n.cy&&(n.domElement.innerHTML="",n.cy.notify({type:"destroy"}),e.removeRegistrationForInstance(n.cy,n.domElement)),n=e.registerInstance(a,i);var o=n.readies,s=r;s.layout=e.util.extend({name:"undefined"==typeof window?"null":"grid"},s.layout),s.renderer=e.util.extend({name:"undefined"==typeof window?"null":"canvas"},s.renderer),this._private={ready:!1,instanceId:n.id,options:s,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomEnabled:void 0===s.zoomEnabled?!0:s.zoomEnabled,panEnabled:void 0===s.panEnabled?!0:s.panEnabled,boxSelectionEnabled:void 0===s.boxSelectionEnabled?!0:s.boxSelectionEnabled,zoom:e.is.number(s.zoom)?s.zoom:1,pan:{x:e.is.plainObject(s.pan)&&e.is.number(s.pan.x)?s.pan.x:0,y:e.is.plainObject(s.pan)&&e.is.number(s.pan.y)?s.pan.y:0},hasCompoundNodes:!1},e.is.number(s.minZoom)&&e.is.number(s.maxZoom)&&s.minZoom<s.maxZoom?(this._private.minZoom=s.minZoom,this._private.maxZoom=s.maxZoom):e.is.number(s.minZoom)&&void 0===s.maxZoom?this._private.minZoom=s.minZoom:e.is.number(s.maxZoom)&&void 0===s.minZoom&&(this._private.maxZoom=s.maxZoom),this._private.style=e.is.stylesheet(s.style)?s.style.generateStyle(this):new e.Style(a),a.initRenderer(e.util.extend({showOverlay:s.showOverlay,hideEdgesOnViewport:s.hideEdgesOnViewport},s.renderer)),a.load(s.elements,function(){a.startAnimationLoop(),a._private.ready=!0,e.is.fn(s.ready)&&a.bind("ready",s.ready);for(var t=0;t<o.length;t++){var r=o[t];a.bind("ready",r)}n.readies=[],a.trigger("ready")},s.done)},e.corefn=e.Core.prototype,e.fn.core({ready:function(){return this._private.ready},registered:function(){return!(!this._private||null==this._private.instanceId)},registeredId:function(){return this._private.instanceId},getElementById:function(t){var r=this._private.id2index[t];return void 0!==r?this._private.elements[r]:new e.Collection(this)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(e){for(var t=this._private.elements,r=this._private.id2index,a=0;a<e.length;a++){var i=e[a],n=i._private.data.id,o=r[n],s=void 0!==o;s||(o=t.length,t.push(i),r[n]=o,i._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,r=this._private.id2index,a=0;a<e.length;a++){var i=e[a],n=i._private.data.id,o=r[n],s=void 0!==o;if(s){delete this._private.id2index[n],t.splice(o,1);for(var l=o;l<t.length;l++){var c=t[l]._private.data.id;r[c]--}}}},container:function(){return this._private.options.container},options:function(){return e.util.copy(this._private.options)},json:function(e){var t={},r=this;return t.elements={},r.elements().each(function(e,r){var a=r.group();t.elements[a]||(t.elements[a]=[]),t.elements[a].push(r.json())}),t.style=r.style(),t.scratch=r.scratch(),t.zoomEnabled=r._private.zoomEnabled,t.panEnabled=r._private.panEnabled,t.layout=r._private.options.layout,t.renderer=r._private.options.renderer,t}})}(cytoscape),function(e,t){e.fn.core({add:function(t){var r,a=this;if(e.is.elementOrCollection(t)){for(var i=t,n=[],o=0;o<i.length;o++){var s=i[o];n.push(s.json())}r=new e.Collection(a,n)}else if(e.is.array(t)){var n=t;r=new e.Collection(a,n)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var l=t,n=[],c=["nodes","edges"],o=0,p=c.length;p>o;o++){var u=c[o],d=l[u];if(e.is.array(d))for(var h=0,v=d.length;v>h;h++){var g=d[h],f=e.util.extend({},g,{group:u});n.push(f)}}r=new e.Collection(a,n)}else{var g=t;r=new e.Element(a,g).collection()}return r.filter(function(){return!this.removed()})},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var r=t;t=this.$(r)}return t.remove()},load:function(t,r,a){function i(){n.one("layoutready",function(e){n.notifications(!0),n.trigger(e),n.notify({type:"load",collection:n.elements(),style:n._private.style}),n.one("load",r),n.trigger("load")}).one("layoutstop",function(){n.one("done",a),n.trigger("done")}),n.layout(n._private.options.layout)}var n=this,o=n.elements();o.length>0&&o.remove(),n.notifications(!1);return null!=t&&(e.is.plainObject(t)||e.is.array(t))&&n.add(t),setTimeout(function(){i()},30),this}})}(cytoscape,"undefined"==typeof window?null:window),function(e){e.fn.core({addToAnimationPool:function(e){for(var t=this,r=t._private.aniEles,a=[],i=0;i<r.length;i++){var n=r[i]._private.data.id;a[n]=!0}for(var i=0;i<e.length;i++){var o=e[i],n=o._private.data.id;a[n]||r.push(o)}},startAnimationLoop:function(){function t(){function e(){p(function(e){r(e),t()},u)}l?setTimeout(function(){e()},s):e()}function r(t){t=+new Date;for(var r=o._private.aniEles,i=0;i<r.length;i++){var n=r[i],s=n._private.animation.current,l=n._private.animation.queue;if(0===s.length){var c=l,p=c.length>0?c.shift():null;null!=p&&(p.callTime=+new Date,s.push(p))}for(var u=[],d=0;d<s.length;d++){var h=s[d];a(n,h,t),s[d].done&&(u.push(h),s.splice(d,1),d--)}for(var d=0;d<u.length;d++){var h=u[d],v=h.params.complete;e.is.fn(v)&&v.apply(n,[t])}}r.length>0&&o.notify({type:"draw",collection:r});for(var d=0;d<r.length;d++){var n=r[d],l=n._private.animation.queue,s=n._private.animation.current,g=s.length>0||l.length>0;g||(r.splice(d,1),d--)}}function a(t,r,a){var s,l=o._private.style,c=r.properties,p=r.params,u=r.callTime;if(s=0===r.duration?1:Math.min(1,(a-u)/r.duration),0>s?s=0:s>1&&(s=1),null==c.delay){var d=r.startPosition,h=c.position,v=t._private.position;if(h&&(i(d.x,h.x)&&(v.x=n(d.x,h.x,s)),i(d.y,h.y)&&(v.y=n(d.y,h.y,s))),c.css)for(var g=e.style.properties,f=0;f<g.length;f++){var y=g[f].name,m=c.css[y];if(void 0!==m){var w=r.startStyle[y],b=n(w,m,s);l.applyBypass(t,y,b)}}}return e.is.fn(p.step)&&p.step.apply(t,[a]),s>=1&&(r.done=!0),s}function i(t,r){return null==t||null==r?!1:e.is.number(t)&&e.is.number(r)?!0:!(!t||!r)}function n(t,r,a){function i(e,t){var r=t-e,i=e;return Math.round(a*r+i)}if(0>a?a=0:a>1&&(a=1),e.is.number(t)&&e.is.number(r))return t+Math.abs(r-t)*a;if(e.is.number(t[0])&&e.is.number(r[0])){var n=t,o=r,s=i(n[0],o[0]),l=i(n[1],o[1]),c=i(n[2],o[2]);return"rgb("+s+", "+l+", "+c+")"}}var o=this,s=1e3/60,l=!1,c=!0;o._private.aniEles=[];var p="undefined"==typeof window?function(){}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;null!=p&&c||(p=function(e){window.setTimeout(function(){e(+new Date)},s)});var u=o.container();t()}})}(cytoscape),function(e){e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(e){e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.corefn.bind=e.corefn.on,e.corefn.unbind=e.corefn.off,e.define.event.aliasesOn(e.corefn)}(cytoscape),function(e){e.fn.core({png:function(){var e=this._private.renderer;return e.png()}})}(cytoscape),function(e){e.fn.core({layout:function(e){var t=this;return this._private.layoutRunning?this:(null==e&&(e=this._private.options.layout),this.initLayout(e),t.trigger("layoutstart"),this._private.layoutRunning=!0,this.one("layoutstop",function(){this._private.layoutRunning=!1}),this._private.layout.run(),this)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to run a layout");if(null==t.name)return void e.util.error("A `name` must be specified to run a layout");var r=t.name,a=e.extension("layout",r);return null==a?void e.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",r):(this._private.layout=new a(e.util.extend({},t,{renderer:this._private.renderer,cy:this})),void(this._private.options.layout=t))}})}(cytoscape),function(e){e.fn.core({notify:function(t){if(this._private.notificationsEnabled){var r=this.renderer(),a=this;if(e.is.element(t.collection)){var i=t.collection;t.collection=new e.Collection(a,[i])}else if(e.is.array(t.collection)){var n=t.collection;t.collection=new e.Collection(a,n)}r.notify(t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=!!e)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)}})}(cytoscape),function(e){e.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(t){var r=this,a=e.extension("renderer",t.name);return null==a?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new a(e.util.extend({},t,{cy:r,style:r._private.style})))}})}(cytoscape),function(e){e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():new e.Collection(this)},nodes:function(e){var t=this.$("node");return e?t.filter(e):t},edges:function(e){var t=this.$("edge");return e?t.filter(e):t},$:function(t){var r=new e.Collection(this,this._private.elements);return t?r.filter(t):r}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(cytoscape),function(e){e.fn.core({style:function(e){return this._private.style}})}(cytoscape),function(e){e.fn.core({panningEnabled:function(e){return void 0===e?this._private.panEnabled:(this._private.panEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomEnabled:(this._private.zoomEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var t,r,a,i,n,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(!this._private.panEnabled)return this;if(e.is.string(o[0]))return t=o[0],s[t];e.is.plainObject(o[0])&&(a=o[0],i=a.x,n=a.y,e.is.number(i)&&(s.x=i),e.is.number(n)&&(s.y=n),this.trigger("pan"));break;case 2:if(!this._private.panEnabled)return this;t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},panBy:function(t){var r,a,i,n,o,s=arguments,l=this._private.pan;if(!this._private.panEnabled)return this;switch(s.length){case 1:e.is.plainObject(s[0])&&(i=s[0],n=i.x,o=i.y,e.is.number(n)&&(l.x+=n),e.is.number(o)&&(l.y+=o),this.trigger("pan"));break;case 2:r=s[0],a=s[1],"x"!==r&&"y"!==r||!e.is.number(a)||(l[r]+=a),this.trigger("pan")}return this.notify({type:"viewport"}),this},fit:function(t,r){if(e.is.number(t)&&void 0===r&&(r=t,t=void 0),!this._private.panEnabled||!this._private.zoomEnabled)return this;if(e.is.string(t)){var a=t;t=this.$(a)}else e.is.elementOrCollection(t)||(t=this.elements());var i,n=t.boundingBox(),o=this.style(),s=parseFloat(o.containerCss("width")),l=parseFloat(o.containerCss("height"));return r=e.is.number(r)?r:0,isNaN(s)||isNaN(l)||(i=this._private.zoom=Math.min((s-2*r)/n.w,(l-2*r)/n.h),i=i>this._private.maxZoom?this._private.maxZoom:i,i=i<this._private.minZoom?this._private.minZoom:i,this._private.pan={x:(s-i*(n.x1+n.x2))/2,y:(l-i*(n.y1+n.y2))/2}),this.trigger("pan zoom"),this.notify({type:"viewport"}),this},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var r,a;if(void 0===t)return this._private.zoom;if(e.is.number(t))a=t,r={x:0,y:0};else if(e.is.plainObject(t)){if(a=t.level,t.renderedPosition){var i=t.renderedPosition,n=this._private.pan,o=this._private.zoom;r={x:(i.x-n.x)/o,y:(i.y-n.y)/o}}else t.position&&(r=t.position);if(r&&!this._private.panEnabled)return this}if(!this._private.zoomEnabled)return this;if(!e.is.number(a)||!e.is.number(r.x)||!e.is.number(r.y))return this;a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;var s=this._private.pan,l=this._private.zoom,c=a,p={x:-c/l*(r.x-s.x)+r.x,y:-c/l*(r.y-s.y)+r.y};this._private.zoom=a,this._private.pan=p;var u=s.x!==p.x||s.y!==p.y;return this.trigger("zoom"+(u?" pan":"")),this.notify({type:"viewport"}),this},boundingBox:function(e){var t=this.$(e);return t.boundingBox()},center:function(t){if(!this._private.panEnabled||!this._private.zoomEnabled)return this;if(e.is.string(t)){var r=t;t=cy.elements(r)}else e.is.elementOrCollection(t)||(t=cy.elements());var a=t.boundingBox(),i=this.style(),n=parseFloat(i.containerCss("width")),o=parseFloat(i.containerCss("height")),s=this._private.zoom;return this.pan({x:(n-s*(a.x1+a.x2))/2,y:(o-s*(a.y1+a.y2))/2}),this.trigger("pan"),this.notify({type:"viewport"}),this},reset:function(){return this._private.panEnabled&&this._private.zoomEnabled?(this.pan({x:0,y:0}),this._private.maxZoom>1&&this._private.minZoom<1&&this.zoom(1),this.notify({type:"viewport"}),this):this}})}(cytoscape),function(e){e.fn.collection=e.fn.eles=function(t,r){for(var a in t){var i=t[a];e.Collection.prototype[a]=i}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,r,a){var i=e.is.element(r)?r._private:r,n=i.group,o=null!=a?a:this.prefix[n]+this.id[n];if(t.getElementById(o).empty())this.id[n]++;else for(;!t.getElementById(o).empty();)o=this.prefix[n]+ ++this.id[n];return o}};e.Element=function(t,r,a){if(!(this instanceof e.Element))return new e.Element(t,r,a);var i=this;if(a=!(void 0!==a&&!a),void 0===t||void 0===r||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==r.group&&"edges"!==r.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+r.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:r.data||{},position:r.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:r.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!r.selected,selectable:void 0===r.selectable?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:void 0===r.grabbable?!0:!!r.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},r.renderedPosition){var n=r.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(n.x-o.x)/s,y:(n.y-o.y)/s}}if(e.is.string(r.classes))for(var l=r.classes.split(/\s+/),c=0,p=l.length;p>c;c++){var u=l[c];u&&""!==u&&(i._private.classes[u]=!0)}(void 0===a||a)&&this.restore()},e.Collection=function(r,a){if(!(this instanceof e.Collection))return new e.Collection(r,a);if(void 0===r||!e.is.core(r))return void e.util.error("A collection must have a reference to the core");var i={},n=[],o=!1;if(a){if(a.length>0&&e.is.plainObject(a[0])&&!e.is.element(a[0])){o=!0;for(var s=[],l={},c=0,p=a.length;p>c;c++){var u=a[c];null==u.data&&(u.data={});var d=u.data;if(null==d.id)d.id=t.generate(r,u);else if(0!=r.getElementById(d.id).length||l[d.id])continue;var h=new e.Element(r,u,!1);s.push(h),l[d.id]=!0}a=s}}else a=[];for(var c=0,p=a.length;p>c;c++){var v=a[c];if(v){var g=v._private.data.id;i[g]||(i[g]=v,n.push(v))}}for(var c=0,p=n.length;p>c;c++)this[c]=n[c];this.length=n.length,this._private={cy:r,ids:i},o&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.json=function(){var t=this.element();if(null!=t){var r=t._private,a=e.util.copy({data:r.data,position:r.position,group:r.group,bypass:r.bypass,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbed:r.grabbed,grabbable:r.grabbable,classes:""}),i=[];for(var n in r.classes)i.push(n);for(var o=0;o<i.length;o++){var n=i[o];a.classes+=n+(o<i.length-1?" ":"")}return a}},e.elesfn.restore=function(r){var a=this,i=[],n=a.cy();void 0===r&&(r=!0);for(var o=[],s=[],l=[],c=0,p=0,u=0,d=a.length;d>u;u++){var h=a[u];h.isNode()?(s.push(h),c++):(l.push(h),p++)}o=s.concat(l);for(var u=0,d=o.length;d>u;u++){var h=o[u];if(h.removed()){var v=h._private,g=v.data;if(void 0===g.id)g.id=t.generate(n,h);else{if(e.is.emptyString(g.id)||!e.is.string(g.id))continue;if(0!=n.getElementById(g.id).length)continue}g.id;if(h.isEdge()){for(var f=h,y=["source","target"],m=y.length,w=0;m>w;w++){var b=y[w],_=g[b];null!=_&&""!==_&&!n.getElementById(_).empty()}var x=n.getElementById(g.source),M=n.getElementById(g.target);x._private.edges.push(f),M._private.edges.push(f)}v.ids={},v.ids[g.id]=h,v.removed=!1,n.addToPool(h),i.push(h)}}for(var u=0;c>u;u++){var E=o[u],g=E._private.data,S=(g.id,E._private.data.parent),D=null!=S;if(D){var C=n.getElementById(S);if(C.empty())delete g.parent;else{for(var P=!1,k=C;!k.empty();){if(E.same(k)){P=!0,delete g.parent;break}k=k.parent()}P||(C[0]._private.children.push(E),n._private.hasCompoundNodes=!0)}}}if(i=new e.Collection(n,i),i.length>0){var T=i.add(i.connectedNodes()).add(i.parent());T.updateStyle(r),r?i.rtrigger("add"):i.trigger("add")}return a},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function r(e){for(var t=e._private.edges,r=0;r<t.length;r++)i(t[r])}function a(e){for(var t=e._private.children,r=0;r<t.length;r++)i(t[r])}function i(e){var t=p[e.id()];t||(p[e.id()]=!0,e.isNode()?(c.push(e),r(e),a(e)):c.unshift(e))}function n(e,t){for(var r=e._private.edges,a=0;a<r.length;a++){var i=r[a];if(t===i){r.splice(a,1);break}}}function o(e,t){t=t[0],e=e[0];for(var r=e._private.children,a=0;a<r.length;a++)if(r[a][0]===t[0]){r.splice(a,1);break}}var s=this,l=[],c=[],p={},u=s._private.cy;void 0===t&&(t=!0);for(var d=0,h=s.length;h>d;d++){var v=s[d];i(v)}for(var d=0;d<c.length;d++){var v=c[d];if(v._private.removed=!0,u.removeFromPool(v),l.push(v),v.isEdge()){var g=v.source()[0],f=v.target()[0];n(g,v),n(f,v)}else{var y=v.parent();0!==y.length&&o(y,v)}}var m=u._private.elements;u._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var v=m[d];if(v.isParent()){u._private.hasCompoundNodes=!0;break}}var w=new e.Collection(this.cy(),l);w.size()>0&&(t&&this.cy().notify({type:"remove",collection:w}),w.trigger("remove"));for(var b={},d=0;d<c.length;d++){var v=c[d],_="nodes"===v._private.group,x=v._private.data.parent;if(_&&void 0!==x&&!b[x]){b[x]=!0;var y=u.getElementById(x);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this}}(cytoscape),function(e){e.fn.eles({animated:function(){var e=this[0];return e?e._private.animation.current.length>0:void 0},clearQueue:function(){for(var e=0;e<this.length;e++){var t=this[e];t._private.animation.queue=[]}return this},delay:function(e,t){return this.animate({delay:e},{duration:e,complete:t}),this},animate:function(e,t){var r=+new Date,a=this._private.cy,i=a.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(null==e||null==e.position&&null==e.css&&null==e.delay)return this;e.css&&(e.css=i.getValueStyle(e.css));for(var n=0;n<this.length;n++){var o=this[n],s=o._private.position,l={x:s.x,y:s.y},c=i.getValueStyle(o);o.animated()&&(void 0===t.queue||t.queue)?q=o._private.animation.queue:q=o._private.animation.current,q.push({properties:e,duration:t.duration,params:t,callTime:r,startPosition:l,startStyle:c})}return a.addToAnimationPool(this),this},stop:function(e,t){for(var r=0;r<this.length;r++){for(var a=this[r],i=a._private.animation.current,n=0;n<i.length;n++){var o=i[n];t&&(o.duration=0)}e&&(a._private.animation.queue=[])}return this.cy().notify({collection:this,type:"draw"}),this}})}(cytoscape),function(e){e.fn.eles({addClass:function(t){t=t.split(/\s+/);for(var r=this,a=[],i=0;i<t.length;i++){var n=t[i];if(!e.is.emptyString(n))for(var o=0;o<r.length;o++){var s=r[o],l=s._private.classes[n];s._private.classes[n]=!0,l||a.push(s)}}return a.length>0&&new e.Collection(this._private.cy,a).updateStyle(),r.trigger("class"),r},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]},toggleClass:function(t,r){for(var a=t.split(/\s+/),i=this,n=[],o=0,s=i.length;s>o;o++)for(var l=i[o],c=0;c<a.length;c++){var p=a[c];if(!e.is.emptyString(p)){var u=l._private.classes[p],d=r||void 0===r&&!u;d?(l._private.classes[p]=!0,u||n.push(l)):(l._private.classes[p]=!1,u&&n.push(l))}}return n.length>0&&new e.Collection(this._private.cy,n).updateStyle(),i.trigger("class"),i},removeClass:function(t){t=t.split(/\s+/);for(var r=this,a=[],i=0;i<r.length;i++)for(var n=r[i],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var l=n._private.classes[s];delete n._private.classes[s],l&&a.push(n)}}return a.length>0&&new e.Collection(r._private.cy,a).updateStyle(),r.trigger("class"),r}})}(cytoscape),function(e){e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}})}(cytoscape),function(e){var t=1.4,r=1;e.fn.eles({updateStyle:function(e){var t=this._private.cy,r=t.style();return e=!(!e&&void 0!==e),r.apply(this),e?this.rtrigger("style"):this.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,r=t.style();e=!(!e&&void 0!==e);for(var a=0;a<this.length;a++){var i=this[a];r.apply(i)}return e?this.rtrigger("style"):this.trigger("style"),this},data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"]}),positions:function(t){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var r=t,a=0;a<this.length;a++){var i=this[a],t=r.apply(i,[a,i]);if(t&&!i.locked()){var n=i._private.position;n.x=t.x,n.y=t.y}}this.rtrigger("position")}return this},renderedPosition:function(e){var t=this[0],r=this.cy(),a=r.zoom(),i=r.pan();if(t&&t.isNode()){var n=t._private.position,o={x:n.x*a+i.x,y:n.y*a+i.y};return void 0===e?o:o[e]}},renderedCss:function(e){var t=this[0];if(t){var r=t.cy().style().getRenderedStyle(t);return void 0===e?r:r[e]}},css:function(t,r){var a=this.cy().style();if(e.is.plainObject(t)){var i=t;a.applyBypass(this,i),this.rtrigger("style")}else if(e.is.string(t)){if(void 0===r){var n=this[0];return n?n._private.style[t].strValue:void 0}a.applyBypass(this,t,r),this.rtrigger("style")}else if(void 0===t){var n=this[0];return n?a.getRawStyle(n):void 0}return this},removeCss:function(){for(var e=this.cy().style(),t=this,r=0;r<t.length;r++){var a=t[r];e.removeAllBypasses(a)}this.rtrigger("style")},show:function(){return this.css("visibility","visible"),this},hide:function(){return this.css("visibility","hidden"),this},visible:function(){var e=this[0];if(e){if("visible"!==e.css("visibility"))return!1;if(e.isNode()){for(var t=e.parents(),r=0;r<t.length;r++){var a=t[r],i=a.css("visibility");if("visible"!==i)return!1}return!0}if(e.isEdge()){var n=e.source(),o=e.target();return n.visible()&&o.visible()}}},hidden:function(){var e=this[0];return e?!this.visible():void 0},width:function(){var e=this[0];if(e){var t=this._private.style.width;return"auto"===t.strValue?e._private.autoWidth:t.pxValue}},outerWidth:function(){var e=this[0];if(e){var a=this._private.style,i="auto"===a.width.strValue?e._private.autoWidth:a.width.pxValue,n=a["border-width"]?a["border-width"].pxValue*t+r:0;return i+n}},renderedWidth:function(){var e=this[0];if(e){var t=this.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=this.outerWidth();return t*this.cy().zoom();
}},height:function(){var e=this[0];if(e&&e.isNode()){var t=this._private.style.height;return"auto"===t.strValue?e._private.autoHeight:t.pxValue}},outerHeight:function(){var e=this[0];if(e){var a=this._private.style,i="auto"===a.height.strValue?e._private.autoHeight:a.height.pxValue,n=a["border-width"]?a["border-width"].pxValue*t+r:0;return i+n}},renderedHeight:function(){var e=this[0];if(e){var t=this.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var t=this.outerHeight();return t*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){for(var t={x:e._private.position.x,y:e._private.position.y},r=e.parents(),a=0;a<r.length;a++){var i=r[a],n=i._private.position;t.x+=n.x,t.y+=n.y}return t}},renderedOffset:function(){var e=this[0];if(e&&e.isNode()){var t=this.offset(),r=this.cy(),a=r.zoom(),i=r.pan();return{x:t.x*a+i.x,y:t.y*a+i.y}}},boundingBox:function(t){var r=this;!t||e.is.elementOrCollection(t)&&0===t.length?r=this:e.is.string(t)?r=this.filter(t):e.is.elementOrCollection(t)&&(r=t);for(var a=1/0,i=-(1/0),n=1/0,o=-(1/0),s=0;s<r.length;s++){var l,c,p,u,d,h,v=r[s];if(v.isNode()){var g=v._private.position;d=g.x,h=g.y;var f=v.outerWidth(),y=f/2,m=v.outerHeight(),w=m/2;l=d-y,c=d+y,p=h-w,u=h+w,a=a>l?l:a,i=c>i?c:i,n=n>p?p:n,o=u>o?u:o}else{var b=v.source()[0]._private.position,_=v.target()[0]._private.position,x=v._private.rstyle;if(d=x.labelX,h=x.labelY,l=b.x,c=_.x,p=b.y,u=_.y,l>c){var M=l;l=c,c=M}if(p>u){var M=p;p=u,u=M}a=a>l?l:a,i=c>i?c:i,n=n>p?p:n,o=u>o?u:o;for(var E=x.bezierPts||[],f=v._private.style.width.value,S=0;S<E.length;S++){var D=E[S];a=D.x-f<a?D.x-f:a,i=D.x+f>i?D.x+f:i,n=D.y-f<n?D.y-f:n,o=D.y+f>o?D.y+f:o}}var C=v._private.style,P=C.content.value,k=C["font-size"],T=C["text-halign"],I=C["text-valign"],N=v._private.rstyle.labelWidth;if(P&&k&&void 0!=N&&T&&I){var z,R,B,q,A=k.value,X=N;switch(T.value){case"left":z=l-X,R=l;break;case"center":z=d-X/2,R=d+X/2;break;case"right":z=c,R=c+X}switch(v.isEdge()&&(z=d-X/2,R=d+X/2),I.value){case"top":B=p-A,q=p;break;case"center":B=h-A/2,q=h+A/2;break;case"bottom":B=u,q=u+A}v.isEdge()&&(B=h-A/2,q=h+A/2),a=a>z?z:a,i=R>i?R:i,n=n>B?B:n,o=q>o?q:o}}return{x1:a,x2:i,y1:n,y2:o,w:i-a,h:o-n}}})}(cytoscape),function(e){function t(e){return function(){var t=this;if(0!==t.length&&t.isNode()&&!t.removed()){for(var r=0,a=t[0],i=a._private.edges,n=0;n<i.length;n++){var o=i[n];r+=e(a,o)}return r}}}function r(e,t){return function(){for(var r=void 0,a=this.nodes(),i=0;i<a.length;i++){var n=a[i],o=n[e]();void 0===o||void 0!==r&&!t(o,r)||(r=o)}return r}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:r("degree",function(e,t){return t>e}),maxDegree:r("degree",function(e,t){return e>t}),minIndegree:r("indegree",function(e,t){return t>e}),maxIndegree:r("indegree",function(e,t){return e>t}),minOutdegree:r("outdegree",function(e,t){return t>e}),maxOutdegree:r("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(){for(var e=0,t=this.nodes(),r=0;r<t.length;r++)e+=t[r].degree();return e}})}(cytoscape),function(e){e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return this.cy().notify({type:e,collection:this.filter(function(){return!this.removed()})}),this.trigger(e,t),this}}),e.elesfn.bind=e.elesfn.on,e.elesfn.unbind=e.elesfn.off,e.define.event.aliasesOn(e.elesfn)}(cytoscape),function(e){e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(cytoscape),function(e){e.fn.eles({each:function(t){if(e.is.fn(t))for(var r=0;r<this.length;r++){var a=this[r],i=t.apply(a,[r,a]);if(i===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,r){var a=[],i=this.length;null==r&&(r=i),0>t&&(t=i+t);for(var n=t;n>=0&&r>n&&i>n;n++)a.push(this[n]);return new e.Collection(this.cy(),a)},size:function(){return this.length},eq:function(e){return this[e]},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()}})}(cytoscape),function(e){function t(e){return function(){var t=arguments;if(2===t.length){var r=t[0],a=t[1];this.bind(e.event,r,a)}else if(1===t.length){var a=t[0];this.bind(e.event,a)}else if(0===t.length){for(var i=0;i<this.length;i++){var n=this[i];e.ableField&&!n._private[e.ableField]||(n._private[e.field]=e.value)}this.updateStyle(),this.trigger(e.event)}return this}}function r(r){e.elesfn[r.field]=function(){var e=this[0];return e?e._private[r.field]:void 0},e.elesfn[r.on]=t({event:r.on,field:r.field,ableField:r.ableField,value:!0}),e.elesfn[r.off]=t({event:r.off,field:r.field,ableField:r.ableField,value:!1})}r({field:"locked",on:"lock",off:"unlock"}),r({field:"grabbable",on:"grabify",off:"ungrabify"}),r({field:"selected",ableField:"selectable",on:"select",off:"unselect"}),r({field:"selectable",on:"selectify",off:"unselectify"}),e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},r({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(cytoscape),function(e){function t(t){return function(r){for(var a=[],i=this.edges(),n=this._private.cy,o=0;o<i.length;o++){var s=i[o],l=s._private.data[t.attr],c=n.getElementById(l);c.length>0&&a.push(c)}return new e.Collection(n,a).filter(r)}}function r(t){return function(r){var a=[],i=this._private.cy,n=t||{};e.is.string(r)&&(r=i.$(r));for(var o=r.connectedEdges(),s=this._private.ids,l=0;l<o.length;l++){var c,p=o[l],u=p._private.data;if(n.thisIs){var d=u[n.thisIs];c=s[d]}else c=s[u.source]||s[u.target];c&&a.push(p)}return new e.Collection(i,a)}}function a(t){var r={codirected:!1};return t=e.util.extend({},r,t),function(r){for(var a=this._private.cy,i=[],n=this.edges(),o=t,s=0;s<n.length;s++)for(var l=n[s],c=l.source()[0],p=c.id(),u=l.target()[0],d=u.id(),h=c._private.edges,v=0;v<h.length;v++){var g=h[v],f=g._private.data,y=f.target,m=f.source,w=y===d&&m===p,b=p===y&&d===m;(o.codirected&&w||!o.codirected&&(w||b))&&i.push(g)}return new e.Collection(a,i).filter(r)}}e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var r=this._private.cy;if(e.is.fn(t)){for(var a=[],i=0;i<this.length;i++){var n=this[i];t.apply(n,[i,n])&&a.push(n)}return new e.Collection(r,a)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(r)},not:function(t){var r=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var a=[],i=0;i<this.length;i++){var n=this[i],o=t._private.ids[n.id()];o||a.push(n)}return new e.Collection(r,a)}return this},intersect:function(t){var r=this._private.cy;if(e.is.string(t)){var a=t;return this.filter(a)}var i=[],n=this,o=t,s=this.length<t.length,l=s?n._private.ids:o._private.ids,c=s?o._private.ids:n._private.ids;for(var p in l){var u=c[p];u&&i.push(u)}return new e.Collection(r,i)},add:function(t){function r(e){e&&(s[e.id()]||(o.push(e),s[e.id()]=!0))}var a=this,i=this._private.cy;if(!t)return this;if(e.is.string(t)){var n=t;t=i.elements(n)}for(var o=[],s={},l=0;l<a.length;l++){var c=a[l];r(c)}for(var l=0;l<t.length;l++){var c=t[l];r(c)}return new e.Collection(i,o)}}),e.fn.eles({breadthFirstSearch:function(t,r){t=t||function(){};for(var a=this._private.cy,i=this,n=[],o={},s={},l={},c=[],p=0;p<i.length;p++)i[p].isNode()&&(n.unshift(i[p]),o[i[p].id()]=!0,s[i[p].id()]=0,c.push(i[p]));for(p=0;0!==n.length;){for(var u=n.shift(),d=0,h=l[u.id()];h;)d++,h=l[h];s[u.id()]=d;var v=t.call(u,p,d);if(p++,v===!0)return new e.Collection(a,[u]);if(v===!1)break;for(var g=u.connectedEdges(r?'[source = "'+u.id()+'"]':void 0),f=0;f<g.length;f++){var y=g[f],m=y.connectedNodes('[id != "'+u.id()+'"]');0!==m.length&&(m=m[0],o[m.id()]||(o[m.id()]=!0,n.unshift(m),l[m.id()]=u.id(),c.push(m),c.push(y)))}}return new e.Collection(a,c)},depthFirstSearch:function(t,r){function a(e){var t=e.id();return l[t]||c[t]||p[t]||u[t]}t=t||function(){};for(var i=this._private.cy,n=this,o=[],s=[],l={},c={},p={},u={},d={},h=0;h<n.length;h++)n[h].isNode()&&(o.push(n[h]),s[n[h].id()]=!0);for(;0!==o.length;){var v=o[o.length-1],g=t.call(v),f=!1;if(g===!0)return new e.Collection(i,[v]);for(var y=v.connectedEdges(r?'[source = "'+v.id()+'"]':void 0),h=0;h<y.length;h++){var m=y[h];if(!a(m)){var w=m.connectedNodes('[id != "'+v.id()+'"]');if(0!==w.length){w=w[0];var b=w.id();if(!s[b]&&!d[b]){u[b]=!0,s[b]=!0,o.push(w),f=!0;break}s[b]?c[b]=!0:p[b]=!0}}}f||(d[v.id()]=!0,o.pop())}},roots:function(t){for(var r=this,a=[],i=0;i<r.length;i++){var n=r[i];if(n.isNode()){var o=n.connectedEdges('[target = "'+n.id()+'"][source != "'+n.id()+'"]').length>0;o||a.push(n)}}return new e.Collection(this._private.cy,a).filter(t)},kruskal:function(t){function r(e){for(var t=0;t<i.length;t++){var r=i[t];if(r.anySame(e))return{eles:r,index:t}}}t=t||function(){return 1};for(var a=new e.Collection(this._private.cy,[]),i=[],n=this.nodes(),o=0;o<n.length;o++)i.push(n[o].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,r){var a=t.call(e),i=t.call(r);return a-i}),o=0;o<l.length;o++){var c=l[o],p=c.source()[0],u=c.target()[0],d=r(p),h=r(u);d.eles!==h.eles&&(a=a.add(c),i[d.index]=d.eles.add(h.eles),i.splice(h.index,1))}return n.add(a)},dijkstra:function(t,r,a){var i=this._private.cy;if(a=e.is.fn(r)?a:r,a=void 0===a||a,r=e.is.fn(r)?r:function(){return 1},0===this.length||!t||!e.is.elementOrCollection(t)||0===t.length)return new e.Collection(i,[]);var n=this[0];t=t[0];for(var o={},s={},l=i.nodes(),c=0;c<l.length;c++)o[l[c].id()]=1/0;o[n.id()]=0;for(var p=l,u=function(e){var t,r=1/0;for(var a in o)o[a]<r&&0!==e.$("#"+a).length&&(r=o[a],t=a);return t},d=function(e,t){for(var a,i=e.edgesWith(t),n=1/0,o=0;o<i.length;o++){var s=i[o],l=r.call(s);n>l&&(n=l,a=s)}return{edge:a,dist:n}};0!==p.length;){var h=u(p),v=p.filter("#"+h);if(0!==v.length){if(p=p.not(v),v.same(t))break;if(o[h]===Math.Infinite)break;for(var g=v.neighborhood().nodes(),c=0;c<g.length;c++){var f=g[c],y=f.id(),m=d(v,f),w=o[h]+m.dist;w<o[y]&&(o[y]=w,s[y]={node:f,edge:m.edge})}}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch,e.fn.eles({neighborhood:function(t){for(var r=[],a=this._private.cy,i=this.nodes(),n=0;n<i.length;n++)for(var o=i[n],s=o.connectedEdges(),l=0;l<s.length;l++){var c=s[l],p=c.connectedNodes().not(o);p.length>0&&r.push(p[0]),r.push(c[0])}return new e.Collection(a,r).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.fn.eles({source:t({attr:"source"}),target:t({attr:"target"})}),e.fn.eles({edgesWith:r(),edgesTo:r({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var r=[],a=this._private.cy,i=this.nodes(),n=0;n<i.length;n++)for(var o=i[n],s=o._private.edges,l=0;l<s.length;l++){var c=s[l];r.push(c)}return new e.Collection(a,r).filter(t)},connectedNodes:function(t){for(var r=[],a=this._private.cy,i=this.edges(),n=0;n<i.length;n++){var o=i[n];r.push(o.source()[0]),r.push(o.target()[0])}return new e.Collection(a,r).filter(t)},parallelEdges:a(),codirectedEdges:a({codirected:!0}),parallelIndex:function(){var e=this[0];if(e.isEdge())for(var t=e.source()[0],r=t._private.edges,a=0,i=0;i<r.length;i++){var n=r[i],o=n===e;if(o)return a;var s=e._private.data.source===n._private.data.source&&e._private.data.target===n._private.data.target,l=e._private.data.source===n._private.data.target&&e._private.data.target===n._private.data.source,c=s||l;c&&a++}},parallelSize:function(){var e=this[0];if(e.isEdge()){for(var t=e.source()[0],r=t._private.edges,a=0,i=0;i<r.length;i++){var n=r[i],o=e._private.data.source===n._private.data.source&&e._private.data.target===n._private.data.target,s=e._private.data.source===n._private.data.target&&e._private.data.target===n._private.data.source,l=o||s;l&&a++}return a}}}),e.fn.eles({parent:function(t){for(var r=[],a=this._private.cy,i=0;i<this.length;i++){var n=this[i],o=a.getElementById(n._private.data.parent);o.size()>0&&r.push(o)}return new e.Collection(a,r).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var i=0;i<a.length;i++){var n=a[i];r.push(n)}a=a.parent()}return new e.Collection(this.cy(),r).filter(t)},children:function(t){for(var r=[],a=0;a<this.length;a++){var i=this[a];r=r.concat(i._private.children)}return new e.Collection(this.cy(),r).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function r(e){for(var t=0;t<e.length;t++){var i=e[t];a.push(i),i.children().nonempty()&&r(i.children())}}var a=[];return r(this.children()),new e.Collection(this.cy(),a).filter(t)}})}(cytoscape),function($$){$$.fn.selector=function(e,t){for(var r in e){var a=e[r];$$.Selector.prototype[r]=a}},$$.Selector=function(e,t){function r(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}function a(e){return e.replace(new RegExp("\\\\("+l+")","g"),"")}function i(e){for(var t,r,a,i=0;i<D.length;i++){var n=D[i],o=n.name;if(!$$.is.fn(e)||e(o,n)){var s=k.match(new RegExp("^"+n.regex));if(null!=s){r=s,t=n,a=o;var l=s[0];k=k.substring(l.length);break}}}return{expr:t,match:r,name:a}}function n(){var e=k.match(/^\s+/);if(e){var t=e[0];k=k.substring(t.length)}}if(!(this instanceof $$.Selector))return new $$.Selector(e,t);void 0===t&&void 0!==e&&(t=e,e=void 0);var o=this;if(o._private={selectorText:null,invalid:!0},!t||$$.is.string(t)&&t.match(/^\s*$/))null==e?o.length=0:(o[0]=r(),o[0].group=e,o.length=1);else if($$.is.element(t)){var s=new $$.Collection(o.cy(),[t]);o[0]=r(),o[0].collection=s,o.length=1}else if($$.is.collection(t))o[0]=r(),o[0].collection=t,o.length=1;else if($$.is.fn(t))o[0]=r(),o[0].filter=t,o.length=1;else{if(!$$.is.string(t))return void $$.util.error("A selector must be created from a string; found "+t);for(var l="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",c="(?:[\\w-]|(?:\\\\"+l+"))+",p="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",u="\\?|\\!|\\^",d='"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",h=$$.util.regex.number,v=d+"|"+h,g="degree|indegree|outdegree",f="\\s*,\\s*",y=c,m="\\s+",w="\\s+>\\s+",b="\\$",_=c,x=p.split("|"),M=0;M<x.length;M++){var E=x[M];p+="|@"+E}var S=null,D={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+_+")",populate:function(e){this.ids.push(a(e))}},className:{query:!0,regex:"\\.("+y+")",populate:function(e){this.classes.push(a(e))}},dataExists:{query:!0,regex:"\\[\\s*("+c+")\\s*\\]",populate:function(e){this.data.push({field:a(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+c+")\\s*("+p+")\\s*("+v+")\\s*\\]",populate:function(e,t,r){this.data.push({field:a(e),operator:t,value:r})}},dataBool:{query:!0,regex:"\\[\\s*("+u+")\\s*("+c+")\\s*\\]",populate:function(e,t){this.data.push({field:a(t),operator:e})}},metaCompare:{query:!0,regex:"\\{\\s*("+g+")\\s*("+p+")\\s*("+h+")\\s*\\}",populate:function(e,t,r){this.meta.push({field:a(e),operator:t,value:r})}},nextQuery:{separator:!0,regex:f,populate:function(){o[++M]=r(),S=null}},child:{separator:!0,regex:w,populate:function(){var e=r();e.parent=this,e.subject=S,o[M]=e}},descendant:{separator:!0,regex:m,populate:function(){var e=r();e.ancestor=this,e.subject=S,o[M]=e}},subject:{modifier:!0,regex:b,populate:function(){return null!=S&&this.subject!=this?($$.util.error("Redefinition of subject in selector `"+t+"`"),!1):(S=this,void(this.subject=this))}}},C=0;for(var P in D)D[C]=D[P],D[C].name=P,C++;D.length=C,o._private.selectorText=t;var k=t,M=0;for(o[0]=r(),n();;){var T=i();if(null==T.expr)return void $$.util.error("The selector `"+t+"`is invalid");for(var I=[],C=1;C<T.match.length;C++)I.push(T.match[C]);var N=T.expr.populate.apply(o[M],I);if(N===!1)return;if(k.match(/^\s*$/))break}for(o.length=M+1,C=0;C<o.length;C++){var z=o[C];if(null!=z.subject){for(;z.subject!=z;)if(null!=z.parent){var R=z.parent,w=z;w.parent=null,R.child=w,z=R}else{if(null==z.ancestor){$$.util.error("When adjusting references for the selector `"+z+"`, neither parent nor ancestor was found");break}var B=z.ancestor,m=z;m.ancestor=null,B.descendant=m,z=B}o[C]=z.subject}}if(null!=e)for(var C=0;C<o.length;C++){if(null!=o[C].group&&o[C].group!=e)return void $$.util.error("Group `"+o[C].group+"` conflicts with implicit group `"+e+"` in selector `"+t+"`");o[C].group=e}}o._private.invalid=!1},$$.selfn=$$.Selector.prototype,$$.selfn.size=function(){return this.length},$$.selfn.eq=function(e){return this[e]},$$.selfn.find=function(){},$$.selfn.filter=function(collection,addLiveFunction){var self=this,cy=collection.cy();if(self._private.invalid)return new $$.Collection(cy);var queryMatches=function(query,element){function operandsMatch(params){for(var allDataMatches=!0,k=0;k<query[params.name].length;k++){var data=query[params.name][k],operator=data.operator,value=data.value,field=data.field,matches;if(null!=operator&&null!=value){var fieldStr=""+params.fieldValue(field),valStr=""+eval(value),caseInsensitive=!1;switch("@"==operator.charAt(0)&&(fieldStr=fieldStr.toLowerCase(),valStr=valStr.toLowerCase(),operator=operator.substring(1),caseInsensitive=!0),"="==operator&&(operator="=="),operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=null!=new RegExp(valStr+"$").exec(fieldStr);break;case"^=":matches=null!=new RegExp("^"+valStr).exec(fieldStr);break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else if(null!=operator)switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field)}else matches=!params.fieldUndefined(field);if(!matches){allDataMatches=!1;break}}return allDataMatches}function confirmRelations(e,t){if(null!=e){var r=!1;t=t();for(var a=0;a<t.size();a++)if(queryMatches(e,t.eq(a))){r=!0;break}return r}return!0}if(null!=query.group&&"*"!=query.group&&query.group!=element._private.group)return!1;for(var allColonSelectorsMatch=!0,k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k],renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}if(!allColonSelectorsMatch)break}if(!allColonSelectorsMatch)return!1;for(var allIdsMatch=!0,k=0;k<query.ids.length;k++){var id=query.ids[k],actualId=element._private.data.id;if(allIdsMatch=allIdsMatch&&id==actualId,!allIdsMatch)break}if(!allIdsMatch)return!1;for(var allClassesMatch=!0,k=0;k<query.classes.length;k++){var cls=query.classes[k];if(allClassesMatch=allClassesMatch&&element.hasClass(cls),!allClassesMatch)break}if(!allClassesMatch)return!1;var allDataMatches=operandsMatch({name:"data",fieldValue:function(e){return element._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===element._private.data[e]},fieldTruthy:function(e){return!!element._private.data[e]}});if(!allDataMatches)return!1;var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(e){return element[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return void 0==element[e]()},fieldTruthy:function(e){return!!element[e]()}});if(!allMetaMatches)return!1;if(null!=query.collection){var matchesAny=null!=query.collection._private.ids[element.id()];if(!matchesAny)return!1}return null!=query.filter&&0==element.collection().filter(query.filter).size()?!1:confirmRelations(query.parent,function(){return element.parent()})&&confirmRelations(query.ancestor,function(){return element.parents()})&&confirmRelations(query.child,function(){return element.children()})?!!confirmRelations(query.descendant,function(){return element.descendants()}):!1},selectorFunction=function(e,t){for(var r=0;r<self.length;r++){var a=self[r];if(queryMatches(a,t))return!0}return!1};null==self._private.selectorText&&(selectorFunction=function(){return!0});var filteredCollection=collection.filter(selectorFunction);return filteredCollection},$$.selfn.toString=$$.selfn.selector=function(){function e(e){return $$.is.string(e)?e:""}function t(r){var i="",n=e(r.group);i+=n.substring(0,n.length-1);for(var o=0;o<r.data.length;o++){var s=r.data[o];i+="["+s.field+e(s.operator)+e(s.value)+"]"}for(var o=0;o<r.meta.length;o++){var l=r.meta[o];i+="{"+l.field+e(l.operator)+e(l.value)+"}"}for(var o=0;o<r.colonSelectors.length;o++){var c=r.colonSelectors[a];i+=c}for(var o=0;o<r.ids.length;o++){var c="#"+r.ids[a];i+=c}for(var o=0;o<r.classes.length;o++){var c="."+r.classes[a];i+=c}return null!=r.parent&&(i=t(r.parent)+" > "+i),null!=r.ancestor&&(i=t(r.ancestor)+" "+i),null!=r.child&&(i+=" > "+t(r.child)),null!=r.descendant&&(i+=" "+t(r.descendant)),i}for(var r="",a=0;a<this.length;a++){var i=this[a];r+=t(i),this.length>1&&a<this.length-1&&(r+=", ")}return r}}(cytoscape),function(e){function t(e){}t.prototype.notify=function(e){},e("renderer","null",t)}(cytoscape),function(e){function t(e){this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(c),canvasRedrawReason:new Array(c),canvasNeedsRedraw:new Array(c),bufferCanvases:new Array(v)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.bindings=[],this.init();for(var t=0;c>t;t++)this.data.canvases[t]=document.createElement("canvas"),this.data.canvases[t].style.position="absolute",this.data.canvases[t].setAttribute("data-id","layer"+t),this.data.canvases[t].style.zIndex=String(c-t),this.data.container.appendChild(this.data.canvases[t]),this.data.canvasRedrawReason[t]=new Array,this.data.canvasNeedsRedraw[t]=!1;this.data.canvases[h].setAttribute("data-id","layer"+h+"-node"),this.data.canvases[p].setAttribute("data-id","layer"+p+"-selectbox"),this.data.canvases[u].setAttribute("data-id","layer"+u+"-drag"),this.data.canvases[d].setAttribute("data-id","layer"+d+"-overlay");for(var t=0;v>t;t++)this.data.bufferCanvases[t]=document.createElement("canvas"),this.data.bufferCanvases[t].style.position="absolute",this.data.bufferCanvases[t].setAttribute("data-id","buffer"+t),this.data.bufferCanvases[t].style.zIndex=String(-t-1),this.data.bufferCanvases[t].style.visibility="visible",this.data.container.appendChild(this.data.bufferCanvases[t]);var r=document.createElement("div");if(this.data.container.appendChild(r),this.data.overlay=r,r.style.position="absolute",r.style.zIndex=1e3,e.showOverlay){var a=document.createElement("a");r.appendChild(a),this.data.link=a,a.innerHTML="cytoscape.js",a.style.font="14px helvetica",a.style.position="absolute",a.style.right=0,a.style.bottom=0,a.style.padding="1px 3px",a.style.paddingLeft="5px",a.style.paddingTop="5px",a.style.opacity=0,a.style["-webkit-tap-highlight-color"]="transparent",a.style.background="red",a.href="http://cytoscape.github.io/cytoscape.js/",a.target="_blank"}this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.load()}var r="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,a=function(){return Date.now()},i={},o={},s=t.prototype,l=400,c=5,p=0,u=2,d=3,h=4,v=2;t.prototype.notify=function(e){return"destroy"==e.type?void this.destroy():("add"!=e.type&&"remove"!=e.type&&"load"!=e.type||(this.updateNodesCache(),this.updateEdgesCache()),"viewport"==e.type&&(this.data.canvasNeedsRedraw[p]=!0,this.data.canvasRedrawReason[p].push("viewchange")),this.data.canvasNeedsRedraw[u]=!0,this.data.canvasRedrawReason[u].push("notify"),this.data.canvasNeedsRedraw[h]=!0,this.data.canvasRedrawReason[h].push("notify"),this.redraws++,void this.redraw())},t.prototype.registerBinding=function(e,t,r,a){this.bindings.push({target:e,event:t,handler:r,useCapture:a}),e.addEventListener(t,r,a)},t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],r=t;r.target.removeEventListener(r.event,r.handler,r.useCapture)}},t.prototype.png=function(){var e=this.data;this.data.container.clientHeight>0&&this.data.container.clientWidth>0&&(context=e.bufferCanvases[1].getContext("2d"),context.globalCompositeOperation="copy",context.drawImage(e.canvases[4],0,0),context.globalCompositeOperation="source-over",context.drawImage(e.canvases[2],0,0),context.drawImage(e.canvases[0],0,0),context=e.bufferCanvases[0].getContext("2d"),context.globalCompositeOperation="copy",context.drawImage(e.bufferCanvases[1],0,0));var t=this.data.bufferCanvases[0];return t.toDataURL("image/png")},t.prototype.load=function(){function r(e,t,r,a){return Math.sqrt((r-e)*(r-e)+(a-t)*(a-t))}var i=this,n=function(e,t,r){if(!t)for(var a=e.parents(),i=0;i<a.size();i++)if(a[i]._private.selected)return;for(var n=e.descendants(),i=0;i<n.size();i++)if(t||!n[i]._private.selected){n[i]._private.rscratch.inDragLayer=!0,r.push(n[i]);for(var o=0;o<n[i]._private.edges.length;o++)n[i]._private.edges[o]._private.rscratch.inDragLayer=!0}},o=function(e,t){e._private.grabbed=!0,e._private.rscratch.inDragLayer=!0,t.push(e);for(var r=0;r<e._private.edges.length;r++)e._private.edges[r]._private.rscratch.inDragLayer=!0},s=function(e,t){for(var r=e;r.parent().nonempty();)r=r.parent()[0];if(r!=e||!t)for(var a=r.descendants().add(r),i=0;i<a.size();i++){a[i]._private.rscratch.inDragLayer=t;for(var n=0;n<a[i]._private.edges.length;n++)a[i]._private.edges[n]._private.rscratch.inDragLayer=t}};t.prototype.nodeIsDraggable=function(e){return!(0==e._private.style.opacity.value||"visible"!=e._private.style.visibility.value||e._private.locked||!e._private.grabbable)},i.registerBinding(window,"resize",function(e){i.data.canvasNeedsRedraw[h]=!0,i.data.canvasNeedsRedraw[d]=!0,i.matchCanvasSize(i.data.container),i.redraw()},!0),i.registerBinding(i.data.container,"contextmenu",function(e){e.preventDefault()}),i.registerBinding(i.data.container,"mousedown",function(t){t.preventDefault(),i.hoverData.capture=!0,i.hoverData.which=t.which;var r=i.data.cy,a=i.projectIntoViewport(t.pageX,t.pageY),c=i.data.select,u=i.findNearestElement(a[0],a[1],!0),d=(i.hoverData.down,i.dragData.possibleDragElements),h=new e.Event(t,{type:"grab"});if(3==t.which)u&&(u.activate(),u.trigger(new e.Event(t,{type:"cxttapstart"})),i.hoverData.down=u,i.hoverData.downTime=(new Date).getTime(),i.hoverData.cxtDragged=!1);else if(1==t.which){if(u&&u.activate(),null!=u&&i.nodeIsDraggable(u)){if("nodes"==u._private.group&&0==u._private.selected&&(d=i.dragData.possibleDragElements=[],o(u,d),u.trigger(h),"auto"!=u._private.style.width.value&&"auto"!=u._private.style.height.value||n(u,!0,d),s(u,!0)),"nodes"==u._private.group&&1==u._private.selected){d=i.dragData.possibleDragElements=[];for(var v=!1,g=r.$("node:selected"),f=0;f<g.length;f++)i.nodeIsDraggable(g[f])&&(o(g[f],d),v||(u.trigger(h),v=!0),"auto"!=g[f]._private.style.width.value&&"auto"!=g[f]._private.style.height.value||n(g[f],!1,d),s(g[f],!0))}u.trigger(new e.Event(t,{type:"mousedown"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousedown"}))}else null==u&&r.trigger(new e.Event(t,{type:"mousedown"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousedown"}));if(i.hoverData.down=u,i.hoverData.downTime=(new Date).getTime(),null==u||u.isEdge()){c[4]=1;var y=Math.max(0,l-(+new Date-i.hoverData.downTime));clearTimeout(i.bgActiveTimeout),i.bgActiveTimeout=setTimeout(function(){u&&u.unactivate(),i.data.bgActivePosistion={x:a[0],y:a[1]},i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("bgactive"),i.redraw()},y)}}c[0]=c[2]=a[0],c[1]=c[3]=a[1],i.redraw()},!1),i.registerBinding(window,"mousemove",function(t){var r=!1,a=i.hoverData.capture;if(!a){var n=i.findContainerPageCoords();if(!(t.pageX>n[0]&&t.pageX<n[0]+i.data.container.clientWidth&&t.pageY>n[1]&&t.pageY<n[1]+i.data.container.clientHeight))return}var o=i.data.cy,s=i.projectIntoViewport(t.pageX,t.pageY),c=i.data.select,d=i.findNearestElement(s[0],s[1],!0),v=i.hoverData.last,g=i.hoverData.down,f=[s[0]-c[2],s[1]-c[3]],y=(i.getCachedNodes(),i.getCachedEdges(),i.dragData.possibleDragElements);t.shiftKey;r=!0;var m=new e.Event(t,{type:"mousemove"});if(null!=d?d.trigger(m):null==d&&o.trigger(m),3===i.hoverData.which){var w=new e.Event(t,{type:"cxtdrag"});g?g.trigger(w):o.trigger(w),i.hoverData.cxtDragged=!0}else if(i.hoverData.dragging){if(r=!0,o.panningEnabled()){var b={x:f[0]*o.zoom(),y:f[1]*o.zoom()};o.panBy(b)}s=i.projectIntoViewport(t.pageX,t.pageY)}else if(1==c[4]&&(null==g||g.isEdge())&&(!o.boxSelectionEnabled()||+new Date-i.hoverData.downTime>=l)&&Math.abs(c[3]-c[1])+Math.abs(c[2]-c[0])<4&&o.panningEnabled())i.hoverData.dragging=!0,c[4]=0;else{if(o.boxSelectionEnabled()&&Math.pow(c[2]-c[0],2)+Math.pow(c[3]-c[1],2)>7&&c[4]&&clearTimeout(i.bgActiveTimeout),g&&g.isEdge()&&g.active()&&g.unactivate(),d!=v&&(v&&v.trigger(new e.Event(t,{type:"mouseout"})),d&&d.trigger(new e.Event(t,{type:"mouseover"})),i.hoverData.last=d),g&&g.isNode()&&i.nodeIsDraggable(g)){i.dragData.didDrag=!0;for(var _=[],x=0;x<y.length;x++)"nodes"==y[x]._private.group&&i.nodeIsDraggable(y[x])&&(y[x]._private.position.x+=f[0],y[x]._private.position.y+=f[1],_.push(y[x]));new e.Collection(o,_).trigger(new e.Event(t,{type:"drag"
})).trigger(new e.Event(t,{type:"position"})),c[2]==c[0]&&c[3]==c[1]&&(i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("Node(s) and edge(s) moved to drag layer")),i.data.canvasNeedsRedraw[u]=!0,i.data.canvasRedrawReason[u].push("Nodes dragged")}o.boxSelectionEnabled()&&(i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("Mouse moved, redraw selection box")),r=!0}return c[2]=s[0],c[3]=s[1],i.redraw(),r?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1):void 0},!1),i.registerBinding(window,"mouseup",function(t){var r=i.hoverData.capture;if(r){i.hoverData.capture=!1;var a=i.data.cy,n=i.projectIntoViewport(t.pageX,t.pageY),o=i.data.select,l=i.findNearestElement(n[0],n[1],!0),c=(i.getCachedNodes(),i.getCachedEdges(),i.dragData.possibleDragElements),d=i.hoverData.down,v=t.shiftKey;if(i.data.bgActivePosistion=void 0,clearTimeout(i.bgActiveTimeout),d&&d.unactivate(),3===i.hoverData.which){var g=new e.Event(t,{type:"cxttapend"});if(d?d.trigger(g):a.trigger(g),!i.hoverData.cxtDragged){var f=new e.Event(t,{type:"cxttap"});d?d.trigger(f):a.trigger(f)}i.hoverData.cxtDragged=!1,i.hoverData.which=null}else{if(null!=d||i.dragData.didDrag||Math.pow(o[2]-o[0],2)+Math.pow(o[3]-o[1],2)>7&&o[4]||i.hoverData.dragging||(a.$(":selected").unselect(),c.length>0&&(i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("De-select")),i.dragData.possibleDragElements=c=[]),Math.pow(o[2]-o[0],2)+Math.pow(o[3]-o[1],2)==0&&(null!=l?l.trigger(new e.Event(t,{type:"click"})).trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"})):null==l&&a.trigger(new e.Event(t,{type:"click"})).trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"}))),null!=l?l.trigger(new e.Event(t,{type:"mouseup"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"})):null==l&&a.trigger(new e.Event(t,{type:"mouseup"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"})),l!=d||i.dragData.didDrag){if(l==d&&null!=l&&l._private.grabbed){for(var y=a.$(":grabbed"),m=0;m<y.length;m++){var w=y[m];w._private.grabbed=!1;for(var b=w._private.edges,_=0;_<b.length;_++)b[_]._private.rscratch.inDragLayer=!1;s(w,!1)}var x=new e.Event(t,{type:"free"});y.trigger(x)}}else null!=l&&l._private.selectable&&(v||a.$(":selected").unselect(),l.selected()?l.unselect():l.select(),s(l,!1),i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("sglslct"));if(a.boxSelectionEnabled()&&Math.pow(o[2]-o[0],2)+Math.pow(o[3]-o[1],2)>7&&o[4]){v||a.$(":selected").unselect();for(var M=[],E=i.getAllInBox(o[0],o[1],o[2],o[3]),m=(new e.Event(t,{type:"select"}),0);m<E.length;m++)E[m]._private.selectable&&(c.push(E[m]),M.push(E[m]));new e.Collection(a,M).select(),E.length>0&&(i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("Selection"))}if(i.hoverData.dragging=!1,!o[4]){for(var x=new e.Event(t,{type:"free"}),m=0;m<c.length;m++)if("nodes"==c[m]._private.group){c[m]._private.rscratch.inDragLayer=!1;for(var b=c[m]._private.edges,_=0;_<b.length;_++)b[_]._private.rscratch.inDragLayer=!1;s(c[m],!1)}else"edges"==c[m]._private.group&&(c[m]._private.rscratch.inDragLayer=!1);d&&d.trigger(x),i.data.canvasNeedsRedraw[u]=!0,i.data.canvasRedrawReason[u].push("Node/nodes back from drag"),i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("Node/nodes back from drag")}}o[4]=0,i.hoverData.down=null,i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("Mouse up, selection box gone"),i.dragData.didDrag=!1,i.redraw()}},!1);var c=function(e){var t=i.data.cy,r=i.projectIntoViewport(e.pageX,e.pageY),a=[r[0]*t.zoom()+t.pan().x,r[1]*t.zoom()+t.pan().y];if(i.zoomData.freeToZoom){e.preventDefault();var n=e.wheelDeltaY/1e3||e.detail/-32;t.panningEnabled()&&t.zoomingEnabled()&&t.zoom({level:t.zoom()*Math.pow(10,n),position:{x:a[0],y:a[1]}}),i.data.wheel=!0,clearTimeout(i.data.wheelTimeout),i.data.wheelTimeout=setTimeout(function(){i.data.wheel=!1,i.data.canvasNeedsRedraw[h]=!0,i.redraw()},100)}};i.registerBinding(i.data.container,"mousewheel",c,!0),i.registerBinding(i.data.container,"DOMMouseScroll",c,!0),i.registerBinding(i.data.container,"MozMousePixelScroll",function(e){i.zoomData.freeToZoom&&e.preventDefault()},!1),i.registerBinding(i.data.container,"mousemove",function(e){i.zoomData.lastPointerX&&i.zoomData.lastPointerX!=e.pageX&&!i.zoomData.freeToZoom&&(i.zoomData.freeToZoom=!0),i.zoomData.lastPointerX=e.pageX},!1),i.registerBinding(i.data.container,"mouseout",function(e){i.zoomData.freeToZoom=!1,i.zoomData.lastPointerX=null},!1),i.registerBinding(i.data.container,"mouseout",function(t){i.data.cy.trigger(new e.Event(t,{type:"mouseout"}))},!1),i.registerBinding(i.data.container,"mouseover",function(t){i.data.cy.trigger(new e.Event(t,{type:"mouseover"}))},!1);var v,g,f,y,m,w,b,_,x,M,E=i.data.container.clientWidth,S=i.data.container.clientHeight;i.registerBinding(i.data.container,"touchstart",function(t){function l(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()}t.target!==i.data.link&&t.preventDefault(),i.touchData.capture=!0,i.data.bgActivePosistion=void 0;var c=i.data.cy,u=i.getCachedNodes(),d=i.getCachedEdges(),h=i.touchData.now,D=i.touchData.earlier;if(t.touches[0]){var C=i.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);h[0]=C[0],h[1]=C[1]}if(t.touches[1]){var C=i.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);h[2]=C[0],h[3]=C[1]}if(t.touches[2]){var C=i.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);h[4]=C[0],h[5]=C[1]}if(t.touches[1]){l(u),l(d);var P=i.findContainerPageCoords();x=P[1],_=P[0],v=t.touches[0].pageX-_,g=t.touches[0].pageY-x,f=t.touches[1].pageX-_,y=t.touches[1].pageY-x,M=v>=0&&E>=v&&f>=0&&E>=f&&g>=0&&S>=g&&y>=0&&S>=y;var k=c.pan(),T=c.zoom();if(m=r(v,g,f,y),w=[(v+f)/2,(g+y)/2],b=[(w[0]-k.x)/T,(w[1]-k.y)/T],100>m){var I=i.findNearestElement(h[0],h[1],!0),N=i.findNearestElement(h[2],h[3],!0),z=new e.Event(t,{type:"cxttapstart"});return I&&I.isNode()?(I.activate().trigger(z),i.touchData.start=I):N&&N.isNode()?(N.activate().trigger(z),i.touchData.start=N):(c.trigger(z),i.touchData.start=null),i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxt=!0,i.touchData.cxtDragged=!1,i.data.bgActivePosistion=void 0,void i.redraw()}}if(t.touches[2]);else if(t.touches[1]);else if(t.touches[0]){var R=i.findNearestElement(h[0],h[1],!0);if(null!=R){if(R.activate(),i.touchData.start=R,"nodes"==R._private.group&&i.nodeIsDraggable(R)){var B=i.dragData.touchDragEles=[];if(o(R,B),R.trigger(new e.Event(t,{type:"grab"})),R.selected()){B=i.dragData.touchDragEles=[];for(var q=c.$("node:selected"),A=0;A<q.length;A++){var X=q[A];if(i.nodeIsDraggable(X)){B.push(X),X._private.rscratch.inDragLayer=!0;for(var Y=X._private.edges,V=0;V<Y.length;V++)Y[V]._private.rscratch.inDragLayer=!0;"auto"!=X._private.style.width.value&&"auto"!=X._private.style.height.value||n(X,!1,B),s(X,!0)}}}else"auto"!=R._private.style.width.value&&"auto"!=R._private.style.height.value||n(R,!0,B),s(R,!0)}R.trigger(new e.Event(t,{type:"touchstart"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousdown"}))}null==R&&(c.trigger(new e.Event(t,{type:"touchstart"})).trigger(new e.Event(t,{type:"tapstart"})).trigger(new e.Event(t,{type:"vmousedown"})),i.data.bgActivePosistion={x:C[0],y:C[1]},i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("bgactive"));for(var $=0;$<h.length;$++)D[$]=h[$],i.touchData.startPosition[$]=h[$];i.touchData.singleTouchMoved=!1,i.touchData.singleTouchStartTime=a();setTimeout(function(){0==i.touchData.singleTouchMoved&&a()-i.touchData.singleTouchStartTime>250&&(i.touchData.start?i.touchData.start.trigger(new e.Event(t,{type:"taphold"})):(i.data.cy.trigger(new e.Event(t,{type:"taphold"})),c.$(":selected").unselect()))},1e3)}i.redraw()},!1),i.registerBinding(window,"touchmove",function(t){var a=i.data.select,n=i.touchData.capture;n&&t.preventDefault();var o=i.data.cy,s=(i.getCachedNodes(),i.getCachedEdges(),i.touchData.now),l=i.touchData.earlier;if(t.touches[0]){var c=i.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){var c=i.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){var c=i.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);s[4]=c[0],s[5]=c[1]}for(var d=[],w=0;w<s.length;w++)d[w]=s[w]-l[w];if(n&&i.touchData.cxt){var E=t.touches[0].pageX-_,S=t.touches[0].pageY-x,D=t.touches[1].pageX-_,C=t.touches[1].pageY-x,P=r(E,S,D,C),k=P/m;if(k>=1.5||P>=150){i.touchData.cxt=!1,i.touchData.start&&(i.touchData.start.unactivate(),i.touchData.start=null),i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[p]=!0;var T=new e.Event(t,{type:"cxttapend"});i.touchData.start?i.touchData.start.trigger(T):o.trigger(T)}}if(n&&i.touchData.cxt){var T=new e.Event(t,{type:"cxtdrag"});i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[p]=!0,i.touchData.start?i.touchData.start.trigger(T):o.trigger(T),i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxtDragged=!0}else if(n&&t.touches[2]&&o.boxSelectionEnabled())i.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("Touch moved, redraw selection box"),a&&0!==a.length&&void 0!==a[0]?(a[2]=(s[0]+s[2]+s[4])/3,a[3]=(s[1]+s[3]+s[5])/3):(a[0]=(s[0]+s[2]+s[4])/3,a[1]=(s[1]+s[3]+s[5])/3,a[2]=(s[0]+s[2]+s[4])/3+1,a[3]=(s[1]+s[3]+s[5])/3+1),a[4]=1;else if(n&&t.touches[1]&&o.zoomingEnabled()&&o.panningEnabled()){i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[p]=!0;var E=t.touches[0].pageX-_,S=t.touches[0].pageY-x,D=t.touches[1].pageX-_,C=t.touches[1].pageY-x,P=r(E,S,D,C),k=P/m;if(1!=k&&M){var I=E-v,N=S-g,z=D-f,R=C-y,B=(I+z)/2,q=(N+R)/2,A=o.zoom(),X=A*k,Y=o.pan(),V=b[0]*A+Y.x,$=b[1]*A+Y.y,O={x:-X/A*(V-Y.x-B)+V,y:-X/A*($-Y.y-q)+$};o._private.zoom=X,o._private.pan=O,o.trigger("pan zoom").notify("viewport"),m=P,v=E,g=S,f=D,y=C,i.pinching=!0}if(t.touches[0]){var c=i.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);s[0]=c[0],s[1]=c[1]}if(t.touches[1]){var c=i.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);s[2]=c[0],s[3]=c[1]}if(t.touches[2]){var c=i.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);s[4]=c[0],s[5]=c[1]}}else if(t.touches[0]){var L=i.touchData.start,j=i.touchData.last;if(null!=L&&"nodes"==L._private.group&&i.nodeIsDraggable(L)){for(var W=i.dragData.touchDragEles,F=0;F<W.length;F++){var H=W[F];i.nodeIsDraggable(H)&&(i.dragData.didDrag=!0,H._private.position.x+=d[0],H._private.position.y+=d[1])}new e.Collection(o,W).trigger(new e.Event(t,{type:"drag"})).trigger(new e.Event(t,{type:"position"})),i.data.canvasNeedsRedraw[u]=!0,i.data.canvasRedrawReason[u].push("touchdrag node"),i.touchData.startPosition[0]==l[0]&&i.touchData.startPosition[1]==l[1]&&(i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("node drag started"))}if(null!=L&&L.trigger(new e.Event(t,{type:"touchmove"})),null==L){var Z=i.findNearestElement(s[0],s[1],!0);null!=Z&&Z.trigger(new e.Event(t,{type:"touchmove"})),null==Z&&o.trigger(new e.Event(t,{type:"touchmove"}))}Z!=j&&(j&&j.trigger(new e.Event(t,{type:"touchout"})),Z&&Z.trigger(new e.Event(t,{type:"touchover"}))),i.touchData.last=Z;for(var K=0;K<s.length;K++)s[K]&&i.touchData.startPosition[K]&&Math.abs(s[K]-i.touchData.startPosition[K])>4&&(i.touchData.singleTouchMoved=!0);if(n&&(null==L||L.isEdge())&&o.panningEnabled()){L&&(L.unactivate(),i.data.bgActivePosistion||(i.data.bgActivePosistion={x:s[0],y:s[1]}),i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("bgactive")),o.panBy({x:d[0]*o.zoom(),y:d[1]*o.zoom()}),i.swipePanning=!0;var c=i.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);s[0]=c[0],s[1]=c[1]}}for(var w=0;w<s.length;w++)l[w]=s[w];i.redraw()},!1),i.registerBinding(window,"touchend",function(t){var r=i.touchData.capture;if(r){i.touchData.capture=!1,t.preventDefault();var a=i.data.select;i.swipePanning=!1;var n=i.data.cy,o=(i.getCachedNodes(),i.getCachedEdges(),i.touchData.now),l=i.touchData.earlier,c=i.touchData.start;if(t.touches[0]){var d=i.projectIntoViewport(t.touches[0].pageX,t.touches[0].pageY);o[0]=d[0],o[1]=d[1]}if(t.touches[1]){var d=i.projectIntoViewport(t.touches[1].pageX,t.touches[1].pageY);o[2]=d[0],o[3]=d[1]}if(t.touches[2]){var d=i.projectIntoViewport(t.touches[2].pageX,t.touches[2].pageY);o[4]=d[0],o[5]=d[1]}if(i.touchData.cxt){if(ctxTapend=new e.Event(t,{type:"cxttapend"}),c?(c.unactivate(),c.trigger(ctxTapend)):n.trigger(ctxTapend),!i.touchData.cxtDragged){var v=new e.Event(t,{type:"cxttap"});c?c.trigger(v):n.trigger(v)}return i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxt=!1,i.touchData.start=null,void i.redraw()}+new Date;!t.touches[2]&&n.boxSelectionEnabled()&&(clearTimeout(this.threeFingerSelectTimeout),this.threeFingerSelectTimeout=setTimeout(function(){var r=[],o=i.getAllInBox(a[0],a[1],a[2],a[3]);a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,i.data.canvasNeedsRedraw[p]=!0,i.data.canvasRedrawReason[p].push("Touch moved, redraw selection box");for(var s=(new e.Event(t,{type:"select"}),0);s<o.length;s++)o[s]._private.selectable&&r.push(o[s]);new e.Collection(n,r).select(),o.length>0&&(i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("Selection"))},100)),t.touches[1]||(i.pinching=!1);var g=!1;if(null!=c&&(c._private.active=!1,g=!0,c.trigger(new e.Event(t,{type:"unactivate"}))),t.touches[2])i.data.bgActivePosistion=void 0;else if(t.touches[1]);else if(t.touches[0]);else if(!t.touches[0]){if(i.data.bgActivePosistion=void 0,null!=c){1==c._private.grabbed&&(c._private.grabbed=!1,c.trigger(new e.Event(t,{type:"free"})),c._private.rscratch.inDragLayer=!1);for(var f=c._private.edges,y=0;y<f.length;y++)f[y]._private.rscratch.inDragLayer=!1;if(s(c,!1),c.selected())for(var m=n.$("node:selected"),w=0;w<m.length;w++){var b=m[w];b._private.rscratch.inDragLayer=!1;for(var f=b._private.edges,y=0;y<f.length;y++)f[y]._private.rscratch.inDragLayer=!1;s(b,!1)}i.data.canvasNeedsRedraw[u]=!0,i.data.canvasRedrawReason[u].push("touchdrag node end"),i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("touchdrag node end"),c.trigger(new e.Event(t,{type:"touchend"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"})),i.touchData.start=null}else{var _=i.findNearestElement(o[0],o[1],!0);null!=_&&_.trigger(new e.Event(t,{type:"touchend"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"})),null==_&&n.trigger(new e.Event(t,{type:"touchend"})).trigger(new e.Event(t,{type:"tapend"})).trigger(new e.Event(t,{type:"vmouseup"}))}null!=c&&!i.dragData.didDrag&&c._private.selectable&&Math.sqrt(Math.pow(i.touchData.startPosition[0]-o[0],2)+Math.pow(i.touchData.startPosition[1]-o[1],2))<6&&(c.selected()?(c._private.selected=!1,c.trigger(new e.Event(t,{type:"unselect"}))):(c._private.selected=!0,c.trigger(new e.Event(t,{type:"select"}))),g=!0,i.data.canvasNeedsRedraw[h]=!0,i.data.canvasRedrawReason[h].push("sglslct")),0==i.touchData.singleTouchMoved&&(c?c.trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"})):n.trigger(new e.Event(t,{type:"tap"})).trigger(new e.Event(t,{type:"vclick"}))),i.touchData.singleTouchMoved=!0}for(var y=0;y<o.length;y++)l[y]=o[y];i.dragData.didDrag=!1,g&&c&&c.updateStyle(!1),i.redraw()}},!1)},t.prototype.init=function(){},t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;return void 0==e.cache&&(e.cache={}),void 0==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;void 0==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;return void 0==e.cache&&(e.cache={}),void 0==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;void 0==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()},t.prototype.projectIntoViewport=function(e,t){n=this.data.container;var r=this.findContainerPageCoords(),a=r[0],i=r[1];return x=e-a,y=t-i,x-=this.data.cy.pan().x,y-=this.data.cy.pan().y,x/=this.data.cy.zoom(),y/=this.data.cy.zoom(),[x,y]},t.prototype.findContainerPageCoords=function(){var e,t=0,r=0;e=this.data.container;for(var a=!1;null!=e;){var i=window.getComputedStyle(e);"fixed"===i.getPropertyValue("position").toLowerCase()?(t=e.offsetLeft+window.scrollX,r=e.offsetTop+window.scrollY,e=null):"number"==typeof e.offsetLeft&&(t+=e.offsetLeft,r+=e.offsetTop,e!=document.body&&e!=document.header||(a=!0),a||(t-=e.scrollLeft,r-=e.scrollTop)),e&&(e=e.offsetParent)}return[t,r]},t.prototype.findNearestElement=function(e,t,a){for(var n=this.data,s=this.getCachedNodes(),l=this.getCachedEdges(),c=[],p=this.data.cy.zoom(),u=(r?256:32)/p,d=(r?16:0)/p,h=0;h<s.length;h++)o[this.getNodeShape(s[h])].checkPointRough(e,t,s[h]._private.style["border-width"].value,this.getNodeWidth(s[h])+d,this.getNodeHeight(s[h])+d,s[h]._private.position.x,s[h]._private.position.y)&&o[this.getNodeShape(s[h])].checkPoint(e,t,s[h]._private.style["border-width"].value,(this.getNodeWidth(s[h])+d)/2,(this.getNodeHeight(s[h])+d)/2,s[h]._private.position.x,s[h]._private.position.y)&&(a?0!=s[h]._private.style.opacity.value&&"visible"==s[h]._private.style.visibility.value&&c.push(s[h]):c.push(s[h]));for(var v,h=0;h<l.length;h++){var g=l[h],y=g._private.rscratch;if(v=!1,"self"==y.edgeType?(this.inBezierVicinity(e,t,y.startX,y.startY,y.cp2ax,y.cp2ay,y.selfEdgeMidX,y.selfEdgeMidY,Math.pow(g._private.style.width.value/2,2))&&Math.pow(l[h]._private.style.width.value/2,2)+u>this.sqDistanceToQuadraticBezier(e,t,y.startX,y.startY,y.cp2ax,y.cp2ay,y.selfEdgeMidX,y.selfEdgeMidY)||this.inBezierVicinity(e,t,y.selfEdgeMidX,y.selfEdgeMidY,y.cp2cx,y.cp2cy,y.endX,y.endY,Math.pow(l[h]._private.style.width.value/2,2))&&Math.pow(l[h]._private.style.width.value/2,2)+u>this.sqDistanceToQuadraticBezier(e,t,y.selfEdgeMidX,y.selfEdgeMidY,y.cp2cx,y.cp2cy,y.endX,y.endY))&&(v=!0):"straight"==y.edgeType?this.inLineVicinity(e,t,y.startX,y.startY,y.endX,y.endY,2*l[h]._private.style.width.value)&&Math.pow(l[h]._private.style.width.value/2,2)+u>this.sqDistanceToFiniteLine(e,t,y.startX,y.startY,y.endX,y.endY)&&(v=!0):"bezier"==y.edgeType&&this.inBezierVicinity(e,t,y.startX,y.startY,y.cp2x,y.cp2y,y.endX,y.endY,Math.pow(l[h]._private.style.width.value/2,2))&&Math.pow(l[h]._private.style.width.value/2,2)+u>this.sqDistanceToQuadraticBezier(e,t,y.startX,y.startY,y.cp2x,y.cp2y,y.endX,y.endY)&&(v=!0),c.length&&c[c.length-1]==l[h]||(i[l[h]._private.style["source-arrow-shape"].value].roughCollide(e,t,l[h]._private.rscratch.arrowStartX,l[h]._private.rscratch.arrowStartY,this.getArrowWidth(l[h]._private.style.width.value),this.getArrowHeight(l[h]._private.style.width.value),[l[h]._private.rscratch.arrowStartX-l[h].source()[0]._private.position.x,l[h]._private.rscratch.arrowStartY-l[h].source()[0]._private.position.y],0)&&i[l[h]._private.style["source-arrow-shape"].value].collide(e,t,l[h]._private.rscratch.arrowStartX,l[h]._private.rscratch.arrowStartY,this.getArrowWidth(l[h]._private.style.width.value),this.getArrowHeight(l[h]._private.style.width.value),[l[h]._private.rscratch.arrowStartX-l[h].source()[0]._private.position.x,l[h]._private.rscratch.arrowStartY-l[h].source()[0]._private.position.y],0)||i[l[h]._private.style["target-arrow-shape"].value].roughCollide(e,t,l[h]._private.rscratch.arrowEndX,l[h]._private.rscratch.arrowEndY,this.getArrowWidth(l[h]._private.style.width.value),this.getArrowHeight(l[h]._private.style.width.value),[l[h]._private.rscratch.arrowEndX-l[h].target()[0]._private.position.x,l[h]._private.rscratch.arrowEndY-l[h].target()[0]._private.position.y],0)&&i[l[h]._private.style["target-arrow-shape"].value].collide(e,t,l[h]._private.rscratch.arrowEndX,l[h]._private.rscratch.arrowEndY,this.getArrowWidth(l[h]._private.style.width.value),this.getArrowHeight(l[h]._private.style.width.value),[l[h]._private.rscratch.arrowEndX-l[h].target()[0]._private.position.x,l[h]._private.rscratch.arrowEndY-l[h].target()[0]._private.position.y],0))&&(v=!0),v)if(a){var m=n.cy.getElementById(l[h]._private.data.source),w=n.cy.getElementById(l[h]._private.data.target);0!=l[h]._private.style.opacity.value&&"visible"==l[h]._private.style.visibility.value&&0!=m._private.style.opacity.value&&"visible"==m._private.style.visibility.value&&0!=w._private.style.opacity.value&&"visible"==w._private.style.visibility.value&&c.push(l[h])}else c.push(l[h])}return c.sort(f),c.length>0?c[c.length-1]:null},t.prototype.getAllInBox=function(e,t,r,a){var i=(this.data,this.getCachedNodes()),n=this.getCachedEdges(),s=[],l=Math.min(e,r),c=Math.max(e,r),p=Math.min(t,a),u=Math.max(t,a);e=l,r=c,t=p,a=u;for(var d,h=0;h<i.length;h++)o[this.getNodeShape(i[h])].intersectBox(e,t,r,a,this.getNodeWidth(i[h]),this.getNodeHeight(i[h]),i[h]._private.position.x,i[h]._private.position.y,i[h]._private.style["border-width"].value/2)&&s.push(i[h]);for(var h=0;h<n.length;h++)"self"==n[h]._private.rscratch.edgeType&&((d=this.boxInBezierVicinity(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.cp2ax,n[h]._private.rscratch.cp2ay,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))&&(2==d||1==d&&this.checkBezierInBox(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.cp2ax,n[h]._private.rscratch.cp2ay,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))||(d=this.boxInBezierVicinity(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.cp2cx,n[h]._private.rscratch.cp2cy,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))&&(2==d||1==d&&this.checkBezierInBox(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.cp2cx,n[h]._private.rscratch.cp2cy,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value)))&&s.push(n[h]),"bezier"==n[h]._private.rscratch.edgeType&&(d=this.boxInBezierVicinity(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.cp2x,n[h]._private.rscratch.cp2y,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))&&(2==d||1==d&&this.checkBezierInBox(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.cp2x,n[h]._private.rscratch.cp2y,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))&&s.push(n[h]),"straight"==n[h]._private.rscratch.edgeType&&(d=this.boxInBezierVicinity(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,.5*n[h]._private.rscratch.startX+.5*n[h]._private.rscratch.endX,.5*n[h]._private.rscratch.startY+.5*n[h]._private.rscratch.endY,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))&&(2==d||1==d&&this.checkStraightEdgeInBox(e,t,r,a,n[h]._private.rscratch.startX,n[h]._private.rscratch.startY,n[h]._private.rscratch.endX,n[h]._private.rscratch.endY,n[h]._private.style.width.value))&&s.push(n[h]);return s},t.prototype.updateAllCompounds=function(e){for(var t=e.length-1;t>=0;t--)if(e[t].isNode()&&("auto"==e[t]._private.style.width.value||"auto"==e[t]._private.style.height.value)&&e[t].children().length>0){var r=e[t],a=this.calcCompoundBounds(r);r._private.position.x=a.x,r._private.position.y=a.y,r._private.autoWidth=a.width,r._private.autoHeight=a.height}},t.prototype.calcCompoundBounds=function(e){var t=e.descendants().not(":removed"),r={x:e._private.position.x,y:e._private.position.y,width:e._private.autoWidth,height:e._private.autoHeight};if("visible"!=e._private.style.visibility.value)return r;for(var a=[],i=0;i<t.size();i++)"visible"==t[i]._private.style.visibility.value&&a.push(t[i]);if(0==a.length)return r;t=a;var n=this.borderValue(t,"left"),o=this.borderValue(t,"right"),s=this.borderValue(t,"top"),l=this.borderValue(t,"bottom"),c=this.getNodePadding(e),p=(n-c.left+o+c.right)/2,u=(s-c.top+l+c.bottom)/2,d=o-n+c.left+c.right,h=l-s+c.top+c.bottom;return r={x:p,y:u,width:d,height:h}},t.prototype.borderValue=function(e,t){var r,a,i=1/0,n=-1/0,o=this,s=function(e){var t={};return t.x=e._private.position.x,t.y=e._private.position.y,t.width=e.outerWidth(),t.height=e.outerHeight(),t},l=function(e){var t={},r=o.getNodeWidth(e),a=o.getNodeHeight(e);t.height=e._private.style["font-size"].value,t.width=t.height;var i=e._private.style["text-halign"].strValue;"left"==i?(t.x=e._private.position.x-r/2,t.left=t.x-t.width,t.right=t.x):"right"==i?(t.x=e._private.position.x+r/2,t.left=t.x,t.right=t.x+t.width):(t.x=e._private.position.x,t.left=t.x-t.width/2,t.right=t.x+t.width/2);var n=e._private.style["text-valign"].strValue;return"top"==n?(t.y=e._private.position.y-a/2,t.top=t.y-t.height,t.bottom=t.y):"bottom"==n?(t.y=e._private.position.y+a/2,t.top=t.y,t.bottom=t.y+t.height):(t.y=e._private.position.y,t.top=t.y-t.height/2,t.bottom=t.y+t.height/2),t};for(k=0;k<e.length;k++)if(r=s(e[k]),a=l(e[k]),"left"==t){var c=Math.min(r.x-r.width/2,a.left);i>c&&(i=c)}else if("right"==t){var p=Math.max(r.x+r.width/2,a.right);p>n&&(n=p)}else if("top"==t){var u=Math.min(r.y-r.height/2,a.top);i>u&&(i=u)}else if("bottom"==t){var d=Math.max(r.y+r.height/2,a.bottom);d>n&&(n=d)}return"left"==t||"top"==t?i:n},t.prototype.getNodeWidth=function(e){return"auto"==e._private.style.width.value||"auto"==e._private.style.height.value?e._private.autoWidth:e._private.style.width.value},t.prototype.getNodeHeight=function(e){return"auto"==e._private.style.width.value||"auto"==e._private.style.height.value?e._private.autoHeight:e._private.style.height.value},t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t},t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].value,r=e._private.style["padding-right"].value,a=e._private.style["padding-top"].value,i=e._private.style["padding-bottom"].value;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),isNaN(a)&&(a=0),isNaN(i)&&(i=0),{left:t,right:r,top:a,bottom:i}},t.prototype.matchCanvasSize=function(e){for(var t,r=this.data,a=e.clientWidth,i=e.clientHeight,n=0;c>n;n++)t=r.canvases[n],t.width===a&&t.height===i||(t.width=a,t.height=i);for(var n=0;v>n;n++)t=r.bufferCanvases[n],t.width===a&&t.height===i||(t.width=a,t.height=i);this.data.overlay.style.width=a+"px",this.data.overlay.style.height=i+"px"};var g=function(e){return"nodes"==e._private.group?e.parents().size():"edges"==e._private.group?Math.max(e.source()[0].parents().size(),e.target()[0].parents().size()):0};t.prototype.getCachedZSortedEles=function(){var e=this.lastZOrderCachedNodes,t=this.lastZOrderCachedEdges,r=this.getCachedNodes(),a=this.getCachedEdges(),i=[];if(e&&t&&e===r&&t===a)i=this.cachedZSortedEles;else{for(var n=0;n<r.length;n++)i.push(r[n]);for(var n=0;n<a.length;n++)i.push(a[n]);i.sort(f),this.cachedZSortedEles=i}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=a,i};var f=function(e,t){var r=e._private.style["z-index"].value-t._private.style["z-index"].value,a=0,i=0;return e.cy().hasCompoundNodes()&&(a=g(e),i=g(t)),a-i===0?"nodes"===e._private.group&&"edges"===t._private.group?1:"edges"===e._private.group&&"nodes"===t._private.group?-1:0===r?e._private.index-t._private.index:r:a-i};t.prototype.redraw=function(e,t){var r=this;void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var a=1e3/60,i=1e3,n=this.averageRedrawTime;n=Math.max(a,n),n=Math.min(n,i),void 0===this.lastDrawTime&&(this.lastDrawTime=0);var o=+new Date,s=o-this.lastDrawTime,l=s>=n;if(!e){if(!l)return clearTimeout(this.redrawTimeout),void(this.redrawTimeout=setTimeout(function(){r.redraw()},n));this.lastDrawTime=o}setTimeout(function(){var a=o,i=r.data.cy,n=r.data,s=r.getCachedNodes(),l=r.getCachedEdges();r.matchCanvasSize(n.container);for(var c=[],v=0;v<s.length;v++)c.push(s[v]);for(var v=0;v<l.length;v++)c.push(l[v]);if(n.canvasNeedsRedraw[u]||n.canvasNeedsRedraw[h]||t){r.hideEdgesOnViewport&&(r.pinching||r.hoverData.dragging||r.data.wheel||r.swipePanning)||r.findEdgeControlPoints(l);var c=r.getCachedZSortedEles();i.hasCompoundNodes()&&r.updateAllCompounds(c)}var g,f,y;if(n.canvasNeedsRedraw[h]||t){if(!g||!f){g=[],f=[];for(var m=0;m<c.length;m++)y=c[m],y._private.rscratch.inDragLayer?g.push(y):f.push(y)}var w=e||n.canvases[h].getContext("2d");w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,w.canvas.width,w.canvas.height),t||(w.translate(i.pan().x,i.pan().y),w.scale(i.zoom(),i.zoom()));for(var m=0;m<f.length;m++)y=f[m],"nodes"==y._private.group?r.drawNode(w,y):"edges"==y._private.group&&r.drawEdge(w,y);for(var m=0;m<f.length;m++)y=f[m],"nodes"==y._private.group?r.drawNodeText(w,y):"edges"==y._private.group&&r.drawEdgeText(w,y),"nodes"==y._private.group?r.drawNode(w,y,!0):"edges"==y._private.group&&r.drawEdge(w,y,!0);t||(n.canvasNeedsRedraw[h]=!1,n.canvasRedrawReason[h]=[])}if(n.canvasNeedsRedraw[u]||t){if(!g||!f){g=[],f=[];for(var m=0;m<c.length;m++)y=c[m],y._private.rscratch.inDragLayer?g.push(y):f.push(y)}var w=e||n.canvases[u].getContext("2d");t||(w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,w.canvas.width,w.canvas.height),w.translate(i.pan().x,i.pan().y),w.scale(i.zoom(),i.zoom()));for(var y,m=0;m<g.length;m++)y=g[m],"nodes"==y._private.group?r.drawNode(w,y):"edges"==y._private.group&&r.drawEdge(w,y);for(var m=0;m<g.length;m++)y=g[m],"nodes"==y._private.group?r.drawNodeText(w,y):"edges"==y._private.group&&r.drawEdgeText(w,y),"nodes"==y._private.group?r.drawNode(w,y,!0):"edges"==y._private.group&&r.drawEdge(w,y,!0);t||(n.canvasNeedsRedraw[u]=!1,n.canvasRedrawReason[u]=[])}if(n.canvasNeedsRedraw[p]){var w=e||n.canvases[p].getContext("2d");t||(w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,w.canvas.width,w.canvas.height),w.translate(i.pan().x,i.pan().y),w.scale(i.zoom(),i.zoom()));var b=i.style()._private.coreStyle;if(1==n.select[4]){var _=n.cy.zoom(),x=b["selection-box-border-width"].value/_;w.lineWidth=x,w.fillStyle="rgba("+b["selection-box-color"].value[0]+","+b["selection-box-color"].value[1]+","+b["selection-box-color"].value[2]+","+b["selection-box-opacity"].value+")",w.fillRect(n.select[0],n.select[1],n.select[2]-n.select[0],n.select[3]-n.select[1]),x>0&&(w.strokeStyle="rgba("+b["selection-box-border-color"].value[0]+","+b["selection-box-border-color"].value[1]+","+b["selection-box-border-color"].value[2]+","+b["selection-box-opacity"].value+")",w.strokeRect(n.select[0],n.select[1],n.select[2]-n.select[0],n.select[3]-n.select[1]))}if(n.bgActivePosistion){var _=n.cy.zoom(),M=n.bgActivePosistion;w.fillStyle="rgba("+b["active-bg-color"].value[0]+","+b["active-bg-color"].value[1]+","+b["active-bg-color"].value[2]+","+b["active-bg-opacity"].value+")",w.beginPath(),w.arc(M.x,M.y,b["active-bg-size"].pxValue/_,0,2*Math.PI),w.fill()}t||(n.canvasNeedsRedraw[p]=!1,n.canvasRedrawReason[p]=[])}if(r.options.showOverlay){var w=n.canvases[d].getContext("2d");w.lineJoin="round",w.font="14px helvetica",w.strokeStyle="#fff",w.lineWidth="4",w.fillStyle="#666",w.textAlign="right";var E="cytoscape.js",S=w.canvas.width,D=w.canvas.height,C=4;w.measureText(E).width;w.clearRect(0,0,S,D),w.strokeText(E,S-C,D-C),w.fillText(E,S-C,D-C),n.overlayDrawn=!0}var P=+new Date;void 0===r.averageRedrawTime&&(r.averageRedrawTime=P-a),r.averageRedrawTime=r.averageRedrawTime/2+(P-a)/2},0)};var m={},w=9e3;t.prototype.getCachedImage=function(e,t){if(m[e]&&m[e].image)return m[e].keepTime=w,m[e].image;var r=m[e];return void 0==r&&(m[e]=new Object,m[e].image=new Image,m[e].image.onload=t,m[e].image.src=e,m[e].keepTime=w,r=m[e]),r.image},t.prototype.swapCachedImage=function(e){
if(m[e]){if(m[e].image&&m[e].image.complete){var t=m[e].image,r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),m[e].image=r,m[e].swappedWithCanvas=!0,r}return null}return null},t.prototype.updateImageCaches=function(){for(var e in m)m[e].keepTime<=0?(void 0!=m[e].image&&(m[e].image.src=void 0,m[e].image=void 0),m[e]=void 0):m[e]-=1},t.prototype.drawImage=function(e,t,r,a,i,n,o){o.widthScale=.5,o.heightScale=.5,o.rotate=n;canvas.drawImage(o,t,r)},t.prototype.drawEdge=function(e,t,r){if(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){var a,i;if(a=t.source()[0],i=t.target()[0],"visible"==t._private.style.visibility.value&&"visible"==a._private.style.visibility.value&&"visible"==i._private.style.visibility.value){var n=t._private.style["overlay-padding"].value,o=t._private.style["overlay-opacity"].value,s=t._private.style["overlay-color"].value;if(r?(e.strokeStyle="rgba( "+s[0]+", "+s[1]+", "+s[2]+", "+o+" )",e.lineCap="round","self"==t._private.rscratch.edgeType&&(e.lineCap="butt")):e.strokeStyle="rgba("+t._private.style["line-color"].value[0]+","+t._private.style["line-color"].value[1]+","+t._private.style["line-color"].value[2]+","+t._private.style.opacity.value+")",!(t._private.style.width.value<=0)){var l=t._private.style.width.value+(r?2*n:0),c=r?"solid":t._private.style["line-style"].value;if(e.lineWidth=l,this.findEndpoints(t),"self"==t._private.rscratch.edgeType){var p=t._private.rscratch;this.drawStyledEdge(t,e,[p.startX,p.startY,p.cp2ax,p.cp2ay,p.selfEdgeMidX,p.selfEdgeMidY],c,l),this.drawStyledEdge(t,e,[p.selfEdgeMidX,p.selfEdgeMidY,p.cp2cx,p.cp2cy,p.endX,p.endY],c,l)}else if("straight"==t._private.rscratch.edgeType){var u=i._private.position.x-a._private.position.x,d=i._private.position.y-a._private.position.y,h=t._private.rscratch.endX-t._private.rscratch.startX,v=t._private.rscratch.endY-t._private.rscratch.startY;if(0>u*h+d*v)t._private.rscratch.straightEdgeTooShort=!0;else{var p=t._private.rscratch;this.drawStyledEdge(t,e,[p.startX,p.startY,p.endX,p.endY],c,l),t._private.rscratch.straightEdgeTooShort=!1}}else{var p=t._private.rscratch;this.drawStyledEdge(t,e,[p.startX,p.startY,p.cp2x,p.cp2y,p.endX,p.endY],c,l)}t._private.rscratch.noArrowPlacement!==!0&&void 0!==t._private.rscratch.startX&&this.drawArrowheads(e,t,r)}}}};var b=function(e,t,r){var a=Math.sqrt(Math.pow(e[4]-e[0],2)+Math.pow(e[5]-e[1],2));a+=Math.sqrt(Math.pow((e[4]+e[0])/2-e[2],2)+Math.pow((e[5]+e[1])/2-e[3],2));var i,n=Math.ceil(a/t);if(!(n>0))return null;i=new Array(2*n);for(var o=0;n>o;o++){var s=o/n;i[2*o]=e[0]*(1-s)*(1-s)+2*e[2]*(1-s)*s+e[4]*s*s,i[2*o+1]=e[1]*(1-s)*(1-s)+2*e[3]*(1-s)*s+e[5]*s*s}return i},_=function(e,t,r){var a,i=Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(e[3]-e[1],2)),n=Math.ceil(i/t);if(!(n>0))return null;a=new Array(2*n);for(var o=[e[2]-e[0],e[3]-e[1]],s=0;n>s;s++){var l=s/n;a[2*s]=o[0]*l+e[0],a[2*s+1]=o[1]*l+e[1]}return a};t.prototype.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},t.prototype.drawStyledEdge=function(e,t,r,a,i){function n(e,t,r,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*r}var o=this.data.cy,s=o.zoom();void 0===e._private.rstyle.bezierPts&&(e._private.rstyle.bezierPts=[]);var l=e._private.rstyle.bezierPts.length;e.isLoop()?l>=12&&(e._private.rstyle.bezierPts=[]):e._private.rstyle.bezierPts=[];var c=e._private.rstyle.bezierPts;if(6===r.length&&(c.push({x:n(r[0],r[2],r[4],.05),y:n(r[1],r[3],r[5],.05)}),c.push({x:n(r[0],r[2],r[4],.25),y:n(r[1],r[3],r[5],.25)}),c.push({x:n(r[0],r[2],r[4],.35),y:n(r[1],r[3],r[5],.35)}),c.push({x:n(r[0],r[2],r[4],.65),y:n(r[1],r[3],r[5],.65)}),c.push({x:n(r[0],r[2],r[4],.75),y:n(r[1],r[3],r[5],.75)}),c.push({x:n(r[0],r[2],r[4],.95),y:n(r[1],r[3],r[5],.95)})),"solid"==a)t.beginPath(),t.moveTo(r[0],r[1]),6==r.length?t.quadraticCurveTo(r[2],r[3],r[4],r[5]):t.lineTo(r[2],r[3]),t.stroke();else if("dotted"==a){var p;if(p=6==r.length?b(r,16,!0):_(r,16,!0),!p)return;var u=Math.max(1.6*i,3.4)*s,d=2*u,h=2*u;d=Math.max(d,1),h=Math.max(h,1);var v=this.createBuffer(d,h),g=v[1];g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,d,h),g.fillStyle=t.strokeStyle,g.beginPath(),g.arc(d/2,h/2,.5*u,0,2*Math.PI,!1),g.fill(),t.beginPath();for(var f=0;f<p.length/2;f++)t.drawImage(v[0],p[2*f]-d/2/s,p[2*f+1]-h/2/s,d/s,h/s)}else if("dashed"==a){var p;if(p=6==r.length?b(r,14,!0):_(r,14,!0),!p)return;var d=2*i*s,h=7.8*s;d=Math.max(d,1),h=Math.max(h,1);var v=this.createBuffer(d,h),g=v[1];g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,d,h),t.strokeStyle&&(g.strokeStyle=t.strokeStyle),g.lineWidth=i*o.zoom(),g.beginPath(),g.moveTo(d/2,.2*h),g.lineTo(d/2,.8*h),g.stroke();var y,m,w=!1;4==r.length?(y=[r[2]-r[0],r[3]-p[1]],m=Math.acos((0*y[0]+-1*y[1])/Math.sqrt(y[0]*y[0]+y[1]*y[1])),y[0]<0&&(m=-m+2*Math.PI)):6==r.length&&(w=!0);for(var f=0;f<p.length/2;f++){var x=f/Math.max(p.length/2-1,1);w&&(y=[2*(1-x)*(r[2]-r[0])+2*x*(r[4]-r[2]),2*(1-x)*(r[3]-r[1])+2*x*(r[5]-r[3])],m=Math.acos((0*y[0]+-1*y[1])/Math.sqrt(y[0]*y[0]+y[1]*y[1])),y[0]<0&&(m=-m+2*Math.PI)),t.translate(p[2*f],p[2*f+1]),t.rotate(m),t.translate(-d/2/s,-h/2/s),t.drawImage(v[0],0,0,d/s,h/s),t.translate(d/2/s,h/2/s),t.rotate(-m),t.translate(-p[2*f],-p[2*f+1])}}else this.drawStyledEdge(e,t,r,"solid",i)},t.prototype.drawEdgeText=function(e,t){if(!(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)||"visible"!=t._private.style.visibility.value)){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pxValue;if(!(a>r)){e.textAlign="center",e.textBaseline="middle";var i,n,o,s;"self"==t._private.rscratch.edgeType?(o=t._private.rscratch.selfEdgeMidX,s=t._private.rscratch.selfEdgeMidY):"straight"==t._private.rscratch.edgeType?(o=(t._private.rscratch.startX+t._private.rscratch.endX)/2,s=(t._private.rscratch.startY+t._private.rscratch.endY)/2):"bezier"==t._private.rscratch.edgeType&&(o=.25*t._private.rscratch.startX+.5*t._private.rscratch.cp2x+.25*t._private.rscratch.endX,s=Math.pow(.5,2)*t._private.rscratch.startY+.5*t._private.rscratch.cp2y+.25*t._private.rscratch.endY),i=o,n=s;var l=t._private.rstyle;l.labelX=i,l.labelY=n,this.drawText(e,t,i,n)}}},t.prototype.drawNode=function(e,t,r){var a,i;if("visible"==t._private.style.visibility.value){for(var n=1,s=t.parents(),l=0;l<s.length;l++){var c=s[l],p=c._private.style.opacity.value;if(n=p*n,0===p)return}if(a=this.getNodeWidth(t),i=this.getNodeHeight(t),void 0!==r&&r){var d=t._private.style["overlay-padding"].value,v=t._private.style["overlay-opacity"].value,g=t._private.style["overlay-color"].value;v>0&&(e.fillStyle="rgba( "+g[0]+", "+g[1]+", "+g[2]+", "+v+" )",o[this.getNodeShape(t)].draw(e,t._private.position.x,t._private.position.y,a+2*d,i+2*d))}else{e.fillStyle="rgba("+t._private.style["background-color"].value[0]+","+t._private.style["background-color"].value[1]+","+t._private.style["background-color"].value[2]+","+t._private.style["background-opacity"].value*t._private.style.opacity.value*n+")",e.strokeStyle="rgba("+t._private.style["border-color"].value[0]+","+t._private.style["border-color"].value[1]+","+t._private.style["border-color"].value[2]+","+t._private.style["border-opacity"].value*t._private.style.opacity.value*n+")";var f=t._private.style["background-image"].value[2]||t._private.style["background-image"].value[1];if(void 0!=f){var y=this,m=this.getCachedImage(f,function(){y.data.canvasNeedsRedraw[h]=!0,y.data.canvasRedrawReason[h].push("image finished load"),y.data.canvasNeedsRedraw[u]=!0,y.data.canvasRedrawReason[u].push("image finished load"),y.swapCachedImage(f),y.redraw()});0==m.complete?(o[y.getNodeShape(t)].drawPath(e,t._private.position.x,t._private.position.y,a,i),e.stroke(),e.fillStyle="#555555",e.fill()):this.drawInscribedImage(e,m,t)}else o[this.getNodeShape(t)].draw(e,t._private.position.x,t._private.position.y,a,i);e.lineWidth=t._private.style["border-width"].pxValue,t._private.style["border-width"].value>0&&e.stroke()}}},t.prototype.drawInscribedImage=function(e,t,r){var a=this,i=(this.data.cy._private.zoom,r._private.position.x),n=r._private.position.y,s=this.getNodeWidth(r),l=this.getNodeHeight(r);e.save(),o[a.getNodeShape(r)].drawPath(e,i,n,s,l),e.clip();var c=[t.width,t.height];e.drawImage(t,i-c[0]/2,n-c[1]/2,c[0],c[1]),e.restore(),e.stroke()},t.prototype.drawNodeText=function(e,t){if("visible"==t._private.style.visibility.value){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pxValue;if(!(a>r)){var i,n,o=this.getNodeWidth(t),s=this.getNodeHeight(t),l=t._private.style["text-halign"].strValue;"left"==l?(e.textAlign="right",i=t._private.position.x-o/2):"right"==l?(e.textAlign="left",i=t._private.position.x+o/2):"center"==l?(e.textAlign="center",i=t._private.position.x):(e.textAlign="center",i=t._private.position.x);var c=t._private.style["text-valign"].strValue;"top"==c?(e.textBaseline="bottom",n=t._private.position.y-s/2):"bottom"==c?(e.textBaseline="top",n=t._private.position.y+s/2):"middle"==c||"center"==c?(e.textBaseline="middle",n=t._private.position.y):(e.textBaseline="middle",n=t._private.position.y),this.drawText(e,t,i,n)}}},t.prototype.drawText=function(e,t,r,a){for(var i=1,n=t.parents(),o=0;o<n.length;o++){var s=n[o],l=s._private.style.opacity.value;if(i=l*i,0===l)return}var c=t._private.style["font-style"].strValue,p=t._private.style["font-size"].value+"px",u=t._private.style["font-family"].strValue,d=(t._private.style["font-variant"].strValue,t._private.style["font-weight"].strValue);e.font=c+" "+d+" "+p+" "+u;var h=String(t._private.style.content.value),v=t._private.style["text-transform"].value;if("none"==v||("uppercase"==v?h=h.toUpperCase():"lowercase"==v&&(h=h.toLowerCase())),e.lineJoin="round",e.fillStyle="rgba("+t._private.style.color.value[0]+","+t._private.style.color.value[1]+","+t._private.style.color.value[2]+","+t._private.style["text-opacity"].value*t._private.style.opacity.value*i+")",e.strokeStyle="rgba("+t._private.style["text-outline-color"].value[0]+","+t._private.style["text-outline-color"].value[1]+","+t._private.style["text-outline-color"].value[2]+","+t._private.style["text-opacity"].value*t._private.style.opacity.value*i+")",void 0!=h){var g=2*t._private.style["text-outline-width"].value;g>0&&(e.lineWidth=g,e.strokeText(h,r,a)),isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.fillText(""+h,r,a),t._private.rstyle.labelWidth=e.measureText(h).width}},t.prototype.drawBackground=function(e,t,r,a,i){},t.prototype.findEdgeControlPoints=function(e){for(var t,r={},a=this.data.cy,i=[],n=0;n<e.length;n++)t=e[n]._private.data.source>e[n]._private.data.target?e[n]._private.data.target+"-"+e[n]._private.data.source:e[n]._private.data.source+"-"+e[n]._private.data.target,void 0==r[t]&&(r[t]=[]),r[t].push(e[n]),i.push(t);for(var o,s,l=0;l<i.length;l++){t=i[l],o=a.getElementById(r[t][0]._private.data.source),s=a.getElementById(r[t][0]._private.data.target);var c,p,u=(o._private.position.x+s._private.position.x)/2,d=(o._private.position.y+s._private.position.y)/2;if(r[t].length>1){c=s._private.position.y-o._private.position.y,p=o._private.position.x-s._private.position.x;var h=Math.sqrt(c*c+p*p);c/=h,p/=h}for(var v,n=0;n<r[t].length;n++){v=r[t][n];var g=v._private.rscratch.lastEdgeIndex,f=n,y=v._private.rscratch.lastNumEdges,m=r[t].length,w=v._private.rscratch.lastSrcCtlPtX,b=o._private.position.x,_=v._private.rscratch.lastSrcCtlPtY,x=o._private.position.y,M=v._private.rscratch.lastSrcCtlPtW,E=o.outerWidth(),S=v._private.rscratch.lastSrcCtlPtH,D=o.outerHeight(),C=v._private.rscratch.lastTgtCtlPtX,P=s._private.position.x,k=v._private.rscratch.lastTgtCtlPtY,T=s._private.position.y,I=v._private.rscratch.lastTgtCtlPtW,N=s.outerWidth(),z=v._private.rscratch.lastTgtCtlPtH,R=s.outerHeight();if(w!==b||_!==x||M!==E||S!==D||C!==P||k!==T||I!==N||z!==R||g!==f||y!==m){var B=v._private.rscratch;if(B.lastSrcCtlPtX=b,B.lastSrcCtlPtY=x,B.lastSrcCtlPtW=E,B.lastSrcCtlPtH=D,B.lastTgtCtlPtX=P,B.lastTgtCtlPtY=T,B.lastTgtCtlPtW=N,B.lastTgtCtlPtH=R,B.lastEdgeIndex=f,B.lastNumEdges=m,o._private.data.id==s._private.data.id){var q=v._private.style["control-point-step-size"].pxValue;v._private.rscratch.edgeType="self",v._private.rscratch.cp2ax=o._private.position.x,v._private.rscratch.cp2ay=o._private.position.y-(1+Math.pow(this.getNodeHeight(o),1.12)/100)*q*(n/3+1),v._private.rscratch.cp2cx=o._private.position.x-(1+Math.pow(this.getNodeWidth(o),1.12)/100)*q*(n/3+1),v._private.rscratch.cp2cy=o._private.position.y,v._private.rscratch.selfEdgeMidX=(v._private.rscratch.cp2ax+v._private.rscratch.cp2cx)/2,v._private.rscratch.selfEdgeMidY=(v._private.rscratch.cp2ay+v._private.rscratch.cp2cy)/2}else if(r[t].length%2==1&&n==Math.floor(r[t].length/2))v._private.rscratch.edgeType="straight";else{var q=v._private.style["control-point-step-size"].value,A=(.5-r[t].length/2+n)*q;v._private.rscratch.edgeType="bezier",v._private.rscratch.cp2x=u+c*A,v._private.rscratch.cp2y=d+p*A}}}}return r},t.prototype.findEndpoints=function(e){var t,r=e.source()[0],a=e.target()[0],n=Math.max(this.getNodeWidth(r),this.getNodeHeight(r)),s=Math.max(this.getNodeWidth(a),this.getNodeHeight(a));n=0,s/=2;var l=[e.source().position().x,e.source().position().y],c=[e.target().position().x,e.target().position().y];if("self"==e._private.rscratch.edgeType){var p=[e._private.rscratch.cp2cx,e._private.rscratch.cp2cy];t=o[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),p[0],p[1],a._private.style["border-width"].value/2);var u=this.shortenIntersection(t,p,i[e._private.style["target-arrow-shape"].value].spacing(e)),d=this.shortenIntersection(t,p,i[e._private.style["target-arrow-shape"].value].gap(e));e._private.rscratch.endX=d[0],e._private.rscratch.endY=d[1],e._private.rscratch.arrowEndX=u[0],e._private.rscratch.arrowEndY=u[1];var p=[e._private.rscratch.cp2ax,e._private.rscratch.cp2ay];t=o[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),p[0],p[1],r._private.style["border-width"].value/2);var h=this.shortenIntersection(t,p,i[e._private.style["source-arrow-shape"].value].spacing(e)),v=this.shortenIntersection(t,p,i[e._private.style["source-arrow-shape"].value].gap(e));e._private.rscratch.startX=v[0],e._private.rscratch.startY=v[1],e._private.rscratch.arrowStartX=h[0],e._private.rscratch.arrowStartY=h[1]}else if("straight"==e._private.rscratch.edgeType){t=o[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),r.position().x,r.position().y,a._private.style["border-width"].value/2),0==t.length?e._private.rscratch.noArrowPlacement=!0:e._private.rscratch.noArrowPlacement=!1;var u=this.shortenIntersection(t,[r.position().x,r.position().y],i[e._private.style["target-arrow-shape"].value].spacing(e)),d=this.shortenIntersection(t,[r.position().x,r.position().y],i[e._private.style["target-arrow-shape"].value].gap(e));e._private.rscratch.endX=d[0],e._private.rscratch.endY=d[1],e._private.rscratch.arrowEndX=u[0],e._private.rscratch.arrowEndY=u[1],t=o[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),a.position().x,a.position().y,r._private.style["border-width"].value/2),0==t.length?e._private.rscratch.noArrowPlacement=!0:e._private.rscratch.noArrowPlacement=!1;var h=this.shortenIntersection(t,[a.position().x,a.position().y],i[e._private.style["source-arrow-shape"].value].spacing(e)),v=this.shortenIntersection(t,[a.position().x,a.position().y],i[e._private.style["source-arrow-shape"].value].gap(e));e._private.rscratch.startX=v[0],e._private.rscratch.startY=v[1],e._private.rscratch.arrowStartX=h[0],e._private.rscratch.arrowStartY=h[1]}else if("bezier"==e._private.rscratch.edgeType){var p=[e._private.rscratch.cp2x,e._private.rscratch.cp2y];.25*l[0]+.25*c[0]+.5*p[0],.25*l[1]+.25*c[1]+.5*p[1];t=o[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),p[0],p[1],a._private.style["border-width"].value/2);var u=this.shortenIntersection(t,p,i[e._private.style["target-arrow-shape"].value].spacing(e)),d=this.shortenIntersection(t,p,i[e._private.style["target-arrow-shape"].value].gap(e));e._private.rscratch.endX=d[0],e._private.rscratch.endY=d[1],e._private.rscratch.arrowEndX=u[0],e._private.rscratch.arrowEndY=u[1],t=o[this.getNodeShape(r)].intersectLine(r._private.position.x,r._private.position.y,this.getNodeWidth(r),this.getNodeHeight(r),p[0],p[1],r._private.style["border-width"].value/2);var h=this.shortenIntersection(t,p,i[e._private.style["source-arrow-shape"].value].spacing(e)),v=this.shortenIntersection(t,p,i[e._private.style["source-arrow-shape"].value].gap(e));e._private.rscratch.startX=v[0],e._private.rscratch.startY=v[1],e._private.rscratch.arrowStartX=h[0],e._private.rscratch.arrowStartY=h[1]}else if(e._private.rscratch.isArcEdge)return},t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),r={},a=[],i=0;i<e.length;i++)r[e[i]._private.data.id]=e[i];for(var i=0;i<t.length;i++)(r[t[i]._private.data.source]||r[t[i]._private.data.target])&&a.push(t[i]);return a},t.prototype.intersectLineEllipse=function(e,t,r,a,i,n){var o=r-e,s=a-t;o/=i,s/=n;var l=Math.sqrt(o*o+s*s),c=l-1;if(0>c)return[];var p=c/l;return[(r-e)*p+e,(a-t)*p+t]},t.prototype.findCircleNearPoint=function(e,t,r,a,i){var n=a-e,o=i-t,s=Math.sqrt(n*n+o*o),l=n/s,c=o/s;return[e+l*r,t+c*r]},t.prototype.findMaxSqDistanceToOrigin=function(e){for(var t,r=1e-6,a=0;a<e.length/2;a++)t=e[2*a]*e[2*a]+e[2*a+1]*e[2*a+1],t>r&&(r=t);return r},t.prototype.finiteLinesIntersect=function(e,t,r,a,i,n,o,s,l){var c=(o-i)*(t-n)-(s-n)*(e-i),p=(r-e)*(t-n)-(a-t)*(e-i),u=(s-n)*(r-e)-(o-i)*(a-t);if(0!=u){var d=c/u,h=p/u;return d>=0&&1>=d&&h>=0&&1>=h?[e+d*(r-e),t+d*(a-t)]:l?[e+d*(r-e),t+d*(a-t)]:[]}return 0==c||0==p?[e,r,o].sort()[1]==o?[o,s]:[e,r,i].sort()[1]==i?[i,n]:[i,o,r].sort()[1]==r?[r,a]:[]:[]},t.prototype.boxIntersectEllipse=function(e,t,r,a,i,n,o,s,l){if(e>r){var c=e;e=r,r=c}if(t>a){var p=t;t=a,a=p}var u=[s-n/2-i,l],d=[s+n/2+i,l],h=[s,l-o/2-i],v=[s,l+o/2+i];return r<u[0]?!1:e>d[0]?!1:t>v[1]?!1:a<h[1]?!1:e<=d[0]&&d[0]<=r&&t<=d[1]&&d[1]<=a?!0:e<=u[0]&&u[0]<=r&&t<=u[1]&&u[1]<=a?!0:e<=h[0]&&h[0]<=r&&t<=h[1]&&h[1]<=a?!0:e<=v[0]&&v[0]<=r&&t<=v[1]&&v[1]<=a?!0:(e=(e-s)/(n/2+i),r=(r-s)/(n/2+i),t=(t-l)/(o/2+i),a=(a-l)/(o/2+i),1>=e*e+t*t?!0:1>=r*r+t*t?!0:1>=r*r+a*a?!0:1>=e*e+a*a)},t.prototype.boxIntersectPolygon=function(e,t,r,a,i,n,o,s,l,c,p){if(e>r){var u=e;e=r,r=u}if(t>a){var d=t;t=a,a=d}var h=new Array(i.length),v=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?v+=Math.PI/2:v=-v-Math.PI/2;for(var g=Math.cos(-v),f=Math.sin(-v),y=0;y<h.length/2;y++)h[2*y]=n/2*(i[2*y]*g-i[2*y+1]*f),h[2*y+1]=o/2*(i[2*y+1]*g+i[2*y]*f),h[2*y]+=s,h[2*y+1]+=l;for(var m=h[0],w=h[0],b=h[1],_=h[1],y=1;y<h.length/2;y++)h[2*y]>w&&(w=h[2*y]),h[2*y]<m&&(m=h[2*y]),h[2*y+1]>_&&(_=h[2*y+1]),h[2*y+1]<b&&(b=h[2*y+1]);if(m-p>r)return!1;if(e>w+p)return!1;if(b-p>a)return!1;if(t>_+p)return!1;var x;if(p>0){var M=E.expandPolygon(h,-p);x=E.joinLines(M)}else x=h;for(var y=0;y<h.length/2;y++)if(e<=h[2*y]&&h[2*y]<=r&&t<=h[2*y+1]&&h[2*y+1]<=a)return!0;for(var y=0;y<x.length/2;y++){var S,D,C=x[2*y],P=x[2*y+1];if(y<x.length/2-1?(S=x[2*(y+1)],D=x[2*(y+1)+1]):(S=x[0],D=x[1]),E.finiteLinesIntersect(C,P,S,D,e,t,r,t,!1).length>0)return!0;if(E.finiteLinesIntersect(C,P,S,D,e,a,r,a,!1).length>0)return!0;if(E.finiteLinesIntersect(C,P,S,D,e,t,e,a,!1).length>0)return!0;if(E.finiteLinesIntersect(C,P,S,D,r,t,r,a,!1).length>0)return!0}return!1},t.prototype.polygonIntersectLine=function(e,t,r,a,i,n,o,s){for(var l,c=[],p=new Array(r.length),u=0;u<p.length/2;u++)p[2*u]=r[2*u]*n+a,p[2*u+1]=r[2*u+1]*o+i;var d;if(s>0){var h=E.expandPolygon(p,-s);d=E.joinLines(h)}else d=p;for(var v,g,f,y,u=0;u<d.length/2;u++)v=d[2*u],g=d[2*u+1],u<d.length/2-1?(f=d[2*(u+1)],y=d[2*(u+1)+1]):(f=d[0],y=d[1]),l=this.finiteLinesIntersect(e,t,a,i,v,g,f,y),0!=l.length&&c.push(l[0],l[1]);return c},t.prototype.shortenIntersection=function(e,t,r){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),n=(i-r)/i;return 0>n?[]:[t[0]+n*a[0],t[1]+n*a[1]]},i.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(e,t,r,a,n,o,l,c){var p=i.arrow._points;return s.pointInsidePolygon(e,t,p,r,a,n,o,l,c)},roughCollide:function(e,t,r,a,n,o,l,c){return"undefined"==typeof i.arrow._farthestPointSqDistance&&(i.arrow._farthestPointSqDistance=s.findMaxSqDistanceToOrigin(i.arrow._points)),s.checkInBoundingCircle(e,t,i.arrow._farthestPointSqDistance,0,n,o,r,a)},draw:function(e){for(var t=i.arrow._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(e){return 0},gap:function(e){return 2*e._private.style.width.value}},i.triangle=i.arrow,i.none={collide:function(e,t,r,a,i,n,o,s){return!1},roughCollide:function(e,t,r,a,i,n,o,s){return!1},draw:function(e){},spacing:function(e){return 0},gap:function(e){return 0}},i.circle={_baseRadius:.15,collide:function(e,t,r,a,n,o,s,l){if(n!=o){var c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1])),p=(Math.cos(-c),Math.sin(-c),(o+l)/(n+l));return t/=p,a/=p,Math.pow(r-e,2)+Math.pow(a-t,2)<=Math.pow((n+l)*i.circle._baseRadius,2)}return Math.pow(r-e,2)+Math.pow(a-t,2)<=Math.pow((n+l)*i.circle._baseRadius,2)},roughCollide:function(e,t,r,a,i,n,o,s){return!0},draw:function(e){e.arc(0,0,i.circle._baseRadius,0,2*Math.PI,!1)},spacing:function(e){return s.getArrowWidth(e._private.style.width.value)*i.circle._baseRadius},gap:function(e){return 2*e._private.style.width.value}},i.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(e,t,r,a,n,o,l,c){var p=i.inhibitor._points;return s.pointInsidePolygon(e,t,p,r,a,n,o,l,c)},roughCollide:function(e,t,r,a,n,o,l,c){return"undefined"==typeof i.inhibitor._farthestPointSqDistance&&(i.inhibitor._farthestPointSqDistance=s.findMaxSqDistanceToOrigin(i.inhibitor._points)),s.checkInBoundingCircle(e,t,i.inhibitor._farthestPointSqDistance,0,n,o,r,a)},draw:function(e){for(var t=i.inhibitor._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(e){return 4},gap:function(e){return 4}},i.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(e,t,r,a,n,o,l,c){var p=i.square._points;return s.pointInsidePolygon(e,t,p,r,a,n,o,l,c)},roughCollide:function(e,t,r,a,n,o,l,c){return"undefined"==typeof i.square._farthestPointSqDistance&&(i.square._farthestPointSqDistance=s.findMaxSqDistanceToOrigin(i.square._points)),s.checkInBoundingCircle(e,t,i.square._farthestPointSqDistance,0,n,o,r,a)},draw:function(e){for(var t=i.square._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(e){return 0},gap:function(e){return 2*e._private.style.width.value}},i.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(e,t,r,a,n,o,l,c){var p=i.diamond._points;return s.pointInsidePolygon(e,t,p,r,a,n,o,l,c)},roughCollide:function(e,t,r,a,n,o,l,c){return"undefined"==typeof i.diamond._farthestPointSqDistance&&(i.diamond._farthestPointSqDistance=s.findMaxSqDistanceToOrigin(i.diamond._points)),s.checkInBoundingCircle(e,t,i.diamond._farthestPointSqDistance,0,n,o,r,a)},draw:function(e){e.lineTo(-.14,-.14),e.lineTo(0,-.28),e.lineTo(.14,-.14),e.lineTo(0,0)},spacing:function(e){return 0},gap:function(e){return 2*e._private.style.width.value}},i.tee=i.inhibitor,t.prototype.getArrowWidth=function(e){return Math.max(Math.pow(13.37*e,.9),29)},t.prototype.getArrowHeight=function(e){return Math.max(Math.pow(13.37*e,.9),29)},t.prototype.drawArrowheads=function(e,t,r){if(!r){var a,i,n=t._private.rscratch.arrowStartX,o=t._private.rscratch.arrowStartY;a=n-t.source().position().x,i=o-t.source().position().y,e.fillStyle="rgba("+t._private.style["source-arrow-color"].value[0]+","+t._private.style["source-arrow-color"].value[1]+","+t._private.style["source-arrow-color"].value[2]+","+t._private.style.opacity.value+")",e.lineWidth=t._private.style.width.value,this.drawArrowShape(e,t._private.style["source-arrow-shape"].value,n,o,a,i);var s=t._private.rscratch.arrowEndX,l=t._private.rscratch.arrowEndY;a=s-t.target().position().x,i=l-t.target().position().y,e.fillStyle="rgba("+t._private.style["target-arrow-color"].value[0]+","+t._private.style["target-arrow-color"].value[1]+","+t._private.style["target-arrow-color"].value[2]+","+t._private.style.opacity.value+")",e.lineWidth=t._private.style.width.value,this.drawArrowShape(e,t._private.style["target-arrow-shape"].value,s,l,a,i)}},t.prototype.drawArrowShape=function(e,t,r,a,n,o){var s=Math.asin(o/Math.sqrt(n*n+o*o));0>n?s+=Math.PI/2:s=-(Math.PI/2+s),e.translate(r,a),e.moveTo(0,0),e.rotate(-s);var l=this.getArrowWidth(e.lineWidth);e.scale(l,l),e.beginPath(),i[t].draw(e),e.closePath(),e.fill(),e.scale(1/l,1/l),e.rotate(s),e.translate(-r,-a)};var M=function(e,t){var r=1/e*2*Math.PI,a=e%2==0?Math.PI/2+r/2:Math.PI/2;a+=t;for(var i,n=new Array(2*e),o=0;e>o;o++)i=o*r+a,n[2*o]=Math.cos(i),n[2*o+1]=Math.sin(-i);for(var s=0,l=0,o=0;o<n.length/2;o++)Math.abs(n[2*o]>s)&&(s=Math.abs(n[2*o])),Math.abs(n[2*o+1]>l)&&(l=Math.abs(n[2*o+1]));for(var c=5e-4,p=Math.max(s,l),o=0;o<n.length/2;o++)p>c&&(n[2*o]*=1/p,n[2*o+1]*=1/p);return n},E=s;o.ellipse={draw:function(e,t,r,a,i){o.ellipse.drawPath(e,t,r,a,i),e.fill()},drawPath:function(e,t,r,a,i){e.beginPath(),e.translate(t,r),e.scale(a/2,i/2),e.arc(0,0,1,0,2*Math.PI*.999,!1),e.closePath(),e.scale(2/a,2/i),e.translate(-t,-r)},intersectLine:function(e,t,r,a,i,n,o){var l=s.intersectLineEllipse(i,n,e,t,r/2+o,a/2+o);return l},intersectBox:function(e,r,a,i,n,o,s,l,c){return t.prototype.boxIntersectEllipse(e,r,a,i,c,n,o,s,l)},checkPointRough:function(e,t,r,a,i,n,o){return!0},checkPoint:function(e,t,r,a,i,n,o){return e-=n,t-=o,e/=a+r,t/=i+r,Math.pow(e,2)+Math.pow(t,2)<=1}},o.triangle={points:M(3,0),draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.triangle.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.triangle.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.triangle.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.triangle.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.triangle.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.triangle.points,n,s,a,i,[0,-1],r)}},o.square={points:M(4,0),draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.square.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.square.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.square.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.square.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.square.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.square.points,n,s,a,i,[0,-1],r)}},o.rectangle=o.square,o.octogon={},o.roundrectangle=o.square,o.roundrectangle2={roundness:4.99,draw:function(e,t,r){t<=2*roundness||E.drawPolygon(e._private.position.x,e._private.position.y,t,r,nodeSapes.roundrectangle2.points)},intersectLine:function(e,t,r,a,i){return E.findPolygonIntersection(e,t,r,a,i,o.square.points)},intersectBox:function(e,t,r,a,i,n,s,l,c){o.square.points}},o.pentagon={points:M(5,0),draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.pentagon.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.pentagon.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.pentagon.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.pentagon.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.pentagon.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.pentagon.points,n,s,a,i,[0,-1],r)}},o.hexagon={points:M(6,0),draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.hexagon.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.hexagon.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.hexagon.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.hexagon.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.hexagon.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.hexagon.points,n,s,a,i,[0,-1],r)}},o.heptagon={points:M(7,0),draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.heptagon.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.heptagon.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.heptagon.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.heptagon.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.heptagon.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.heptagon.points,n,s,a,i,[0,-1],r)}},o.octagon={points:M(8,0),draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.octagon.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.octagon.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.octagon.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.octagon.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.octagon.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.octagon.points,n,s,a,i,[0,-1],r)}};var S=new Array(20),D=M(5,0),C=M(5,Math.PI/5),P=.5*(3-Math.sqrt(5));P*=1.57;for(var k=0;k<C.length/2;k++)C[2*k]*=P,C[2*k+1]*=P;for(var k=0;5>k;k++)S[4*k]=D[2*k],S[4*k+1]=D[2*k+1],S[4*k+2]=C[2*k],S[4*k+3]=C[2*k+1];o.star5={points:S,draw:function(e,t,r,a,i){E.drawPolygon(e,t,r,a,i,o.star5.points)},drawPath:function(e,t,r,a,i){E.drawPolygonPath(e,t,r,a,i,o.star5.points)},intersectLine:function(e,t,r,a,i,n,s){return E.polygonIntersectLine(i,n,o.star5.points,e,t,r/2,a/2,s)},intersectBox:function(e,t,r,a,i,n,s,l,c){var p=o.star5.points;return E.boxIntersectPolygon(e,t,r,a,p,i,n,s,l,[0,-1],c)},checkPointRough:function(e,t,r,a,i,n,s){return E.checkInBoundingBox(e,t,o.star5.points,r,a,i,n,s)},checkPoint:function(e,t,r,a,i,n,s){return E.pointInsidePolygon(e,t,o.star5.points,n,s,a,i,[0,-1],r)}},t.prototype.expandPolygon=function(e,t){for(var r,a,i,n,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],a=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],n=e[2*(s+1)+1]):(i=e[0],n=e[1]);var l=n-a,c=-(i-r),p=Math.sqrt(l*l+c*c),u=l/p,d=c/p;o[4*s]=r+u*t,o[4*s+1]=a+d*t,o[4*s+2]=i+u*t,o[4*s+3]=n+d*t}return o},t.prototype.joinLines=function(e){for(var t,r,a,i,n,o,s,l,c=new Array(e.length/2),p=0;p<e.length/4;p++){t=e[4*p],r=e[4*p+1],a=e[4*p+2],i=e[4*p+3],p<e.length/4-1?(n=e[4*(p+1)],o=e[4*(p+1)+1],s=e[4*(p+1)+2],l=e[4*(p+1)+3]):(n=e[0],o=e[1],s=e[2],l=e[3]);var u=this.finiteLinesIntersect(t,r,a,i,n,o,s,l,!0);c[2*p]=u[0],c[2*p+1]=u[1]}return c},t.prototype.pointInsidePolygon=function(e,t,r,a,i,n,o,s,l){var c=new Array(r.length),p=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?p+=Math.PI/2:p=-p-Math.PI/2;for(var u=Math.cos(-p),d=Math.sin(-p),h=0;h<c.length/2;h++)c[2*h]=n*(r[2*h]*u-r[2*h+1]*d),c[2*h+1]=o*(r[2*h+1]*u+r[2*h]*d),c[2*h]+=a,c[2*h+1]+=i;var v;if(l>0){var g=E.expandPolygon(c,-l);v=E.joinLines(g)}else v=c;for(var f,y,m,w,b,_=0,x=0,h=0;h<v.length/2;h++)if(f=v[2*h],y=v[2*h+1],h+1<v.length/2?(m=v[2*(h+1)],w=v[2*(h+1)+1]):(m=v[2*(h+1-v.length/2)],w=v[2*(h+1-v.length/2)+1]),f==e&&m==e);else{if(!(f>=e&&e>=m||e>=f&&m>=e))continue;b=(e-f)/(m-f)*(w-y)+y,b>t&&_++,
t>b&&x++}return _%2!=0},t.prototype.drawPolygonPath=function(e,t,r,a,i,n){e.translate(t,r),e.scale(a/2,i/2),e.beginPath(),e.moveTo(n[0],n[1]);for(var o=1;o<n.length/2;o++)e.lineTo(n[2*o],n[2*o+1]);e.closePath(),e.scale(2/a,2/i),e.translate(-t,-r)},t.prototype.drawPolygon=function(e,t,r,a,i,n){this.drawPolygonPath(e,t,r,a,i,n),e.fill()},t.prototype.checkInBoundingCircle=function(e,t,r,a,i,n,o,s){return e=(e-o)/(i+a),t=(t-s)/(n+a),r>=e*e+t*t},t.prototype.checkInBoundingBox=function(e,t,r,a,i,n,o,s){for(var l=r[0],c=r[1],p=r[0],u=r[1],d=1;d<r.length/2;d++)r[2*d]<l?l=r[2*d]:r[2*d]>p&&(p=r[2*d]),r[2*d+1]<c?c=r[2*d+1]:r[2*d+1]>u&&(u=r[2*d+1]);return e-=o,t-=s,e/=i,t/=n,l>e?!1:e>p?!1:c>t?!1:!(t>u)},t.prototype.boxInBezierVicinity=function(e,t,r,a,i,n,o,s,l,c,p){var u=.25*i+.5*o+.25*l,d=.25*n+.5*s+.25*c,h=Math.min(e,r)-p,v=Math.min(t,a)-p,g=Math.max(e,r)+p,f=Math.max(t,a)+p;if(i>=h&&g>=i&&n>=v&&f>=n)return 1;if(l>=h&&g>=l&&c>=v&&f>=c)return 1;if(u>=h&&g>=u&&d>=v&&f>=d)return 1;if(o>=h&&g>=o&&s>=v&&f>=s)return 1;var y=Math.min(i,u,l),m=Math.min(n,d,c),w=Math.max(i,u,l),b=Math.max(n,d,c);return y>g||h>w||m>f||v>b?0:1},t.prototype.checkBezierInBox=function(e,t,r,a,i,n,o,s,l,c,p){function u(e,t,r,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*r}function d(p){var d=u(i,o,l,p),h=u(n,s,c,p);return d>=e&&r>=d&&h>=t&&a>=h}for(var h=0;1>=h;h+=.25)if(!d(h))return!1;return!0},t.prototype.checkStraightEdgeInBox=function(e,t,r,a,i,n,o,s,l){return i>=e&&r>=i&&o>=e&&r>=o&&n>=t&&a>=n&&s>=t&&a>=s},t.prototype.checkStraightEdgeCrossesBox=function(e,t,r,a,i,n,o,s,l){var c,p,u=Math.min(e,r)-l,d=Math.min(t,a)-l,h=Math.max(e,r)+l,v=Math.max(t,a)+l,g=o-i,f=i,y=s-n,m=n;if(Math.abs(g)<1e-4)return i>=u&&h>=i&&Math.min(n,s)<=d&&Math.max(n,s)>=v;var w=(u-f)/g;if(w>0&&1>=w&&(c=y*w+m,c>=d&&v>=c))return!0;var b=(h-f)/g;if(b>0&&1>=b&&(c=y*b+m,c>=d&&v>=c))return!0;var _=(d-m)/y;if(_>0&&1>=_&&(p=g*_+f,p>=u&&h>=p))return!0;var x=(v-m)/y;return x>0&&1>=x&&(p=g*x+f,p>=u&&h>=p)},t.prototype.checkBezierCrossesBox=function(e,t,r,a,i,n,o,s,l,c,p){var u=Math.min(e,r)-p,d=Math.min(t,a)-p,h=Math.max(e,r)+p,v=Math.max(t,a)+p;if(i>=u&&h>=i&&n>=d&&v>=n)return!0;if(l>=u&&h>=l&&c>=d&&v>=c)return!0;var g=i-2*o+l,f=-2*i+2*o,y=i,m=[];if(Math.abs(g)<1e-4){var w=(u-i)/f,b=(h-i)/f;m.push(w,b)}else{var _,x,M=f*f-4*g*(y-u);if(M>0){var E=Math.sqrt(M);_=(-f+E)/(2*g),x=(-f-E)/(2*g),m.push(_,x)}var S,D,C=f*f-4*g*(y-h);if(C>0){var E=Math.sqrt(C);S=(-f+E)/(2*g),D=(-f-E)/(2*g),m.push(S,D)}}m.sort(function(e,t){return e-t});var P=n-2*s+c,k=-2*n+2*s,T=n,I=[];if(Math.abs(P)<1e-4){var N=(d-n)/k,z=(v-n)/k;I.push(N,z)}else{var R,B,q=k*k-4*P*(T-d);if(q>0){var E=Math.sqrt(q);R=(-k+E)/(2*P),B=(-k-E)/(2*P),I.push(R,B)}var A,X,Y=k*k-4*P*(T-v);if(Y>0){var E=Math.sqrt(Y);A=(-k+E)/(2*P),X=(-k-E)/(2*P),I.push(A,X)}}I.sort(function(e,t){return e-t});for(var V=0;V<m.length;V+=2)for(var $=1;$<I.length;$+=2)if(m[V]<I[$]&&I[$]>=0&&m[V]<=1&&m[V+1]>I[$-1]&&I[$-1]<=1&&m[V+1]>=0)return!0;return!1},t.prototype.inLineVicinity=function(e,t,r,a,i,n,o){var s=o,l=Math.min(r,i),c=Math.max(r,i),p=Math.min(a,n),u=Math.max(a,n);return e>=l-s&&c+s>=e&&t>=p-s&&u+s>=t},t.prototype.inBezierVicinity=function(e,t,r,a,i,n,o,s,l){var c=.25*r+.5*i+.25*o,p=.25*a+.5*n+.25*s,u={x1:Math.min(r,o,c),x2:Math.max(r,o,c),y1:Math.min(a,s,p),y2:Math.max(a,s,p)};if(e<u.x1||e>u.x2||t<u.y1||t>u.y2)return!1;var d,h,v=function(e,t,r,a,i,n,o,s){if(d=(n-a)*(e-r)+(r-i)*(t-a),h=d*d,sideSquared=(n-a)*(n-a)+(r-i)*(r-i),s){if(d>0)return!1}else if(0>d)return!1;return h/sideSquared>o},g=(c+i)/2,f=(p+n)/2,y=!0;return v(g,f,r,a,i,n,0,y)&&(y=!y),!v(e,t,r,a,i,n,l,y)&&!v(e,t,i,n,o,s,l,y)&&!v(e,t,o,s,r,a,l,y)},t.prototype.solveCubic=function(e,t,r,a,i){t/=e,r/=e,a/=e;var n,o,s,l,c,p,u,d;return o=(3*r-t*t)/9,s=-(27*a)+t*(9*r-2*(t*t)),s/=54,n=o*o*o+s*s,i[1]=0,u=t/3,n>0?(c=s+Math.sqrt(n),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),p=s-Math.sqrt(n),p=0>p?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-u+c+p,u+=(c+p)/2,i[4]=i[2]=-u,u=Math.sqrt(3)*(-p+c)/2,i[3]=u,void(i[5]=-u)):(i[5]=i[3]=0,0==n?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-u+2*d,void(i[4]=i[2]=-(d+u))):(o=-o,l=o*o*o,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(o),i[0]=-u+d*Math.cos(l/3),i[2]=-u+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-u+d*Math.cos((l+4*Math.PI)/3))))},t.prototype.sqDistanceToQuadraticBezier=function(e,t,r,a,i,n,o,s){var l=1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+a*a-4*a*n+2*a*s+4*n*n-4*n*s+s*s,c=9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*a*n-3*a*a-3*a*s-6*n*n+3*n*s,p=3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*a*a-6*a*n+a*s-a*t+2*n*n+2*n*t-s*t,u=1*r*i-r*r+r*e-i*e+a*n-a*a+a*t-n*t;T("coefficients: "+l/l+", "+c/l+", "+p/l+", "+u/l);var d=[];this.solveCubic(l,c,p,u,d);for(var h=1e-7,v=[],g=0;6>g;g+=2)Math.abs(d[g+1])<h&&d[g]>=0&&d[g]<=1&&v.push(d[g]);v.push(1),v.push(0);for(var f,y,m,w,b=-1,_=0;_<v.length;_++)y=Math.pow(1-v[_],2)*r+2*(1-v[_])*v[_]*i+v[_]*v[_]*o,m=Math.pow(1-v[_],2)*a+2*(1-v[_])*v[_]*n+v[_]*v[_]*s,w=Math.pow(y-e,2)+Math.pow(m-t,2),T("distance for param "+v[_]+": "+Math.sqrt(w)),b>=0?b>w&&(b=w,f=v[_]):(b=w,f=v[_]);return T("given: ( "+e+", "+t+"), ( "+r+", "+a+"), ( "+i+", "+n+"), ( "+o+", "+s+")"),T("roots: "+d),T("params: "+v),T("closest param: "+f),b},t.prototype.sqDistanceToFiniteLine=function(e,t,r,a,i,n){var o=[e-r,t-a],s=[i-r,n-a],l=s[0]*s[0]+s[1]*s[1],c=o[0]*o[0]+o[1]*o[1],p=o[0]*s[0]+o[1]*s[1],u=p*p/l;return 0>p?c:u>l?(e-i)*(e-i)+(t-n)*(t-n):c-u};var T=function(){};e("renderer","canvas",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:function(){},stop:function(){}};t.prototype.run=function(){var e=this.options,t=e.cy;t.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",e.ready),t.trigger("layoutready"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop),cy.trigger("layoutstop")},e("layout","null",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:void 0,stop:void 0,fit:!0,padding:30};t.prototype.run=function(){var e=this.options,t=e.cy,r=t.nodes(),a=(t.edges(),t.container()),i=a.clientWidth,n=a.clientHeight;r.positions(function(e,t){return t.locked()?!1:{x:Math.round(Math.random()*i),y:Math.round(Math.random()*n)}}),t.one("layoutready",e.ready),t.trigger("layoutready"),e.fit&&t.fit(e.padding),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","random",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,rows:void 0,columns:void 0,ready:void 0,stop:void 0};t.prototype.run=function(){function e(e){if(void 0==e)return Math.min(u,d);var t=Math.min(u,d);t==u?u=e:d=e}function t(e){if(void 0==e)return Math.max(u,d);var t=Math.max(u,d);t==u?u=e:d=e}var r=this.options,a=r,i=r.cy,n=i.nodes(),o=(i.edges(),i.container()),s=o.clientWidth,l=o.clientHeight;if(0==l||0==s)n.positions(function(){return{x:0,y:0}});else{var c=n.size(),p=Math.sqrt(c*l/s),u=Math.round(p),d=Math.round(s/l*p);if(null!=a.rows&&null!=a.columns)u=a.rows,d=a.columns;else if(null!=a.rows&&null==a.columns)u=a.rows,d=Math.ceil(c/u);else if(null==a.rows&&null!=a.columns)d=a.columns,u=Math.ceil(c/d);else if(d*u>c){var h=e(),v=t();(h-1)*v>=c?e(h-1):(v-1)*h>=c&&t(v-1)}else for(;c>d*u;){var h=e(),v=t();(v+1)*h>=c?t(v+1):e(h+1)}var g=s/d,f=l/u,y=0,m=0;n.positions(function(e,t){if(t.locked())return!1;var r=m*g+g/2,a=y*f+f/2;return m++,m>=d&&(m=0,y++),{x:r,y:a}})}r.fit&&i.reset(),i.one("layoutready",r.ready),i.trigger("layoutready"),i.one("layoutstop",r.stop),i.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","grid",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend(!0,{},r,t)}var r={fit:!0,ready:void 0,stop:void 0,positions:void 0,zoom:void 0,pan:void 0,padding:30};t.prototype.run=function(){function e(e){return null==t.positions?null:null==t.positions[e._private.data.id]?null:t.positions[e._private.data.id]}var t=this.options,r=t.cy,a=r.nodes();r.edges(),r.container();a.positions(function(t,r){var a=e(r);return r.locked()||null==a?!1:a}),null!=t.pan&&r.pan(t.pan),null!=t.zoom&&r.zoom(t.zoom),r.one("layoutready",t.ready),r.trigger("layoutready"),t.fit&&r.fit(t.padding),r.one("layoutstop",t.stop),r.trigger("layoutstop")},e("layout","preset",t),e("core","presetLayout",function(){var e=this,t={},r={};return e.nodes().each(function(e,t){r[t.data("id")]=t.position()}),t.positions=r,t.name="preset",t.zoom=e.zoom(),t.pan=e.pan(),t})}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={liveUpdate:!0,ready:void 0,stop:void 0,maxSimulationTime:4e3,fit:!0,padding:[50,50,50,50],ungrabifyWhileSimulating:!0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3}};t.prototype.run=function(){function t(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:o.length,edges:s.length,element:e}]):t}function r(e){var t=e.x,r=e.y,a=c,i=p,n=-2,o=2,s=4;return{x:t/a*s+n,y:r/i*s+o}}function a(e){i.fit&&n.fit(),e()}var i=this.options,n=i.cy,o=n.nodes(),s=n.edges(),l=n.container(),c=l.clientWidth,p=l.clientHeight;if(n.nodes().size()<=1)return i.fit&&n.reset(),n.nodes().position({x:Math.round(c/2),y:Math.round(p/2)}),n.one("layoutstop",i.stop),n.trigger("layoutstop"),n.one("layoutstop",i.stop),void n.trigger("layoutstop");var u=this.system=arbor.ParticleSystem(i.repulsion,i.stiffness,i.friction,i.gravity,i.fps,i.dt,i.precision);this.system=u,i.liveUpdate&&i.fit&&n.reset();var d,h=250,v=!1,g=+new Date,f={init:function(e){},redraw:function(){var t=u.energy();if(null!=i.stableEnergy&&null!=t&&t.n>0&&i.stableEnergy(t))return void u.stop();clearTimeout(d),d=setTimeout(w,h);var r=[];u.eachNode(function(e,t){var a=(e.name,e.data),i=a.element;if(null!=i){var n=i._private.position;i.locked()||i.grabbed()||(n.x=t.x,n.y=t.y,r.push(i))}});var a=+new Date-g>=16;i.liveUpdate&&r.length>0&&a&&(new e.Collection(n,r).rtrigger("position"),g=+new Date),v||(v=!0,n.one("layoutready",i.ready),n.trigger("layoutready"))}};u.renderer=f,u.screenSize(c,p),u.screenPadding(i.padding[0],i.padding[1],i.padding[2],i.padding[3]),u.screenStep(i.stepSize);var y=function(e){grabbed=this;var t=u.fromScreen(this.position()),r=arbor.Point(t.x,t.y);switch(this.scratch().arbor.p=r,e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"dragstop":this.scratch().arbor.fixed=!1,this.scratch().arbor.tempMass=1e3}};o.bind("grab drag dragstop",y),o.each(function(e,a){var n=this._private.data.id,o=t(this,i.nodeMass),s=this._private.locked,l=r({x:a.position().x,y:a.position().y});a.locked()||(this.scratch().arbor=u.addNode(n,{element:this,mass:o,fixed:s,x:s?l.x:void 0,y:s?l.y:void 0}))}),s.each(function(){var e=(this.id(),this.source().id()),r=this.target().id(),a=t(this,i.edgeLength);this.scratch().arbor=u.addEdge(e,r,{length:a})});var m=o.filter(":grabbable");i.ungrabifyWhileSimulating&&m.ungrabify();var w=function(){function e(){i.liveUpdate||(i.fit&&n.reset(),n.nodes().rtrigger("position")),o.unbind("grab drag dragstop",y),i.ungrabifyWhileSimulating&&m.grabify(),n.one("layoutstop",i.stop),n.trigger("layoutstop")}window.isIE?a(function(){e()}):e()};u.start(),setTimeout(function(){u.stop()},i.maxSimulationTime)},t.prototype.stop=function(){null!=this.system&&system.stop()},e("layout","arbor",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,rStepSize:10,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1};t.prototype.run=function(){function e(){var e=0,t=p,r={x:l.x+v*Math.cos(e),y:l.y+v*Math.sin(e)},a={x:l.x+v*Math.cos(t),y:l.y+v*Math.sin(t)},i=Math.sqrt((a.x-r.x)*(a.x-r.x)+(a.y-r.y)*(a.y-r.y));return i}for(var t=this.options,r=t,a=t.cy,i=a.nodes(),n=(a.edges(),a.container()),o=n.clientWidth,s=n.clientHeight,l={x:o/2,y:s/2},c=r.startAngle,p=2*Math.PI/i.length,u=0,d=0;d<i.length;d++){var h=i[d];u=Math.max(h.outerWidth(),h.outerHeight())}for(var v=o/2-u;e()<u;)v+=r.rStepSize;var d=0;i.positions(function(){var e=v*Math.cos(c),t=v*Math.sin(c),a={x:l.x+e,y:l.y+t};return d++,c=r.counterclockwise?c-p:c+p,a}),t.fit&&a.fit(r.padding),a.one("layoutready",t.ready),a.trigger("layoutready"),a.one("layoutstop",t.stop),a.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","circle",t)}(cytoscape),function(e){function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,directed:!0,padding:30,circle:!1,roots:void 0};t.prototype.run=function(){function t(){for(var e=0;e<g.length;e++)for(var t=g[e],r=0;r<t.length;r++){var a=t[r];a._private.scratch.BreadthFirstLayout={depth:e,index:r}}}function r(e){if(k[e.id()])return k[e.id()];for(var t=e._private.scratch.BreadthFirstLayout.depth,r=e.neighborhood().nodes(),a=0,i=0,n=0;n<r.length;n++){var o=r[n],s=(o.edgesWith(e),o._private.scratch.BreadthFirstLayout.index),l=o._private.scratch.BreadthFirstLayout.depth,c=g[l].length;(t>l||0===t)&&(a+=s/c,i++)}return i=Math.max(1,i),a/=i,0===i&&(a=void 0),k[e.id()]=a,a}var a,i=this.options,n=i,o=i.cy,s=o.nodes(),l=(o.edges(),o.container()),c=l.clientWidth,p=l.clientHeight;if(e.is.elementOrCollection(n.roots))a=n.roots;else if(e.is.array(n.roots)){for(var u=[],d=0;d<n.roots.length;d++){var h=n.roots[d],v=o.getElementById(h);a.push(v)}a=new e.Collection(o,u)}else a=s.roots();var g=[],f={},y={};a.bfs(function(e,t){var r=this[0];g[t]||(g[t]=[]),g[t].push(r),f[r.id()]=!0,y[r.id()]=t},n.directed);for(var m=[],d=0;d<s.length;d++){var v=s[d];f[v.id()]||m.push(v)}for(var w=3*m.length,b=0;0!==m.length&&w>b;){for(var _=m.shift(),x=_.neighborhood().nodes(),M=!1,d=0;d<x.length;d++){var E=y[x[d].id()];if(void 0!==E){g[E].push(_),M=!0;break}}M||m.push(_),b++}for(;0!==m.length;){for(var _=m.shift(),S=_.bfs(),M=!1,d=0;d<S.length;d++){var E=y[S[d].id()];if(void 0!==E){g[E].push(_),M=!0;break}}M||(0===g.length&&g.push([]),g[0].push(_))}t();for(var D=0,d=0;d<s.length;d++){var C=s[d].outerWidth(),P=s[d].outerHeight();D=Math.max(D,C,P)}D*=1.75;for(var k={},T=0;3>T;T++){for(var d=0;d<g.length;d++){var E=d;g[d]=g[d].sort(function(e,t){var a=r(e),i=r(t);return a-i})}t()}var I={x:c/2,y:p/2};s.positions(function(){var e=this[0],t=e._private.scratch.BreadthFirstLayout,r=t.depth,a=t.index,i=Math.max(c/(g[r].length+1),D),o=Math.max(p/(g.length+1),D),s=Math.min(c/2/g.length,p/2/g.length);if(s=Math.max(s,D),n.circle){var l=s*r+s-(g.length>0&&g[0].length<=3?s/2:0),u=2*Math.PI/g[r].length*a;return 0===r&&1===g[0].length&&(l=1),{x:I.x+l*Math.cos(u),y:I.y+l*Math.sin(u)}}return{x:(a+1)*i,y:(r+1)*o}}),i.fit&&o.fit(n.padding),o.one("layoutready",i.ready),o.trigger("layoutready"),o.one("layoutstop",i.stop),o.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","breadthfirst",t)}(cytoscape);
//# sourceMappingURL=cytoscape.min.js.map