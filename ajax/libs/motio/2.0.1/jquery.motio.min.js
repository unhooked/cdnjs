/*! Motio 2.0.0 - 5th Apr 2013 | https://github.com/Darsain/motio */
(function(l){function j(b,t){function G(c){d.reversed=c;v||(a.isPaused=0,A("play"),D())}function x(){y=0;E=B?Math.round(h.x)+"px "+Math.round(h.y)+"px":q[m];E!==H&&(b.style.backgroundPosition=H=E);A("frame");d.finite&&d.to===m&&(a.pause(),"function"===r(d.callback)&&d.callback.call(a))}function D(){d.finite&&d.to===m||(B?(h.x+=f.speedX/f.fps,h.y+=f.speedY/f.fps,f.bgWidth&&Math.abs(h.x)>f.bgWidth&&(h.x%=f.bgWidth),f.bgHeight&&Math.abs(h.y)>f.bgHeight&&(h.y%=f.bgHeight)):(d.finite?m=d.immediate?d.to:
m+(m>d.to?-1:1):d.reversed?0>=--m&&(m=q.length-1):++m>=q.length&&(m=0),a.frame=m),d.immediate||(v=60<=f.fps?w(D):setTimeout(D,1E3/f.fps)),y||(y=w(x)))}function I(a,g){s=0;for(C=n[a].length;s<C;s++)if(n[a][s]===g)return s;return-1}function A(c,g){if(n[c]){s=0;for(C=n[c].length;s<C;s++)n[c][s].call(a,c,g)}}function F(a){return l.getComputedStyle?l.getComputedStyle(b,null)[a]:b.currentStyle[a]}var f,u=t,z={},u="object"===r(u)?u:{},p;for(p in j.defaults)z[p]=(u.hasOwnProperty(p)?u:j.defaults)[p];f=z;
var a=this,B=!f.frames,q=[],n={},d={},m=0,u=b.clientWidth,z=b.clientHeight,h,E,H,v,y,s,C;a.width=u;a.height=z;a.options=f;a.isPaused=1;a.pause=function(){v&&(a.isPaused=1,k(v),v=clearTimeout(v),y=k(y),A("pause"));return a};a.play=function(c){d.finite=0;d.callback=0;G(c);return a};a.toggle=function(){A("toggle");a[v?"pause":"play"]();return a};a.toStart=function(c,g){return a.to(0,c,g)};a.toEnd=function(c,g){return a.to(q.length-1,c,g)};a.to=function(c,g,e){if(B||isNaN(parseFloat(c))||!isFinite(c)||
0>c||c>=q.length)return a;"function"===r(g)&&(e=g,g=!1);if(c===m)if(0===c)m=q.length;else if(c===q.length-1)m=-1;else return"function"===r(e)&&e.call(a),a.pause(),a;d.finite=1;d.to=c;d.immediate=g;d.callback=e;G();return a};a.set=function(c,g){f[c]=g;return a};a.on=function(c,g){if("object"===r(c))for(var e in c){if(c.hasOwnProperty(e))a.on(e,c[e])}else if("function"===r(g)){e=c.split(" ");for(var b=0,d=e.length;b<d;b++)n[e[b]]=n[e[b]]||[],-1===I(e[b],g)&&n[e[b]].push(g)}else if("array"===r(g)){e=
0;for(b=g.length;e<b;e++)a.on(c,g[e])}return a};a.off=function(c,b){if(b instanceof Array)for(var e=0,d=b.length;e<d;e++)a.off(c,b[e]);else for(var e=c.split(" "),d=0,h=e.length;d<h;d++)if(n[e[d]]=n[e[d]]||[],"undefined"===r(b))n[e[d]].length=0;else{var f=I(e[d],b);-1!==f&&n[e[d]].splice(f,1)}return a};a.destroy=function(){a.pause();b.style.backgroundPosition="";return a};p=(F("backgroundPosition")||F("backgroundPositionX")+" "+F("backgroundPositionY")).replace(/left|top/gi,0).split(" ");h={x:0|parseInt(p[0],
10),y:0|parseInt(p[1],10)};if(B)a.pos=h;else{for(p=q.length=0;p<f.frames;p++)f.vertical?h.y=p*-z:h.x=p*-u,q.push(h.x+"px "+h.y+"px");a.frames=q.length;a.frame=0}}function r(b){return Object.prototype.toString.call(b).match(/\s([a-z]+)/i)[1].toLowerCase()}for(var k=l.cancelAnimationFrame||l.cancelRequestAnimationFrame,w=l.requestAnimationFrame,x=["moz","webkit","o"],t=0,b=0,J=x.length;b<J&&!k;++b)w=(k=l[x[b]+"CancelAnimationFrame"]||l[x[b]+"CancelRequestAnimationFrame"])&&l[x[b]+"RequestAnimationFrame"];
k||(w=function(b){var j=+new Date,k=Math.max(0,16-(j-t));t=j+k;return l.setTimeout(function(){b(j+k)},k)},k=function(b){clearTimeout(b)});l.Motio=j;j.defaults={fps:15,frames:0,vertical:0,speedX:0,speedY:0,bgWidth:0,bgHeight:0}})(window);(function(l){l.fn.motio=function(j,r){var k,w;if(!l.isPlainObject(j)){if("string"===typeof j||!1===j)k=!1===j?"destroy":j,w=Array.prototype.slice.call(arguments,1);j={}}return this.each(function(x,t){var b=l.data(t,"motio");!b&&!k?(b=l.data(t,"motio",new Motio(t,j)),b.on(r),j.startPaused||b.play()):b&&k&&(b[k]&&b[k].apply(b,w),"destroy"===k&&l.removeData(t,"motio"))})}})(jQuery);
