angular.module("ngDraggable",[]).directive("ngDrag",["$rootScope","$parse","$document","$window",function(t,e,n,o){return{restrict:"A",link:function(a,i,r){a.value=r.ngDrag;var c,u,f,l,g,s,d,p=!1,v="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,m="touchstart mousedown",h="touchmove mousemove",$="touchend mouseup",b=a.$id,D=null,x=!1,w=null,y=e(r.ngDragSuccess)||null,C=function(){i.attr("draggable","false"),Y(!0)},X=function(t){var e={top:0,left:0};return void 0!==typeof t[0].getBoundingClientRect&&(e=t[0].getBoundingClientRect()),{top:e.top+o.pageYOffset-t[0].clientTop,left:e.left+o.pageXOffset-t[0].clientLeft}},Y=function(t){t&&(a.$on("$destroy",O),a.$watch(r.ngDrag,A),a.$watch(r.ngCenterAnchor,B),a.$watch(r.ngDragData,k),i.on(m,P),v||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},O=function(t){Y(!1)},k=function(t,e){D=t},A=function(t,e){x=t},B=function(t,e){angular.isDefined(t)&&(p=t||"true")},T=function(t){return angular.isDefined(angular.element(t.target).attr("ng-click"))||angular.isDefined(angular.element(t.target).attr("ng-dblclick"))||angular.isDefined(angular.element(t.target).attr("ng-cancel-drag"))},P=function(t){x&&(T(t)||(v?(z(),w=setTimeout(function(){z(),R(t)},100),n.on(h,z),n.on($,z)):R(t)))},z=function(){clearTimeout(w),n.off(h,z),n.off($,z)},R=function(e){x&&(e.preventDefault(),i.addClass("dragging"),c=X(i),i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,u=e.pageX||e.touches[0].pageX,f=e.pageY||e.touches[0].pageY,s=u-c.left,d=f-c.top,p?(l=u-i.centerX-o.pageXOffset,g=f-i.centerY-o.pageYOffset):(l=u-s-o.pageXOffset,g=f-d-o.pageYOffset),n.on(h,H),n.on($,L),t.$broadcast("draggable:start",{x:u,y:f,tx:l,ty:g,event:e,element:i,data:D}))},H=function(e){x&&(e.preventDefault(),u=e.pageX||e.touches[0].pageX,f=e.pageY||e.touches[0].pageY,p?(l=u-i.centerX-o.pageXOffset,g=f-i.centerY-o.pageYOffset):(l=u-s-o.pageXOffset,g=f-d-o.pageYOffset),E(l,g),t.$broadcast("draggable:move",{x:u,y:f,tx:l,ty:g,event:e,element:i,data:D,uid:b}))},L=function(e){x&&(e.preventDefault(),t.$broadcast("draggable:end",{x:u,y:f,tx:l,ty:g,event:e,element:i,data:D,callback:S,uid:b}),i.removeClass("dragging"),W(),n.off(h,H),n.off($,L))},S=function(t){y&&a.$apply(function(){y(a,{$data:D,$event:t})})},W=function(){i.css({left:"",top:"",position:"","z-index":"",margin:""})},E=function(t,e){i.css({left:t+"px",top:e+"px",position:"fixed","z-index":99999})};C()}}}]).directive("ngDrop",["$parse","$timeout","$window",function(t,e,n){return{restrict:"A",link:function(o,a,i){o.value=i.ngDrop;var r=o.$id,c=!1,u=t(i.ngDropSuccess),f=function(){l(!0)},l=function(t){t&&(i.$observe("ngDrop",d),o.$on("$destroy",s),o.$on("draggable:start",p),o.$on("draggable:move",v),o.$on("draggable:end",m))},g=function(t){var e={top:0,left:0};return void 0!==typeof t[0].getBoundingClientRect&&(e=t[0].getBoundingClientRect()),{top:e.top+n.pageYOffset-t[0].clientTop,left:e.left+n.pageXOffset-t[0].clientLeft}},s=function(t){l(!1)},d=function(t,e){c=o.$eval(t)},p=function(t,e){c&&h(e.x,e.y,e.element)},v=function(t,e){c&&h(e.x,e.y,e.element)},m=function(t,n){c&&r!==n.uid&&(h(n.x,n.y,n.element)&&(n.callback&&n.callback(n),e(function(){u(o,{$data:n.data,$event:n})})),$(!1,n.element))},h=function(t,e,n){var o=b(t,e);return $(o,n),o},$=function(t,e){t?(a.addClass("drag-enter"),e.addClass("drag-over")):(a.removeClass("drag-enter"),e.removeClass("drag-over"))},b=function(t,e){var n=g(a);return n.right=n.left+a[0].offsetWidth,n.bottom=n.top+a[0].offsetHeight,t>=n.left&&t<=n.right&&e<=n.bottom&&e>=n.top};f()}}}]).directive("ngDragClone",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(t,e,n){var o,a=!0;t.clonedData={};var i=function(){o=e.find("img"),e.attr("draggable","false"),o.attr("draggable","false"),g(),r(!0)},r=function(e){e&&(t.$on("draggable:start",u),t.$on("draggable:move",f),t.$on("draggable:end",l),c())},c=function(){o.off("mousedown touchstart touchmove touchend touchcancel",d),o.on("mousedown touchstart touchmove touchend touchcancel",d)},u=function(n,o,i){a=!0,angular.isDefined(o.data.allowClone)&&(a=o.data.allowClone),a&&(t.$apply(function(){t.clonedData=o.data}),e.css("width",o.element[0].offsetWidth),e.css("height",o.element[0].offsetHeight),s(o.tx,o.ty))},f=function(t,e){a&&s(e.tx,e.ty)},l=function(t,e){a&&g()},g=function(){e.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},s=function(t,n){e.css({left:t+"px",top:n+"px",position:"fixed","z-index":99999,visibility:"visible"})},d=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};i()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(t,e,n){var o=function(){e.attr("draggable","false"),a(!0)},a=function(t){t&&e.on("mousedown touchstart touchmove touchend touchcancel",i)},i=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};o()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,e,n){e.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]);
//# sourceMappingURL=ngDraggable.min.js.map