angular.module("ngDraggable",[]).service("ngDraggable",["$window",function(t){var e=function(t){return"undefined"!=typeof t};this.getEventProp=function(t,n,o){return e(t.touches)&&t.touches[0]?t.touches[0][n]:e(t[n])?t[n]:t.originalEvent&&!o?this.getEventProp(t.originalEvent,n,!0):void 0},this.getPrivOffset=function(n){var o={top:0,left:0};return e(n[0].getBoundingClientRect)&&(o=n[0].getBoundingClientRect()),{top:o.top+t.pageYOffset-n[0].clientTop,left:o.left+t.pageXOffset-n[0].clientLeft}}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(t,e,n,o,a){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var u,f,g,l,s,d,p,v=!1,m="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,h="touchstart mousedown",$="touchmove mousemove",b="touchend mouseup",D=r.$id,w=null,x=!1,y=null,C=e(c.ngDragSuccess)||null,P=function(){i.attr("draggable","false"),O(!0)},O=function(t){t&&(r.$on("$destroy",k),r.$watch(c.ngDrag,X),r.$watch(c.ngCenterAnchor,Y),r.$watch(c.ngDragData,E),i.on(h,T),m||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},k=function(t){O(!1)},E=function(t,e){w=t},X=function(t,e){x=t},Y=function(t,e){angular.isDefined(t)&&(v=t||"true")},A=function(t){return angular.isDefined(angular.element(t.target).attr("ng-click"))||angular.isDefined(angular.element(t.target).attr("ng-dblclick"))||angular.isDefined(angular.element(t.target).attr("ng-cancel-drag"))},T=function(t){x&&(A(t)||(m?(z(),y=setTimeout(function(){z(),B(t)},100),n.on($,z),n.on(b,z)):B(t)))},z=function(){clearTimeout(y),n.off($,z),n.off(b,z)},B=function(e){x&&(e.preventDefault(),i.addClass("dragging"),u=a.getPrivOffset(i),i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,f=a.getEventProp(e,"pageX"),g=a.getEventProp(e,"pageY"),d=f-u.left,p=g-u.top,v?(l=f-i.centerX-o.pageXOffset,s=g-i.centerY-o.pageYOffset):(l=f-d-o.pageXOffset,s=g-p-o.pageYOffset),n.on($,H),n.on(b,S),t.$broadcast("draggable:start",{x:f,y:g,tx:l,ty:s,event:e,element:i,data:w}))},H=function(e){x&&(e.preventDefault(),f=a.getEventProp(e,"pageX"),g=a.getEventProp(e,"pageY"),v?(l=f-i.centerX-o.pageXOffset,s=g-i.centerY-o.pageYOffset):(l=f-d-o.pageXOffset,s=g-p-o.pageYOffset),R(l,s),t.$broadcast("draggable:move",{x:f,y:g,tx:l,ty:s,event:e,element:i,data:w,uid:D}))},S=function(e){x&&(e.preventDefault(),t.$broadcast("draggable:end",{x:f,y:g,tx:l,ty:s,event:e,element:i,data:w,callback:W,uid:D}),i.removeClass("dragging"),L(),n.off($,H),n.off(b,S))},W=function(t){C&&r.$apply(function(){C(r,{$data:w,$event:t})})},L=function(){i.css({left:"",top:"",position:"","z-index":"",margin:""})},R=function(t,e){i.css({left:t+"px",top:e+"px",position:"fixed","z-index":99999})};P()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(t,e,n,o){return{restrict:"A",link:function(n,a,r){n.value=r.ngDrop;var i=n.$id,c=!1,u=t(r.ngDropSuccess),f=function(){g(!0)},g=function(t){t&&(r.$observe("ngDrop",s),n.$on("$destroy",l),n.$on("draggable:start",d),n.$on("draggable:move",p),n.$on("draggable:end",v))},l=function(t){g(!1)},s=function(t,e){c=n.$eval(t)},d=function(t,e){c&&m(e.x,e.y,e.element)},p=function(t,e){c&&m(e.x,e.y,e.element)},v=function(t,o){c&&i!==o.uid&&(m(o.x,o.y,o.element)&&(o.callback&&o.callback(o),e(function(){u(n,{$data:o.data,$event:o})})),h(!1,o.element))},m=function(t,e,n){var o=$(t,e);return h(o,n),o},h=function(t,e){t?(a.addClass("drag-enter"),e.addClass("drag-over")):(a.removeClass("drag-enter"),e.removeClass("drag-over"))},$=function(t,e){var n=o.getPrivOffset(a);return n.right=n.left+a[0].offsetWidth,n.bottom=n.top+a[0].offsetHeight,t>=n.left&&t<=n.right&&e<=n.bottom&&e>=n.top};f()}}}]).directive("ngDragClone",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(t,e,n){var o,a=!0;t.clonedData={};var r=function(){o=e.find("img"),e.attr("draggable","false"),o.attr("draggable","false"),l(),i(!0)},i=function(e){e&&(t.$on("draggable:start",u),t.$on("draggable:move",f),t.$on("draggable:end",g),c())},c=function(){o.off("mousedown touchstart touchmove touchend touchcancel",d),o.on("mousedown touchstart touchmove touchend touchcancel",d)},u=function(n,o,r){a=!0,angular.isDefined(o.data.allowClone)&&(a=o.data.allowClone),a&&(t.$apply(function(){t.clonedData=o.data}),e.css("width",o.element[0].offsetWidth),e.css("height",o.element[0].offsetHeight),s(o.tx,o.ty))},f=function(t,e){a&&s(e.tx,e.ty)},g=function(t,e){a&&l()},l=function(){e.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},s=function(t,n){e.css({left:t+"px",top:n+"px",position:"fixed","z-index":99999,visibility:"visible"})},d=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};r()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(t,e,n){var o=function(){e.attr("draggable","false"),a(!0)},a=function(t){t&&e.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};o()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,e,n){e.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]);
//# sourceMappingURL=ngDraggable.min.js.map