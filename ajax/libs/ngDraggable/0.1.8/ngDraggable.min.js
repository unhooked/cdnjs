angular.module("ngDraggable",[]).service("ngDraggable",[function(){var t=this;t.inputEvent=function(t){return angular.isDefined(t.touches)?t.touches[0]:t}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(t,n,e,o,a){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var l,u,s,g,d,f,m,v,p=!1,$="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,D="touchstart mousedown",h="touchmove mousemove",b="touchend mouseup",w=r.$id,x=null,y=null,C=!1,S=null,E=n(c.ngDragSuccess)||null,T=angular.isDefined(c.allowTransform)?r.$eval(c.allowTransform):!0,k=n(c.ngDragData),X=angular.noop,Y=function(){i.attr("draggable","false");var t=i.find("[ng-drag-handle]");t.length&&(v=t),z(!0)},z=function(t){t&&(r.$on("$destroy",A),r.$watch(c.ngDrag,B),r.$watch(c.ngCenterAnchor,H),v?v.on(D,M):i.on(D,M),$||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},A=function(t){z(!1)},B=function(t,n){C=t},H=function(t,n){angular.isDefined(t)&&(p=t||"true")},L=function(t){return angular.isDefined(angular.element(t.target).attr("ng-cancel-drag"))},M=function(t){C&&(L(t)||"mousedown"==t.type&&0!=t.button||($?(_(),S=setTimeout(function(){_(),P(t)},100),e.on(h,_),e.on(b,_)):P(t)))},_=function(){clearTimeout(S),e.off(h,_),e.off(b,_)},P=function(n){C&&(n.preventDefault(),l=i[0].getBoundingClientRect(),y=T?l:{left:document.body.scrollLeft,top:document.body.scrollTop},i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,u=a.inputEvent(n).pageX,s=a.inputEvent(n).pageY,f=u-l.left,m=s-l.top,p?(g=u-i.centerX-o.pageXOffset,d=s-i.centerY-o.pageYOffset):(g=u-f-o.pageXOffset,d=s-m-o.pageYOffset),e.on(h,O),e.on(b,W),X=t.$on("draggable:_triggerHandlerMove",function(t,n){O(n)}))},O=function(n){C&&(n.preventDefault(),i.hasClass("dragging")||(x=k(r),i.addClass("dragging"),t.$broadcast("draggable:start",{x:u,y:s,tx:g,ty:d,event:n,element:i,data:x})),u=a.inputEvent(n).pageX,s=a.inputEvent(n).pageY,p?(g=u-i.centerX-y.left,d=s-i.centerY-y.top):(g=u-f-y.left,d=s-m-y.top),V(g,d),t.$broadcast("draggable:move",{x:u,y:s,tx:g,ty:d,event:n,element:i,data:x,uid:w}))},W=function(n){C&&(n.preventDefault(),t.$broadcast("draggable:end",{x:u,y:s,tx:g,ty:d,event:n,element:i,data:x,callback:I,uid:w}),i.removeClass("dragging"),i.parent().find(".drag-enter").removeClass("drag-enter"),R(),e.off(h,O),e.off(b,W),X())},I=function(t){E&&r.$apply(function(){E(r,{$data:x,$event:t})})},R=function(){T?i.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):i.css({position:"",top:"",left:""})},V=function(t,n){T?i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+n+")"}):i.css({left:t+"px",top:n+"px",position:"fixed"})};Y()}}}]).directive("ngDrop",["$parse","$timeout","$window","$document","ngDraggable",function(t,n,e,o,a){return{restrict:"A",link:function(e,a,r){e.value=r.ngDrop,e.isTouching=!1;var i=null,c=e.$id,l=!1,u=t(r.ngDropSuccess),s=t(r.ngDragStart),g=t(r.ngDragStop),d=t(r.ngDragMove),f=function(){m(!0)},m=function(t){t&&(e.$watch(r.ngDrop,p),e.$on("$destroy",v),e.$on("draggable:start",$),e.$on("draggable:move",D),e.$on("draggable:end",h))},v=function(t){m(!1)},p=function(t,n){l=t},$=function(t,o){l&&(b(o.x,o.y,o.element),r.ngDragStart&&n(function(){s(e,{$data:o.data,$event:o})}))},D=function(t,o){l&&(b(o.x,o.y,o.element),r.ngDragMove&&n(function(){d(e,{$data:o.data,$event:o})}))},h=function(t,o){return l&&c!==o.uid?(b(o.x,o.y,o.element)&&(o.callback&&o.callback(o),r.ngDropSuccess&&n(function(){u(e,{$data:o.data,$event:o,$target:e.$eval(e.value)})})),r.ngDragStop&&n(function(){g(e,{$data:o.data,$event:o})}),void w(!1,o.element)):void w(!1,o.element)},b=function(t,n,o){var r=x(t,n);return e.isTouching=r,r&&(i=a),w(r,o),r},w=function(t,n){t?(a.addClass("drag-enter"),n.addClass("drag-over")):i==a&&(i=null,a.removeClass("drag-enter"),n.removeClass("drag-over"))},x=function(t,n){var e=a[0].getBoundingClientRect();return t-=o[0].body.scrollLeft+o[0].documentElement.scrollLeft,n-=o[0].body.scrollTop+o[0].documentElement.scrollTop,t>=e.left&&t<=e.right&&n<=e.bottom&&n>=e.top};f()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(t,n,e){return{restrict:"A",link:function(t,n,e){var o,a=!0,r=null;t.clonedData={};var i=function(){o=n.find("img"),n.attr("draggable","false"),o.attr("draggable","false"),d(),c(!0)},c=function(n){n&&(t.$on("draggable:start",u),t.$on("draggable:move",s),t.$on("draggable:end",g),l())},l=function(){o.off("mousedown touchstart touchmove touchend touchcancel",m),o.on("mousedown touchstart touchmove touchend touchcancel",m)},u=function(e,o,i){a=!0,angular.isDefined(o.data.allowClone)&&(a=o.data.allowClone),a&&(t.$apply(function(){t.clonedData=o.data}),n.css("width",o.element[0].offsetWidth),n.css("height",o.element[0].offsetHeight),f(o.tx,o.ty)),r=n[0].getBoundingClientRect()},s=function(t,n){a&&(_tx=n.tx+r.left,_ty=n.ty+r.top,f(_tx,_ty))},g=function(t,n){a&&d()},d=function(){n.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},f=function(t,e){n.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+e+")"})},m=function(t){var n=t;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};i()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,n){return{restrict:"A",link:function(t,n,e){var o=function(){n.attr("draggable","false"),a(!0)},a=function(t){t&&n.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var n=t.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};o()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,n,e){n.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(t,n,e,o,a){return{restrict:"A",link:function(r,i,c){var l=null,u=null,s={verticalScroll:c.verticalScroll||!0,horizontalScroll:c.horizontalScroll||!0,activationDistance:c.activationDistance||75,scrollDistance:c.scrollDistance||50,scrollInterval:c.scrollInterval||250},g=function(){l=n(function(){if(u){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=0,l=0;if(s.horizontalScroll&&(u.clientX<s.activationDistance?c=-s.scrollDistance:u.clientX>n-s.activationDistance&&(c=s.scrollDistance)),s.verticalScroll&&(u.clientY<s.activationDistance?l=-s.scrollDistance:u.clientY>r-s.activationDistance&&(l=s.scrollDistance)),0!==c||0!==l){var g=o[0].documentElement.scrollLeft,d=o[0].documentElement.scrollTop,f=i.css("transform");i.css("transform","initial"),t.scrollBy(c,l);var m=o[0].documentElement.scrollLeft-g,v=o[0].documentElement.scrollTop-d;i.css("transform",f),e(function(){u.pageX+=m,u.pageY+=v,a.$emit("draggable:_triggerHandlerMove",u)})}}},s.scrollInterval)},d=function(){n.cancel(l),l=null};r.$on("draggable:start",function(t,n){n.element[0]===i[0]&&(l||g())}),r.$on("draggable:end",function(t,n){n.element[0]===i[0]&&l&&d()}),r.$on("draggable:move",function(t,n){n.element[0]===i[0]&&(u=n.event)})}}}]);
//# sourceMappingURL=ngDraggable.min.js.map