angular.module("ngDraggable",[]).service("ngDraggable",["$window",function(t){var e=function(t){return"undefined"!=typeof t};this.getEventProp=function(t,n,a){return e(t.touches)&&t.touches[0]?t.touches[0][n]:e(t[n])?t[n]:t.originalEvent&&!a?this.getEventProp(t.originalEvent,n,!0):void 0},this.getPrivOffset=function(n){var a={top:0,left:0};return e(n[0].getBoundingClientRect)&&(a=n[0].getBoundingClientRect()),{top:a.top+t.pageYOffset-n[0].clientTop,left:a.left+t.pageXOffset-n[0].clientLeft}}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(t,e,n,a,o){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var u,f,g,l,d,s,v,p=!1,m="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,$="touchstart mousedown",h="touchmove mousemove",b="touchend mouseup",D=r.$id,w=null,x=null,y=!1,C=null,P=e(c.ngDragSuccess)||null,k=function(){i.attr("draggable","false"),E(!0)},E=function(t){t&&(r.$on("$destroy",O),r.$watch(c.ngDrag,Y),r.$watch(c.ngCenterAnchor,A),r.$watch(c.ngDragData,X),i.on($,T),m||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},O=function(t){E(!1)},X=function(t,e){w=t},Y=function(t,e){y=t},A=function(t,e){angular.isDefined(t)&&(p=t||"true")},S=function(t){return angular.isDefined(angular.element(t.target).attr("ng-click"))||angular.isDefined(angular.element(t.target).attr("ng-dblclick"))||angular.isDefined(angular.element(t.target).attr("ng-cancel-drag"))},T=function(t){y&&(S(t)||(m?(z(),C=setTimeout(function(){z(),B(t)},100),n.on(h,z),n.on(b,z)):B(t)))},z=function(){clearTimeout(C),n.off(h,z),n.off(b,z)},B=function(e){y&&(e.preventDefault(),i.addClass("dragging"),u=o.getPrivOffset(i),x=u,i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,f=o.getEventProp(e,"pageX"),g=o.getEventProp(e,"pageY"),s=f-u.left,v=g-u.top,p?(l=f-i.centerX-a.pageXOffset,d=g-i.centerY-a.pageYOffset):(l=f-s-a.pageXOffset,d=g-v-a.pageYOffset),n.on(h,_),n.on(b,H),t.$broadcast("draggable:start",{x:f,y:g,tx:l,ty:d,event:e,element:i,data:w}))},_=function(e){y&&(e.preventDefault(),f=o.getEventProp(e,"pageX"),g=o.getEventProp(e,"pageY"),p?(l=f-i.centerX-x.left,d=g-i.centerY-x.top):(l=f-s-x.left,d=g-v-x.top),R(l,d),t.$broadcast("draggable:move",{x:f,y:g,tx:l,ty:d,event:e,element:i,data:w,uid:D}))},H=function(e){y&&(e.preventDefault(),t.$broadcast("draggable:end",{x:f,y:g,tx:l,ty:d,event:e,element:i,data:w,callback:W,uid:D}),i.removeClass("dragging"),i.closest(".drag-enter").removeClass("drag-enter"),L(),n.off(h,_),n.off(b,H))},W=function(t){P&&r.$apply(function(){P(r,{$data:w,$event:t})})},L=function(){i.css({transform:"","z-index":"","-webkit-transform":""})},R=function(t,e){i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)"})};k()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(t,e,n,a){return{restrict:"A",link:function(n,o,r){n.value=r.ngDrop;var i=n.$id,c=!1,u=t(r.ngDropSuccess),f=t(r.ngDragStart),g=t(r.ngDragStop),l=t(r.ngDragMove),d=function(){s(!0)},s=function(t){t&&(r.$observe("ngDrop",p),n.$on("$destroy",v),n.$on("draggable:start",m),n.$on("draggable:move",$),n.$on("draggable:end",h))},v=function(t){s(!1)},p=function(t,e){c=n.$eval(t)},m=function(t,a){c&&(b(a.x,a.y,a.element),e(function(){f(n,{$data:a.data,$event:a})}))},$=function(t,a){c&&(b(a.x,a.y,a.element),e(function(){l(n,{$data:a.data,$event:a})}))},h=function(t,a){c&&i!==a.uid&&(b(a.x,a.y,a.element)&&(a.callback&&a.callback(a),e(function(){u(n,{$data:a.data,$event:a})})),e(function(){g(n,{$data:a.data,$event:a})}),D(!1,a.element))},b=function(t,e,n){var a=w(t,e);return D(a,n),a},D=function(t,e){t?(o.addClass("drag-enter"),e.addClass("drag-over")):(o.removeClass("drag-enter"),e.removeClass("drag-over"))},w=function(t,e){var n=a.getPrivOffset(o);return n.right=n.left+o[0].offsetWidth,n.bottom=n.top+o[0].offsetHeight,t>=n.left&&t<=n.right&&e<=n.bottom&&e>=n.top};d()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(t,e,n){return{restrict:"A",link:function(t,e,a){var o,r=!0,i=null;t.clonedData={};var c=function(){o=e.find("img"),e.attr("draggable","false"),o.attr("draggable","false"),s(),u(!0)},u=function(e){e&&(t.$on("draggable:start",g),t.$on("draggable:move",l),t.$on("draggable:end",d),f())},f=function(){o.off("mousedown touchstart touchmove touchend touchcancel",p),o.on("mousedown touchstart touchmove touchend touchcancel",p)},g=function(a,o,c){r=!0,angular.isDefined(o.data.allowClone)&&(r=o.data.allowClone),r&&(t.$apply(function(){t.clonedData=o.data}),e.css("width",o.element[0].offsetWidth),e.css("height",o.element[0].offsetHeight),v(o.tx,o.ty)),i=n.getPrivOffset(e)},l=function(t,e){r&&(_tx=e.tx+i.left,_ty=e.ty+i.top,v(_tx,_ty))},d=function(t,e){r&&s()},s=function(){e.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},v=function(t,n){e.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)"})},p=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};c()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(t,e,n){var a=function(){e.attr("draggable","false"),o(!0)},o=function(t){t&&e.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};a()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,e,n){e.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]);
//# sourceMappingURL=ngDraggable.min.js.map