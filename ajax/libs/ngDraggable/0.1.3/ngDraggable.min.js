angular.module("ngDraggable",[]).service("ngDraggable",[function(){var t=this;t.inputEvent=function(t){return angular.isDefined(t.touches)?t.touches[0]:t}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(t,n,e,a,o){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var l,u,s,g,f,d,m,v,p=!1,$="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,D="touchstart mousedown",h="touchmove mousemove",b="touchend mouseup",w=r.$id,x=null,y=null,C=!1,k=null,S=n(c.ngDragSuccess)||null,E=angular.isDefined(c.allowTransform)?r.$eval(c.allowTransform):!0,T=angular.noop,X=function(){i.attr("draggable","false");var t=i.find("[ng-drag-handle]");t.length&&(v=t),Y(!0)},Y=function(t){t&&(r.$on("$destroy",z),r.$watch(c.ngDrag,H),r.$watch(c.ngCenterAnchor,B),r.$watch(c.ngDragData,A),v?v.on(D,M):i.on(D,M),$||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},z=function(t){Y(!1)},A=function(t,n){x=t},H=function(t,n){C=t},B=function(t,n){angular.isDefined(t)&&(p=t||"true")},_=function(t){return angular.isDefined(angular.element(t.target).attr("ng-click"))||angular.isDefined(angular.element(t.target).attr("ng-dblclick"))||angular.isDefined(angular.element(t.target).attr("ng-cancel-drag"))},M=function(t){C&&(_(t)||($?(P(),k=setTimeout(function(){P(),W(t)},100),e.on(h,P),e.on(b,P)):W(t)))},P=function(){clearTimeout(k),e.off(h,P),e.off(b,P)},W=function(n){C&&(n.preventDefault(),i.addClass("dragging"),l=i[0].getBoundingClientRect(),y=E?l:{left:document.body.scrollLeft,top:document.body.scrollTop},i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,u=o.inputEvent(n).pageX,s=o.inputEvent(n).pageY,d=u-l.left,m=s-l.top,p?(g=u-i.centerX-a.pageXOffset,f=s-i.centerY-a.pageYOffset):(g=u-d-a.pageXOffset,f=s-m-a.pageYOffset),e.on(h,L),e.on(b,O),T=t.$on("draggable:_triggerHandlerMove",function(t,n){L(n)}),t.$broadcast("draggable:start",{x:u,y:s,tx:g,ty:f,event:n,element:i,data:x}))},L=function(n){C&&(n.preventDefault(),u=o.inputEvent(n).pageX,s=o.inputEvent(n).pageY,p?(g=u-i.centerX-y.left,f=s-i.centerY-y.top):(g=u-d-y.left,f=s-m-y.top),V(g,f),t.$broadcast("draggable:move",{x:u,y:s,tx:g,ty:f,event:n,element:i,data:x,uid:w}))},O=function(n){C&&(n.preventDefault(),t.$broadcast("draggable:end",{x:u,y:s,tx:g,ty:f,event:n,element:i,data:x,callback:I,uid:w}),i.removeClass("dragging"),i.parent().find(".drag-enter").removeClass("drag-enter"),R(),e.off(h,L),e.off(b,O),T())},I=function(t){S&&r.$apply(function(){S(r,{$data:x,$event:t})})},R=function(){E?i.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):i.css({position:"",top:"",left:""})},V=function(t,n){E?i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+n+")"}):i.css({left:t+"px",top:n+"px",position:"fixed"})};X()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(t,n,e,a){return{restrict:"A",link:function(e,a,o){e.value=o.ngDrop,e.isTouching=!1;var r=null,i=e.$id,c=!1,l=t(o.ngDropSuccess),u=t(o.ngDragStart),s=t(o.ngDragStop),g=t(o.ngDragMove),f=function(){d(!0)},d=function(t){t&&(o.$observe("ngDrop",v),e.$on("$destroy",m),e.$on("draggable:start",p),e.$on("draggable:move",$),e.$on("draggable:end",D))},m=function(t){d(!1)},v=function(t,n){c=e.$eval(t)},p=function(t,a){c&&(h(a.x,a.y,a.element),n(function(){u(e,{$data:a.data,$event:a})}))},$=function(t,a){c&&(h(a.x,a.y,a.element),n(function(){g(e,{$data:a.data,$event:a})}))},D=function(t,a){return c&&i!==a.uid?(h(a.x,a.y,a.element)&&(a.callback&&a.callback(a),n(function(){l(e,{$data:a.data,$event:a,$target:e.$eval(e.value)})})),n(function(){s(e,{$data:a.data,$event:a})}),void b(!1,a.element)):void b(!1,a.element)},h=function(t,n,o){var i=w(t,n);return e.isTouching=i,i&&(r=a),b(i,o),i},b=function(t,n){t?(a.addClass("drag-enter"),n.addClass("drag-over")):r==a&&(r=null,a.removeClass("drag-enter"),n.removeClass("drag-over"))},w=function(t,n){var e=a[0].getBoundingClientRect();return e.right=e.left+a[0].offsetWidth,e.bottom=e.top+a[0].offsetHeight,t>=e.left&&t<=e.right&&n<=e.bottom&&n>=e.top};f()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(t,n,e){return{restrict:"A",link:function(t,n,e){var a,o=!0,r=null;t.clonedData={};var i=function(){a=n.find("img"),n.attr("draggable","false"),a.attr("draggable","false"),f(),c(!0)},c=function(n){n&&(t.$on("draggable:start",u),t.$on("draggable:move",s),t.$on("draggable:end",g),l())},l=function(){a.off("mousedown touchstart touchmove touchend touchcancel",m),a.on("mousedown touchstart touchmove touchend touchcancel",m)},u=function(e,a,i){o=!0,angular.isDefined(a.data.allowClone)&&(o=a.data.allowClone),o&&(t.$apply(function(){t.clonedData=a.data}),n.css("width",a.element[0].offsetWidth),n.css("height",a.element[0].offsetHeight),d(a.tx,a.ty)),r=n[0].getBoundingClientRect()},s=function(t,n){o&&(_tx=n.tx+r.left,_ty=n.ty+r.top,d(_tx,_ty))},g=function(t,n){o&&f()},f=function(){n.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},d=function(t,e){n.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+e+")"})},m=function(t){var n=t;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};i()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,n){return{restrict:"A",link:function(t,n,e){var a=function(){n.attr("draggable","false"),o(!0)},o=function(t){t&&n.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var n=t.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};a()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,n,e){n.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(t,n,e,a,o){return{restrict:"A",link:function(r,i,c){var l=null,u=null,s={verticalScroll:c.verticalScroll||!0,horizontalScroll:c.horizontalScroll||!0,activationDistance:c.activationDistance||75,scrollDistance:c.scrollDistance||50,scrollInterval:c.scrollInterval||250},g=function(){l=n(function(){if(u){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=0,l=0;if(s.horizontalScroll&&(u.clientX<s.activationDistance?c=-s.scrollDistance:u.clientX>n-s.activationDistance&&(c=s.scrollDistance)),s.verticalScroll&&(u.clientY<s.activationDistance?l=-s.scrollDistance:u.clientY>r-s.activationDistance&&(l=s.scrollDistance)),0!==c||0!==l){var g=a[0].documentElement.scrollLeft,f=a[0].documentElement.scrollTop,d=i.css("transform");i.css("transform","initial"),t.scrollBy(c,l);var m=a[0].documentElement.scrollLeft-g,v=a[0].documentElement.scrollTop-f;i.css("transform",d),e(function(){u.pageX+=m,u.pageY+=v,o.$emit("draggable:_triggerHandlerMove",u)})}}},s.scrollInterval)},f=function(){n.cancel(l),l=null};r.$on("draggable:start",function(t,n){n.element[0]===i[0]&&(l||g())}),r.$on("draggable:end",function(t,n){n.element[0]===i[0]&&l&&f()}),r.$on("draggable:move",function(t,n){n.element[0]===i[0]&&(u=n.event)})}}}]);
//# sourceMappingURL=ngDraggable.min.js.map