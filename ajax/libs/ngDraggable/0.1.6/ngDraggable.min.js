angular.module("ngDraggable",[]).service("ngDraggable",[function(){var n=this;n.inputEvent=function(n){return angular.isDefined(n.touches)?n.touches[0]:n}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(n,t,e,o,a){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var l,u,s,g,d,f,m,v,p=!1,$="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,D="touchstart mousedown",h="touchmove mousemove",b="touchend mouseup",w=r.$id,x=null,y=null,C=!1,S=null,E=t(c.ngDragSuccess)||null,T=angular.isDefined(c.allowTransform)?r.$eval(c.allowTransform):!0,k=angular.noop,X=function(){i.attr("draggable","false");var n=i.find("[ng-drag-handle]");n.length&&(v=n),Y(!0)},Y=function(n){n&&(r.$on("$destroy",z),r.$watch(c.ngDrag,B),r.$watch(c.ngCenterAnchor,H),r.$watch(c.ngDragData,A),v?v.on(D,M):i.on(D,M),$||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},z=function(n){Y(!1)},A=function(n,t){x=n},B=function(n,t){C=n},H=function(n,t){angular.isDefined(n)&&(p=n||"true")},L=function(n){return angular.isDefined(angular.element(n.target).attr("ng-cancel-drag"))},M=function(n){C&&(L(n)||($?(_(),S=setTimeout(function(){_(),P(n)},100),e.on(h,_),e.on(b,_)):P(n)))},_=function(){clearTimeout(S),e.off(h,_),e.off(b,_)},P=function(t){C&&(t.preventDefault(),l=i[0].getBoundingClientRect(),y=T?l:{left:document.body.scrollLeft,top:document.body.scrollTop},i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,u=a.inputEvent(t).pageX,s=a.inputEvent(t).pageY,f=u-l.left,m=s-l.top,p?(g=u-i.centerX-o.pageXOffset,d=s-i.centerY-o.pageYOffset):(g=u-f-o.pageXOffset,d=s-m-o.pageYOffset),e.on(h,O),e.on(b,W),k=n.$on("draggable:_triggerHandlerMove",function(n,t){O(t)}))},O=function(t){C&&(t.preventDefault(),i.hasClass("dragging")||(i.addClass("dragging"),n.$broadcast("draggable:start",{x:u,y:s,tx:g,ty:d,event:t,element:i,data:x})),u=a.inputEvent(t).pageX,s=a.inputEvent(t).pageY,p?(g=u-i.centerX-y.left,d=s-i.centerY-y.top):(g=u-f-y.left,d=s-m-y.top),V(g,d),n.$broadcast("draggable:move",{x:u,y:s,tx:g,ty:d,event:t,element:i,data:x,uid:w}))},W=function(t){C&&(t.preventDefault(),n.$broadcast("draggable:end",{x:u,y:s,tx:g,ty:d,event:t,element:i,data:x,callback:I,uid:w}),i.removeClass("dragging"),i.parent().find(".drag-enter").removeClass("drag-enter"),R(),e.off(h,O),e.off(b,W),k())},I=function(n){E&&r.$apply(function(){E(r,{$data:x,$event:n})})},R=function(){T?i.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):i.css({position:"",top:"",left:""})},V=function(n,t){T?i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+n+", "+t+")"}):i.css({left:n+"px",top:t+"px",position:"fixed"})};X()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(n,t,e,o){return{restrict:"A",link:function(e,o,a){e.value=a.ngDrop,e.isTouching=!1;var r=null,i=e.$id,c=!1,l=n(a.ngDropSuccess),u=n(a.ngDragStart),s=n(a.ngDragStop),g=n(a.ngDragMove),d=function(){f(!0)},f=function(n){n&&(a.$observe("ngDrop",v),e.$on("$destroy",m),e.$on("draggable:start",p),e.$on("draggable:move",$),e.$on("draggable:end",D))},m=function(n){f(!1)},v=function(n,t){c=e.$eval(n)},p=function(n,o){c&&(h(o.x,o.y,o.element),a.ngDragStart&&t(function(){u(e,{$data:o.data,$event:o})}))},$=function(n,o){c&&(h(o.x,o.y,o.element),a.ngDragMove&&t(function(){g(e,{$data:o.data,$event:o})}))},D=function(n,o){return c&&i!==o.uid?(h(o.x,o.y,o.element)&&(o.callback&&o.callback(o),a.ngDropSuccess&&t(function(){l(e,{$data:o.data,$event:o,$target:e.$eval(e.value)})})),a.ngDragStop&&t(function(){s(e,{$data:o.data,$event:o})}),void b(!1,o.element)):void b(!1,o.element)},h=function(n,t,a){var i=w(n,t);return e.isTouching=i,i&&(r=o),b(i,a),i},b=function(n,t){n?(o.addClass("drag-enter"),t.addClass("drag-over")):r==o&&(r=null,o.removeClass("drag-enter"),t.removeClass("drag-over"))},w=function(n,t){var e=o[0].getBoundingClientRect();return n-=$document.body.scrollLeft+$document.documentElement.scrollLeft,t-=$document.body.scrollTop+$document.documentElement.scrollTop,n>=e.left&&n<=e.right&&t<=e.bottom&&t>=e.top};d()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(n,t,e){return{restrict:"A",link:function(n,t,e){var o,a=!0,r=null;n.clonedData={};var i=function(){o=t.find("img"),t.attr("draggable","false"),o.attr("draggable","false"),d(),c(!0)},c=function(t){t&&(n.$on("draggable:start",u),n.$on("draggable:move",s),n.$on("draggable:end",g),l())},l=function(){o.off("mousedown touchstart touchmove touchend touchcancel",m),o.on("mousedown touchstart touchmove touchend touchcancel",m)},u=function(e,o,i){a=!0,angular.isDefined(o.data.allowClone)&&(a=o.data.allowClone),a&&(n.$apply(function(){n.clonedData=o.data}),t.css("width",o.element[0].offsetWidth),t.css("height",o.element[0].offsetHeight),f(o.tx,o.ty)),r=t[0].getBoundingClientRect()},s=function(n,t){a&&(_tx=t.tx+r.left,_ty=t.ty+r.top,f(_tx,_ty))},g=function(n,t){a&&d()},d=function(){t.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},f=function(n,e){t.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+e+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+n+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+n+", "+e+")"})},m=function(n){var t=n;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};i()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(n,t){return{restrict:"A",link:function(n,t,e){var o=function(){t.attr("draggable","false"),a(!0)},a=function(n){n&&t.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(n){var t=n.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};o()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(n,t,e){t.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(n,t,e,o,a){return{restrict:"A",link:function(r,i,c){var l=null,u=null,s={verticalScroll:c.verticalScroll||!0,horizontalScroll:c.horizontalScroll||!0,activationDistance:c.activationDistance||75,scrollDistance:c.scrollDistance||50,scrollInterval:c.scrollInterval||250},g=function(){l=t(function(){if(u){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=0,l=0;if(s.horizontalScroll&&(u.clientX<s.activationDistance?c=-s.scrollDistance:u.clientX>t-s.activationDistance&&(c=s.scrollDistance)),s.verticalScroll&&(u.clientY<s.activationDistance?l=-s.scrollDistance:u.clientY>r-s.activationDistance&&(l=s.scrollDistance)),0!==c||0!==l){var g=o[0].documentElement.scrollLeft,d=o[0].documentElement.scrollTop,f=i.css("transform");i.css("transform","initial"),n.scrollBy(c,l);var m=o[0].documentElement.scrollLeft-g,v=o[0].documentElement.scrollTop-d;i.css("transform",f),e(function(){u.pageX+=m,u.pageY+=v,a.$emit("draggable:_triggerHandlerMove",u)})}}},s.scrollInterval)},d=function(){t.cancel(l),l=null};r.$on("draggable:start",function(n,t){t.element[0]===i[0]&&(l||g())}),r.$on("draggable:end",function(n,t){t.element[0]===i[0]&&l&&d()}),r.$on("draggable:move",function(n,t){t.element[0]===i[0]&&(u=t.event)})}}}]);
//# sourceMappingURL=ngDraggable.min.js.map