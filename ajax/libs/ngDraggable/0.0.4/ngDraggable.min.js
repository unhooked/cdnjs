angular.module("ngDraggable",[]).service("ngDraggable",["$window",function(t){var e=function(t){return"undefined"!=typeof t};this.getEventProp=function(t,n,o){return e(t.touches)&&t.touches[0]?t.touches[0][n]:e(t[n])?t[n]:t.originalEvent&&!o?this.getEventProp(t.originalEvent,n,!0):void 0},this.getPrivOffset=function(n){var o={top:0,left:0};return e(n[0].getBoundingClientRect)&&(o=n[0].getBoundingClientRect()),{top:o.top+t.pageYOffset-n[0].clientTop,left:o.left+t.pageXOffset-n[0].clientLeft}}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(t,e,n,o,a){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var u,f,g,l,s,d,v,p=!1,m="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,h="touchstart mousedown",$="touchmove mousemove",b="touchend mouseup",D=r.$id,w=null,x=null,y=!1,P=null,C=e(c.ngDragSuccess)||null,k=function(){i.attr("draggable","false"),E(!0)},E=function(t){t&&(r.$on("$destroy",O),r.$watch(c.ngDrag,Y),r.$watch(c.ngCenterAnchor,A),r.$watch(c.ngDragData,X),i.on(h,z),m||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},O=function(t){E(!1)},X=function(t,e){w=t},Y=function(t,e){y=t},A=function(t,e){angular.isDefined(t)&&(p=t||"true")},T=function(t){return angular.isDefined(angular.element(t.target).attr("ng-click"))||angular.isDefined(angular.element(t.target).attr("ng-dblclick"))||angular.isDefined(angular.element(t.target).attr("ng-cancel-drag"))},z=function(t){y&&(T(t)||(m?(B(),P=setTimeout(function(){B(),_(t)},100),n.on($,B),n.on(b,B)):_(t)))},B=function(){clearTimeout(P),n.off($,B),n.off(b,B)},_=function(e){y&&(e.preventDefault(),i.addClass("dragging"),u=a.getPrivOffset(i),x=u,i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,f=a.getEventProp(e,"pageX"),g=a.getEventProp(e,"pageY"),d=f-u.left,v=g-u.top,p?(l=f-i.centerX-o.pageXOffset,s=g-i.centerY-o.pageYOffset):(l=f-d-o.pageXOffset,s=g-v-o.pageYOffset),n.on($,H),n.on(b,S),t.$broadcast("draggable:start",{x:f,y:g,tx:l,ty:s,event:e,element:i,data:w}))},H=function(e){y&&(e.preventDefault(),f=a.getEventProp(e,"pageX"),g=a.getEventProp(e,"pageY"),p?(l=f-i.centerX-x.left,s=g-i.centerY-x.top):(l=f-d-x.left,s=g-v-x.top),R(l,s),t.$broadcast("draggable:move",{x:f,y:g,tx:l,ty:s,event:e,element:i,data:w,uid:D}))},S=function(e){y&&(e.preventDefault(),t.$broadcast("draggable:end",{x:f,y:g,tx:l,ty:s,event:e,element:i,data:w,callback:W,uid:D}),i.removeClass("dragging"),L(),n.off($,H),n.off(b,S))},W=function(t){C&&r.$apply(function(){C(r,{$data:w,$event:t})})},L=function(){i.css({transform:"","z-index":""})},R=function(t,e){i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999})};k()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(t,e,n,o){return{restrict:"A",link:function(n,a,r){n.value=r.ngDrop;var i=n.$id,c=!1,u=t(r.ngDropSuccess),f=function(){g(!0)},g=function(t){t&&(r.$observe("ngDrop",s),n.$on("$destroy",l),n.$on("draggable:start",d),n.$on("draggable:move",v),n.$on("draggable:end",p))},l=function(t){g(!1)},s=function(t,e){c=n.$eval(t)},d=function(t,e){c&&m(e.x,e.y,e.element)},v=function(t,e){c&&m(e.x,e.y,e.element)},p=function(t,o){c&&i!==o.uid&&(m(o.x,o.y,o.element)&&(o.callback&&o.callback(o),e(function(){u(n,{$data:o.data,$event:o})})),h(!1,o.element))},m=function(t,e,n){var o=$(t,e);return h(o,n),o},h=function(t,e){t?(a.addClass("drag-enter"),e.addClass("drag-over")):(a.removeClass("drag-enter"),e.removeClass("drag-over"))},$=function(t,e){var n=o.getPrivOffset(a);return n.right=n.left+a[0].offsetWidth,n.bottom=n.top+a[0].offsetHeight,t>=n.left&&t<=n.right&&e<=n.bottom&&e>=n.top};f()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(t,e,n){return{restrict:"A",link:function(t,e,o){var a,r=!0,i=null;t.clonedData={};var c=function(){a=e.find("img"),e.attr("draggable","false"),a.attr("draggable","false"),d(),u(!0)},u=function(e){e&&(t.$on("draggable:start",g),t.$on("draggable:move",l),t.$on("draggable:end",s),f())},f=function(){a.off("mousedown touchstart touchmove touchend touchcancel",p),a.on("mousedown touchstart touchmove touchend touchcancel",p)},g=function(o,a,c){r=!0,angular.isDefined(a.data.allowClone)&&(r=a.data.allowClone),r&&(t.$apply(function(){t.clonedData=a.data}),e.css("width",a.element[0].offsetWidth),e.css("height",a.element[0].offsetHeight),v(a.tx,a.ty)),i=n.getPrivOffset(e)},l=function(t,e){r&&(_tx=e.tx+i.left,_ty=e.ty+i.top,v(_tx,_ty))},s=function(t,e){r&&d()},d=function(){e.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},v=function(t,n){e.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","z-index":99999,visibility:"visible"})},p=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};c()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,e){return{restrict:"A",link:function(t,e,n){var o=function(){e.attr("draggable","false"),a(!0)},a=function(t){t&&e.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1};o()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,e,n){e.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]);
//# sourceMappingURL=ngDraggable.min.js.map