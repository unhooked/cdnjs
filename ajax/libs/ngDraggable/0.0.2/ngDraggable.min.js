angular.module("ngDraggable",[]).directive("ngDrag",["$rootScope","$parse",function(t,n){return{restrict:"A",link:function(e,o,a){e.value=a.ngDrag;var r,i,c,l,u,g,f,s=!1,d="ontouchstart"in document.documentElement,p="touchstart mousedown",v="touchmove mousemove",m="touchend mouseup",h=$(document),b=$(window),D=null,x=!1,y=null,w=n(a.ngDragSuccess)||null,C=function(){o.attr("draggable","false"),k(!0)},k=function(t){t&&(e.$on("$destroy",E),e.$watch(a.ngDrag,Y),e.$watch(a.ngCenterAnchor,A),e.$watch(a.ngDragData,X),o.on(p,L),d||"img"!=o[0].nodeName.toLowerCase()||o.on("mousedown",function(){return!1}))},E=function(t){k(!1)},X=function(t,n){D=t},Y=function(t,n){x=t},A=function(t,n){angular.isDefined(t)&&(s=t||"true")},T=function(t){return angular.isDefined($(t.target).attr("ng-click"))||angular.isDefined($(t.target).attr("ng-dblclick"))||angular.isDefined($(t.target).attr("ng-cancel-drag"))},L=function(t){x&&(T(t)||(d?(P(),y=setTimeout(function(){P(),z(t)},100),h.on(v,P),h.on(m,P)):z(t)))},P=function(){clearTimeout(y),h.off(v,P),h.off(m,P)},z=function(n){x&&(n.preventDefault(),r=o.offset(),o.centerX=o.width()/2,o.centerY=o.height()/2,o.addClass("dragging"),i=n.pageX||n.originalEvent.touches[0].pageX,c=n.pageY||n.originalEvent.touches[0].pageY,g=i-r.left,f=c-r.top,s?(l=i-o.centerX-b.scrollLeft(),u=c-o.centerY-b.scrollTop()):(l=r.left-b.scrollLeft(),u=r.top-b.scrollTop()),N(l,u),h.on(v,S),h.on(m,B),t.$broadcast("draggable:start",{x:i,y:c,tx:l,ty:u,event:n,element:o,data:D}))},S=function(n){x&&(n.preventDefault(),i=n.pageX||n.originalEvent.touches[0].pageX,c=n.pageY||n.originalEvent.touches[0].pageY,s?(l=i-o.centerX-b.scrollLeft(),u=c-o.centerY-b.scrollTop()):(l=i-g-b.scrollLeft(),u=c-f-b.scrollTop()),N(l,u),t.$broadcast("draggable:move",{x:i,y:c,tx:l,ty:u,event:n,element:o,data:D}))},B=function(n){x&&(n.preventDefault(),t.$broadcast("draggable:end",{x:i,y:c,tx:l,ty:u,event:n,element:o,data:D,callback:V}),o.removeClass("dragging"),H(),h.off(v,S),h.off(m,B))},V=function(t){w&&e.$apply(function(){w(e,{$data:D,$event:t})})},H=function(){o.css({left:"",top:"",position:"","z-index":"",margin:""})},N=function(t,n){o.css({left:t,top:n,position:"fixed","z-index":99999,margin:"0"})};C()}}}]).directive("ngDrop",["$parse","$timeout",function(t,n){return{restrict:"A",link:function(e,o,a){e.value=a.ngDrop;var r=!1,i=t(a.ngDropSuccess),c=function(){l(!0)},l=function(t){t&&(a.$observe("ngDrop",g),e.$on("$destroy",u),e.$on("draggable:start",f),e.$on("draggable:move",s),e.$on("draggable:end",d))},u=function(t){l(!1)},g=function(t,n){r=e.$eval(t)},f=function(t,n){r&&p(n.x,n.y,n.element)},s=function(t,n){r&&p(n.x,n.y,n.element)},d=function(t,o){r&&(p(o.x,o.y,o.element)&&(o.callback&&o.callback(o),n(function(){i(e,{$data:o.data,$event:o})})),v(!1,o.element))},p=function(t,n,e){var o=m(t,n);return v(o,e),o},v=function(t,n){t?(o.addClass("drag-enter"),n.addClass("drag-over")):(o.removeClass("drag-enter"),n.removeClass("drag-over"))},m=function(t,n){var e=o.offset();return e.right=e.left+o.outerWidth(),e.bottom=e.top+o.outerHeight(),t>=e.left&&t<=e.right&&n<=e.bottom&&n>=e.top};c()}}}]).directive("ngDragClone",["$parse","$timeout",function(t,n){return{restrict:"A",link:function(t,n,e){var o,a=!0;t.clonedData={};var r=function(){o=$(n.find("img")),n.attr("draggable","false"),o.attr("draggable","false"),f(),i(!0)},i=function(n){n&&(t.$on("draggable:start",l),t.$on("draggable:move",u),t.$on("draggable:end",g),c())},c=function(){o.off("mousedown touchstart touchmove touchend touchcancel",d),o.on("mousedown touchstart touchmove touchend touchcancel",d)},l=function(e,o,r){a=!0,angular.isDefined(o.data.allowClone)&&(a=o.data.allowClone),a&&(t.$apply(function(){t.clonedData=o.data}),n.css("width",o.element.width()),n.css("height",o.element.height()),s(o.tx,o.ty))},u=function(t,n){a&&s(n.tx,n.ty)},g=function(t,n){a&&f()},f=function(){n.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},s=function(t,e){n.css({left:t,top:e,position:"fixed","z-index":99999,visibility:"visible"})},d=function(t){var n=t.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};r()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,n){return{restrict:"A",link:function(t,n,e){var o=function(){n.attr("draggable","false"),a(!0)},a=function(t){t&&n.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var n=t.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};o()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,n,e){n.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]);
//# sourceMappingURL=ngDraggable.min.js.map