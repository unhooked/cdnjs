angular.module("ngDraggable",[]).service("ngDraggable",[function(){var t=this;t.inputEvent=function(t){return angular.isDefined(t.touches)?t.touches[0]:t}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(t,n,e,a,o){return{restrict:"A",link:function(r,i,c){r.value=c.ngDrag;var l,u,s,g,f,d,m,v,p=!1,$="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,D="touchstart mousedown",h="touchmove mousemove",b="touchend mouseup",w=r.$id,x=null,y=null,C=!1,S=null,k=n(c.ngDragSuccess)||null,E=angular.isDefined(c.allowTransform)?r.$eval(c.allowTransform):!0,X=angular.noop,Y=function(){i.attr("draggable","false");var t=i.find("[ng-drag-handle]");t.length&&(v=t),T(!0)},T=function(t){t&&(r.$on("$destroy",O),r.$watch(c.ngDrag,A),r.$watch(c.ngCenterAnchor,H),r.$watch(c.ngDragData,z),v?v.on(D,B):i.on(D,B),$||"img"!=i[0].nodeName.toLowerCase()||i.on("mousedown",function(){return!1}))},O=function(t){T(!1)},z=function(t,n){x=t},A=function(t,n){C=t},H=function(t,n){angular.isDefined(t)&&(p=t||"true")},B=function(t){C&&($?(M(),S=setTimeout(function(){M(),_(t)},100),e.on(h,M),e.on(b,M)):_(t))},M=function(){clearTimeout(S),e.off(h,M),e.off(b,M)},_=function(n){C&&(n.preventDefault(),l=i[0].getBoundingClientRect(),y=E?l:{left:document.body.scrollLeft,top:document.body.scrollTop},i.centerX=i[0].offsetWidth/2,i.centerY=i[0].offsetHeight/2,u=o.inputEvent(n).pageX,s=o.inputEvent(n).pageY,d=u-l.left,m=s-l.top,p?(g=u-i.centerX-a.pageXOffset,f=s-i.centerY-a.pageYOffset):(g=u-d-a.pageXOffset,f=s-m-a.pageYOffset),e.on(h,P),e.on(b,W),X=t.$on("draggable:_triggerHandlerMove",function(t,n){P(n)}))},P=function(n){C&&(n.preventDefault(),i.hasClass("dragging")||(i.addClass("dragging"),t.$broadcast("draggable:start",{x:u,y:s,tx:g,ty:f,event:n,element:i,data:x})),u=o.inputEvent(n).pageX,s=o.inputEvent(n).pageY,p?(g=u-i.centerX-y.left,f=s-i.centerY-y.top):(g=u-d-y.left,f=s-m-y.top),R(g,f),t.$broadcast("draggable:move",{x:u,y:s,tx:g,ty:f,event:n,element:i,data:x,uid:w}))},W=function(n){C&&(n.preventDefault(),t.$broadcast("draggable:end",{x:u,y:s,tx:g,ty:f,event:n,element:i,data:x,callback:L,uid:w}),i.removeClass("dragging"),i.parent().find(".drag-enter").removeClass("drag-enter"),I(),e.off(h,P),e.off(b,W),X())},L=function(t){k&&r.$apply(function(){k(r,{$data:x,$event:t})})},I=function(){E?i.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):i.css({position:"",top:"",left:""})},R=function(t,n){E?i.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+n+")"}):i.css({left:t+"px",top:n+"px",position:"fixed"})};Y()}}}]).directive("ngDrop",["$parse","$timeout","$window","ngDraggable",function(t,n,e,a){return{restrict:"A",link:function(a,o,r){a.value=r.ngDrop,a.isTouching=!1;var i=null,c=a.$id,l=!1,u=t(r.ngDropSuccess),s=t(r.ngDragStart),g=t(r.ngDragStop),f=t(r.ngDragMove),d=function(){m(!0)},m=function(t){t&&(r.$observe("ngDrop",p),a.$on("$destroy",v),a.$on("draggable:start",$),a.$on("draggable:move",D),a.$on("draggable:end",h))},v=function(t){m(!1)},p=function(t,n){l=a.$eval(t)},$=function(t,e){l&&(b(e.x,e.y,e.element),r.ngDragStart&&n(function(){s(a,{$data:e.data,$event:e})}))},D=function(t,e){l&&(b(e.x,e.y,e.element),r.ngDragMove&&n(function(){f(a,{$data:e.data,$event:e})}))},h=function(t,e){return l&&c!==e.uid?(b(e.x,e.y,e.element)&&(e.callback&&e.callback(e),r.ngDropSuccess&&n(function(){u(a,{$data:e.data,$event:e,$target:a.$eval(a.value)})})),r.ngDragStop&&n(function(){g(a,{$data:e.data,$event:e})}),void w(!1,e.element)):void w(!1,e.element)},b=function(t,n,e){var r=x(t,n);return a.isTouching=r,r&&(i=o),w(r,e),r},w=function(t,n){t?(o.addClass("drag-enter"),n.addClass("drag-over")):i==o&&(i=null,o.removeClass("drag-enter"),n.removeClass("drag-over"))},x=function(t,n){var a=o[0].getBoundingClientRect();return a.right=a.left+o[0].offsetWidth-e.pageXOffset,a.bottom=a.top+o[0].offsetHeight-e.pageYOffset,t-=e.pageXOffset,n-=e.pageYOffset,t>=a.left&&t<=a.right&&n<=a.bottom&&n>=a.top};d()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(t,n,e){return{restrict:"A",link:function(t,n,e){var a,o=!0,r=null;t.clonedData={};var i=function(){a=n.find("img"),n.attr("draggable","false"),a.attr("draggable","false"),f(),c(!0)},c=function(n){n&&(t.$on("draggable:start",u),t.$on("draggable:move",s),t.$on("draggable:end",g),l())},l=function(){a.off("mousedown touchstart touchmove touchend touchcancel",m),a.on("mousedown touchstart touchmove touchend touchcancel",m)},u=function(e,a,i){o=!0,angular.isDefined(a.data.allowClone)&&(o=a.data.allowClone),o&&(t.$apply(function(){t.clonedData=a.data}),n.css("width",a.element[0].offsetWidth),n.css("height",a.element[0].offsetHeight),d(a.tx,a.ty)),r=n[0].getBoundingClientRect()},s=function(t,n){o&&(_tx=n.tx+r.left,_ty=n.ty+r.top,d(_tx,_ty))},g=function(t,n){o&&f()},f=function(){n.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},d=function(t,e){n.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+e+")"})},m=function(t){var n=t;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};i()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(t,n){return{restrict:"A",link:function(t,n,e){var a=function(){n.attr("draggable","false"),o(!0)},o=function(t){t&&n.on("mousedown touchstart touchmove touchend touchcancel",r)},r=function(t){var n=t.originalEvent;return n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1,!1};a()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(t,n,e){n.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(t,n,e,a,o){return{restrict:"A",link:function(r,i,c){var l=null,u=null,s={verticalScroll:c.verticalScroll||!0,horizontalScroll:c.horizontalScroll||!0,activationDistance:c.activationDistance||75,scrollDistance:c.scrollDistance||50,scrollInterval:c.scrollInterval||250},g=function(){l=n(function(){if(u){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c=0,l=0;if(s.horizontalScroll&&(u.clientX<s.activationDistance?c=-s.scrollDistance:u.clientX>n-s.activationDistance&&(c=s.scrollDistance)),s.verticalScroll&&(u.clientY<s.activationDistance?l=-s.scrollDistance:u.clientY>r-s.activationDistance&&(l=s.scrollDistance)),0!==c||0!==l){var g=a[0].documentElement.scrollLeft,f=a[0].documentElement.scrollTop,d=i.css("transform");i.css("transform","initial"),t.scrollBy(c,l);var m=a[0].documentElement.scrollLeft-g,v=a[0].documentElement.scrollTop-f;i.css("transform",d),e(function(){u.pageX+=m,u.pageY+=v,o.$emit("draggable:_triggerHandlerMove",u)})}}},s.scrollInterval)},f=function(){n.cancel(l),l=null};r.$on("draggable:start",function(t,n){n.element[0]===i[0]&&(l||g())}),r.$on("draggable:end",function(t,n){n.element[0]===i[0]&&l&&f()}),r.$on("draggable:move",function(t,n){n.element[0]===i[0]&&(u=n.event)})}}}]);
//# sourceMappingURL=ngDraggable.min.js.map